function Zn(e){return(Zn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(e)}function bh(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function Mf(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function xh(e,n,i){return n&&Mf(e.prototype,n),i&&Mf(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function Af(e,n,i){return n in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i,e}function ki(e,n){return function(i){if(Array.isArray(i))return i}(e)||function(i,o){var l=null==i?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(null!=l){var c,h,f=[],g=!0,y=!1;try{for(l=l.call(i);!(g=(c=l.next()).done)&&(f.push(c.value),!o||f.length!==o);g=!0);}catch(x){y=!0,h=x}finally{try{g||null==l.return||l.return()}finally{if(y)throw h}}return f}}(e,n)||function(i,o){if(i){if("string"==typeof i)return Bf(i,o);var l=Object.prototype.toString.call(i).slice(8,-1);if("Object"===l&&i.constructor&&(l=i.constructor.name),"Map"===l||"Set"===l)return Array.from(i);if("Arguments"===l||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l))return Bf(i,o)}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bf(e,n){(null==n||n>e.length)&&(n=e.length);for(var i=0,o=new Array(n);i<n;i++)o[i]=e[i];return o}!function(e,n){"object"==typeof exports&&typeof module<"u"?module.exports=n():"function"==typeof define&&define.amd?define(n):(e=typeof globalThis<"u"?globalThis:e||self).cytoscape=n()}(void 0,function(){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(t)}function n(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function i(t,r){for(var a=0;a<r.length;a++){var s=r[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function o(t,r,a){return r&&i(t.prototype,r),a&&i(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function l(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function c(t,r){return function(a){if(Array.isArray(a))return a}(t)||function(a,s){var u=null==a?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(null!=u){var d,p,m=[],v=!0,b=!1;try{for(u=u.call(a);!(v=(d=u.next()).done)&&(m.push(d.value),!s||m.length!==s);v=!0);}catch(w){b=!0,p=w}finally{try{v||null==u.return||u.return()}finally{if(b)throw p}}return m}}(t,r)||function(a,s){if(a){if("string"==typeof a)return h(a,s);var u=Object.prototype.toString.call(a).slice(8,-1);if("Object"===u&&a.constructor&&(u=a.constructor.name),"Map"===u||"Set"===u)return Array.from(a);if("Arguments"===u||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(u))return h(a,s)}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,r){(null==r||r>t.length)&&(r=t.length);for(var a=0,s=new Array(r);a<r;a++)s[a]=t[a];return s}var f=typeof window>"u"?null:window,g=f?f.navigator:null,y=e(""),x=e({}),_=e(function(){}),S=typeof HTMLElement>"u"?"undefined":e(HTMLElement),A=function(t){return t&&t.instanceString&&L(t.instanceString)?t.instanceString():null},C=function(t){return null!=t&&e(t)==y},L=function(t){return null!=t&&e(t)===_},I=function(t){return!G(t)&&(Array.isArray?Array.isArray(t):null!=t&&t instanceof Array)},P=function(t){return null!=t&&e(t)===x&&!I(t)&&t.constructor===Object},B=function(t){return null!=t&&e(t)===e(1)&&!isNaN(t)},F=function(t){return"undefined"===S?void 0:null!=t&&t instanceof HTMLElement},G=function(t){return $(t)||X(t)},$=function(t){return"collection"===A(t)&&t._private.single},X=function(t){return"collection"===A(t)&&!t._private.single},H=function(t){return"core"===A(t)},te=function(t){return"stylesheet"===A(t)},re=function(t){return null==t||!(""!==t&&!t.match(/^\s+$/))},ae=function(t){return null!=(r=t)&&e(r)===x&&L(t.then);var r},le=function(t,r){r||(r=function(){if(1===arguments.length)return arguments[0];if(0===arguments.length)return"undefined";for(var s=[],u=0;u<arguments.length;u++)s.push(arguments[u]);return s.join("$")});var a=function s(){var u,p=arguments,m=r.apply(this,p),v=s.cache;return(u=v[m])||(u=v[m]=t.apply(this,p)),u};return a.cache={},a},se=le(function(t){return t.replace(/([A-Z])/g,function(r){return"-"+r.toLowerCase()})}),de=le(function(t){return t.replace(/(-\w)/g,function(r){return r[1].toUpperCase()})}),we=le(function(t,r){return t+r[0].toUpperCase()+r.substring(1)},function(t,r){return t+"$"+r}),be=function(t){return re(t)?t:t.charAt(0).toUpperCase()+t.substring(1)},fe="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",ge=function(t,r){return t<r?-1:t>r?1:0},ee=null!=Object.assign?Object.assign.bind(Object):function(t){for(var r=arguments,a=1;a<r.length;a++){var s=r[a];if(null!=s)for(var u=Object.keys(s),d=0;d<u.length;d++){var p=u[d];t[p]=s[p]}}return t},Ie={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},_e=function(t){for(var r=t.map,a=t.keys,s=a.length,u=0;u<s;u++){var d=a[u];if(P(d))throw Error("Tried to set map with object key");u<a.length-1?(null==r[d]&&(r[d]={}),r=r[d]):r[d]=t.value}},je=function(t){for(var r=t.map,a=t.keys,s=a.length,u=0;u<s;u++){var d=a[u];if(P(d))throw Error("Tried to get map with object key");if(null==(r=r[d]))return r}return r},Fe=function(t){var r=typeof t;return null!=t&&("object"==r||"function"==r)},ze=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Re="object"==typeof self&&self&&self.Object===Object&&self,Ge="object"==typeof ze&&ze&&ze.Object===Object&&ze||Re||Function("return this")(),st=function(){return Ge.Date.now()},pt=/\s/,We=/^\s+/,vt=Ge.Symbol,ot=Object.prototype,U=ot.hasOwnProperty,pe=ot.toString,Ce=vt?vt.toStringTag:void 0,Ae=Object.prototype.toString,Ue=vt?vt.toStringTag:void 0,Ct=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Ue&&Ue in Object(t)?function(t){var r=U.call(t,Ce),a=t[Ce];try{t[Ce]=void 0;var s=!0}catch{}var u=pe.call(t);return s&&(r?t[Ce]=a:delete t[Ce]),u}(t):function(t){return Ae.call(t)}(t)},bt=function(t){return"symbol"==typeof t||function(t){return null!=t&&"object"==typeof t}(t)&&"[object Symbol]"==Ct(t)},mt=/^[-+]0x[0-9a-f]+$/i,wt=/^0b[01]+$/i,St=/^0o[0-7]+$/i,jt=parseInt,ln=function(t){if("number"==typeof t)return t;if(bt(t))return NaN;if(Fe(t)){var r="function"==typeof t.valueOf?t.valueOf():t;t=Fe(r)?r+"":r}if("string"!=typeof t)return 0===t?t:+t;t=function(t){return t&&t.slice(0,function(t){for(var r=t.length;r--&&pt.test(t.charAt(r)););return r}(t)+1).replace(We,"")}(t);var a=wt.test(t);return a||St.test(t)?jt(t.slice(2),a?2:8):mt.test(t)?NaN:+t},pn=Math.max,Ut=Math.min,Ln=function(t,r,a){var s,u,d,p,m,v,b=0,w=!1,k=!1,T=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function O(j){var Q=s,K=u;return s=u=void 0,b=j,p=t.apply(K,Q)}function z(j){var Q=j-v;return void 0===v||Q>=r||Q<0||k&&j-b>=d}function V(){var Q,K,j=st();if(z(j))return M(j);m=setTimeout(V,(K=r-((Q=j)-v),k?Ut(K,d-(Q-b)):K))}function M(j){return m=void 0,T&&s?O(j):(s=u=void 0,p)}function R(){var j=st(),Q=z(j);if(s=arguments,u=this,v=j,Q){if(void 0===m)return function D(j){return b=j,m=setTimeout(V,r),w?O(j):p}(v);if(k)return clearTimeout(m),m=setTimeout(V,r),O(v)}return void 0===m&&(m=setTimeout(V,r)),p}return r=ln(r)||0,Fe(a)&&(w=!!a.leading,d=(k="maxWait"in a)?pn(ln(a.maxWait)||0,r):d,T="trailing"in a?!!a.trailing:T),R.cancel=function(){void 0!==m&&clearTimeout(m),b=0,s=v=u=m=void 0},R.flush=function(){return void 0===m?p:M(st())},R},fn=f?f.performance:null,Dr=fn&&fn.now?function(){return fn.now()}:function(){return Date.now()},Zr=function(){if(f){if(f.requestAnimationFrame)return function(t){f.requestAnimationFrame(t)};if(f.mozRequestAnimationFrame)return function(t){f.mozRequestAnimationFrame(t)};if(f.webkitRequestAnimationFrame)return function(t){f.webkitRequestAnimationFrame(t)};if(f.msRequestAnimationFrame)return function(t){f.msRequestAnimationFrame(t)}}return function(t){t&&setTimeout(function(){t(Dr())},1e3/60)}}(),Rn=function(t){return Zr(t)},Sn=Dr,Yr=function(t){for(var r,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:9261;!(r=t.next()).done;)s=65599*s+r.value|0;return s},Jn=function(t){return 65599*(arguments.length>1&&void 0!==arguments[1]?arguments[1]:9261)+t|0},Mr=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5381;return(r<<5)+r+t|0},Yn=function(t){return 2097152*t[0]+t[1]},da=function(t,r){return[Jn(t[0],r[0]),Mr(t[1],r[1])]},Ar=function(t,r){var a={value:0,done:!1},s=0,u=t.length;return Yr({next:function(){return s<u?a.value=t.charCodeAt(s++):a.done=!0,a}},r)},Hr=function(){return Qr(arguments)},Qr=function(t){for(var r,a=0;a<t.length;a++){var s=t[a];r=0===a?Ar(s):Ar(s,r)}return r},Ya=!0,Ao=null!=console.warn,Ls=null!=console.trace,Br=Number.MAX_SAFE_INTEGER||9007199254740991,fr=function(){return!0},Jr=function(){return!1},ei=function(){return 0},Ir=function(){},$t=function(t){throw new Error(t)},Bo=function(t){if(void 0===t)return Ya;Ya=!!t},nn=function(t){Bo()&&(Ao?console.warn(t):(console.log(t),Ls&&console.trace()))},ti=function(t){return null==t?t:I(t)?t.slice():P(t)?ee({},t):t},ji=function(t,r){for(r=t="";t++<36;r+=51*t&52?(15^t?8^Math.random()*(20^t?16:4):4).toString(16):"-");return r},er={},gr=function(){return er},un=function(t){var r=Object.keys(t);return function(a){for(var s={},u=0;u<r.length;u++){var d=r[u],p=a?.[d];s[d]=void 0===p?t[d]:p}return s}},Dn=function(t,r,a){for(var s=t.length-1;s>=0&&(t[s]!==r||(t.splice(s,1),!a));s--);},ha=function(t){t.splice(0,t.length)},Hn=function(t,r,a){return a&&(r=we(a,r)),t[r]},vr=function(t,r,a,s){a&&(r=we(a,r)),t[r]=s},tr=typeof Map<"u"?Map:function(){function t(){n(this,t),this._obj={}}return o(t,[{key:"set",value:function(r,a){return this._obj[r]=a,this}},{key:"delete",value:function(r){return this._obj[r]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(r){return void 0!==this._obj[r]}},{key:"get",value:function(r){return this._obj[r]}}]),t}(),Ql=function(){function t(r){if(n(this,t),this._obj=Object.create(null),this.size=0,null!=r){var a;a=null!=r.instanceString&&r.instanceString()===this.instanceString()?r.toArray():r;for(var s=0;s<a.length;s++)this.add(a[s])}}return o(t,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(r){var a=this._obj;1!==a[r]&&(a[r]=1,this.size++)}},{key:"delete",value:function(r){var a=this._obj;1===a[r]&&(a[r]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(r){return 1===this._obj[r]}},{key:"toArray",value:function(){var r=this;return Object.keys(this._obj).filter(function(a){return r.has(a)})}},{key:"forEach",value:function(r,a){return this.toArray().forEach(r,a)}}]),t}(),Ti="undefined"!==(typeof Set>"u"?"undefined":e(Set))?Set:Ql,hi=function(t,r){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(void 0!==t&&void 0!==r&&H(t)){var s=r.group;if(null==s&&(s=r.data&&null!=r.data.source&&null!=r.data.target?"edges":"nodes"),"nodes"===s||"edges"===s){this.length=1,this[0]=this;var u=this._private={cy:t,single:!0,data:r.data||{},position:r.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:s,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!r.selected,selectable:void 0===r.selectable||!!r.selectable,locked:!!r.locked,grabbed:!1,grabbable:void 0===r.grabbable||!!r.grabbable,pannable:void 0===r.pannable?"edges"===s:!!r.pannable,active:!1,classes:new Ti,animation:{current:[],queue:[]},rscratch:{},scratch:r.scratch||{},edges:[],children:[],parent:r.parent&&r.parent.isNode()?r.parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(null==u.position.x&&(u.position.x=0),null==u.position.y&&(u.position.y=0),r.renderedPosition){var d=r.renderedPosition,p=t.pan(),m=t.zoom();u.position={x:(d.x-p.x)/m,y:(d.y-p.y)/m}}var v=[];I(r.classes)?v=r.classes:C(r.classes)&&(v=r.classes.split(/\s+/));for(var b=0,w=v.length;b<w;b++){var k=v[b];k&&""!==k&&u.classes.add(k)}this.createEmitter();var T=r.style||r.css;T&&(nn("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(T)),(void 0===a||a)&&this.restore()}else $t("An element must be of type `nodes` or `edges`; you specified `"+s+"`")}else $t("An element must have a core reference and parameters set")},Os=function(t){return t={bfs:t.bfs||!t.dfs,dfs:t.dfs||!t.bfs},function(r,a,s){var u;P(r)&&!G(r)&&(r=(u=r).roots||u.root,a=u.visit,s=u.directed),s=2!==arguments.length||L(a)?s:a,a=L(a)?a:function(){};for(var d,p=this._private.cy,m=r=C(r)?this.filter(r):r,v=[],b=[],w={},k={},T={},O=0,D=this.byGroup(),z=D.nodes,V=D.edges,M=0;M<m.length;M++){var R=m[M],j=R.id();R.isNode()&&(v.unshift(R),t.bfs&&(T[j]=!0,b.push(R)),k[j]=0)}for(var Q=function(){var oe=t.bfs?v.shift():v.pop(),ce=oe.id();if(t.dfs){if(T[ce])return"continue";T[ce]=!0,b.push(oe)}var ue,he=k[ce],ke=w[ce],xe=null!=ke?ke.source():null,me=null!=ke?ke.target():null,ye=null==ke?void 0:oe.same(xe)?me[0]:xe[0];if(!0===(ue=a(oe,ke,ye,O++,he)))return d=oe,"break";if(!1===ue)return"break";for(var Le=oe.connectedEdges().filter(function(Ye){return(!s||Ye.source().same(oe))&&V.has(Ye)}),De=0;De<Le.length;De++){var Ve=Le[De],Te=Ve.connectedNodes().filter(function(Ye){return!Ye.same(oe)&&z.has(Ye)}),He=Te.id();0===Te.length||T[He]||(v.push(Te=Te[0]),t.bfs&&(T[He]=!0,b.push(Te)),w[He]=Ve,k[He]=k[ce]+1)}};0!==v.length;){var K=Q();if("continue"!==K&&"break"===K)break}for(var Y=p.collection(),W=0;W<b.length;W++){var ne=b[W],ie=w[ne.id()];null!=ie&&Y.push(ie),Y.push(ne)}return{path:p.collection(Y),found:p.collection(d)}}},qi={breadthFirstSearch:Os({bfs:!0}),depthFirstSearch:Os({dfs:!0})};qi.bfs=qi.breadthFirstSearch,qi.dfs=qi.depthFirstSearch;var t,r,Xi=(t=r={exports:{}},function(){var a,s,u,d,p,m,v,b,w,k,T,O,D,z,V;u=Math.floor,k=Math.min,s=function(M,R){return M<R?-1:M>R?1:0},w=function(M,R,j,Q,K){var Y;if(null==j&&(j=0),null==K&&(K=s),j<0)throw new Error("lo must be non-negative");for(null==Q&&(Q=M.length);j<Q;)K(R,M[Y=u((j+Q)/2)])<0?Q=Y:j=Y+1;return[].splice.apply(M,[j,j-j].concat(R)),R},m=function(M,R,j){return null==j&&(j=s),M.push(R),z(M,0,M.length-1,j)},p=function(M,R){var j,Q;return null==R&&(R=s),j=M.pop(),M.length?(Q=M[0],M[0]=j,V(M,0,R)):Q=j,Q},b=function(M,R,j){var Q;return null==j&&(j=s),Q=M[0],M[0]=R,V(M,0,j),Q},v=function(M,R,j){var Q;return null==j&&(j=s),M.length&&j(M[0],R)<0&&(R=(Q=[M[0],R])[0],M[0]=Q[1],V(M,0,j)),R},d=function(M,R){var Q,K,Y,W,ne;for(null==R&&(R=s),W=[],Q=0,K=(Y=function(){ne=[];for(var ie=0,oe=u(M.length/2);0<=oe?ie<oe:ie>oe;0<=oe?ie++:ie--)ne.push(ie);return ne}.apply(this).reverse()).length;Q<K;Q++)W.push(V(M,Y[Q],R));return W},D=function(M,R,j){var Q;if(null==j&&(j=s),-1!==(Q=M.indexOf(R)))return z(M,0,Q,j),V(M,Q,j)},T=function(M,R,j){var K,Y,W,ne;if(null==j&&(j=s),!(K=M.slice(0,R)).length)return K;for(d(K,j),Y=0,W=(ne=M.slice(R)).length;Y<W;Y++)v(K,ne[Y],j);return K.sort(j).reverse()},O=function(M,R,j){var Q,K,Y,W,ne,ie,oe,ce,ue;if(null==j&&(j=s),10*R<=M.length){if(!(Y=M.slice(0,R).sort(j)).length)return Y;for(K=Y[Y.length-1],W=0,ie=(oe=M.slice(R)).length;W<ie;W++)j(Q=oe[W],K)<0&&(w(Y,Q,0,null,j),Y.pop(),K=Y[Y.length-1]);return Y}for(d(M,j),ue=[],ne=0,ce=k(R,M.length);0<=ce?ne<ce:ne>ce;0<=ce?++ne:--ne)ue.push(p(M,j));return ue},z=function(M,R,j,Q){var K,Y,W;for(null==Q&&(Q=s),K=M[j];j>R&&Q(K,Y=M[W=j-1>>1])<0;)M[j]=Y,j=W;return M[j]=K},V=function(M,R,j){var Q,K,Y,W,ne;for(null==j&&(j=s),K=M.length,ne=R,Y=M[R],Q=2*R+1;Q<K;)(W=Q+1)<K&&!(j(M[Q],M[W])<0)&&(Q=W),M[R]=M[Q],Q=2*(R=Q)+1;return M[R]=Y,z(M,ne,R,j)},a=function(){function M(R){this.cmp=R??s,this.nodes=[]}return M.push=m,M.pop=p,M.replace=b,M.pushpop=v,M.heapify=d,M.updateItem=D,M.nlargest=T,M.nsmallest=O,M.prototype.push=function(R){return m(this.nodes,R,this.cmp)},M.prototype.pop=function(){return p(this.nodes,this.cmp)},M.prototype.peek=function(){return this.nodes[0]},M.prototype.contains=function(R){return-1!==this.nodes.indexOf(R)},M.prototype.replace=function(R){return b(this.nodes,R,this.cmp)},M.prototype.pushpop=function(R){return v(this.nodes,R,this.cmp)},M.prototype.heapify=function(){return d(this.nodes,this.cmp)},M.prototype.updateItem=function(R){return D(this.nodes,R,this.cmp)},M.prototype.clear=function(){return this.nodes=[]},M.prototype.empty=function(){return 0===this.nodes.length},M.prototype.size=function(){return this.nodes.length},M.prototype.clone=function(){var R;return(R=new M).nodes=this.nodes.slice(0),R},M.prototype.toArray=function(){return this.nodes.slice(0)},M.prototype.insert=M.prototype.push,M.prototype.top=M.prototype.peek,M.prototype.front=M.prototype.peek,M.prototype.has=M.prototype.contains,M.prototype.copy=M.prototype.clone,M}(),t.exports=a}.call(ze),r.exports),Jl=un({root:null,weight:function(t){return 1},directed:!1}),eu={dijkstra:function(t){if(!P(t)){var r=arguments;t={root:r[0],weight:r[1],directed:r[2]}}var ke,xe,a=Jl(t),s=a.root,d=a.directed,p=this,m=a.weight,v=C(s)?this.filter(s)[0]:s[0],b={},w={},k={},T=this.byGroup(),O=T.nodes,D=T.edges;D.unmergeBy(function(ke){return ke.isLoop()});for(var z=function(ke){return b[ke.id()]},M=new Xi(function(ke,xe){return z(ke)-z(xe)}),R=0;R<O.length;R++){var j=O[R];b[j.id()]=j.same(v)?0:1/0,M.push(j)}for(var Q=function(ke,xe){for(var me,ye=(d?ke.edgesTo(xe):ke.edgesWith(xe)).intersect(D),Le=1/0,De=0;De<ye.length;De++){var Ve=ye[De],Te=m(Ve);(Te<Le||!me)&&(Le=Te,me=Ve)}return{edge:me,dist:Le}};M.size()>0;){var K=M.pop(),Y=z(K),W=K.id();if(k[W]=Y,Y!==1/0)for(var ne=K.neighborhood().intersect(O),ie=0;ie<ne.length;ie++){var oe=ne[ie],ce=oe.id(),ue=Q(K,oe),he=Y+ue.dist;he<z(oe)&&(xe=he,b[(ke=oe).id()]=xe,M.updateItem(ke),w[ce]={node:K,edge:ue.edge})}}return{distanceTo:function(ke){var xe=C(ke)?O.filter(ke)[0]:ke[0];return k[xe.id()]},pathTo:function(ke){var xe=C(ke)?O.filter(ke)[0]:ke[0],me=[],ye=xe,Le=ye.id();if(xe.length>0)for(me.unshift(xe);w[Le];){var De=w[Le];me.unshift(De.edge),me.unshift(De.node),Le=(ye=De.node).id()}return p.spawn(me)}}}},tu={kruskal:function(t){t=t||function(R){return 1};for(var r=this.byGroup(),a=r.nodes,s=r.edges,u=a.length,d=new Array(u),p=a,m=function(R){for(var j=0;j<d.length;j++)if(d[j].has(R))return j},v=0;v<u;v++)d[v]=this.spawn(a[v]);for(var b=s.sort(function(R,j){return t(R)-t(j)}),w=0;w<b.length;w++){var k=b[w],T=k.source()[0],O=k.target()[0],D=m(T),z=m(O),V=d[D],M=d[z];D!==z&&(p.merge(k),V.merge(M),d.splice(z,1))}return p}},nu=un({root:null,goal:null,weight:function(t){return 1},heuristic:function(t){return 0},directed:!1}),ru={aStar:function(t){var r=this.cy(),a=nu(t),s=a.root,u=a.goal,d=a.heuristic,p=a.directed,m=a.weight;s=r.collection(s)[0],u=r.collection(u)[0];var v,b,w=s.id(),k=u.id(),T={},O={},D={},z=new Xi(function(Le,De){return O[Le.id()]-O[De.id()]}),V=new Ti,M={},R={},j=function(Le,De){z.push(Le),V.add(De)};j(s,w),T[w]=0,O[w]=d(s);for(var K=0;z.size()>0;){if(b=(v=z.pop()).id(),V.delete(b),K++,b===k){for(var Y=[],W=u,ne=k,ie=R[ne];Y.unshift(W),null!=ie&&Y.unshift(ie),null!=(W=M[ne]);)ie=R[ne=W.id()];return{found:!0,distance:T[b],path:this.spawn(Y),steps:K}}D[b]=!0;for(var oe=v._private.edges,ce=0;ce<oe.length;ce++){var ue=oe[ce];if(this.hasElementWithId(ue.id())&&(!p||ue.data("source")===b)){var he=ue.source(),ke=ue.target(),xe=he.id()!==b?he:ke,me=xe.id();if(this.hasElementWithId(me)&&!D[me]){var ye=T[b]+m(ue);V.has(me)?ye<T[me]&&(T[me]=ye,O[me]=ye+d(xe),M[me]=v,R[me]=ue):(T[me]=ye,O[me]=ye+d(xe),j(xe,me),M[me]=v,R[me]=ue)}}}}return{found:!1,distance:void 0,path:void 0,steps:K}}},iu=un({weight:function(t){return 1},directed:!1}),au={floydWarshall:function(t){for(var r=this.cy(),a=iu(t),u=a.directed,d=a.weight,p=this.byGroup(),m=p.nodes,v=p.edges,b=m.length,w=b*b,k=function(De){return m.indexOf(De)},T=function(De){return m[De]},O=new Array(w),D=0;D<w;D++){var z=D%b;O[D]=(D-z)/b===z?0:1/0}for(var M=new Array(w),R=new Array(w),j=0;j<v.length;j++){var Q=v[j],K=Q.source()[0],Y=Q.target()[0];if(K!==Y){var W=k(K),ne=k(Y),ie=W*b+ne,oe=d(Q);if(O[ie]>oe&&(O[ie]=oe,M[ie]=ne,R[ie]=Q),!u){var ce=ne*b+W;!u&&O[ce]>oe&&(O[ce]=oe,M[ce]=W,R[ce]=Q)}}}for(var ue=0;ue<b;ue++)for(var he=0;he<b;he++)for(var ke=he*b+ue,xe=0;xe<b;xe++){var me=he*b+xe,ye=ue*b+xe;O[ke]+O[ye]<O[me]&&(O[me]=O[ke]+O[ye],M[me]=M[ke])}var Le=function(De){return k((C(Ve=De)?r.filter(Ve):Ve)[0]);var Ve};return{distance:function(De,Ve){var Te=Le(De),He=Le(Ve);return O[Te*b+He]},path:function(De,Ve){var Te=Le(De),He=Le(Ve),Ye=T(Te);if(Te===He)return Ye.collection();if(null==M[Te*b+He])return r.collection();var it=r.collection();for(it.merge(Ye);Te!==He;)it.merge(R[Te*b+(Te=M[Te*b+He])]),it.merge(T(Te));return it}}}},ou=un({weight:function(t){return 1},directed:!1,root:null}),su={bellmanFord:function(t){var r=this,a=ou(t),u=a.directed,d=a.root,p=a.weight,m=this,v=this.cy(),b=this.byGroup(),w=b.edges,k=b.nodes,T=k.length,O=new tr,D=!1,z=[];d=v.collection(d)[0],w.unmergeBy(function(ht){return ht.isLoop()});for(var V=w.length,M=function(ht){var Z=O.get(ht.id());return Z||(Z={},O.set(ht.id(),Z)),Z},R=function(ht){return(C(ht)?v.$(ht):ht)[0]},j=0;j<T;j++){var Q=k[j],K=M(Q);K.dist=Q.same(d)?0:1/0,K.pred=null,K.edge=null}for(var Y=!1,W=function(ht,Z,ve,Me,Ne,Be){var et=Me.dist+Be;et<Ne.dist&&!ve.same(Me.edge)&&(Ne.dist=et,Ne.pred=ht,Ne.edge=ve,Y=!0)},ne=1;ne<T;ne++){Y=!1;for(var ie=0;ie<V;ie++){var oe=w[ie],ce=oe.source(),ue=oe.target(),he=p(oe),ke=M(ce),xe=M(ue);W(ce,0,oe,ke,xe,he),u||W(ue,0,oe,xe,ke,he)}if(!Y)break}if(Y)for(var me=[],ye=0;ye<V;ye++){var Le=w[ye],De=Le.source(),Ve=Le.target(),Te=p(Le),He=M(De).dist,Ye=M(Ve).dist;if(He+Te<Ye||!u&&Ye+Te<He){if(D||(nn("Graph contains a negative weight cycle for Bellman-Ford"),D=!0),!1===t.findNegativeWeightCycles)break;var qe=[];He+Te<Ye&&qe.push(De),!u&&Ye+Te<He&&qe.push(Ve);for(var it=qe.length,at=0;at<it;at++){var nt=qe[at],dt=[nt];dt.push(M(nt).edge);for(var yt=M(nt).pred;-1===dt.indexOf(yt);)dt.push(yt),dt.push(M(yt).edge),yt=M(yt).pred;for(var Dt=(dt=dt.slice(dt.indexOf(yt)))[0].id(),$e=0,xt=2;xt<dt.length;xt+=2)dt[xt].id()<Dt&&(Dt=dt[xt].id(),$e=xt);(dt=dt.slice($e).concat(dt.slice(0,$e))).push(dt[0]);var Tt=dt.map(function(ht){return ht.id()}).join(",");-1===me.indexOf(Tt)&&(z.push(m.spawn(dt)),me.push(Tt))}}}return{distanceTo:function(ht){return M(R(ht)).dist},pathTo:function(ht){for(var Z=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d,Me=[],Ne=R(ht);;){if(null==Ne)return r.spawn();var Be=M(Ne),et=Be.edge,Qe=Be.pred;if(Me.unshift(Ne[0]),Ne.same(Z)&&Me.length>0)break;null!=et&&Me.unshift(et),Ne=Qe}return m.spawn(Me)},hasNegativeWeightCycle:D,negativeWeightCycles:z}}},lu=Math.sqrt(2),ni=function(t,r,a){0===a.length&&$t("Karger-Stein must be run on a connected (sub)graph");for(var s=a[t],p=r[s[1]],m=r[s[2]],v=a,b=v.length-1;b>=0;b--){var w=v[b],k=w[1],T=w[2];(r[k]===p&&r[T]===m||r[k]===m&&r[T]===p)&&v.splice(b,1)}for(var O=0;O<v.length;O++){var D=v[O];D[1]===m?(v[O]=D.slice(),v[O][1]=p):D[2]===m&&(v[O]=D.slice(),v[O][2]=p)}for(var z=0;z<r.length;z++)r[z]===m&&(r[z]=p);return v},nr=function(t,r,a,s){for(;a>s;){var u=Math.floor(Math.random()*r.length);r=ni(u,t,r),a--}return r},Yi={kargerStein:function(){var t=this,r=this.byGroup(),a=r.nodes,s=r.edges;s.unmergeBy(function(me){return me.isLoop()});var u=a.length,d=s.length,p=Math.ceil(Math.pow(Math.log(u)/Math.LN2,2)),m=Math.floor(u/lu);if(!(u<2)){for(var v=[],b=0;b<d;b++){var w=s[b];v.push([b,a.indexOf(w.source()),a.indexOf(w.target())])}for(var k=1/0,T=[],O=new Array(u),D=new Array(u),z=new Array(u),V=function(me,ye){for(var Le=0;Le<u;Le++)ye[Le]=me[Le]},M=0;M<=p;M++){for(var R=0;R<u;R++)D[R]=R;var j=nr(D,v.slice(),u,m),Q=j.slice();V(D,z);var K=nr(D,j,m,2),Y=nr(z,Q,m,2);K.length<=Y.length&&K.length<k?(k=K.length,T=K,V(D,O)):Y.length<=K.length&&Y.length<k&&(k=Y.length,T=Y,V(z,O))}for(var W=this.spawn(T.map(function(me){return s[me[0]]})),ne=this.spawn(),ie=this.spawn(),oe=O[0],ce=0;ce<O.length;ce++){var he=a[ce];O[ce]===oe?ne.merge(he):ie.merge(he)}var ke=function(me){var ye=t.spawn();return me.forEach(function(Le){ye.merge(Le),Le.connectedEdges().forEach(function(De){t.contains(De)&&!W.contains(De)&&ye.merge(De)})}),ye},xe=[ke(ne),ke(ie)];return{cut:W,components:xe,partition1:ne,partition2:ie}}$t("At least 2 nodes are required for Karger-Stein algorithm")}},rr=function(t,r,a){return{x:t.x*r+a.x,y:t.y*r+a.y}},Lo=function(t,r,a){return{x:(t.x-a.x)/r,y:(t.y-a.y)/r}},Pi=function(t){return{x:t[0],y:t[1]}},Lr=function(t,r){return Math.atan2(r,t)-Math.PI/2},pi=Math.log2||function(t){return Math.log(t)/Math.log(2)},Ha=function(t){return t>0?1:t<0?-1:0},Rr=function(t,r){return Math.sqrt(fi(t,r))},fi=function(t,r){var a=r.x-t.x,s=r.y-t.y;return a*a+s*s},uu=function(t){for(var r=t.length,a=0,s=0;s<r;s++)a+=t[s];for(var u=0;u<r;u++)t[u]=t[u]/a;return t},Tn=function(t,r,a,s){return(1-s)*(1-s)*t+2*(1-s)*s*r+s*s*a},Di=function(t,r,a,s){return{x:Tn(t.x,r.x,a.x,s),y:Tn(t.y,r.y,a.y,s)}},pa=function(t,r,a){return Math.max(t,Math.min(a,r))},Mn=function(t){if(null==t)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(null!=t.x1&&null!=t.y1){if(null!=t.x2&&null!=t.y2&&t.x2>=t.x1&&t.y2>=t.y1)return{x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,w:t.x2-t.x1,h:t.y2-t.y1};if(null!=t.w&&null!=t.h&&t.w>=0&&t.h>=0)return{x1:t.x1,y1:t.y1,x2:t.x1+t.w,y2:t.y1+t.h,w:t.w,h:t.h}}},cu=function(t,r){t.x1=Math.min(t.x1,r.x1),t.x2=Math.max(t.x2,r.x2),t.w=t.x2-t.x1,t.y1=Math.min(t.y1,r.y1),t.y2=Math.max(t.y2,r.y2),t.h=t.y2-t.y1},Mi=function(t,r,a){t.x1=Math.min(t.x1,r),t.x2=Math.max(t.x2,r),t.w=t.x2-t.x1,t.y1=Math.min(t.y1,a),t.y2=Math.max(t.y2,a),t.h=t.y2-t.y1},Hi=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.x1-=r,t.x2+=r,t.y1-=r,t.y2+=r,t.w=t.x2-t.x1,t.h=t.y2-t.y1,t},Wa=function(t){var r,a,s,u,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0];if(1===d.length)r=a=s=u=d[0];else if(2===d.length)r=s=d[0],u=a=d[1];else if(4===d.length){var p=c(d,4);r=p[0],a=p[1],s=p[2],u=p[3]}return t.x1-=u,t.x2+=a,t.y1-=r,t.y2+=s,t.w=t.x2-t.x1,t.h=t.y2-t.y1,t},fa=function(t,r){t.x1=r.x1,t.y1=r.y1,t.x2=r.x2,t.y2=r.y2,t.w=t.x2-t.x1,t.h=t.y2-t.y1},$a=function(t,r){return!(t.x1>r.x2||r.x1>t.x2||t.x2<r.x1||r.x2<t.x1||t.y2<r.y1||r.y2<t.y1||t.y1>r.y2||r.y1>t.y2)},ri=function(t,r,a){return t.x1<=r&&r<=t.x2&&t.y1<=a&&a<=t.y2},Ns=function(t,r){return ri(t,r.x1,r.y1)&&ri(t,r.x2,r.y2)},zs=function(t,r,a,s,u,d,p){var m,v=ba(u,d),b=u/2,w=d/2,k=s-w-p;if((m=ai(t,r,a,s,a-b+v-p,k,a+b-v+p,k,!1)).length>0)return m;var T=a+b+p;if((m=ai(t,r,a,s,T,s-w+v-p,T,s+w-v+p,!1)).length>0)return m;var O=s+w+p;if((m=ai(t,r,a,s,a-b+v-p,O,a+b-v+p,O,!1)).length>0)return m;var D,z=a-b-p;if((m=ai(t,r,a,s,z,s-w+v-p,z,s+w-v+p,!1)).length>0)return m;var V=a-b+v,M=s-w+v;if((D=Ka(t,r,a,s,V,M,v+p)).length>0&&D[0]<=V&&D[1]<=M)return[D[0],D[1]];var R=a+b-v,j=s-w+v;if((D=Ka(t,r,a,s,R,j,v+p)).length>0&&D[0]>=R&&D[1]<=j)return[D[0],D[1]];var Q=a+b-v,K=s+w-v;if((D=Ka(t,r,a,s,Q,K,v+p)).length>0&&D[0]>=Q&&D[1]>=K)return[D[0],D[1]];var Y=a-b+v,W=s+w-v;return(D=Ka(t,r,a,s,Y,W,v+p)).length>0&&D[0]<=Y&&D[1]>=W?[D[0],D[1]]:[]},du=function(t,r,a,s,u,d,p){var m=p,v=Math.min(a,u),b=Math.max(a,u),w=Math.min(s,d),k=Math.max(s,d);return v-m<=t&&t<=b+m&&w-m<=r&&r<=k+m},ga=function(t,r,a,s,u,d,p,m,v){var b=Math.min(a,p,u)-v,w=Math.max(a,p,u)+v,k=Math.min(s,m,d)-v,T=Math.max(s,m,d)+v;return!(t<b||t>w||r<k||r>T)},od=function(t,r,a,s,u,d,p,m){var V,M,R,j,Q,K,Y,W,ne,ie,oe,ce,ue,v=[];M=9*a*u-3*a*a-3*a*p-6*u*u+3*u*p+9*s*d-3*s*s-3*s*m-6*d*d+3*d*m,R=3*a*a-6*a*u+a*p-a*t+2*u*u+2*u*t-p*t+3*s*s-6*s*d+s*m-s*r+2*d*d+2*d*r-m*r,j=1*a*u-a*a+a*t-u*t+s*d-s*s+s*r-d*r,0==(V=1*a*a-4*a*u+2*a*p+4*u*u-4*u*p+p*p+s*s-4*s*d+2*s*m+4*d*d-4*d*m+m*m)&&(V=1e-5),W=-27*(j/=V)+(M/=V)*(9*(R/=V)-M*M*2),K=(Y=(3*R-M*M)/9)*Y*Y+(W/=54)*W,(Q=v)[1]=0,ce=M/3,K>0?(ie=(ie=W+Math.sqrt(K))<0?-Math.pow(-ie,1/3):Math.pow(ie,1/3),oe=(oe=W-Math.sqrt(K))<0?-Math.pow(-oe,1/3):Math.pow(oe,1/3),Q[0]=-ce+ie+oe,Q[4]=Q[2]=-(ce+=(ie+oe)/2),ce=Math.sqrt(3)*(-oe+ie)/2,Q[3]=ce,Q[5]=-ce):(Q[5]=Q[3]=0,0===K?(ue=W<0?-Math.pow(-W,1/3):Math.pow(W,1/3),Q[0]=2*ue-ce,Q[4]=Q[2]=-(ue+ce)):(ne=(Y=-Y)*Y*Y,ne=Math.acos(W/Math.sqrt(ne)),ue=2*Math.sqrt(Y),Q[0]=-ce+ue*Math.cos(ne/3),Q[2]=-ce+ue*Math.cos((ne+2*Math.PI)/3),Q[4]=-ce+ue*Math.cos((ne+4*Math.PI)/3)));for(var b=[],w=0;w<6;w+=2)Math.abs(v[w+1])<1e-7&&v[w]>=0&&v[w]<=1&&b.push(v[w]);b.push(1),b.push(0);for(var k,T,O,D=-1,z=0;z<b.length;z++)k=Math.pow(1-b[z],2)*a+2*(1-b[z])*b[z]*u+b[z]*b[z]*p,T=Math.pow(1-b[z],2)*s+2*(1-b[z])*b[z]*d+b[z]*b[z]*m,O=Math.pow(k-t,2)+Math.pow(T-r,2),D>=0?O<D&&(D=O):D=O;return D},hu=function(t,r,a,s,u,d){var p=[t-a,r-s],m=[u-a,d-s],v=m[0]*m[0]+m[1]*m[1],b=p[0]*p[0]+p[1]*p[1],w=p[0]*m[0]+p[1]*m[1],k=w*w/v;return w<0?b:k>v?(t-u)*(t-u)+(r-d)*(r-d):b-k},Wn=function(t,r,a){for(var s,u,d,p,m=0,v=0;v<a.length/2;v++)if(u=a[2*v+1],v+1<a.length/2?(d=a[2*(v+1)],p=a[2*(v+1)+1]):(d=a[2*(v+1-a.length/2)],p=a[2*(v+1-a.length/2)+1]),(s=a[2*v])!=t||d!=t){if(!(s>=t&&t>=d||s<=t&&t<=d))continue;(t-s)/(d-s)*(p-u)+u>r&&m++}return m%2!=0},Fr=function(t,r,a,s,u,d,p,m,v){var b,w=new Array(a.length);null!=m[0]?(b=Math.atan(m[1]/m[0]),m[0]<0?b+=Math.PI/2:b=-b-Math.PI/2):b=m;for(var k,T=Math.cos(-b),O=Math.sin(-b),D=0;D<w.length/2;D++)w[2*D]=d/2*(a[2*D]*T-a[2*D+1]*O),w[2*D+1]=p/2*(a[2*D+1]*T+a[2*D]*O),w[2*D]+=s,w[2*D+1]+=u;if(v>0){var z=Oo(w,-v);k=va(z)}else k=w;return Wn(t,r,k)},va=function(t){for(var d,p,m,v,b=new Array(t.length/2),w=0;w<t.length/4;w++){w<t.length/4-1?(d=t[4*(w+1)],p=t[4*(w+1)+1],m=t[4*(w+1)+2],v=t[4*(w+1)+3]):(d=t[0],p=t[1],m=t[2],v=t[3]);var k=ai(t[4*w],t[4*w+1],t[4*w+2],t[4*w+3],d,p,m,v,!0);b[2*w]=k[0],b[2*w+1]=k[1]}return b},Oo=function(t,r){for(var a,s,u,d,p=new Array(2*t.length),m=0;m<t.length/2;m++){m<t.length/2-1?(u=t[2*(m+1)],d=t[2*(m+1)+1]):(u=t[0],d=t[1]);var v=d-(s=t[2*m+1]),b=-(u-(a=t[2*m])),w=Math.sqrt(v*v+b*b),k=v/w,T=b/w;p[4*m]=a+k*r,p[4*m+1]=s+T*r,p[4*m+2]=u+k*r,p[4*m+3]=d+T*r}return p},ii=function(t,r,a,s,u,d,p){return t-=u,r-=d,(t/=a/2+p)*t+(r/=s/2+p)*r<=1},Ka=function(t,r,a,s,u,d,p){var m=[a-t,s-r],v=[t-u,r-d],b=m[0]*m[0]+m[1]*m[1],w=2*(v[0]*m[0]+v[1]*m[1]),k=w*w-4*b*(v[0]*v[0]+v[1]*v[1]-p*p);if(k<0)return[];var T=(-w+Math.sqrt(k))/(2*b),O=(-w-Math.sqrt(k))/(2*b),D=Math.min(T,O),z=Math.max(T,O),V=[];if(D>=0&&D<=1&&V.push(D),z>=0&&z<=1&&V.push(z),0===V.length)return[];var M=V[0]*m[0]+t,R=V[0]*m[1]+r;return V.length>1?V[0]==V[1]?[M,R]:[M,R,V[1]*m[0]+t,V[1]*m[1]+r]:[M,R]},No=function(t,r,a){return r<=t&&t<=a||a<=t&&t<=r?t:t<=r&&r<=a||a<=r&&r<=t?r:a},ai=function(t,r,a,s,u,d,p,m,v){var b=t-u,w=a-t,k=p-u,T=r-d,O=s-r,D=m-d,z=k*T-D*b,V=w*T-O*b,M=D*w-k*O;if(0!==M){var R=z/M,j=V/M;return-.001<=R&&R<=1.001&&-.001<=j&&j<=1.001||v?[t+R*w,r+R*O]:[]}return 0===z||0===V?No(t,a,p)===p?[p,m]:No(t,a,u)===u?[u,d]:No(u,p,a)===a?[a,s]:[]:[]},Wi=function(t,r,a,s,u,d,p,m){var v,b,T,O,D=[],z=new Array(a.length),V=!0;if(null==d&&(V=!1),V){for(var M=0;M<z.length/2;M++)z[2*M]=a[2*M]*d+s,z[2*M+1]=a[2*M+1]*p+u;if(m>0){var R=Oo(z,-m);b=va(R)}else b=z}else b=a;for(var j=0;j<b.length/2;j++)j<b.length/2-1?(T=b[2*(j+1)],O=b[2*(j+1)+1]):(T=b[0],O=b[1]),0!==(v=ai(t,r,s,u,b[2*j],b[2*j+1],T,O)).length&&D.push(v[0],v[1]);return D},ma=function(t,r,a){var s=[t[0]-r[0],t[1]-r[1]],u=Math.sqrt(s[0]*s[0]+s[1]*s[1]),d=(u-a)/u;return d<0&&(d=1e-5),[r[0]+d*s[0],r[1]+d*s[1]]},$n=function(t,r){var a=Ga(t,r);return ya(a)},ya=function(t){for(var r,a,s=t.length/2,u=1/0,d=1/0,p=-1/0,m=-1/0,v=0;v<s;v++)r=t[2*v],a=t[2*v+1],u=Math.min(u,r),p=Math.max(p,r),d=Math.min(d,a),m=Math.max(m,a);for(var b=2/(p-u),w=2/(m-d),k=0;k<s;k++)r=t[2*k]=t[2*k]*b,a=t[2*k+1]=t[2*k+1]*w,u=Math.min(u,r),p=Math.max(p,r),d=Math.min(d,a),m=Math.max(m,a);if(d<-1)for(var T=0;T<s;T++)a=t[2*T+1]=t[2*T+1]+(-1-d);return t},Ga=function(t,r){var a=1/t*2*Math.PI,s=t%2==0?Math.PI/2+a/2:Math.PI/2;s+=r;for(var u,d=new Array(2*t),p=0;p<t;p++)u=p*a+s,d[2*p]=Math.cos(u),d[2*p+1]=Math.sin(-u);return d},ba=function(t,r){return Math.min(t/4,r/4,8)},zo=function(t,r){return Math.min(t/10,r/10,8)},Ai=function(t,r){return{heightOffset:Math.min(15,.05*r),widthOffset:Math.min(100,.25*t),ctrlPtOffsetPct:.05}},sd=un({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(t){return 1}}),pu={pageRank:function(t){for(var r=sd(t),a=r.dampingFactor,s=r.precision,u=r.iterations,d=r.weight,p=this._private.cy,m=this.byGroup(),v=m.nodes,b=m.edges,w=v.length,T=b.length,O=new Array(w*w),D=new Array(w),z=(1-a)/w,V=0;V<w;V++){for(var M=0;M<w;M++)O[V*w+M]=0;D[V]=0}for(var R=0;R<T;R++){var j=b[R],Q=j.data("source"),K=j.data("target");if(Q!==K){var Y=v.indexOfId(Q),W=v.indexOfId(K),ne=d(j);O[W*w+Y]+=ne,D[Y]+=ne}}for(var ie=1/w+z,oe=0;oe<w;oe++)if(0===D[oe])for(var ce=0;ce<w;ce++)O[ce*w+oe]=ie;else for(var ue=0;ue<w;ue++){var he=ue*w+oe;O[he]=O[he]/D[oe]+z}for(var ke,xe=new Array(w),me=new Array(w),ye=0;ye<w;ye++)xe[ye]=1;for(var Le=0;Le<u;Le++){for(var De=0;De<w;De++)me[De]=0;for(var Ve=0;Ve<w;Ve++)for(var Te=0;Te<w;Te++)me[Ve]+=O[Ve*w+Te]*xe[Te];uu(me),ke=xe,xe=me,me=ke;for(var Ye=0,qe=0;qe<w;qe++){var it=ke[qe]-xe[qe];Ye+=it*it}if(Ye<s)break}return{rank:function(at){return at=p.collection(at)[0],xe[v.indexOf(at)]}}}},Is=un({root:null,weight:function(t){return 1},directed:!1,alpha:0}),$i={degreeCentralityNormalized:function(t){t=Is(t);var r=this.cy(),a=this.nodes(),s=a.length;if(t.directed){for(var u={},d={},p=0,m=0,v=0;v<s;v++){var b=a[v],w=b.id();t.root=b;var k=this.degreeCentrality(t);p<k.indegree&&(p=k.indegree),m<k.outdegree&&(m=k.outdegree),u[w]=k.indegree,d[w]=k.outdegree}return{indegree:function(M){return 0==p?0:(C(M)&&(M=r.filter(M)),u[M.id()]/p)},outdegree:function(M){return 0===m?0:(C(M)&&(M=r.filter(M)),d[M.id()]/m)}}}for(var T={},O=0,D=0;D<s;D++){var z=a[D];t.root=z;var V=this.degreeCentrality(t);O<V.degree&&(O=V.degree),T[z.id()]=V.degree}return{degree:function(M){return 0===O?0:(C(M)&&(M=r.filter(M)),T[M.id()]/O)}}},degreeCentrality:function(t){t=Is(t);var r=this.cy(),a=this,u=t.root,d=t.weight,p=t.directed,m=t.alpha;if(u=r.collection(u)[0],p){for(var v=u.connectedEdges(),b=v.filter(function(K){return K.target().same(u)&&a.has(K)}),w=v.filter(function(K){return K.source().same(u)&&a.has(K)}),k=b.length,T=w.length,O=0,D=0,z=0;z<b.length;z++)O+=d(b[z]);for(var V=0;V<w.length;V++)D+=d(w[V]);return{indegree:Math.pow(k,1-m)*Math.pow(O,m),outdegree:Math.pow(T,1-m)*Math.pow(D,m)}}for(var M=u.connectedEdges().intersection(a),R=M.length,j=0,Q=0;Q<M.length;Q++)j+=d(M[Q]);return{degree:Math.pow(R,1-m)*Math.pow(j,m)}}};$i.dc=$i.degreeCentrality,$i.dcn=$i.degreeCentralityNormalised=$i.degreeCentralityNormalized;var Rs=un({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),Ki={closenessCentralityNormalized:function(t){for(var r=Rs(t),a=r.harmonic,s=r.weight,u=r.directed,d=this.cy(),p={},m=0,v=this.nodes(),b=this.floydWarshall({weight:s,directed:u}),w=0;w<v.length;w++){for(var k=0,T=v[w],O=0;O<v.length;O++)if(w!==O){var D=b.distance(T,v[O]);k+=a?1/D:D}a||(k=1/k),m<k&&(m=k),p[T.id()]=k}return{closeness:function(z){return 0==m?0:(z=C(z)?d.filter(z)[0].id():z.id(),p[z]/m)}}},closenessCentrality:function(t){var r=Rs(t),a=r.root,s=r.weight,u=r.directed,d=r.harmonic;a=this.filter(a)[0];for(var p=this.dijkstra({root:a,weight:s,directed:u}),m=0,v=this.nodes(),b=0;b<v.length;b++){var w=v[b];if(!w.same(a)){var k=p.distanceTo(w);m+=d?1/k:k}}return d?m:1/m}};Ki.cc=Ki.closenessCentrality,Ki.ccn=Ki.closenessCentralityNormalised=Ki.closenessCentralityNormalized;var Fs=un({weight:null,directed:!1}),Io={betweennessCentrality:function(t){for(var r=Fs(t),a=r.directed,s=r.weight,u=null!=s,d=this.cy(),p=this.nodes(),m={},v={},b=0,w=function(R,j){v[R]=j,j>b&&(b=j)},k=function(R){return v[R]},T=0;T<p.length;T++){var O=p[T],D=O.id();m[D]=a?O.outgoers().nodes():O.openNeighborhood().nodes(),w(D,0)}for(var z=function(R){for(var j=p[R].id(),Q=[],K={},Y={},W={},ne=new Xi(function(qe,it){return W[qe]-W[it]}),ie=0;ie<p.length;ie++){var oe=p[ie].id();K[oe]=[],Y[oe]=0,W[oe]=1/0}for(Y[j]=1,W[j]=0,ne.push(j);!ne.empty();){var ce=ne.pop();if(Q.push(ce),u)for(var ue=0;ue<m[ce].length;ue++){var xe,he=m[ce][ue],ke=d.getElementById(ce);xe=ke.edgesTo(he).length>0?ke.edgesTo(he)[0]:he.edgesTo(ke)[0];var me=s(xe);he=he.id(),W[he]>W[ce]+me&&(W[he]=W[ce]+me,ne.nodes.indexOf(he)<0?ne.push(he):ne.updateItem(he),Y[he]=0,K[he]=[]),W[he]==W[ce]+me&&(Y[he]=Y[he]+Y[ce],K[he].push(ce))}else for(var ye=0;ye<m[ce].length;ye++){var Le=m[ce][ye].id();W[Le]==1/0&&(ne.push(Le),W[Le]=W[ce]+1),W[Le]==W[ce]+1&&(Y[Le]=Y[Le]+Y[ce],K[Le].push(ce))}}for(var De={},Ve=0;Ve<p.length;Ve++)De[p[Ve].id()]=0;for(;Q.length>0;){for(var Te=Q.pop(),He=0;He<K[Te].length;He++){var Ye=K[Te][He];De[Ye]=De[Ye]+Y[Ye]/Y[Te]*(1+De[Te])}Te!=p[R].id()&&w(Te,k(Te)+De[Te])}},V=0;V<p.length;V++)z(V);var M={betweenness:function(R){var j=d.collection(R).id();return k(j)},betweennessNormalized:function(R){if(0==b)return 0;var j=d.collection(R).id();return k(j)/b}};return M.betweennessNormalised=M.betweennessNormalized,M}};Io.bc=Io.betweennessCentrality;var ld=un({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(t){return 1}]}),ud=function(t,r){for(var a=0,s=0;s<r.length;s++)a+=r[s](t);return a},Vs=function(t,r){for(var a,s=0;s<r;s++){a=0;for(var u=0;u<r;u++)a+=t[u*r+s];for(var d=0;d<r;d++)t[d*r+s]=t[d*r+s]/a}},fu=function(t,r,a){for(var s=new Array(a*a),u=0;u<a;u++){for(var d=0;d<a;d++)s[u*a+d]=0;for(var p=0;p<a;p++)for(var m=0;m<a;m++)s[u*a+m]+=t[u*a+p]*r[p*a+m]}return s},Ro=function(t,r,a){for(var s=t.slice(0),u=1;u<a;u++)t=fu(t,s,r);return t},cd=function(t,r,a){for(var s=new Array(r*r),u=0;u<r*r;u++)s[u]=Math.pow(t[u],a);return Vs(s,r),s},dd=function(t,r,a,s){for(var u=0;u<a;u++)if(Math.round(t[u]*Math.pow(10,s))/Math.pow(10,s)!=Math.round(r[u]*Math.pow(10,s))/Math.pow(10,s))return!1;return!0},js=function(t,r){for(var a=0;a<t.length;a++)if(!r[a]||t[a].id()!==r[a].id())return!1;return!0},qs=function(t){for(var r=this.nodes(),a=this.edges(),s=this.cy(),u=ld(t),d={},p=0;p<r.length;p++)d[r[p].id()]=p;for(var m,v=r.length,b=v*v,w=new Array(b),k=0;k<b;k++)w[k]=0;for(var T=0;T<a.length;T++){var O=a[T],D=d[O.source().id()],z=d[O.target().id()],V=ud(O,u.attributes);w[D*v+z]+=V,w[z*v+D]+=V}(function(Q,K,Y){for(var W=0;W<K;W++)Q[W*K+W]=Y})(w,v,u.multFactor),Vs(w,v);for(var M=!0,R=0;M&&R<u.maxIterations;)M=!1,m=Ro(w,v,u.expandFactor),w=cd(m,v,u.inflateFactor),dd(w,m,b,4)||(M=!0),R++;return function(Q){for(var K=0;K<Q.length;K++)for(var Y=0;Y<Q.length;Y++)K!=Y&&js(Q[K],Q[Y])&&Q.splice(Y,1);return Q}(function(Q,K,Y,W){for(var ne=[],ie=0;ie<K;ie++){for(var oe=[],ce=0;ce<K;ce++)Math.round(1e3*Q[ie*K+ce])/1e3>0&&oe.push(Y[ce]);0!==oe.length&&ne.push(W.collection(oe))}return ne}(w,v,r,s))},gu={markovClustering:qs,mcl:qs},Gi=function(t){return t},Fo=function(t,r){return Math.abs(r-t)},vu=function(t,r,a){return t+Fo(r,a)},Xs=function(t,r,a){return t+Math.pow(a-r,2)},hd=function(t){return Math.sqrt(t)},pd=function(t,r,a){return Math.max(t,Fo(r,a))},Ua=function(t,r,a,s,u){for(var d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Gi,p=s,m=0;m<t;m++)p=u(p,r(m),a(m));return d(p)},xa={euclidean:function(t,r,a){return t>=2?Ua(t,r,a,0,Xs,hd):Ua(t,r,a,0,vu)},squaredEuclidean:function(t,r,a){return Ua(t,r,a,0,Xs)},manhattan:function(t,r,a){return Ua(t,r,a,0,vu)},max:function(t,r,a){return Ua(t,r,a,-1/0,pd)}};function Za(t,r,a,s,u,d){var p;return p=L(t)?t:xa[t]||xa.euclidean,0===r&&L(t)?p(u,d):p(r,a,s,u,d)}xa["squared-euclidean"]=xa.squaredEuclidean,xa.squaredeuclidean=xa.squaredEuclidean;var mu=un({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),Ys=function(t){return mu(t)},gi=function(t,r,a,s,u){var d="kMedoids"!==u?function(v){return a[v]}:function(v){return s[v](a)};return Za(t,s.length,d,function(v){return s[v](r)},a,r)},vi=function(t,r,a){for(var s=a.length,u=new Array(s),d=new Array(s),p=new Array(r),m=null,v=0;v<s;v++)u[v]=t.min(a[v]).value,d[v]=t.max(a[v]).value;for(var b=0;b<r;b++){m=[];for(var w=0;w<s;w++)m[w]=Math.random()*(d[w]-u[w])+u[w];p[b]=m}return p},yu=function(t,r,a,s,u){for(var d=1/0,p=0,m=0;m<r.length;m++){var v=gi(a,t,r[m],s,u);v<d&&(d=v,p=m)}return p},Qa=function(t,r,a){for(var s=[],u=null,d=0;d<r.length;d++)a[(u=r[d]).id()]===t&&s.push(u);return s},fd=function(t,r,a){for(var s=0;s<t.length;s++)for(var u=0;u<t[s].length;u++)if(Math.abs(t[s][u]-r[s][u])>a)return!1;return!0},gd=function(t,r,a){for(var s=0;s<a;s++)if(t===r[s])return!0;return!1},bu=function(t,r){var a=new Array(r);if(t.length<50)for(var s=0;s<r;s++){for(var u=t[Math.floor(Math.random()*t.length)];gd(u,a,s);)u=t[Math.floor(Math.random()*t.length)];a[s]=u}else for(var d=0;d<r;d++)a[d]=t[Math.floor(Math.random()*t.length)];return a},xu=function(t,r,a){for(var s=0,u=0;u<r.length;u++)s+=gi("manhattan",r[u],t,a,"kMedoids");return s},vd=function(t,r,a,s,u){for(var d,p,m=0;m<r.length;m++)for(var v=0;v<t.length;v++)s[m][v]=Math.pow(a[m][v],u.m);for(var b=0;b<t.length;b++)for(var w=0;w<u.attributes.length;w++){d=0,p=0;for(var k=0;k<r.length;k++)d+=s[k][b]*u.attributes[w](r[k]),p+=s[k][b];t[b][w]=d/p}},md=function(t,r,a,s,u){for(var d=0;d<t.length;d++)r[d]=t[d].slice();for(var p,m,v,b=2/(u.m-1),w=0;w<a.length;w++)for(var k=0;k<s.length;k++){p=0;for(var T=0;T<a.length;T++)m=gi(u.distance,s[k],a[w],u.attributes,"cmeans"),v=gi(u.distance,s[k],a[T],u.attributes,"cmeans"),p+=Math.pow(m/v,b);t[k][w]=1/p}},wu=function(t){var r,a,s,u,d=this.cy(),p=this.nodes(),m=Ys(t);s=new Array(p.length);for(var v=0;v<p.length;v++)s[v]=new Array(m.k);a=new Array(p.length);for(var b=0;b<p.length;b++)a[b]=new Array(m.k);for(var w=0;w<p.length;w++){for(var k=0,T=0;T<m.k;T++)a[w][T]=Math.random(),k+=a[w][T];for(var O=0;O<m.k;O++)a[w][O]=a[w][O]/k}r=new Array(m.k);for(var D=0;D<m.k;D++)r[D]=new Array(m.attributes.length);u=new Array(p.length);for(var z=0;z<p.length;z++)u[z]=new Array(m.k);for(var V=!0,M=0;V&&M<m.maxIterations;)V=!1,vd(r,p,a,u,m),md(a,s,r,p,m),fd(a,s,m.sensitivityThreshold)||(V=!0),M++;return{clusters:function(R,j,Q,K){for(var Y,W,ne=new Array(Q.k),ie=0;ie<ne.length;ie++)ne[ie]=[];for(var oe=0;oe<j.length;oe++){Y=-1/0,W=-1;for(var ce=0;ce<j[0].length;ce++)j[oe][ce]>Y&&(Y=j[oe][ce],W=ce);ne[W].push(R[oe])}for(var ue=0;ue<ne.length;ue++)ne[ue]=K.collection(ne[ue]);return ne}(p,a,m,d),degreeOfMembership:a}},yd={kMeans:function(t){var r,a=this.cy(),s=this.nodes(),u=null,d=Ys(t),p=new Array(d.k),m={};r=d.testMode?"number"==typeof d.testCentroids?vi(s,d.k,d.attributes):"object"===e(d.testCentroids)?d.testCentroids:vi(s,d.k,d.attributes):vi(s,d.k,d.attributes);for(var w,k=!0,T=0;k&&T<d.maxIterations;){for(var O=0;O<s.length;O++)m[(u=s[O]).id()]=yu(u,r,d.distance,d.attributes,"kMeans");k=!1;for(var D=0;D<d.k;D++){var z=Qa(D,s,m);if(0!==z.length){for(var V=d.attributes.length,M=r[D],R=new Array(V),j=new Array(V),Q=0;Q<V;Q++){j[Q]=0;for(var K=0;K<z.length;K++)j[Q]+=d.attributes[Q](u=z[K]);R[Q]=j[Q]/z.length,w=d.sensitivityThreshold,Math.abs(M[Q]-R[Q])<=w||(k=!0)}r[D]=R,p[D]=a.collection(z)}}T++}return p},kMedoids:function(t){var r,a,s=this.cy(),u=this.nodes(),d=null,p=Ys(t),m=new Array(p.k),v={},b=new Array(p.k);p.testMode?"number"==typeof p.testCentroids||(r="object"===e(p.testCentroids)?p.testCentroids:bu(u,p.k)):r=bu(u,p.k);for(var w=!0,k=0;w&&k<p.maxIterations;){for(var T=0;T<u.length;T++)v[(d=u[T]).id()]=yu(d,r,p.distance,p.attributes,"kMedoids");w=!1;for(var O=0;O<r.length;O++){var D=Qa(O,u,v);if(0!==D.length){b[O]=xu(r[O],D,p.attributes);for(var z=0;z<D.length;z++)(a=xu(D[z],D,p.attributes))<b[O]&&(b[O]=a,r[O]=D[z],w=!0);m[O]=s.collection(D)}}k++}return m},fuzzyCMeans:wu,fcm:wu},Wr=un({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),Eu={single:"min",complete:"max"},Hs=function(t,r,a,s,u){for(var d,p=0,m=1/0,v=u.attributes,b=function(W,ne){return Za(u.distance,v.length,function(ie){return v[ie](W)},function(ie){return v[ie](ne)},W,ne)},w=0;w<t.length;w++){var k=t[w].key,T=a[k][s[k]];T<m&&(p=k,m=T)}if("threshold"===u.mode&&m>=u.threshold||"dendrogram"===u.mode&&1===t.length)return!1;var O,D=r[p],z=r[s[p]];O="dendrogram"===u.mode?{left:D,right:z,key:D.key}:{value:D.value.concat(z.value),key:D.key},t[D.index]=O,t.splice(z.index,1),r[D.key]=O;for(var V=0;V<t.length;V++){var M=t[V];D.key===M.key?d=1/0:"min"===u.linkage?(d=a[D.key][M.key],a[D.key][M.key]>a[z.key][M.key]&&(d=a[z.key][M.key])):"max"===u.linkage?(d=a[D.key][M.key],a[D.key][M.key]<a[z.key][M.key]&&(d=a[z.key][M.key])):d="mean"===u.linkage?(a[D.key][M.key]*D.size+a[z.key][M.key]*z.size)/(D.size+z.size):"dendrogram"===u.mode?b(M.value,D.value):b(M.value[0],D.value[0]),a[D.key][M.key]=a[M.key][D.key]=d}for(var R=0;R<t.length;R++){var j=t[R].key;if(s[j]===D.key||s[j]===z.key){for(var Q=j,K=0;K<t.length;K++){var Y=t[K].key;a[j][Y]<a[j][Q]&&(Q=Y)}s[j]=Q}t[R].index=R}return D.key=z.key=D.index=z.index=null,!0},Ja=function t(r,a,s){r&&(r.value?a.push(r.value):(r.left&&t(r.left,a),r.right&&t(r.right,a)))},_u=function(t){for(var r=this.cy(),a=this.nodes(),s=(R=void 0,void 0,R=Wr(t),null!=(j=Eu[R.linkage])&&(R.linkage=j),R),u=s.attributes,d=function(M,R){return Za(s.distance,u.length,function(j){return u[j](M)},function(j){return u[j](R)},M,R)},p=[],m=[],v=[],b=[],w=0;w<a.length;w++){var k={value:"dendrogram"===s.mode?a[w]:[a[w]],key:w,index:w};p[w]=k,b[w]=k,m[w]=[],v[w]=0}for(var R,j,T=0;T<p.length;T++)for(var O=0;O<=T;O++){var D;D="dendrogram"===s.mode?T===O?1/0:d(p[T].value,p[O].value):T===O?1/0:d(p[T].value[0],p[O].value[0]),m[T][O]=D,m[O][T]=D,D<m[T][v[T]]&&(v[T]=O)}for(var z,V=Hs(p,b,m,v,s);V;)V=Hs(p,b,m,v,s);return"dendrogram"===s.mode?(z=function M(R,j,Q){if(!R)return[];var K=[],Y=[],W=[];return 0===j?(R.left&&Ja(R.left,K),R.right&&Ja(R.right,Y),W=K.concat(Y),[Q.collection(W)]):1===j?R.value?[Q.collection(R.value)]:(R.left&&Ja(R.left,K),R.right&&Ja(R.right,Y),[Q.collection(K),Q.collection(Y)]):R.value?[Q.collection(R.value)]:(R.left&&(K=M(R.left,j-1,Q)),R.right&&(Y=M(R.right,j-1,Q)),K.concat(Y))}(p[0],s.dendrogramDepth,r),s.addDendrogram&&function M(R,j){if(!R)return"";if(R.left&&R.right){var Q=M(R.left,j),K=M(R.right,j),Y=j.add({group:"nodes",data:{id:Q+","+K}});return j.add({group:"edges",data:{source:Q,target:Y.id()}}),j.add({group:"edges",data:{source:K,target:Y.id()}}),Y.id()}return R.value?R.value.id():void 0}(p[0],r)):(z=new Array(p.length),p.forEach(function(M,R){M.key=M.index=null,z[R]=r.collection(M.value)})),z},bd={hierarchicalClustering:_u,hca:_u},ku=un({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),Vo=function(t,r,a,s){var u=function(d,p){return s[p](d)};return-Za(t,s.length,function(d){return u(r,d)},function(d){return u(a,d)},r,a)},Cu=function(t,r,a){for(var s=[],u=0;u<t;u++){for(var d=-1,p=-1/0,m=0;m<a.length;m++){var v=a[m];r[u*t+v]>p&&(d=v,p=r[u*t+v])}d>0&&s.push(d)}for(var b=0;b<a.length;b++)s[a[b]]=a[b];return s},Ws=function(t){for(var r,a,s,u,d,p,m=this.cy(),v=this.nodes(),b=function(ht){var Z=ht.damping,ve=ht.preference;.5<=Z&&Z<1||$t("Damping must range on [0.5, 1).  Got: ".concat(Z));var Me=["median","mean","min","max"];return Me.some(function(Ne){return Ne===ve})||B(ve)||$t("Preference must be one of [".concat(Me.map(function(Ne){return"'".concat(Ne,"'")}).join(", "),"] or a number.  Got: ").concat(ve)),ku(ht)}(t),w={},k=0;k<v.length;k++)w[v[k].id()]=k;a=(r=v.length)*r,s=new Array(a);for(var T=0;T<a;T++)s[T]=-1/0;for(var O=0;O<r;O++)for(var D=0;D<r;D++)O!==D&&(s[O*r+D]=Vo(b.distance,v[O],v[D],b.attributes));u=function(t,r){return"median"===r?function(a){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.length,p=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],m=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];arguments.length>3&&void 0!==arguments[3]&&!arguments[3]?(u<a.length&&a.splice(u,a.length-u),s>0&&a.splice(0,s)):a=a.slice(s,u);for(var v=0,b=a.length-1;b>=0;b--)m?isFinite(a[b])||(a[b]=-1/0,v++):a.splice(b,1);p&&a.sort(function(O,D){return O-D});var k=a.length,T=Math.floor(k/2);return k%2!=0?a[T+1+v]:(a[T-1+v]+a[T+v])/2}(t):"mean"===r?function(a){for(var u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.length,d=0,p=0,m=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;m<u;m++){var v=a[m];isFinite(v)&&(d+=v,p++)}return d/p}(t):"min"===r?function(a){for(var u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.length,d=1/0,p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;p<u;p++){var m=a[p];isFinite(m)&&(d=Math.min(m,d))}return d}(t):"max"===r?function(a){for(var u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.length,d=-1/0,p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;p<u;p++){var m=a[p];isFinite(m)&&(d=Math.max(m,d))}return d}(t):r}(s,b.preference);for(var z=0;z<r;z++)s[z*r+z]=u;d=new Array(a);for(var V=0;V<a;V++)d[V]=0;p=new Array(a);for(var M=0;M<a;M++)p[M]=0;for(var R=new Array(r),j=new Array(r),Q=new Array(r),K=0;K<r;K++)R[K]=0,j[K]=0,Q[K]=0;for(var Y,W=new Array(r*b.minIterations),ne=0;ne<W.length;ne++)W[ne]=0;for(Y=0;Y<b.maxIterations;Y++){for(var ie=0;ie<r;ie++){for(var oe=-1/0,ce=-1/0,ue=-1,he=0,ke=0;ke<r;ke++)R[ke]=d[ie*r+ke],(he=p[ie*r+ke]+s[ie*r+ke])>=oe?(ce=oe,oe=he,ue=ke):he>ce&&(ce=he);for(var xe=0;xe<r;xe++)d[ie*r+xe]=(1-b.damping)*(s[ie*r+xe]-oe)+b.damping*R[xe];d[ie*r+ue]=(1-b.damping)*(s[ie*r+ue]-ce)+b.damping*R[ue]}for(var me=0;me<r;me++){for(var ye=0,Le=0;Le<r;Le++)R[Le]=p[Le*r+me],j[Le]=Math.max(0,d[Le*r+me]),ye+=j[Le];ye-=j[me],j[me]=d[me*r+me],ye+=j[me];for(var De=0;De<r;De++)p[De*r+me]=(1-b.damping)*Math.min(0,ye-j[De])+b.damping*R[De];p[me*r+me]=(1-b.damping)*(ye-j[me])+b.damping*R[me]}for(var Ve=0,Te=0;Te<r;Te++){var He=p[Te*r+Te]+d[Te*r+Te]>0?1:0;W[Y%b.minIterations*r+Te]=He,Ve+=He}if(Ve>0&&(Y>=b.minIterations-1||Y==b.maxIterations-1)){for(var Ye=0,qe=0;qe<r;qe++){Q[qe]=0;for(var it=0;it<b.minIterations;it++)Q[qe]+=W[it*r+qe];0!==Q[qe]&&Q[qe]!==b.minIterations||Ye++}if(Ye===r)break}}for(var at=function(ht,Z,ve){for(var Me=[],Ne=0;Ne<ht;Ne++)Z[Ne*ht+Ne]+ve[Ne*ht+Ne]>0&&Me.push(Ne);return Me}(r,d,p),nt=function(ht,Z,ve){for(var Me=Cu(ht,Z,ve),Ne=0;Ne<ve.length;Ne++){for(var Be=[],et=0;et<Me.length;et++)Me[et]===ve[Ne]&&Be.push(et);for(var Qe=-1,Bt=-1/0,ct=0;ct<Be.length;ct++){for(var Pt=0,kt=0;kt<Be.length;kt++)Pt+=Z[Be[kt]*ht+Be[ct]];Pt>Bt&&(Qe=ct,Bt=Pt)}ve[Ne]=Be[Qe]}return Cu(ht,Z,ve)}(r,s,at),dt={},yt=0;yt<at.length;yt++)dt[at[yt]]=[];for(var Dt=0;Dt<v.length;Dt++){var $e=nt[w[v[Dt].id()]];null!=$e&&dt[$e].push(v[Dt])}for(var xt=new Array(at.length),Tt=0;Tt<at.length;Tt++)xt[Tt]=m.collection(dt[at[Tt]]);return xt},wd={affinityPropagation:Ws,ap:Ws},Ed=un({root:void 0,directed:!1}),eo=function(){var t=this,r={},a=0,s=0,u=[],d=[],p={},m=function b(w,k,T){w===T&&(s+=1),r[k]={id:a,low:a++,cutVertex:!1};var O,D,z,V,M=t.getElementById(k).connectedEdges().intersection(t);0===M.size()?u.push(t.spawn(t.getElementById(k))):M.forEach(function(R){O=R.source().id(),D=R.target().id(),(z=O===k?D:O)!==T&&(V=R.id(),p[V]||(p[V]=!0,d.push({x:k,y:z,edge:R})),z in r?r[k].low=Math.min(r[k].low,r[z].id):(b(w,z,k),r[k].low=Math.min(r[k].low,r[z].low),r[k].id<=r[z].low&&(r[k].cutVertex=!0,function(j,Q){for(var K=d.length-1,Y=[],W=t.spawn();d[K].x!=j||d[K].y!=Q;)Y.push(d.pop().edge),K--;Y.push(d.pop().edge),Y.forEach(function(ne){var ie=ne.connectedNodes().intersection(t);W.merge(ne),ie.forEach(function(oe){var ce=oe.id(),ue=oe.connectedEdges().intersection(t);W.merge(oe),W.merge(r[ce].cutVertex?ue.filter(function(he){return he.isLoop()}):ue)})}),u.push(W)}(k,z))))})};t.forEach(function(b){if(b.isNode()){var w=b.id();w in r||(s=0,m(w,w),r[w].cutVertex=s>1)}});var v=Object.keys(r).filter(function(b){return r[b].cutVertex}).map(function(b){return t.getElementById(b)});return{cut:t.spawn(v),components:u}},to=function(){var t=this,r={},a=0,s=[],u=[],d=t.spawn(t);return t.forEach(function(p){if(p.isNode()){var m=p.id();m in r||function v(b){if(u.push(b),r[b]={index:a,low:a++,explored:!1},t.getElementById(b).connectedEdges().intersection(t).forEach(function(D){var z=D.target().id();z!==b&&(z in r||v(z),r[z].explored||(r[b].low=Math.min(r[b].low,r[z].low)))}),r[b].index===r[b].low){for(var w=t.spawn();;){var k=u.pop();if(w.merge(t.getElementById(k)),r[k].low=r[b].index,r[k].explored=!0,k===b)break}var T=w.edgesWith(w),O=w.merge(T);s.push(O),d=d.difference(O)}}(m)}}),{cut:d,components:s}},$s={};[qi,eu,tu,ru,au,su,Yi,pu,$i,Ki,Io,gu,yd,bd,wd,{hierholzer:function(t){if(!P(t)){var r=arguments;t={root:r[0],directed:r[1]}}var a,s,u,d=Ed(t),p=d.root,m=d.directed,v=this,b=!1;p&&(u=C(p)?this.filter(p)[0].id():p[0].id());var w={},k={};v.forEach(m?function(M){var R=M.id();if(M.isNode()){var j=M.indegree(!0),Q=M.outdegree(!0),K=j-Q,Y=Q-j;1==K?a?b=!0:a=R:1==Y?s?b=!0:s=R:(Y>1||K>1)&&(b=!0),w[R]=[],M.outgoers().forEach(function(W){W.isEdge()&&w[R].push(W.id())})}else k[R]=[void 0,M.target().id()]}:function(M){var R=M.id();M.isNode()?(M.degree(!0)%2&&(a?s?b=!0:s=R:a=R),w[R]=[],M.connectedEdges().forEach(function(j){return w[R].push(j.id())})):k[R]=[M.source().id(),M.target().id()]});var T={found:!1,trail:void 0};if(b)return T;if(s&&a)if(m){if(u&&s!=u)return T;u=s}else{if(u&&s!=u&&a!=u)return T;u||(u=s)}else u||(u=v[0].id());var O=function(M){for(var R,j,Q,K=M,Y=[M];w[K].length;)R=w[K].shift(),j=k[R][0],K!=(Q=k[R][1])?(w[Q]=w[Q].filter(function(W){return W!=R}),K=Q):m||K==j||(w[j]=w[j].filter(function(W){return W!=R}),K=j),Y.unshift(R),Y.unshift(K);return Y},D=[],z=[];for(z=O(u);1!=z.length;)0==w[z[0]].length?(D.unshift(v.getElementById(z.shift())),D.unshift(v.getElementById(z.shift()))):z=O(z.shift()).concat(z);for(var V in D.unshift(v.getElementById(z.shift())),w)if(w[V].length)return T;return T.found=!0,T.trail=this.spawn(D,!0),T}},{hopcroftTarjanBiconnected:eo,htbc:eo,htb:eo,hopcroftTarjanBiconnectedComponents:eo},{tarjanStronglyConnected:to,tsc:to,tscc:to,tarjanStronglyConnectedComponents:to}].forEach(function(t){ee($s,t)});var Vr=function t(r){if(!(this instanceof t))return new t(r);this.id="Thenable/1.0.7",this.state=0,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},"function"==typeof r&&r.call(this,this.fulfill.bind(this),this.reject.bind(this))};Vr.prototype={fulfill:function(t){return Ks(this,1,"fulfillValue",t)},reject:function(t){return Ks(this,2,"rejectReason",t)},then:function(t,r){var a=new Vr;return this.onFulfilled.push(Su(t,a,"fulfill")),this.onRejected.push(Su(r,a,"reject")),jo(this),a.proxy}};var Ks=function(t,r,a,s){return 0===t.state&&(t.state=r,t[a]=s,jo(t)),t},jo=function(t){1===t.state?Or(t,"onFulfilled",t.fulfillValue):2===t.state&&Or(t,"onRejected",t.rejectReason)},Or=function(t,r,a){if(0!==t[r].length){var s=t[r];t[r]=[];var u=function(){for(var d=0;d<s.length;d++)s[d](a)};"function"==typeof setImmediate?setImmediate(u):setTimeout(u,0)}},Su=function(t,r,a){return function(s){if("function"!=typeof t)r[a].call(r,s);else{var u;try{u=t(s)}catch(d){return void r.reject(d)}_d(r,u)}}},_d=function t(r,a){if(r!==a&&r.proxy!==a){var s;if("object"===e(a)&&null!==a||"function"==typeof a)try{s=a.then}catch(d){return void r.reject(d)}if("function"!=typeof s)r.fulfill(a);else{var u=!1;try{s.call(a,function(d){u||(u=!0,d===a?r.reject(new TypeError("circular thenable chain")):t(r,d))},function(d){u||(u=!0,r.reject(d))})}catch(d){u||r.reject(d)}}}else r.reject(new TypeError("cannot resolve promise with itself"))};Vr.all=function(t){return new Vr(function(r,a){for(var s=new Array(t.length),u=0,d=function(m,v){s[m]=v,++u===t.length&&r(s)},p=0;p<t.length;p++)!function(m){var v=t[m];null!=v&&null!=v.then?v.then(function(b){d(m,b)},function(b){a(b)}):d(m,v)}(p)})},Vr.resolve=function(t){return new Vr(function(r,a){r(t)})},Vr.reject=function(t){return new Vr(function(r,a){a(t)})};var Ui=typeof Promise<"u"?Promise:Vr,qo=function(t,r,a){var s=H(t),u=!s,d=this._private=ee({duration:1e3},r,a);if(d.target=t,d.style=d.style||d.css,d.started=!1,d.playing=!1,d.hooked=!1,d.applying=!1,d.progress=0,d.completes=[],d.frames=[],d.complete&&L(d.complete)&&d.completes.push(d.complete),u){var p=t.position();d.startPosition=d.startPosition||{x:p.x,y:p.y},d.startStyle=d.startStyle||t.cy().style().getAnimationStartStyle(t,d.style)}if(s){var m=t.pan();d.startPan={x:m.x,y:m.y},d.startZoom=t.zoom()}this.length=1,this[0]=this},Zi=qo.prototype;ee(Zi,{instanceString:function(){return"animation"},hook:function(){var t=this._private;if(!t.hooked){var r=t.target._private.animation;(t.queue?r.queue:r.current).push(this),G(t.target)&&t.target.cy().addToAnimationPool(t.target),t.hooked=!0}return this},play:function(){var t=this._private;return 1===t.progress&&(t.progress=0),t.playing=!0,t.started=!1,t.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var t=this._private;return t.applying=!0,t.started=!1,t.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var t=this._private;return t.playing=!1,t.started=!1,this},stop:function(){var t=this._private;return t.playing=!1,t.started=!1,t.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(t){var r=this._private;return void 0===t?r.progress*r.duration:this.progress(t/r.duration)},progress:function(t){var r=this._private,a=r.playing;return void 0===t?r.progress:(a&&this.pause(),r.progress=t,r.started=!1,a&&this.play(),this)},completed:function(){return 1===this._private.progress},reverse:function(){var t=this._private,r=t.playing;r&&this.pause(),t.progress=1-t.progress,t.started=!1;var a=function(m,v){var b=t[m];null!=b&&(t[m]=t[v],t[v]=b)};if(a("zoom","startZoom"),a("pan","startPan"),a("position","startPosition"),t.style)for(var s=0;s<t.style.length;s++){var u=t.style[s],d=u.name,p=t.startStyle[d];t.startStyle[d]=u,t.style[s]=p}return r&&this.play(),this},promise:function(t){var r,a=this._private;return r="frame"===t?a.frames:a.completes,new Ui(function(s,u){r.push(function(){s()})})}}),Zi.complete=Zi.completed,Zi.run=Zi.play,Zi.running=Zi.playing;var Gs,kd={animated:function(){return function(){var t=void 0!==this.length?this:[this];if(!(this._private.cy||this).styleEnabled())return!1;var r=t[0];return r?r._private.animation.current.length>0:void 0}},clearQueue:function(){return function(){var t=void 0!==this.length?this:[this];if(!(this._private.cy||this).styleEnabled())return this;for(var r=0;r<t.length;r++)t[r]._private.animation.queue=[];return this}},delay:function(){return function(t,r){return(this._private.cy||this).styleEnabled()?this.animate({delay:t,duration:t,complete:r}):this}},delayAnimation:function(){return function(t,r){return(this._private.cy||this).styleEnabled()?this.animation({delay:t,duration:t,complete:r}):this}},animation:function(){return function(t,r){var a=void 0!==this.length,s=a?this:[this],u=this._private.cy||this,d=!a,p=!d;if(!u.styleEnabled())return this;var m=u.style();if(t=ee({},t,r),0===Object.keys(t).length)return new qo(s[0],t);switch(void 0===t.duration&&(t.duration=400),t.duration){case"slow":t.duration=600;break;case"fast":t.duration=200}if(p&&(t.style=m.getPropsList(t.style||t.css),t.css=void 0),p&&null!=t.renderedPosition){var v=t.renderedPosition,b=u.pan(),w=u.zoom();t.position=Lo(v,w,b)}if(d&&null!=t.panBy){var k=t.panBy,T=u.pan();t.pan={x:T.x+k.x,y:T.y+k.y}}var O=t.center||t.centre;if(d&&null!=O){var D=u.getCenterPan(O.eles,t.zoom);null!=D&&(t.pan=D)}if(d&&null!=t.fit){var z=t.fit,V=u.getFitViewport(z.eles||z.boundingBox,z.padding);null!=V&&(t.pan=V.pan,t.zoom=V.zoom)}if(d&&P(t.zoom)){var M=u.getZoomedViewport(t.zoom);null!=M?(M.zoomed&&(t.zoom=M.zoom),M.panned&&(t.pan=M.pan)):t.zoom=null}return new qo(s[0],t)}},animate:function(){return function(t,r){var a=void 0!==this.length?this:[this];if(!(this._private.cy||this).styleEnabled())return this;r&&(t=ee({},t,r));for(var s=0;s<a.length;s++){var u=a[s],d=u.animated()&&(void 0===t.queue||t.queue);u.animation(t,d?{queue:!0}:void 0).play()}return this}},stop:function(){return function(t,r){var a=void 0!==this.length?this:[this],s=this._private.cy||this;if(!s.styleEnabled())return this;for(var u=0;u<a.length;u++){for(var d=a[u]._private,p=d.animation.current,m=0;m<p.length;m++)r&&(p[m]._private.duration=0);t&&(d.animation.queue=[]),r||(d.animation.current=[])}return s.notify("draw"),this}}},Xo=Array.isArray,Cd=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Sd=/^\w*$/,no=Ge["__core-js_shared__"],Pu=(Gs=/[^.]+$/.exec(no&&no.keys&&no.keys.IE_PROTO||""))?"Symbol(src)_1."+Gs:"",Qi=Function.prototype.toString,Du=/^\[object .+?Constructor\]$/,Lu=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Us=function(t,r){var a=function(t,r){return t?.[r]}(t,r);return function(t){return!(!Fe(t)||function(t){return!!Pu&&Pu in t}(t))&&(function(t){if(!Fe(t))return!1;var r=Ct(t);return"[object Function]"==r||"[object GeneratorFunction]"==r||"[object AsyncFunction]"==r||"[object Proxy]"==r}(t)?Lu:Du).test(function(t){if(null!=t){try{return Qi.call(t)}catch{}try{return t+""}catch{}}return""}(t))}(a)?a:void 0},wa=Us(Object,"create"),Ld=Object.prototype.hasOwnProperty,Nd=Object.prototype.hasOwnProperty;function Ji(t){var r=-1,a=null==t?0:t.length;for(this.clear();++r<a;){var s=t[r];this.set(s[0],s[1])}}Ji.prototype.clear=function(){this.__data__=wa?wa(null):{},this.size=0},Ji.prototype.delete=function(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r},Ji.prototype.get=function(t){var r=this.__data__;if(wa){var a=r[t];return"__lodash_hash_undefined__"===a?void 0:a}return Ld.call(r,t)?r[t]:void 0},Ji.prototype.has=function(t){var r=this.__data__;return wa?void 0!==r[t]:Nd.call(r,t)},Ji.prototype.set=function(t,r){var a=this.__data__;return this.size+=this.has(t)?0:1,a[t]=wa&&void 0===r?"__lodash_hash_undefined__":r,this};var Nu=Ji,zu=function(t,r){return t===r||t!=t&&r!=r},Yo=function(t,r){for(var a=t.length;a--;)if(zu(t[a][0],r))return a;return-1},Rd=Array.prototype.splice;function bi(t){var r=-1,a=null==t?0:t.length;for(this.clear();++r<a;){var s=t[r];this.set(s[0],s[1])}}bi.prototype.clear=function(){this.__data__=[],this.size=0},bi.prototype.delete=function(t){var r=this.__data__,a=Yo(r,t);return!(a<0||(a==r.length-1?r.pop():Rd.call(r,a,1),--this.size,0))},bi.prototype.get=function(t){var r=this.__data__,a=Yo(r,t);return a<0?void 0:r[a][1]},bi.prototype.has=function(t){return Yo(this.__data__,t)>-1},bi.prototype.set=function(t,r){var a=this.__data__,s=Yo(a,t);return s<0?(++this.size,a.push([t,r])):a[s][1]=r,this};var Iu=bi,Ru=Us(Ge,"Map"),Ho=function(t,r){var a=t.__data__;return function(t){var r=typeof t;return"string"==r||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==t:null===t}(r)?a["string"==typeof r?"string":"hash"]:a.map};function Ea(t){var r=-1,a=null==t?0:t.length;for(this.clear();++r<a;){var s=t[r];this.set(s[0],s[1])}}Ea.prototype.clear=function(){this.size=0,this.__data__={hash:new Nu,map:new(Ru||Iu),string:new Nu}},Ea.prototype.delete=function(t){var r=Ho(this,t).delete(t);return this.size-=r?1:0,r},Ea.prototype.get=function(t){return Ho(this,t).get(t)},Ea.prototype.has=function(t){return Ho(this,t).has(t)},Ea.prototype.set=function(t,r){var a=Ho(this,t),s=a.size;return a.set(t,r),this.size+=a.size==s?0:1,this};var io=Ea;function ao(t,r){if("function"!=typeof t||null!=r&&"function"!=typeof r)throw new TypeError("Expected a function");var a=function(){var s=arguments,u=r?r.apply(this,s):s[0],d=a.cache;if(d.has(u))return d.get(u);var p=t.apply(this,s);return a.cache=d.set(u,p)||d,p};return a.cache=new(ao.Cache||io),a}ao.Cache=io;var Hd=ao,Fu=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Wd=/\\(\\)?/g,ta=function(t){var r=Hd(function(t){var r=[];return 46===t.charCodeAt(0)&&r.push(""),t.replace(Fu,function(a,s,u,d){r.push(u?d.replace(Wd,"$1"):s||a)}),r},function(s){return 500===a.size&&a.clear(),s}),a=r.cache;return r}(),Wo=function(t,r){for(var a=-1,s=null==t?0:t.length,u=Array(s);++a<s;)u[a]=r(t[a],a,t);return u},Js=vt?vt.prototype:void 0,Vu=Js?Js.toString:void 0,$d=function t(r){if("string"==typeof r)return r;if(Xo(r))return Wo(r,t)+"";if(bt(r))return Vu?Vu.call(r):"";var a=r+"";return"0"==a&&1/r==-1/0?"-0":a},ju=function(t){return null==t?"":$d(t)},_a=function(t,r){return Xo(t)?t:function(t,r){if(Xo(t))return!1;var a=typeof t;return!("number"!=a&&"symbol"!=a&&"boolean"!=a&&null!=t&&!bt(t))||Sd.test(t)||!Cd.test(t)||null!=r&&t in Object(r)}(t,r)?[t]:ta(ju(t))},xi=function(t){if("string"==typeof t||bt(t))return t;var r=t+"";return"0"==r&&1/t==-1/0?"-0":r},qu=function(){try{var t=Us(Object,"defineProperty");return t({},"",{}),t}catch{}}(),Zd=Object.prototype.hasOwnProperty,Qd=function(t,r,a){var s=t[r];Zd.call(t,r)&&zu(s,a)&&(void 0!==a||r in t)||function(t,r,a){"__proto__"==r&&qu?qu(t,r,{configurable:!0,enumerable:!0,value:a,writable:!0}):t[r]=a}(t,r,a)},Jd=/^(?:0|[1-9]\d*)$/,eh=function(t,r){var a=typeof t;return!!(r=r??9007199254740991)&&("number"==a||"symbol"!=a&&Jd.test(t))&&t>-1&&t%1==0&&t<r},th=function(t,r,a){return null==t?t:function(t,r,a,s){if(!Fe(t))return t;for(var u=-1,d=(r=_a(r,t)).length,p=d-1,m=t;null!=m&&++u<d;){var v=xi(r[u]),b=a;if("__proto__"===v||"constructor"===v||"prototype"===v)return t;if(u!=p){var w=m[v];void 0===(b=void 0)&&(b=Fe(w)?w:eh(r[u+1])?[]:{})}Qd(m,v,b),m=m[v]}return t}(t,r,a)},Zt={};[kd,{data:function(t){return t=ee({},{field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(r){},beforeSet:function(r,a){},onSet:function(r){},canSet:function(r){return!0}},t),function(r,a){var s=t,u=void 0!==this.length,d=u?this:[this],p=u?this[0]:this;if(C(r)){var m,v=-1!==r.indexOf(".")&&function(t){return Xo(t)?Wo(t,xi):bt(t)?[t]:function(t,r){var a=-1,s=t.length;for(r||(r=Array(s));++a<s;)r[a]=t[a];return r}(ta(ju(t)))}(r);if(s.allowGetting&&void 0===a)return p&&(s.beforeGet(p),m=v&&void 0===p._private[s.field][r]?function(t,r,a){var s=null==t?void 0:function(t,r){for(var a=0,s=(r=_a(r,t)).length;null!=t&&a<s;)t=t[xi(r[a++])];return a&&a==s?t:void 0}(t,r);return void 0===s?a:s}(p._private[s.field],v):p._private[s.field][r]),m;if(s.allowSetting&&void 0!==a&&!s.immutableKeys[r]){var b=l({},r,a);s.beforeSet(this,b);for(var w=0,k=d.length;w<k;w++){var T=d[w];s.canSet(T)&&(v&&void 0===p._private[s.field][r]?th(T._private[s.field],v,a):T._private[s.field][r]=a)}s.updateStyle&&this.updateStyle(),s.onSet(this),s.settingTriggersEvent&&this[s.triggerFnName](s.settingEvent)}}else if(s.allowSetting&&P(r)){var O,D,z=r,V=Object.keys(z);s.beforeSet(this,z);for(var M=0;M<V.length;M++)if(D=z[O=V[M]],!s.immutableKeys[O])for(var R=0;R<d.length;R++){var j=d[R];s.canSet(j)&&(j._private[s.field][O]=D)}s.updateStyle&&this.updateStyle(),s.onSet(this),s.settingTriggersEvent&&this[s.triggerFnName](s.settingEvent)}else if(s.allowBinding&&L(r))this.on(s.bindingEvent,r);else if(s.allowGetting&&void 0===r){var K;return p&&(s.beforeGet(p),K=p._private[s.field]),K}return this}},removeData:function(t){return t=ee({},{field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}},t),function(r){var a=t,s=void 0!==this.length?this:[this];if(C(r)){for(var u=r.split(/\s+/),d=u.length,p=0;p<d;p++){var m=u[p];if(!re(m)&&!a.immutableKeys[m])for(var v=0,b=s.length;v<b;v++)s[v]._private[a.field][m]=void 0}a.triggerEvent&&this[a.triggerFnName](a.event)}else if(void 0===r){for(var w=0,k=s.length;w<k;w++)for(var T=s[w]._private[a.field],O=Object.keys(T),D=0;D<O.length;D++){var z=O[D];!a.immutableKeys[z]&&(T[z]=void 0)}a.triggerEvent&&this[a.triggerFnName](a.event)}return this}}},{eventAliasesOn:function(t){var r=t;r.addListener=r.listen=r.bind=r.on,r.unlisten=r.unbind=r.off=r.removeListener,r.trigger=r.emit,r.pon=r.promiseOn=function(a,s){var u=this,d=Array.prototype.slice.call(arguments,0);return new Ui(function(p,m){var v=d.concat([function(w){u.off.apply(u,b),p(w)}]),b=v.concat([]);u.on.apply(u,v)})}}}].forEach(function(t){ee(Zt,t)});var na={animate:Zt.animate(),animation:Zt.animation(),animated:Zt.animated(),clearQueue:Zt.clearQueue(),delay:Zt.delay(),delayAnimation:Zt.delayAnimation(),stop:Zt.stop()},oo={classes:function(t){if(void 0===t){var r=[];return this[0]._private.classes.forEach(function(k){return r.push(k)}),r}I(t)||(t=(t||"").match(/\S+/g)||[]);for(var a=[],s=new Ti(t),u=0;u<this.length;u++){for(var d=this[u],p=d._private,m=p.classes,v=!1,b=0;b<t.length;b++)if(!m.has(t[b])){v=!0;break}v||(v=m.size!==t.length),v&&(p.classes=s,a.push(d))}return a.length>0&&this.spawn(a).updateStyle().emit("class"),this},addClass:function(t){return this.toggleClass(t,!0)},hasClass:function(t){var r=this[0];return null!=r&&r._private.classes.has(t)},toggleClass:function(t,r){I(t)||(t=t.match(/\S+/g)||[]);for(var a=void 0===r,s=[],u=0,d=this.length;u<d;u++)for(var p=this[u],m=p._private.classes,v=!1,b=0;b<t.length;b++){var w=t[b],k=m.has(w),T=!1;r||a&&!k?(m.add(w),T=!0):(!r||a&&k)&&(m.delete(w),T=!0),!v&&T&&(s.push(p),v=!0)}return s.length>0&&this.spawn(s).updateStyle().emit("class"),this},removeClass:function(t){return this.toggleClass(t,!1)},flashClass:function(t,r){var a=this;if(null==r)r=250;else if(0===r)return a;return a.addClass(t),setTimeout(function(){a.removeClass(t)},r),a}};oo.className=oo.classNames=oo.classes;var Ht={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:"\"(?:\\\\\"|[^\"])*\"|'(?:\\\\'|[^'])*'",number:fe,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};Ht.variable="(?:[\\w-.]|(?:\\\\"+Ht.metaChar+"))+",Ht.className="(?:[\\w-]|(?:\\\\"+Ht.metaChar+"))+",Ht.value=Ht.string+"|"+Ht.number,Ht.id=Ht.variable,function(){var t,r,a;for(t=Ht.comparatorOp.split("|"),a=0;a<t.length;a++)Ht.comparatorOp+="|@"+(r=t[a]);for(t=Ht.comparatorOp.split("|"),a=0;a<t.length;a++)(r=t[a]).indexOf("!")>=0||"="!==r&&(Ht.comparatorOp+="|\\!"+r)}();var q=[{selector:":selected",matches:function(t){return t.selected()}},{selector:":unselected",matches:function(t){return!t.selected()}},{selector:":selectable",matches:function(t){return t.selectable()}},{selector:":unselectable",matches:function(t){return!t.selectable()}},{selector:":locked",matches:function(t){return t.locked()}},{selector:":unlocked",matches:function(t){return!t.locked()}},{selector:":visible",matches:function(t){return t.visible()}},{selector:":hidden",matches:function(t){return!t.visible()}},{selector:":transparent",matches:function(t){return t.transparent()}},{selector:":grabbed",matches:function(t){return t.grabbed()}},{selector:":free",matches:function(t){return!t.grabbed()}},{selector:":removed",matches:function(t){return t.removed()}},{selector:":inside",matches:function(t){return!t.removed()}},{selector:":grabbable",matches:function(t){return t.grabbable()}},{selector:":ungrabbable",matches:function(t){return!t.grabbable()}},{selector:":animated",matches:function(t){return t.animated()}},{selector:":unanimated",matches:function(t){return!t.animated()}},{selector:":parent",matches:function(t){return t.isParent()}},{selector:":childless",matches:function(t){return t.isChildless()}},{selector:":child",matches:function(t){return t.isChild()}},{selector:":orphan",matches:function(t){return t.isOrphan()}},{selector:":nonorphan",matches:function(t){return t.isChild()}},{selector:":compound",matches:function(t){return t.isNode()?t.isParent():t.source().isParent()||t.target().isParent()}},{selector:":loop",matches:function(t){return t.isLoop()}},{selector:":simple",matches:function(t){return t.isSimple()}},{selector:":active",matches:function(t){return t.active()}},{selector:":inactive",matches:function(t){return!t.active()}},{selector:":backgrounding",matches:function(t){return t.backgrounding()}},{selector:":nonbackgrounding",matches:function(t){return!t.backgrounding()}}].sort(function(t,r){return-1*ge(t.selector,r.selector)}),E=function(){for(var t,r={},a=0;a<q.length;a++)r[(t=q[a]).selector]=t.matches;return r}(),N="("+q.map(function(t){return t.selector}).join("|")+")",J=function(t){return t.replace(new RegExp("\\\\("+Ht.metaChar+")","g"),function(r,a){return a})},Ee=function(t,r,a){t[t.length-1]=a},Pe=[{name:"group",query:!0,regex:"("+Ht.group+")",populate:function(t,r,a){var s=c(a,1)[0];r.checks.push({type:0,value:"*"===s?s:s+"s"})}},{name:"state",query:!0,regex:N,populate:function(t,r,a){var s=c(a,1)[0];r.checks.push({type:7,value:s})}},{name:"id",query:!0,regex:"\\#("+Ht.id+")",populate:function(t,r,a){var s=c(a,1)[0];r.checks.push({type:8,value:J(s)})}},{name:"className",query:!0,regex:"\\.("+Ht.className+")",populate:function(t,r,a){var s=c(a,1)[0];r.checks.push({type:9,value:J(s)})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+Ht.variable+")\\s*\\]",populate:function(t,r,a){var s=c(a,1)[0];r.checks.push({type:4,field:J(s)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+Ht.variable+")\\s*("+Ht.comparatorOp+")\\s*("+Ht.value+")\\s*\\]",populate:function(t,r,a){var s=c(a,3),u=s[0],d=s[1],p=s[2];p=null!=new RegExp("^"+Ht.string+"$").exec(p)?p.substring(1,p.length-1):parseFloat(p),r.checks.push({type:3,field:J(u),operator:d,value:p})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+Ht.boolOp+")\\s*("+Ht.variable+")\\s*\\]",populate:function(t,r,a){var s=c(a,2),u=s[0];r.checks.push({type:5,field:J(s[1]),operator:u})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+Ht.meta+")\\s*("+Ht.comparatorOp+")\\s*("+Ht.number+")\\s*\\]\\]",populate:function(t,r,a){var s=c(a,3),d=s[1],p=s[2];r.checks.push({type:6,field:J(s[0]),operator:d,value:parseFloat(p)})}},{name:"nextQuery",separator:!0,regex:Ht.separator,populate:function(t,r){var a=t.currentSubject,s=t.edgeCount,u=t.compoundCount,d=t[t.length-1];return null!=a&&(d.subject=a,t.currentSubject=null),d.edgeCount=s,d.compoundCount=u,t.edgeCount=0,t.compoundCount=0,t[t.length++]={checks:[]}}},{name:"directedEdge",separator:!0,regex:Ht.directedEdge,populate:function(t,r){if(null==t.currentSubject){var a={checks:[]},u={checks:[]};return a.checks.push({type:11,source:r,target:u}),Ee(t,0,a),t.edgeCount++,u}var d={checks:[]},m={checks:[]};return d.checks.push({type:12,source:r,target:m}),Ee(t,0,d),t.edgeCount++,m}},{name:"undirectedEdge",separator:!0,regex:Ht.undirectedEdge,populate:function(t,r){if(null==t.currentSubject){var a={checks:[]},u={checks:[]};return a.checks.push({type:10,nodes:[r,u]}),Ee(t,0,a),t.edgeCount++,u}var d={checks:[]},m={checks:[]};return d.checks.push({type:14,node:r,neighbor:m}),Ee(t,0,d),m}},{name:"child",separator:!0,regex:Ht.child,populate:function(t,r){if(null==t.currentSubject){var a={checks:[]},s={checks:[]};return a.checks.push({type:15,parent:t[t.length-1],child:s}),Ee(t,0,a),t.compoundCount++,s}if(t.currentSubject===r){var d={checks:[]},m={checks:[]},v={checks:[]},b={checks:[]},w={checks:[]};return d.checks.push({type:19,left:t[t.length-1],right:m,subject:v}),v.checks=r.checks,r.checks=[{type:20}],w.checks.push({type:20}),m.checks.push({type:17,parent:w,child:b}),Ee(t,0,d),t.currentSubject=v,t.compoundCount++,b}var k={checks:[]},T={checks:[]},O=[{type:17,parent:k,child:T}];return k.checks=r.checks,r.checks=O,t.compoundCount++,T}},{name:"descendant",separator:!0,regex:Ht.descendant,populate:function(t,r){if(null==t.currentSubject){var a={checks:[]},s={checks:[]};return a.checks.push({type:16,ancestor:t[t.length-1],descendant:s}),Ee(t,0,a),t.compoundCount++,s}if(t.currentSubject===r){var d={checks:[]},m={checks:[]},v={checks:[]},b={checks:[]},w={checks:[]};return d.checks.push({type:19,left:t[t.length-1],right:m,subject:v}),v.checks=r.checks,r.checks=[{type:20}],w.checks.push({type:20}),m.checks.push({type:18,ancestor:w,descendant:b}),Ee(t,0,d),t.currentSubject=v,t.compoundCount++,b}var k={checks:[]},T={checks:[]},O=[{type:18,ancestor:k,descendant:T}];return k.checks=r.checks,r.checks=O,t.compoundCount++,T}},{name:"subject",modifier:!0,regex:Ht.subject,populate:function(t,r){if(null!=t.currentSubject&&t.currentSubject!==r)return nn("Redefinition of subject in selector `"+t.toString()+"`"),!1;t.currentSubject=r;var a=t[t.length-1].checks[0],s=null==a?null:a.type;11===s?a.type=13:10===s&&(a.type=14,a.node=a.nodes[1],a.neighbor=a.nodes[0],a.nodes=null)}}];Pe.forEach(function(t){return t.regexObj=new RegExp("^"+t.regex)});var Xe=function(t){for(var r,a,s,u=0;u<Pe.length;u++){var d=Pe[u],p=d.name,m=t.match(d.regexObj);if(null!=m){a=m,r=d,s=p,t=t.substring(m[0].length);break}}return{expr:r,match:a,name:s,remaining:t}},Ke={parse:function(t){var b,w,r=this.inputText=t,a=this[0]={checks:[]};for(this.length=1,w=void 0,(w=(b=r).match(/^\s+/))&&(b=b.substring(w[0].length)),r=b;;){var s=Xe(r);if(null==s.expr)return nn("The selector `"+t+"`is invalid"),!1;var u=s.match.slice(1),d=s.expr.populate(this,a,u);if(!1===d)return!1;if(null!=d&&(a=d),(r=s.remaining).match(/^\s*$/))break}var p=this[this.length-1];null!=this.currentSubject&&(p.subject=this.currentSubject),p.edgeCount=this.edgeCount,p.compoundCount=this.compoundCount;for(var m=0;m<this.length;m++){var v=this[m];if(v.compoundCount>0&&v.edgeCount>0)return nn("The selector `"+t+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(v.edgeCount>1)return nn("The selector `"+t+"` is invalid because it uses multiple edge selectors"),!1;1===v.edgeCount&&nn("The selector `"+t+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},toString:function(){if(null!=this.toStringCache)return this.toStringCache;for(var t=function(v){return v??""},r=function(v){return C(v)?'"'+v+'"':t(v)},a=function(v){return" "+v+" "},u=function(v,b){return v.checks.reduce(function(w,k,T){return w+(b===v&&0===T?"$":"")+function(v,b){var k=v.value;switch(v.type){case 0:var T=t(k);return T.substring(0,T.length-1);case 3:return"["+v.field+a(t(v.operator))+r(k)+"]";case 5:var V=v.field;return"["+t(v.operator)+V+"]";case 4:return"["+v.field+"]";case 6:return"[["+v.field+a(t(v.operator))+r(k)+"]]";case 7:return k;case 8:return"#"+k;case 9:return"."+k;case 17:case 15:return u(v.parent,b)+a(">")+u(v.child,b);case 18:case 16:return u(v.ancestor,b)+" "+u(v.descendant,b);case 19:var R=u(v.left,b),j=u(v.subject,b),Q=u(v.right,b);return R+(R.length>0?" ":"")+j+Q;case 20:return""}}(k,b)},"")},d="",p=0;p<this.length;p++){var m=this[p];d+=u(m,m.subject),this.length>1&&p<this.length-1&&(d+=", ")}return this.toStringCache=d,d}},ut=function(t,r,a){var s,u,d,p=C(t),m=B(t),v=C(a),b=!1,w=!1,k=!1;switch(r.indexOf("!")>=0&&(r=r.replace("!",""),w=!0),r.indexOf("@")>=0&&(r=r.replace("@",""),b=!0),(p||v||b)&&(u=p||m?""+t:"",d=""+a),b&&(t=u=u.toLowerCase(),a=d=d.toLowerCase()),r){case"*=":s=u.indexOf(d)>=0;break;case"$=":s=u.indexOf(d,u.length-d.length)>=0;break;case"^=":s=0===u.indexOf(d);break;case"=":s=t===a;break;case">":k=!0,s=t>a;break;case">=":k=!0,s=t>=a;break;case"<":k=!0,s=t<a;break;case"<=":k=!0,s=t<=a;break;default:s=!1}return!w||null==t&&k||(s=!s),s},Et=function(t,r){return t.data(r)},lt=[],tt=function(t,r){return t.checks.every(function(a){return lt[a.type](a,r)})};lt[0]=function(t,r){var a=t.value;return"*"===a||a===r.group()},lt[7]=function(t,r){return E[t.value](r)},lt[8]=function(t,r){var a=t.value;return r.id()===a},lt[9]=function(t,r){return r.hasClass(t.value)},lt[6]=function(t,r){var s=t.operator,u=t.value;return ut(r[t.field](),s,u)},lt[3]=function(t,r){var s=t.operator,u=t.value;return ut(Et(r,t.field),s,u)},lt[5]=function(t,r){var s=t.operator;return function(u,d){switch(d){case"?":return!!u;case"!":return!u;case"^":return void 0===u}}(Et(r,t.field),s)},lt[4]=function(t,r){return void 0!==Et(r,t.field)},lt[10]=function(t,r){var a=t.nodes[0],s=t.nodes[1],u=r.source(),d=r.target();return tt(a,u)&&tt(s,d)||tt(s,u)&&tt(a,d)},lt[14]=function(t,r){return tt(t.node,r)&&r.neighborhood().some(function(a){return a.isNode()&&tt(t.neighbor,a)})},lt[11]=function(t,r){return tt(t.source,r.source())&&tt(t.target,r.target())},lt[12]=function(t,r){return tt(t.source,r)&&r.outgoers().some(function(a){return a.isNode()&&tt(t.target,a)})},lt[13]=function(t,r){return tt(t.target,r)&&r.incomers().some(function(a){return a.isNode()&&tt(t.source,a)})},lt[15]=function(t,r){return tt(t.child,r)&&tt(t.parent,r.parent())},lt[17]=function(t,r){return tt(t.parent,r)&&r.children().some(function(a){return tt(t.child,a)})},lt[16]=function(t,r){return tt(t.descendant,r)&&r.ancestors().some(function(a){return tt(t.ancestor,a)})},lt[18]=function(t,r){return tt(t.ancestor,r)&&r.descendants().some(function(a){return tt(t.descendant,a)})},lt[19]=function(t,r){return tt(t.subject,r)&&tt(t.left,r)&&tt(t.right,r)},lt[20]=function(){return!0},lt[1]=function(t,r){return t.value.has(r)},lt[2]=function(t,r){return(0,t.value)(r)};var Rt=function(t){this.inputText=t,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,null==t||C(t)&&t.match(/^\s*$/)||(G(t)?this.addQuery({checks:[{type:1,value:t.collection()}]}):L(t)?this.addQuery({checks:[{type:2,value:t}]}):C(t)?this.parse(t)||(this.invalid=!0):$t("A selector must be created from a string; found "))},At=Rt.prototype;[Ke,{matches:function(t){for(var r=0;r<this.length;r++)if(tt(this[r],t))return!0;return!1},filter:function(t){var r=this;if(1===r.length&&1===r[0].checks.length&&8===r[0].checks[0].type)return t.getElementById(r[0].checks[0].value).collection();var a=function(s){for(var u=0;u<r.length;u++)if(tt(r[u],s))return!0;return!1};return null==r.text()&&(a=function(){return!0}),t.filter(a)}}].forEach(function(t){return ee(At,t)}),At.text=function(){return this.inputText},At.size=function(){return this.length},At.eq=function(t){return this[t]},At.sameText=function(t){return!this.invalid&&!t.invalid&&this.text()===t.text()},At.addQuery=function(t){this[this.length++]=t},At.selector=At.toString;var Nt={allAre:function(t){var r=new Rt(t);return this.every(function(a){return r.matches(a)})},is:function(t){var r=new Rt(t);return this.some(function(a){return r.matches(a)})},some:function(t,r){for(var a=0;a<this.length;a++)if(r?t.apply(r,[this[a],a,this]):t(this[a],a,this))return!0;return!1},every:function(t,r){for(var a=0;a<this.length;a++)if(!(r?t.apply(r,[this[a],a,this]):t(this[a],a,this)))return!1;return!0},same:function(t){if(this===t)return!0;t=this.cy().collection(t);var r=this.length;return r===t.length&&(1===r?this[0]===t[0]:this.every(function(a){return t.hasElementWithId(a.id())}))},anySame:function(t){return t=this.cy().collection(t),this.some(function(r){return t.hasElementWithId(r.id())})},allAreNeighbors:function(t){t=this.cy().collection(t);var r=this.neighborhood();return t.every(function(a){return r.hasElementWithId(a.id())})},contains:function(t){t=this.cy().collection(t);var r=this;return t.every(function(a){return r.hasElementWithId(a.id())})}};Nt.allAreNeighbours=Nt.allAreNeighbors,Nt.has=Nt.contains,Nt.equal=Nt.equals=Nt.same;var zt,Ft,Xt=function(t,r){return function(a,s,u,d){var p,m=a;if(null==m?p="":G(m)&&1===m.length&&(p=m.id()),1===this.length&&p){var v=this[0]._private,b=v.traversalCache=v.traversalCache||{},w=b[r]=b[r]||[],k=Ar(p);return w[k]||(w[k]=t.call(this,a,s,u,d))}return t.call(this,a,s,u,d)}},Qt={parent:function(t){var r=[];if(1===this.length){var a=this[0]._private.parent;if(a)return a}for(var s=0;s<this.length;s++){var u=this[s]._private.parent;u&&r.push(u)}return this.spawn(r,!0).filter(t)},parents:function(t){for(var r=[],a=this.parent();a.nonempty();){for(var s=0;s<a.length;s++)r.push(a[s]);a=a.parent()}return this.spawn(r,!0).filter(t)},commonAncestors:function(t){for(var r,a=0;a<this.length;a++){var s=this[a].parents();r=(r=r||s).intersect(s)}return r.filter(t)},orphans:function(t){return this.stdFilter(function(r){return r.isOrphan()}).filter(t)},nonorphans:function(t){return this.stdFilter(function(r){return r.isChild()}).filter(t)},children:Xt(function(t){for(var r=[],a=0;a<this.length;a++)for(var s=this[a]._private.children,u=0;u<s.length;u++)r.push(s[u]);return this.spawn(r,!0).filter(t)},"children"),siblings:function(t){return this.parent().children().not(this).filter(t)},isParent:function(){var t=this[0];if(t)return t.isNode()&&0!==t._private.children.length},isChildless:function(){var t=this[0];if(t)return t.isNode()&&0===t._private.children.length},isChild:function(){var t=this[0];if(t)return t.isNode()&&null!=t._private.parent},isOrphan:function(){var t=this[0];if(t)return t.isNode()&&null==t._private.parent},descendants:function(t){var r=[];return function a(s){for(var u=0;u<s.length;u++){var d=s[u];r.push(d),d.children().nonempty()&&a(d.children())}}(this.children()),this.spawn(r,!0).filter(t)}};function qt(t,r,a,s){for(var u=[],d=new Ti,p=t.cy().hasCompoundNodes(),m=0;m<t.length;m++){var v=t[m];a?u.push(v):p&&s(u,d,v)}for(;u.length>0;){var b=u.shift();r(b),d.add(b.id()),p&&s(u,d,b)}return t}function Gt(t,r,a){if(a.isParent())for(var s=a._private.children,u=0;u<s.length;u++){var d=s[u];r.has(d.id())||t.push(d)}}function Vt(t,r,a){if(a.isChild()){var s=a._private.parent;r.has(s.id())||t.push(s)}}function Wt(t,r,a){Vt(t,r,a),Gt(t,r,a)}Qt.forEachDown=function(t){return qt(this,t,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],Gt)},Qt.forEachUp=function(t){return qt(this,t,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],Vt)},Qt.forEachUpAndDown=function(t){return qt(this,t,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],Wt)},Qt.ancestors=Qt.parents,(zt=Ft={data:Zt.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:Zt.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:Zt.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:Zt.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:Zt.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:Zt.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var t=this[0];if(t)return t._private.data.id}}).attr=zt.data,zt.removeAttr=zt.removeData;var Yt,cn,dn=Ft,bn={};function ir(t){return function(r){if(void 0===r&&(r=!0),0!==this.length&&this.isNode()&&!this.removed()){for(var a=0,s=this[0],u=s._private.edges,d=0;d<u.length;d++){var p=u[d];!r&&p.isLoop()||(a+=t(s,p))}return a}}}function Kn(t,r){return function(a){for(var s,u=this.nodes(),d=0;d<u.length;d++){var p=u[d][t](a);void 0===p||void 0!==s&&!r(p,s)||(s=p)}return s}}ee(bn,{degree:ir(function(t,r){return r.source().same(r.target())?2:1}),indegree:ir(function(t,r){return r.target().same(t)?1:0}),outdegree:ir(function(t,r){return r.source().same(t)?1:0})}),ee(bn,{minDegree:Kn("degree",function(t,r){return t<r}),maxDegree:Kn("degree",function(t,r){return t>r}),minIndegree:Kn("indegree",function(t,r){return t<r}),maxIndegree:Kn("indegree",function(t,r){return t>r}),minOutdegree:Kn("outdegree",function(t,r){return t<r}),maxOutdegree:Kn("outdegree",function(t,r){return t>r})}),ee(bn,{totalDegree:function(t){for(var r=0,a=this.nodes(),s=0;s<a.length;s++)r+=a[s].degree(t);return r}});var Gn=function(t,r,a){for(var s=0;s<t.length;s++){var u=t[s];if(!u.locked()){var d=u._private.position,p={x:null!=r.x?r.x-d.x:0,y:null!=r.y?r.y-d.y:0};!u.isParent()||0===p.x&&0===p.y||u.children().shift(p,a),u.dirtyBoundingBoxCache()}}},Nr={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(t){t.updateCompoundBounds()},beforeSet:function(t,r){Gn(t,r,!1)},onSet:function(t){t.dirtyCompoundBoundsCache()},canSet:function(t){return!t.locked()}};(Yt=cn={position:Zt.data(Nr),silentPosition:Zt.data(ee({},Nr,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(t,r){Gn(t,r,!0)},onSet:function(t){t.dirtyCompoundBoundsCache()}})),positions:function(t,r){if(P(t))r?this.silentPosition(t):this.position(t);else if(L(t)){var a=t,s=this.cy();s.startBatch();for(var u=0;u<this.length;u++){var d,p=this[u];(d=a(p,u))&&(r?p.silentPosition(d):p.position(d))}s.endBatch()}return this},silentPositions:function(t){return this.positions(t,!0)},shift:function(t,r,a){var s;if(P(t)?(s={x:B(t.x)?t.x:0,y:B(t.y)?t.y:0},a=r):C(t)&&B(r)&&((s={x:0,y:0})[t]=r),null!=s){var u=this.cy();u.startBatch();for(var d=0;d<this.length;d++){var p=this[d];if(!(u.hasCompoundNodes()&&p.isChild()&&p.ancestors().anySame(this))){var m=p.position(),v={x:m.x+s.x,y:m.y+s.y};a?p.silentPosition(v):p.position(v)}}u.endBatch()}return this},silentShift:function(t,r){return P(t)?this.shift(t,!0):C(t)&&B(r)&&this.shift(t,r,!0),this},renderedPosition:function(t,r){var a=this[0],s=this.cy(),u=s.zoom(),d=s.pan(),p=P(t)?t:void 0,m=void 0!==p||void 0!==r&&C(t);if(a&&a.isNode()){if(!m){var v=a.position();return p=rr(v,u,d),void 0===t?p:p[t]}for(var b=0;b<this.length;b++){var w=this[b];void 0!==r?w.position(t,(r-d[t])/u):void 0!==p&&w.position(Lo(p,u,d))}}else if(!m)return;return this},relativePosition:function(t,r){var a=this[0],s=this.cy(),u=P(t)?t:void 0,d=void 0!==u||void 0!==r&&C(t),p=s.hasCompoundNodes();if(a&&a.isNode()){if(!d){var m=a.position(),v=p?a.parent():null,b=v&&v.length>0;b&&(v=v[0]);var k=b?v.position():{x:0,y:0};return u={x:m.x-k.x,y:m.y-k.y},void 0===t?u:u[t]}for(var T=0;T<this.length;T++){var O=this[T],D=p?O.parent():null,z=D&&D.length>0;z&&(D=D[0]);var M=z?D.position():{x:0,y:0};void 0!==r?O.position(t,r+M[t]):void 0!==u&&O.position({x:u.x+M.x,y:u.y+M.y})}}else if(!d)return;return this}}).modelPosition=Yt.point=Yt.position,Yt.modelPositions=Yt.points=Yt.positions,Yt.renderedPoint=Yt.renderedPosition,Yt.relativePoint=Yt.relativePosition;var Vn,hn,li=cn;Vn=hn={},hn.renderedBoundingBox=function(t){var r=this.boundingBox(t),a=this.cy(),s=a.zoom(),u=a.pan(),d=r.x1*s+u.x,p=r.x2*s+u.x,m=r.y1*s+u.y,v=r.y2*s+u.y;return{x1:d,x2:p,y1:m,y2:v,w:p-d,h:v-m}},hn.dirtyCompoundBoundsCache=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=this.cy();return r.styleEnabled()&&r.hasCompoundNodes()?(this.forEachUp(function(a){if(a.isParent()){var s=a._private;s.compoundBoundsClean=!1,s.bbCache=null,t||a.emitAndNotify("bounds")}}),this):this},hn.updateCompoundBounds=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=this.cy();if(!r.styleEnabled()||!r.hasCompoundNodes())return this;if(!t&&r.batching())return this;function a(p){if(p.isParent()){var m=p._private,v=p.children(),b="include"===p.pstyle("compound-sizing-wrt-labels").value,w={width:{val:p.pstyle("min-width").pfValue,left:p.pstyle("min-width-bias-left"),right:p.pstyle("min-width-bias-right")},height:{val:p.pstyle("min-height").pfValue,top:p.pstyle("min-height-bias-top"),bottom:p.pstyle("min-height-bias-bottom")}},k=v.boundingBox({includeLabels:b,includeOverlays:!1,useCache:!1}),T=m.position;0!==k.w&&0!==k.h||((k={w:p.pstyle("width").pfValue,h:p.pstyle("height").pfValue}).x1=T.x-k.w/2,k.x2=T.x+k.w/2,k.y1=T.y-k.h/2,k.y2=T.y+k.h/2);var O=w.width.left.value;"px"===w.width.left.units&&w.width.val>0&&(O=100*O/w.width.val);var D=w.width.right.value;"px"===w.width.right.units&&w.width.val>0&&(D=100*D/w.width.val);var z=w.height.top.value;"px"===w.height.top.units&&w.height.val>0&&(z=100*z/w.height.val);var V=w.height.bottom.value;"px"===w.height.bottom.units&&w.height.val>0&&(V=100*V/w.height.val);var M=W(w.width.val-k.w,O,D),R=M.biasDiff,j=M.biasComplementDiff,Q=W(w.height.val-k.h,z,V),K=Q.biasDiff,Y=Q.biasComplementDiff;m.autoPadding=function(ne,ie,oe,ce){if("%"!==oe.units)return"px"===oe.units?oe.pfValue:0;switch(ce){case"width":return ne>0?oe.pfValue*ne:0;case"height":return ie>0?oe.pfValue*ie:0;case"average":return ne>0&&ie>0?oe.pfValue*(ne+ie)/2:0;case"min":return ne>0&&ie>0?ne>ie?oe.pfValue*ie:oe.pfValue*ne:0;case"max":return ne>0&&ie>0?ne>ie?oe.pfValue*ne:oe.pfValue*ie:0;default:return 0}}(k.w,k.h,p.pstyle("padding"),p.pstyle("padding-relative-to").value),m.autoWidth=Math.max(k.w,w.width.val),T.x=(-R+k.x1+k.x2+j)/2,m.autoHeight=Math.max(k.h,w.height.val),T.y=(-K+k.y1+k.y2+Y)/2}function W(ne,ie,oe){var ce=0,ue=0,he=ie+oe;return ne>0&&he>0&&(ce=ie/he*ne,ue=oe/he*ne),{biasDiff:ce,biasComplementDiff:ue}}}for(var s=0;s<this.length;s++){var u=this[s],d=u._private;d.compoundBoundsClean&&!t||(a(u),r.batching()||(d.compoundBoundsClean=!0))}return this};var On=function(t){return t===1/0||t===-1/0?0:t},Un=function(t,r,a,s,u){s-r!=0&&u-a!=0&&null!=r&&null!=a&&null!=s&&null!=u&&(t.x1=r<t.x1?r:t.x1,t.x2=s>t.x2?s:t.x2,t.y1=a<t.y1?a:t.y1,t.y2=u>t.y2?u:t.y2,t.w=t.x2-t.x1,t.h=t.y2-t.y1)},xn=function(t,r){return null==r?t:Un(t,r.x1,r.y1,r.x2,r.y2)},Jt=function(t,r,a){return Hn(t,r,a)},Fn=function(t,r,a){if(!r.cy().headless()){var s,u,d=r._private,p=d.rstyle,m=p.arrowWidth/2;if("none"!==r.pstyle(a+"-arrow-shape").value){"source"===a?(s=p.srcX,u=p.srcY):"target"===a?(s=p.tgtX,u=p.tgtY):(s=p.midX,u=p.midY);var v=d.arrowBounds=d.arrowBounds||{},b=v[a]=v[a]||{};b.x1=s-m,b.y1=u-m,b.x2=s+m,b.y2=u+m,b.w=b.x2-b.x1,b.h=b.y2-b.y1,Hi(b,1),Un(t,b.x1,b.y1,b.x2,b.y2)}}},mr=function(t,r,a){if(!r.cy().headless()){var s,u=r._private,d=u.rstyle;if(r.pstyle((s=a?a+"-":"")+"label").strValue){var p,m,v,b,w=r.pstyle("text-halign"),k=r.pstyle("text-valign"),T=Jt(d,"labelWidth",a),O=Jt(d,"labelHeight",a),D=Jt(d,"labelX",a),z=Jt(d,"labelY",a),V=r.pstyle(s+"text-margin-x").pfValue,M=r.pstyle(s+"text-margin-y").pfValue,R=r.isEdge(),j=r.pstyle(s+"text-rotation"),Q=r.pstyle("text-outline-width").pfValue,K=r.pstyle("text-border-width").pfValue/2,Y=r.pstyle("text-background-padding").pfValue,W=O,ne=T,ie=ne/2,oe=W/2;if(R)p=D-ie,m=D+ie,v=z-oe,b=z+oe;else{switch(w.value){case"left":p=D-ne,m=D;break;case"center":p=D-ie,m=D+ie;break;case"right":p=D,m=D+ne}switch(k.value){case"top":v=z-W,b=z;break;case"center":v=z-oe,b=z+oe;break;case"bottom":v=z,b=z+W}}p+=V-Math.max(Q,K)-Y-2,m+=V+Math.max(Q,K)+Y+2,v+=M-Math.max(Q,K)-Y-2,b+=M+Math.max(Q,K)+Y+2;var ce=a||"main",ue=u.labelBounds,he=ue[ce]=ue[ce]||{};he.x1=p,he.y1=v,he.x2=m,he.y2=b,he.w=m-p,he.h=b-v;var ke=R&&"autorotate"===j.strValue;if(ke||null!=j.pfValue&&0!==j.pfValue){var me=ke?Jt(u.rstyle,"labelAngle",a):j.pfValue,ye=Math.cos(me),Le=Math.sin(me),De=(p+m)/2,Ve=(v+b)/2;if(!R){switch(w.value){case"left":De=m;break;case"right":De=p}switch(k.value){case"top":Ve=b;break;case"bottom":Ve=v}}var Te=function(dt,yt){return{x:(dt-=De)*ye-(yt-=Ve)*Le+De,y:dt*Le+yt*ye+Ve}},He=Te(p,v),Ye=Te(p,b),qe=Te(m,v),it=Te(m,b);p=Math.min(He.x,Ye.x,qe.x,it.x),m=Math.max(He.x,Ye.x,qe.x,it.x),v=Math.min(He.y,Ye.y,qe.y,it.y),b=Math.max(He.y,Ye.y,qe.y,it.y)}var at=ce+"Rot",nt=ue[at]=ue[at]||{};nt.x1=p,nt.y1=v,nt.x2=m,nt.y2=b,nt.w=m-p,nt.h=b-v,Un(t,p,v,m,b),Un(u.labelBounds.all,p,v,m,b)}return t}},lo=function(t){var r=0,a=function(u){return(u?1:0)<<r++},s=0;return s+=a(t.incudeNodes),s+=a(t.includeEdges),s+=a(t.includeLabels),s+=a(t.includeMainLabels),s+=a(t.includeSourceLabels),s+=a(t.includeTargetLabels),(s+=a(t.includeOverlays))+a(t.includeOutlines)},ll=function(t){if(t.isEdge()){var r=t.source().position(),a=t.target().position(),s=function(u){return Math.round(u)};return u=[s(r.x),s(r.y),s(a.x),s(a.y)],p={value:0,done:!1},m=0,v=u.length,Yr({next:function(){return m<v?p.value=u[m++]:p.done=!0,p}},void 0)}var u,p,m,v;return 0},ul=function(t,r){var a,s=t._private,u=t.isEdge(),d=(null==r?$u:lo(r))===$u,p=ll(t),m=s.bbCachePosKey===p,v=r.useCache&&m,b=function(k){return null==k._private.bbCache||k._private.styleDirty};if(!v||b(t)||u&&b(t.source())||b(t.target())?(m||t.recalculateRenderedStyle(v),a=function(t,r){var a,s,u,d,p,m,v,b=t._private.cy,w=b.styleEnabled(),k=b.headless(),T=Mn(),O=t._private,D=t.isNode(),z=t.isEdge(),V=O.rstyle,M=D&&w?t.pstyle("bounds-expansion").pfValue:[0],R=function(nt){return"none"!==nt.pstyle("display").value},j=!w||R(t)&&(!z||R(t.source())&&R(t.target()));if(j){var Q=0;w&&r.includeOverlays&&0!==t.pstyle("overlay-opacity").value&&(Q=t.pstyle("overlay-padding").value);var K=0;w&&r.includeUnderlays&&0!==t.pstyle("underlay-opacity").value&&(K=t.pstyle("underlay-padding").value);var Y=Math.max(Q,K),W=0;if(w&&(W=t.pstyle("width").pfValue/2),D&&r.includeNodes){var ne=t.position();p=ne.x,m=ne.y;var ie=t.outerWidth()/2,oe=t.outerHeight()/2;Un(T,a=p-ie,u=m-oe,s=p+ie,d=m+oe),w&&r.includeOutlines&&function(nt,dt){if(!dt.cy().headless()){var yt,$e,xt=dt.pstyle("outline-opacity").value,Tt=dt.pstyle("outline-width").value;if(xt>0&&Tt>0){var ht=dt.pstyle("outline-offset").value,Z=dt.pstyle("shape").value,ve=Tt+ht,Me=(nt.w+2*ve)/nt.w,Ne=(nt.h+2*ve)/nt.h,Be=0;["diamond","pentagon","round-triangle"].includes(Z)?(Me=(nt.w+2.4*ve)/nt.w,Be=-ve/3.6):["concave-hexagon","rhomboid","right-rhomboid"].includes(Z)?Me=(nt.w+2.4*ve)/nt.w:"star"===Z?(Me=(nt.w+2.8*ve)/nt.w,Ne=(nt.h+2.6*ve)/nt.h,Be=-ve/3.8):"triangle"===Z?(Me=(nt.w+2.8*ve)/nt.w,Ne=(nt.h+2.4*ve)/nt.h,Be=-ve/1.4):"vee"===Z&&(Me=(nt.w+4.4*ve)/nt.w,Ne=(nt.h+3.8*ve)/nt.h,Be=.5*-ve);var Qe=nt.w*Me-nt.w;if(Wa(nt,[Math.ceil((nt.h*Ne-nt.h)/2),Math.ceil(Qe/2)]),0!==Be){var Bt={x1:(yt=nt).x1+0,x2:yt.x2+0,y1:yt.y1+($e=Be),y2:yt.y2+$e,w:yt.w,h:yt.h};cu(nt,Bt)}}}}(T,t)}else if(z&&r.includeEdges)if(w&&!k){var ce=t.pstyle("curve-style").strValue;if(a=Math.min(V.srcX,V.midX,V.tgtX),s=Math.max(V.srcX,V.midX,V.tgtX),u=Math.min(V.srcY,V.midY,V.tgtY),d=Math.max(V.srcY,V.midY,V.tgtY),Un(T,a-=W,u-=W,s+=W,d+=W),"haystack"===ce){var ue=V.haystackPts;if(ue&&2===ue.length){if((a=ue[0].x)>(s=ue[1].x)){var he=a;a=s,s=he}if((u=ue[0].y)>(d=ue[1].y)){var ke=u;u=d,d=ke}Un(T,a-W,u-W,s+W,d+W)}}else if("bezier"===ce||"unbundled-bezier"===ce||"segments"===ce||"taxi"===ce){var xe;switch(ce){case"bezier":case"unbundled-bezier":xe=V.bezierPts;break;case"segments":case"taxi":xe=V.linePts}if(null!=xe)for(var me=0;me<xe.length;me++){var ye=xe[me];Un(T,a=ye.x-W,u=ye.y-W,s=ye.x+W,d=ye.y+W)}}}else{var Le=t.source().position(),De=t.target().position();if((a=Le.x)>(s=De.x)){var Ve=a;a=s,s=Ve}if((u=Le.y)>(d=De.y)){var Te=u;u=d,d=Te}Un(T,a-=W,u-=W,s+=W,d+=W)}if(w&&r.includeEdges&&z&&(Fn(T,t,"mid-source"),Fn(T,t,"mid-target"),Fn(T,t,"source"),Fn(T,t,"target")),w&&"yes"===t.pstyle("ghost").value){var He=t.pstyle("ghost-offset-x").pfValue,Ye=t.pstyle("ghost-offset-y").pfValue;Un(T,T.x1+He,T.y1+Ye,T.x2+He,T.y2+Ye)}var qe=O.bodyBounds=O.bodyBounds||{};fa(qe,T),Wa(qe,M),Hi(qe,1),w&&Un(T,(a=T.x1)-Y,(u=T.y1)-Y,(s=T.x2)+Y,(d=T.y2)+Y);var it=O.overlayBounds=O.overlayBounds||{};fa(it,T),Wa(it,M),Hi(it,1);var at=O.labelBounds=O.labelBounds||{};null!=at.all?((v=at.all).x1=1/0,v.y1=1/0,v.x2=-1/0,v.y2=-1/0,v.w=0,v.h=0):at.all=Mn(),w&&r.includeLabels&&(r.includeMainLabels&&mr(T,t,null),z&&(r.includeSourceLabels&&mr(T,t,"source"),r.includeTargetLabels&&mr(T,t,"target")))}return T.x1=On(T.x1),T.y1=On(T.y1),T.x2=On(T.x2),T.y2=On(T.y2),T.w=On(T.x2-T.x1),T.h=On(T.y2-T.y1),T.w>0&&T.h>0&&j&&(Wa(T,M),Hi(T,1)),T}(t,Li),s.bbCache=a,s.bbCachePosKey=p):a=s.bbCache,!d){var w=t.isNode();a=Mn(),(r.includeNodes&&w||r.includeEdges&&!w)&&xn(a,r.includeOverlays?s.overlayBounds:s.bodyBounds),r.includeLabels&&(r.includeMainLabels&&(!u||r.includeSourceLabels&&r.includeTargetLabels)?xn(a,s.labelBounds.all):(r.includeMainLabels&&xn(a,s.labelBounds.mainRot),r.includeSourceLabels&&xn(a,s.labelBounds.sourceRot),r.includeTargetLabels&&xn(a,s.labelBounds.targetRot))),a.w=a.x2-a.x1,a.h=a.y2-a.y1}return a},Li={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,includeOutlines:!0,useCache:!0},$u=lo(Li),Ku=un(Li);hn.boundingBox=function(t){var r;if(1!==this.length||null==this[0]._private.bbCache||this[0]._private.styleDirty||void 0!==t&&void 0!==t.useCache&&!0!==t.useCache){r=Mn();var a=Ku(t=t||Li);if(this.cy().styleEnabled())for(var s=0;s<this.length;s++){var u=this[s],d=u._private,p=ll(u);u.recalculateRenderedStyle(a.useCache&&d.bbCachePosKey===p&&!d.styleDirty)}this.updateCompoundBounds(!t.useCache);for(var b=0;b<this.length;b++)xn(r,ul(this[b],a))}else t=void 0===t?Li:Ku(t),r=ul(this[0],t);return r.x1=On(r.x1),r.y1=On(r.y1),r.x2=On(r.x2),r.y2=On(r.y2),r.w=On(r.x2-r.x1),r.h=On(r.y2-r.y1),r},hn.dirtyBoundingBoxCache=function(){for(var t=0;t<this.length;t++){var r=this[t]._private;r.bbCache=null,r.bbCachePosKey=null,r.bodyBounds=null,r.overlayBounds=null,r.labelBounds.all=null,r.labelBounds.source=null,r.labelBounds.target=null,r.labelBounds.main=null,r.labelBounds.sourceRot=null,r.labelBounds.targetRot=null,r.labelBounds.mainRot=null,r.arrowBounds.source=null,r.arrowBounds.target=null,r.arrowBounds["mid-source"]=null,r.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this},hn.boundingBoxAt=function(t){var r=this.nodes(),a=this.cy(),s=a.hasCompoundNodes(),u=a.collection();if(s&&(u=r.filter(function(m){return m.isParent()}),r=r.not(u)),P(t)){var d=t;t=function(){return d}}a.startBatch(),r.forEach(function(m,v){return m._private.bbAtOldPos=t(m,v)}).silentPositions(t),s&&(u.dirtyCompoundBoundsCache(),u.dirtyBoundingBoxCache(),u.updateCompoundBounds(!0));var m,p={x1:(m=this.boundingBox({useCache:!1})).x1,x2:m.x2,w:m.w,y1:m.y1,y2:m.y2,h:m.h};return r.silentPositions(function(m){return m._private.bbAtOldPos}),s&&(u.dirtyCompoundBoundsCache(),u.dirtyBoundingBoxCache(),u.updateCompoundBounds(!0)),a.endBatch(),p},Vn.boundingbox=Vn.bb=Vn.boundingBox,Vn.renderedBoundingbox=Vn.renderedBoundingBox;var ia,uo,Gu=hn;ia=uo={};var Uu=function(t){t.uppercaseName=be(t.name),t.autoName="auto"+t.uppercaseName,t.labelName="label"+t.uppercaseName,t.outerName="outer"+t.uppercaseName,t.uppercaseOuterName=be(t.outerName),ia[t.name]=function(){var r=this[0],a=r._private;if(r){if(!a.cy._private.styleEnabled)return 1;if(r.isParent())return r.updateCompoundBounds(),a[t.autoName]||0;var u=r.pstyle(t.name);return"label"===u.strValue?(r.recalculateRenderedStyle(),a.rstyle[t.labelName]||0):u.pfValue}},ia["outer"+t.uppercaseName]=function(){var r=this[0];if(r)return r._private.cy._private.styleEnabled?r[t.name]()+r.pstyle("border-width").pfValue+2*r.padding():1},ia["rendered"+t.uppercaseName]=function(){var r=this[0];if(r)return r[t.name]()*this.cy().zoom()},ia["rendered"+t.uppercaseOuterName]=function(){var r=this[0];if(r)return r[t.outerName]()*this.cy().zoom()}};Uu({name:"width"}),Uu({name:"height"}),uo.padding=function(){var t=this[0],r=t._private;return t.isParent()?(t.updateCompoundBounds(),void 0!==r.autoPadding?r.autoPadding:t.pstyle("padding").pfValue):t.pstyle("padding").pfValue},uo.paddedHeight=function(){var t=this[0];return t.height()+2*t.padding()},uo.paddedWidth=function(){var t=this[0];return t.width()+2*t.padding()};var Zu=uo,cl={controlPoints:{get:function(t){return t.renderer().getControlPoints(t)},mult:!0},segmentPoints:{get:function(t){return t.renderer().getSegmentPoints(t)},mult:!0},sourceEndpoint:{get:function(t){return t.renderer().getSourceEndpoint(t)}},targetEndpoint:{get:function(t){return t.renderer().getTargetEndpoint(t)}},midpoint:{get:function(t){return t.renderer().getEdgeMidpoint(t)}}},nh=Object.keys(cl).reduce(function(t,r){var u,a=cl[r],s="rendered"+(u=r)[0].toUpperCase()+u.substr(1);return t[r]=function(){return function(u,d){if(u.isEdge())return d(u)}(this,a.get)},t[s]=a.mult?function(){return function(u,d){if(u.isEdge()){var p=u.cy(),m=p.pan(),v=p.zoom();return d(u).map(function(b){return rr(b,v,m)})}}(this,a.get)}:function(){return function(u,d){if(u.isEdge()){var p=u.cy();return rr(d(u),p.zoom(),p.pan())}}(this,a.get)},t},{}),rh=ee({},li,Gu,Zu,nh),Oi=function(t,r){this.recycle(t,r)};function Ni(){return!1}function co(){return!0}Oi.prototype={instanceString:function(){return"event"},recycle:function(t,r){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=Ni,null!=t&&t.preventDefault?(this.type=t.type,this.isDefaultPrevented=t.defaultPrevented?co:Ni):null!=t&&t.type?r=t:this.type=t,null!=r&&(this.originalEvent=r.originalEvent,this.type=null!=r.type?r.type:this.type,this.cy=r.cy,this.target=r.target,this.position=r.position,this.renderedPosition=r.renderedPosition,this.namespace=r.namespace,this.layout=r.layout),null!=this.cy&&null!=this.position&&null==this.renderedPosition){var a=this.position,s=this.cy.zoom(),u=this.cy.pan();this.renderedPosition={x:a.x*s+u.x,y:a.y*s+u.y}}this.timeStamp=t&&t.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=co;var t=this.originalEvent;t&&t.preventDefault&&t.preventDefault()},stopPropagation:function(){this.isPropagationStopped=co;var t=this.originalEvent;t&&t.stopPropagation&&t.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=co,this.stopPropagation()},isDefaultPrevented:Ni,isPropagationStopped:Ni,isImmediatePropagationStopped:Ni};var dl=/^([^.]+)(\.(?:[^.]+))?$/,Jo={qualifierCompare:function(t,r){return t===r},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(t){return t},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},hl=Object.keys(Jo),Qu={};function ho(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qu,r=arguments.length>1?arguments[1]:void 0,a=0;a<hl.length;a++){var s=hl[a];this[s]=t[s]||Jo[s]}this.context=r||this.context,this.listeners=[],this.emitting=0}var Ei=ho.prototype,Ju=function(t,r,a,s,u,d,p){L(s)&&(u=s,s=null),p&&(d=null==d?p:ee({},d,p));for(var m=I(a)?a:a.split(/\s+/),v=0;v<m.length;v++){var b=m[v];if(!re(b)){var w=b.match(dl);if(w&&!1===r(t,b,w[1],w[2]?w[2]:null,s,u,d))break}}},ec=function(t,r){return t.addEventFields(t.context,r),new Oi(r.type,r)};Ei.on=Ei.addListener=function(t,r,a,s,u){return Ju(this,function(d,p,m,v,b,w,k){L(w)&&d.listeners.push({event:p,callback:w,type:m,namespace:v,qualifier:b,conf:k})},t,r,a,s,u),this},Ei.one=function(t,r,a,s){return this.on(t,r,a,s,{one:!0})},Ei.removeListener=Ei.off=function(t,r,a,s){var u=this;0!==this.emitting&&(this.listeners=this.listeners.slice());for(var d=this.listeners,p=function(v){var b=d[v];Ju(u,function(w,k,T,O,D,z){if((b.type===T||"*"===t)&&(!O&&".*"!==b.namespace||b.namespace===O)&&(!D||w.qualifierCompare(b.qualifier,D))&&(!z||b.callback===z))return d.splice(v,1),!1},t,r,a,s)},m=d.length-1;m>=0;m--)p(m);return this},Ei.removeAllListeners=function(){return this.removeListener("*")},Ei.emit=Ei.trigger=function(t,r,a){var s=this.listeners,u=s.length;return this.emitting++,I(r)||(r=[r]),function(t,r,a){if("event"!==A(a))if(P(a))r(t,ec(t,a));else for(var s=I(a)?a:a.split(/\s+/),u=0;u<s.length;u++){var d=s[u];if(!re(d)){var p=d.match(dl);p&&r(t,ec(t,{type:p[1],namespace:p[2]?p[2]:null,target:t.context}))}}else r(t,a)}(this,function(d,p){null!=a&&(u=(s=[{event:p.event,type:p.type,namespace:p.namespace,callback:a}]).length);for(var m=function(b){var w=s[b];if(w.type===p.type&&(!w.namespace||w.namespace===p.namespace||".*"===w.namespace)&&d.eventMatches(d.context,w,p)){var k=[p];null!=r&&function(D,z){for(var V=0;V<z.length;V++)D.push(z[V])}(k,r),d.beforeEmit(d.context,w,p),w.conf&&w.conf.one&&(d.listeners=d.listeners.filter(function(D){return D!==w}));var T=d.callbackContext(d.context,w,p),O=w.callback.apply(T,k);d.afterEmit(d.context,w,p),!1===O&&(p.stopPropagation(),p.preventDefault())}},v=0;v<u;v++)m(v);d.bubble(d.context)&&!p.isPropagationStopped()&&d.parent(d.context).emit(p,r)},t),this.emitting--,this};var tc={qualifierCompare:function(t,r){return null==t||null==r?null==t&&null==r:t.sameText(r)},eventMatches:function(t,r,a){var s=r.qualifier;return null==s||t!==a.target&&$(a.target)&&s.matches(a.target)},addEventFields:function(t,r){r.cy=t.cy(),r.target=t},callbackContext:function(t,r,a){return null!=r.qualifier?a.target:t},beforeEmit:function(t,r){r.conf&&r.conf.once&&r.conf.onceCollection.removeListener(r.event,r.qualifier,r.callback)},bubble:function(){return!0},parent:function(t){return t.isChild()?t.parent():t.cy()}},nc=function(t){return C(t)?new Rt(t):t},wp={createEmitter:function(){for(var t=0;t<this.length;t++){var r=this[t],a=r._private;a.emitter||(a.emitter=new ho(tc,r))}return this},emitter:function(){return this._private.emitter},on:function(t,r,a){for(var s=nc(r),u=0;u<this.length;u++)this[u].emitter().on(t,s,a);return this},removeListener:function(t,r,a){for(var s=nc(r),u=0;u<this.length;u++)this[u].emitter().removeListener(t,s,a);return this},removeAllListeners:function(){for(var t=0;t<this.length;t++)this[t].emitter().removeAllListeners();return this},one:function(t,r,a){for(var s=nc(r),u=0;u<this.length;u++)this[u].emitter().one(t,s,a);return this},once:function(t,r,a){for(var s=nc(r),u=0;u<this.length;u++)this[u].emitter().on(t,s,a,{once:!0,onceCollection:this})},emit:function(t,r){for(var a=0;a<this.length;a++)this[a].emitter().emit(t,r);return this},emitAndNotify:function(t,r){if(0!==this.length)return this.cy().notify(t,this),this.emit(t,r),this}};Zt.eventAliasesOn(wp);var Ep={nodes:function(t){return this.filter(function(r){return r.isNode()}).filter(t)},edges:function(t){return this.filter(function(r){return r.isEdge()}).filter(t)},byGroup:function(){for(var t=this.spawn(),r=this.spawn(),a=0;a<this.length;a++){var s=this[a];s.isNode()?t.push(s):r.push(s)}return{nodes:t,edges:r}},filter:function(t,r){if(void 0===t)return this;if(C(t)||G(t))return new Rt(t).filter(this);if(L(t)){for(var a=this.spawn(),s=0;s<this.length;s++){var u=this[s];(r?t.apply(r,[u,s,this]):t(u,s,this))&&a.push(u)}return a}return this.spawn()},not:function(t){if(t){C(t)&&(t=this.filter(t));for(var r=this.spawn(),a=0;a<this.length;a++){var s=this[a];t.has(s)||r.push(s)}return r}return this},absoluteComplement:function(){return this.cy().mutableElements().not(this)},intersect:function(t){if(C(t))return this.filter(t);for(var a=this.spawn(),u=this.length<t.length,d=u?this:t,p=u?t:this,m=0;m<d.length;m++){var v=d[m];p.has(v)&&a.push(v)}return a},xor:function(t){var r=this._private.cy;C(t)&&(t=r.$(t));var a=this.spawn(),s=t,u=function(d,p){for(var m=0;m<d.length;m++){var v=d[m];p.hasElementWithId(v._private.data.id)||a.push(v)}};return u(this,s),u(s,this),a},diff:function(t){var r=this._private.cy;C(t)&&(t=r.$(t));var a=this.spawn(),s=this.spawn(),u=this.spawn(),d=t,p=function(m,v,b){for(var w=0;w<m.length;w++){var k=m[w];v.hasElementWithId(k._private.data.id)?u.merge(k):b.push(k)}};return p(this,d,a),p(d,this,s),{left:a,right:s,both:u}},add:function(t){var r=this._private.cy;if(!t)return this;if(C(t)){var a=t;t=r.mutableElements().filter(a)}for(var s=this.spawnSelf(),u=0;u<t.length;u++){var d=t[u];!this.has(d)&&s.push(d)}return s},merge:function(t){var r=this._private,a=r.cy;if(!t)return this;if(t&&C(t)){var s=t;t=a.mutableElements().filter(s)}for(var u=r.map,d=0;d<t.length;d++){var p=t[d],m=p._private.data.id;if(!u.has(m)){var v=this.length++;this[v]=p,u.set(m,{ele:p,index:v})}}return this},unmergeAt:function(t){var r=this[t].id(),a=this._private.map;if(this[t]=void 0,a.delete(r),this.length>1&&t!==this.length-1){var u=this.length-1,d=this[u],p=d._private.data.id;this[u]=void 0,this[t]=d,a.set(p,{ele:d,index:t})}return this.length--,this},unmergeOne:function(t){var s=this._private.map.get((t=t[0])._private.data.id);return s?(this.unmergeAt(s.index),this):this},unmerge:function(t){var r=this._private.cy;if(!t)return this;if(t&&C(t)){var a=t;t=r.mutableElements().filter(a)}for(var s=0;s<t.length;s++)this.unmergeOne(t[s]);return this},unmergeBy:function(t){for(var r=this.length-1;r>=0;r--)t(this[r])&&this.unmergeAt(r);return this},map:function(t,r){for(var a=[],s=0;s<this.length;s++){var u=this[s],d=r?t.apply(r,[u,s,this]):t(u,s,this);a.push(d)}return a},reduce:function(t,r){for(var a=r,s=0;s<this.length;s++)a=t(a,this[s],s,this);return a},max:function(t,r){for(var a,s=-1/0,u=0;u<this.length;u++){var d=this[u],p=r?t.apply(r,[d,u,this]):t(d,u,this);p>s&&(s=p,a=d)}return{value:s,ele:a}},min:function(t,r){for(var a,s=1/0,u=0;u<this.length;u++){var d=this[u],p=r?t.apply(r,[d,u,this]):t(d,u,this);p<s&&(s=p,a=d)}return{value:s,ele:a}}},rn=Ep;rn.u=rn["|"]=rn["+"]=rn.union=rn.or=rn.add,rn["\\"]=rn["!"]=rn["-"]=rn.difference=rn.relativeComplement=rn.subtract=rn.not,rn.n=rn["&"]=rn["."]=rn.and=rn.intersection=rn.intersect,rn["^"]=rn["(+)"]=rn["(-)"]=rn.symmetricDifference=rn.symdiff=rn.xor,rn.fnFilter=rn.filterFn=rn.stdFilter=rn.filter,rn.complement=rn.abscomp=rn.absoluteComplement;var _p=function(t,r){var a=t.cy().hasCompoundNodes();function s(v){var b=v.pstyle("z-compound-depth");return"auto"===b.value?a?v.zDepth():0:"bottom"===b.value?-1:"top"===b.value?Br:0}var u=s(t)-s(r);if(0!==u)return u;function d(v){return"auto"===v.pstyle("z-index-compare").value&&v.isNode()?1:0}var p=d(t)-d(r);if(0!==p)return p;var m=t.pstyle("z-index").value-r.pstyle("z-index").value;return 0!==m?m:t.poolIndex()-r.poolIndex()},rc={forEach:function(t,r){if(L(t))for(var a=this.length,s=0;s<a;s++){var u=this[s];if(!1===(r?t.apply(r,[u,s,this]):t(u,s,this)))break}return this},toArray:function(){for(var t=[],r=0;r<this.length;r++)t.push(this[r]);return t},slice:function(t,r){var a=[],s=this.length;null==r&&(r=s),null==t&&(t=0),t<0&&(t=s+t),r<0&&(r=s+r);for(var u=t;u>=0&&u<r&&u<s;u++)a.push(this[u]);return this.spawn(a)},size:function(){return this.length},eq:function(t){return this[t]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return 0===this.length},nonempty:function(){return!this.empty()},sort:function(t){if(!L(t))return this;var r=this.toArray().sort(t);return this.spawn(r)},sortByZIndex:function(){return this.sort(_p)},zDepth:function(){var t=this[0];if(t){var r=t._private;if("nodes"===r.group){var a=r.data.parent?t.parents().size():0;return t.isParent()?a:Br-1}var u=r.target,d=r.source.zDepth(),p=u.zDepth();return Math.max(d,p,0)}}};rc.each=rc.forEach,"undefined"!=(typeof Symbol>"u"?"undefined":e(Symbol))&&"undefined"!=e(Symbol.iterator)&&(rc[Symbol.iterator]=function(){var t=this,r={value:void 0,done:!1},a=0,s=this.length;return l({next:function(){return a<s?r.value=t[a++]:(r.value=void 0,r.done=!0),r}},Symbol.iterator,function(){return this})});var ym=un({nodeDimensionsIncludeLabels:!1}),ic={layoutDimensions:function(t){var r;if(t=ym(t),this.takesUpSpace())if(t.nodeDimensionsIncludeLabels){var a=this.boundingBox();r={w:a.w,h:a.h}}else r={w:this.outerWidth(),h:this.outerHeight()};else r={w:0,h:0};return 0!==r.w&&0!==r.h||(r.w=r.h=1),r},layoutPositions:function(t,r,a){var s=this.nodes().filter(function(M){return!M.isParent()}),u=this.cy(),d=r.eles,p=function(M){return M.id()},m=le(a,p);t.emit({type:"layoutstart",layout:t}),t.animations=[];var v=r.spacingFactor&&1!==r.spacingFactor,b=function(){if(!v)return null;for(var M=Mn(),R=0;R<s.length;R++){var Q=m(s[R],R);Mi(M,Q.x,Q.y)}return M}(),w=le(function(M,R){var Q,K,Y,W,ne,j=m(M,R);return v&&(Q=Math.abs(r.spacingFactor),j={x:(W=(K=b).x1+K.w/2)+((Y=j).x-W)*Q,y:(ne=K.y1+K.h/2)+(Y.y-ne)*Q}),null!=r.transform&&(j=r.transform(M,j)),j},p);if(r.animate){for(var k=0;k<s.length;k++){var T=s[k],O=w(T,k);if(null==r.animateFilter||r.animateFilter(T,k)){var D=T.animation({position:O,duration:r.animationDuration,easing:r.animationEasing});t.animations.push(D)}else T.position(O)}if(r.fit){var z=u.animation({fit:{boundingBox:d.boundingBoxAt(w),padding:r.padding},duration:r.animationDuration,easing:r.animationEasing});t.animations.push(z)}else if(void 0!==r.zoom&&void 0!==r.pan){var V=u.animation({zoom:r.zoom,pan:r.pan,duration:r.animationDuration,easing:r.animationEasing});t.animations.push(V)}t.animations.forEach(function(M){return M.play()}),t.one("layoutready",r.ready),t.emit({type:"layoutready",layout:t}),Ui.all(t.animations.map(function(M){return M.promise()})).then(function(){t.one("layoutstop",r.stop),t.emit({type:"layoutstop",layout:t})})}else s.positions(w),r.fit&&u.fit(r.eles,r.padding),null!=r.zoom&&u.zoom(r.zoom),r.pan&&u.pan(r.pan),t.one("layoutready",r.ready),t.emit({type:"layoutready",layout:t}),t.one("layoutstop",r.stop),t.emit({type:"layoutstop",layout:t});return this},layout:function(t){return this.cy().makeLayout(ee({},t,{eles:this}))}};function kp(t,r,a){var s,u=a._private,d=u.styleCache=u.styleCache||[];return null!=(s=d[t])?s:s=d[t]=r(a)}function ac(t,r){return t=Ar(t),function(a){return kp(t,r,a)}}function oc(t,r){t=Ar(t);var a=function(s){return r.call(s)};return function(){var s=this[0];if(s)return kp(t,a,s)}}ic.createLayout=ic.makeLayout=ic.layout;var ar={recalculateRenderedStyle:function(t){var r=this.cy(),a=r.renderer(),s=r.styleEnabled();return a&&s&&a.recalculateRenderedStyle(this,t),this},dirtyStyleCache:function(){var t,r=this.cy(),a=function(s){return s._private.styleCache=null};return r.hasCompoundNodes()?((t=this.spawnSelf().merge(this.descendants()).merge(this.parents())).merge(t.connectedEdges()),t.forEach(a)):this.forEach(function(s){a(s),s.connectedEdges().forEach(a)}),this},updateStyle:function(t){var r=this._private.cy;if(!r.styleEnabled())return this;if(r.batching())return r._private.batchStyleEles.merge(this),this;var a=this;t=!(!t&&void 0!==t),r.hasCompoundNodes()&&(a=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var s=a;return t?s.emitAndNotify("style"):s.emit("style"),a.forEach(function(u){return u._private.styleDirty=!0}),this},cleanStyle:function(){var t=this.cy();if(t.styleEnabled())for(var r=0;r<this.length;r++){var a=this[r];a._private.styleDirty&&(a._private.styleDirty=!1,t.style().apply(a))}},parsedStyle:function(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=this[0],s=a.cy();if(s.styleEnabled()&&a)return this.cleanStyle(),a._private.style[t]??(r?s.style().getDefaultProperty(t):null)},numericStyle:function(t){var r=this[0];if(r.cy().styleEnabled()&&r){var a=r.pstyle(t);return void 0!==a.pfValue?a.pfValue:a.value}},numericStyleUnits:function(t){var r=this[0];if(r.cy().styleEnabled())return r?r.pstyle(t).units:void 0},renderedStyle:function(t){var r=this.cy();if(!r.styleEnabled())return this;var a=this[0];return a?r.style().getRenderedStyle(a,t):void 0},style:function(t,r){var a=this.cy();if(!a.styleEnabled())return this;var s=a.style();if(P(t))s.applyBypass(this,t,!1),this.emitAndNotify("style");else if(C(t)){if(void 0===r){var d=this[0];return d?s.getStylePropertyValue(d,t):void 0}s.applyBypass(this,t,r,!1),this.emitAndNotify("style")}else if(void 0===t){var p=this[0];return p?s.getRawStyle(p):void 0}return this},removeStyle:function(t){var r=this.cy();if(!r.styleEnabled())return this;var a=r.style();if(void 0===t)for(var s=0;s<this.length;s++)a.removeAllBypasses(this[s],!1);else{t=t.split(/\s+/);for(var d=0;d<this.length;d++)a.removeBypasses(this[d],t,!1)}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var t=this.cy();if(!t.styleEnabled())return 1;var r=t.hasCompoundNodes(),a=this[0];if(a){var s=a._private,u=a.pstyle("opacity").value;if(!r)return u;var d=s.data.parent?a.parents():null;if(d)for(var p=0;p<d.length;p++)u*=d[p].pstyle("opacity").value;return u}},transparent:function(){if(!this.cy().styleEnabled())return!1;var t=this[0],r=t.cy().hasCompoundNodes();return t?r?0===t.effectiveOpacity():0===t.pstyle("opacity").value:void 0},backgrounding:function(){return!!this.cy().styleEnabled()&&!!this[0]._private.backgrounding}};function ih(t,r){var a=t._private.data.parent?t.parents():null;if(a)for(var s=0;s<a.length;s++)if(!r(a[s]))return!1;return!0}function ah(t){var r=t.ok,a=t.edgeOkViaNode||t.ok,s=t.parentOk||t.ok;return function(){var u=this.cy();if(!u.styleEnabled())return!0;var d=this[0],p=u.hasCompoundNodes();if(d){var m=d._private;if(!r(d))return!1;if(d.isNode())return!p||ih(d,s);var v=m.source,b=m.target;return a(v)&&(!p||ih(v,a))&&(v===b||a(b)&&(!p||ih(b,a)))}}}var es=ac("eleTakesUpSpace",function(t){return"element"===t.pstyle("display").value&&0!==t.width()&&(!t.isNode()||0!==t.height())});ar.takesUpSpace=oc("takesUpSpace",ah({ok:es}));var bm=ac("eleInteractive",function(t){return"yes"===t.pstyle("events").value&&"visible"===t.pstyle("visibility").value&&es(t)}),xm=ac("parentInteractive",function(t){return"visible"===t.pstyle("visibility").value&&es(t)});ar.interactive=oc("interactive",ah({ok:bm,parentOk:xm,edgeOkViaNode:es})),ar.noninteractive=function(){var t=this[0];if(t)return!t.interactive()};var wm=ac("eleVisible",function(t){return"visible"===t.pstyle("visibility").value&&0!==t.pstyle("opacity").pfValue&&es(t)});ar.visible=oc("visible",ah({ok:wm,edgeOkViaNode:es})),ar.hidden=function(){var t=this[0];if(t)return!t.visible()},ar.isBundledBezier=oc("isBundledBezier",function(){return!!this.cy().styleEnabled()&&!this.removed()&&"bezier"===this.pstyle("curve-style").value&&this.takesUpSpace()}),ar.bypass=ar.css=ar.style,ar.renderedCss=ar.renderedStyle,ar.removeBypass=ar.removeCss=ar.removeStyle,ar.pstyle=ar.parsedStyle;var Ca={};function Cp(t){return function(){var r=arguments,a=[];if(2===r.length)this.on(t.event,r[0],r[1]);else if(1===r.length&&L(r[0]))this.on(t.event,r[0]);else if(0===r.length||1===r.length&&I(r[0])){for(var p=1===r.length?r[0]:null,m=0;m<this.length;m++){var v=this[m],b=!t.ableField||v._private[t.ableField],w=v._private[t.field]!=t.value;if(t.overrideAble){var k=t.overrideAble(v);if(void 0!==k&&(b=k,!k))return this}b&&(v._private[t.field]=t.value,w&&a.push(v))}var T=this.spawn(a);T.updateStyle(),T.emit(t.event),p&&T.emit(p)}return this}}function ts(t){Ca[t.field]=function(){var r=this[0];if(r){if(t.overrideField){var a=t.overrideField(r);if(void 0!==a)return a}return r._private[t.field]}},Ca[t.on]=Cp({event:t.on,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!0}),Ca[t.off]=Cp({event:t.off,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!1})}ts({field:"locked",overrideField:function(t){return!!t.cy().autolock()||void 0},on:"lock",off:"unlock"}),ts({field:"grabbable",overrideField:function(t){return!t.cy().autoungrabify()&&!t.pannable()&&void 0},on:"grabify",off:"ungrabify"}),ts({field:"selected",ableField:"selectable",overrideAble:function(t){return!t.cy().autounselectify()&&void 0},on:"select",off:"unselect"}),ts({field:"selectable",overrideField:function(t){return!t.cy().autounselectify()&&void 0},on:"selectify",off:"unselectify"}),Ca.deselect=Ca.unselect,Ca.grabbed=function(){var t=this[0];if(t)return t._private.grabbed},ts({field:"active",on:"activate",off:"unactivate"}),ts({field:"pannable",on:"panify",off:"unpanify"}),Ca.inactive=function(){var t=this[0];if(t)return!t._private.active};var yr={},Sp=function(t){return function(r){for(var a=[],s=0;s<this.length;s++){var u=this[s];if(u.isNode()){for(var d=!1,p=u.connectedEdges(),m=0;m<p.length;m++){var v=p[m],b=v.source(),w=v.target();if(t.noIncomingEdges&&w===u&&b!==u||t.noOutgoingEdges&&b===u&&w!==u){d=!0;break}}d||a.push(u)}}return this.spawn(a,!0).filter(r)}},Tp=function(t){return function(r){for(var a=[],s=0;s<this.length;s++){var u=this[s];if(u.isNode())for(var d=u.connectedEdges(),p=0;p<d.length;p++){var m=d[p],v=m.source(),b=m.target();t.outgoing&&v===u?(a.push(m),a.push(b)):t.incoming&&b===u&&(a.push(m),a.push(v))}}return this.spawn(a,!0).filter(r)}},Pp=function(t){return function(r){for(var a=this,s=[],u={};;){var d=t.outgoing?a.outgoers():a.incomers();if(0===d.length)break;for(var p=!1,m=0;m<d.length;m++){var v=d[m],b=v.id();u[b]||(u[b]=!0,s.push(v),p=!0)}if(!p)break;a=d}return this.spawn(s,!0).filter(r)}};function Dp(t){return function(r){for(var a=[],s=0;s<this.length;s++){var u=this[s]._private[t.attr];u&&a.push(u)}return this.spawn(a,!0).filter(r)}}function Mp(t){return function(r){var a=[],s=this._private.cy,u=t||{};C(r)&&(r=s.$(r));for(var d=0;d<r.length;d++)for(var p=r[d]._private.edges,m=0;m<p.length;m++){var v=p[m],b=v._private.data,w=this.hasElementWithId(b.source)&&r.hasElementWithId(b.target),k=r.hasElementWithId(b.source)&&this.hasElementWithId(b.target);if(w||k){if((u.thisIsSrc||u.thisIsTgt)&&(u.thisIsSrc&&!w||u.thisIsTgt&&!k))continue;a.push(v)}}return this.spawn(a,!0)}}function Ap(t){return t=ee({},{codirected:!1},t),function(r){for(var a=[],s=this.edges(),u=t,d=0;d<s.length;d++)for(var p=s[d]._private,m=p.source,v=m._private.data.id,b=p.data.target,w=m._private.edges,k=0;k<w.length;k++){var T=w[k],O=T._private.data,D=O.target,z=O.source,V=D===b&&z===v;(u.codirected&&V||!u.codirected&&(V||v===D&&b===z))&&a.push(T)}return this.spawn(a,!0).filter(r)}}yr.clearTraversalCache=function(){for(var t=0;t<this.length;t++)this[t]._private.traversalCache=null},ee(yr,{roots:Sp({noIncomingEdges:!0}),leaves:Sp({noOutgoingEdges:!0}),outgoers:Xt(Tp({outgoing:!0}),"outgoers"),successors:Pp({outgoing:!0}),incomers:Xt(Tp({incoming:!0}),"incomers"),predecessors:Pp({incoming:!0})}),ee(yr,{neighborhood:Xt(function(t){for(var r=[],a=this.nodes(),s=0;s<a.length;s++)for(var u=a[s],d=u.connectedEdges(),p=0;p<d.length;p++){var m=d[p],v=m.source(),b=m.target(),w=u===v?b:v;w.length>0&&r.push(w[0]),r.push(m[0])}return this.spawn(r,!0).filter(t)},"neighborhood"),closedNeighborhood:function(t){return this.neighborhood().add(this).filter(t)},openNeighborhood:function(t){return this.neighborhood(t)}}),yr.neighbourhood=yr.neighborhood,yr.closedNeighbourhood=yr.closedNeighborhood,yr.openNeighbourhood=yr.openNeighborhood,ee(yr,{source:Xt(function(t){var r,a=this[0];return a&&(r=a._private.source||a.cy().collection()),r&&t?r.filter(t):r},"source"),target:Xt(function(t){var r,a=this[0];return a&&(r=a._private.target||a.cy().collection()),r&&t?r.filter(t):r},"target"),sources:Dp({attr:"source"}),targets:Dp({attr:"target"})}),ee(yr,{edgesWith:Xt(Mp(),"edgesWith"),edgesTo:Xt(Mp({thisIsSrc:!0}),"edgesTo")}),ee(yr,{connectedEdges:Xt(function(t){for(var r=[],a=0;a<this.length;a++){var s=this[a];if(s.isNode())for(var u=s._private.edges,d=0;d<u.length;d++)r.push(u[d])}return this.spawn(r,!0).filter(t)},"connectedEdges"),connectedNodes:Xt(function(t){for(var r=[],a=0;a<this.length;a++){var s=this[a];s.isEdge()&&(r.push(s.source()[0]),r.push(s.target()[0]))}return this.spawn(r,!0).filter(t)},"connectedNodes"),parallelEdges:Xt(Ap(),"parallelEdges"),codirectedEdges:Xt(Ap({codirected:!0}),"codirectedEdges")}),ee(yr,{components:function(t){var r=this,a=r.cy(),s=a.collection(),u=null==t?r.nodes():t.nodes(),d=[];null!=t&&u.empty()&&(u=t.sources());var p=function(v,b){s.merge(v),u.unmerge(v),b.merge(v)};if(u.empty())return r.spawn();var m=function(){var v=a.collection();d.push(v);var b=u[0];p(b,v),r.bfs({directed:!1,roots:b,visit:function(w){return p(w,v)}}),v.forEach(function(w){w.connectedEdges().forEach(function(k){r.has(k)&&v.has(k.source())&&v.has(k.target())&&v.merge(k)})})};do{m()}while(u.length>0);return d},component:function(){var t=this[0];return t.cy().mutableElements().components(t)[0]}}),yr.componentsOf=yr.components;var or=function(t,r){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(void 0!==t){var u=new tr,d=!1;if(r){if(r.length>0&&P(r[0])&&!$(r[0])){d=!0;for(var p=[],m=new Ti,v=0,b=r.length;v<b;v++){var w=r[v];null==w.data&&(w.data={});var k=w.data;if(null==k.id)k.id=ji();else if(t.hasElementWithId(k.id)||m.has(k.id))continue;var T=new hi(t,w,!1);p.push(T),m.add(k.id)}r=p}}else r=[];this.length=0;for(var O=0,D=r.length;O<D;O++){var z=r[O][0];if(null!=z){var V=z._private.data.id;a&&u.has(V)||(a&&u.set(V,{index:this.length,ele:z}),this[this.length]=z,this.length++)}}this._private={eles:this,cy:t,get map(){return null==this.lazyMap&&this.rebuildMap(),this.lazyMap},set map(M){this.lazyMap=M},rebuildMap:function(){for(var M=this.lazyMap=new tr,R=this.eles,j=0;j<R.length;j++){var Q=R[j];M.set(Q.id(),{index:j,ele:Q})}}},a&&(this._private.map=u),d&&!s&&this.restore()}else $t("A collection must have a reference to the core")},wn=hi.prototype=or.prototype=Object.create(Array.prototype);wn.instanceString=function(){return"collection"},wn.spawn=function(t,r){return new or(this.cy(),t,r)},wn.spawnSelf=function(){return this.spawn(this)},wn.cy=function(){return this._private.cy},wn.renderer=function(){return this._private.cy.renderer()},wn.element=function(){return this[0]},wn.collection=function(){return X(this)?this:new or(this._private.cy,[this])},wn.unique=function(){return new or(this._private.cy,this,!0)},wn.hasElementWithId=function(t){return this._private.map.has(t=""+t)},wn.getElementById=function(t){var r=this._private.cy,a=this._private.map.get(t=""+t);return a?a.ele:new or(r)},wn.$id=wn.getElementById,wn.poolIndex=function(){return this._private.cy._private.elements._private.map.get(this[0]._private.data.id).index},wn.indexOf=function(t){return this._private.map.get(t[0]._private.data.id).index},wn.indexOfId=function(t){return this._private.map.get(t=""+t).index},wn.json=function(t){var r=this.element(),a=this.cy();if(null==r&&t)return this;if(null!=r){var s=r._private;if(P(t)){if(a.startBatch(),t.data){r.data(t.data);var u=s.data;if(r.isEdge()){var d=!1,p={},m=t.data.source,v=t.data.target;null!=m&&m!=u.source&&(p.source=""+m,d=!0),null!=v&&v!=u.target&&(p.target=""+v,d=!0),d&&(r=r.move(p))}else{var w=t.data.parent;!("parent"in t.data)||null==w&&null==u.parent||w==u.parent||(void 0===w&&(w=null),null!=w&&(w=""+w),r=r.move({parent:w}))}}t.position&&r.position(t.position);var k=function(D,z,V){var M=t[D];null!=M&&M!==s[D]&&(M?r[z]():r[V]())};return k("removed","remove","restore"),k("selected","select","unselect"),k("selectable","selectify","unselectify"),k("locked","lock","unlock"),k("grabbable","grabify","ungrabify"),k("pannable","panify","unpanify"),null!=t.classes&&r.classes(t.classes),a.endBatch(),this}if(void 0===t){var T={data:ti(s.data),position:ti(s.position),group:s.group,removed:s.removed,selected:s.selected,selectable:s.selectable,locked:s.locked,grabbable:s.grabbable,pannable:s.pannable,classes:""},O=0;return s.classes.forEach(function(D){return T.classes+=0==O++?D:" "+D}),T}}},wn.jsons=function(){for(var t=[],r=0;r<this.length;r++){var a=this[r].json();t.push(a)}return t},wn.clone=function(){for(var t=this.cy(),r=[],a=0;a<this.length;a++){var s=this[a].json(),u=new hi(t,s,!1);r.push(u)}return new or(t,r)},wn.copy=wn.clone,wn.restore=function(){for(var t,r,a=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],u=this,d=u.cy(),p=d._private,m=[],v=[],b=0,w=u.length;b<w;b++){var k=u[b];s&&!k.removed()||(k.isNode()?m.push(k):v.push(k))}t=m.concat(v);var T=function(){t.splice(r,1),r--};for(r=0;r<t.length;r++){var O=t[r],D=O._private,z=D.data;if(O.clearTraversalCache(),s||D.removed)if(void 0===z.id)z.id=ji();else if(B(z.id))z.id=""+z.id;else{if(re(z.id)||!C(z.id)){$t("Can not create element with invalid string ID `"+z.id+"`"),T();continue}if(d.hasElementWithId(z.id)){$t("Can not create second element with ID `"+z.id+"`"),T();continue}}var V=z.id;if(O.isNode()){var M=D.position;null==M.x&&(M.x=0),null==M.y&&(M.y=0)}if(O.isEdge()){for(var R=O,j=["source","target"],Q=j.length,K=!1,Y=0;Y<Q;Y++){var W=j[Y],ne=z[W];B(ne)&&(ne=z[W]=""+z[W]),null==ne||""===ne?($t("Can not create edge `"+V+"` with unspecified "+W),K=!0):d.hasElementWithId(ne)||($t("Can not create edge `"+V+"` with nonexistant "+W+" `"+ne+"`"),K=!0)}if(K){T();continue}var ie=d.getElementById(z.source),oe=d.getElementById(z.target);ie.same(oe)?ie._private.edges.push(R):(ie._private.edges.push(R),oe._private.edges.push(R)),R._private.source=ie,R._private.target=oe}D.map=new tr,D.map.set(V,{ele:O,index:0}),D.removed=!1,s&&d.addToPool(O)}for(var ce=0;ce<m.length;ce++){var ue=m[ce],he=ue._private.data;B(he.parent)&&(he.parent=""+he.parent);var ke=he.parent;if(null!=ke||ue._private.parent){var me=ue._private.parent?d.collection().merge(ue._private.parent):d.getElementById(ke);if(me.empty())he.parent=void 0;else if(me[0].removed())nn("Node added with missing parent, reference to parent removed"),he.parent=void 0,ue._private.parent=null;else{for(var ye=!1,Le=me;!Le.empty();){if(ue.same(Le)){ye=!0,he.parent=void 0;break}Le=Le.parent()}ye||(me[0]._private.children.push(ue),ue._private.parent=me[0],p.hasCompoundNodes=!0)}}}if(t.length>0){for(var De=t.length===u.length?u:new or(d,t),Ve=0;Ve<De.length;Ve++){var Te=De[Ve];Te.isNode()||(Te.parallelEdges().clearTraversalCache(),Te.source().clearTraversalCache(),Te.target().clearTraversalCache())}(p.hasCompoundNodes?d.collection().merge(De).merge(De.connectedNodes()).merge(De.parent()):De).dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(a),a?De.emitAndNotify("add"):s&&De.emit("add")}return u},wn.removed=function(){var t=this[0];return t&&t._private.removed},wn.inside=function(){var t=this[0];return t&&!t._private.removed},wn.remove=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=this,s=[],u={},d=a._private.cy;function v(ke){var xe=u[ke.id()];r&&ke.removed()||xe||(u[ke.id()]=!0,ke.isNode()?(s.push(ke),function p(ke){for(var xe=ke._private.edges,me=0;me<xe.length;me++)v(xe[me])}(ke),function m(ke){for(var xe=ke._private.children,me=0;me<xe.length;me++)v(xe[me])}(ke)):s.unshift(ke))}for(var b=0,w=a.length;b<w;b++)v(a[b]);function T(ke,xe){Dn(ke._private.edges,xe),ke.clearTraversalCache()}var D=[];function z(ke,xe){xe=xe[0];var me=(ke=ke[0])._private.children,ye=ke.id();Dn(me,xe),xe._private.parent=null,D.ids[ye]||(D.ids[ye]=!0,D.push(ke))}D.ids={},a.dirtyCompoundBoundsCache(),r&&d.removeFromPool(s);for(var V=0;V<s.length;V++){var M=s[V];if(M.isEdge()){var R=M.source()[0],j=M.target()[0];T(R,M),T(j,M);for(var Q=M.parallelEdges(),K=0;K<Q.length;K++){var Y=Q[K];Y.clearTraversalCache(),Y.isBundledBezier()&&Y.dirtyBoundingBoxCache()}}else{var W=M.parent();0!==W.length&&z(W,M)}r&&(M._private.removed=!0)}var ne=d._private.elements;d._private.hasCompoundNodes=!1;for(var ie=0;ie<ne.length;ie++)if(ne[ie].isParent()){d._private.hasCompoundNodes=!0;break}var ce=new or(this.cy(),s);ce.size()>0&&(t?ce.emitAndNotify("remove"):r&&ce.emit("remove"));for(var ue=0;ue<D.length;ue++){var he=D[ue];r&&he.removed()||he.updateStyle()}return ce},wn.move=function(t){var r=this._private.cy,a=this,s=function(w){return null==w?w:""+w};if(void 0!==t.source||void 0!==t.target){var u=s(t.source),d=s(t.target),p=null!=u&&r.hasElementWithId(u),m=null!=d&&r.hasElementWithId(d);(p||m)&&(r.batch(function(){a.remove(!1,!1),a.emitAndNotify("moveout");for(var w=0;w<a.length;w++){var k=a[w],T=k._private.data;k.isEdge()&&(p&&(T.source=u),m&&(T.target=d))}a.restore(!1,!1)}),a.emitAndNotify("move"))}else if(void 0!==t.parent){var v=s(t.parent);if(null===v||r.hasElementWithId(v)){var b=null===v?void 0:v;r.batch(function(){var w=a.remove(!1,!1);w.emitAndNotify("moveout");for(var k=0;k<a.length;k++){var T=a[k],O=T._private.data;T.isNode()&&(O.parent=b)}w.restore(!1,!1)}),a.emitAndNotify("move")}}return this},[$s,na,oo,Nt,Qt,dn,bn,rh,wp,Ep,{isNode:function(){return"nodes"===this.group()},isEdge:function(){return"edges"===this.group()},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var t=this[0];if(t)return t._private.group}},rc,ic,ar,Ca,yr].forEach(function(t){ee(wn,t)});var _m={add:function(t){var r,a=this;if(G(t)){var s=t;if(s._private.cy===a)r=s.restore();else{for(var u=[],d=0;d<s.length;d++)u.push(s[d].json());r=new or(a,u)}}else if(I(t))r=new or(a,t);else if(P(t)&&(I(t.nodes)||I(t.edges))){for(var m=t,v=[],b=["nodes","edges"],w=0,k=b.length;w<k;w++){var T=b[w],O=m[T];if(I(O))for(var D=0,z=O.length;D<z;D++){var V=ee({group:T},O[D]);v.push(V)}}r=new or(a,v)}else r=new hi(a,t).collection();return r},remove:function(t){return G(t)||C(t)&&(t=this.$(t)),t.remove()}},km=function(){function t(s){return-s.tension*s.x-s.friction*s.v}function r(s,u,d){var p={x:s.x+d.dx*u,v:s.v+d.dv*u,tension:s.tension,friction:s.friction};return{dx:p.v,dv:t(p)}}function a(s,u){var d={dx:s.v,dv:t(s)},p=r(s,.5*u,d),m=r(s,.5*u,p),v=r(s,u,m),w=1/6*(d.dv+2*(p.dv+m.dv)+v.dv);return s.x=s.x+1/6*(d.dx+2*(p.dx+m.dx)+v.dx)*u,s.v=s.v+w*u,s}return function s(u,d,p){var m,v,b,w={x:-1,v:0,tension:null,friction:null},k=[0],T=0;for(u=parseFloat(u)||500,d=parseFloat(d)||20,p=p||null,w.tension=u,w.friction=d,v=(m=null!==p)?(T=s(u,d))/p*.016:.016;b=a(b||w,v),k.push(1+b.x),T+=16,Math.abs(b.x)>1e-4&&Math.abs(b.v)>1e-4;);return m?function(O){return k[O*(k.length-1)|0]}:T}}(),En=function(t,r,a,s){var u=function(d,p,m,v){var D=.1,z=typeof Float32Array<"u";if(4!==arguments.length)return!1;for(var V=0;V<4;++V)if("number"!=typeof arguments[V]||isNaN(arguments[V])||!isFinite(arguments[V]))return!1;d=Math.min(d,1),m=Math.min(m,1),d=Math.max(d,0),m=Math.max(m,0);var M=z?new Float32Array(11):new Array(11);function R(xe,me){return 1-3*me+3*xe}function j(xe,me){return 3*me-6*xe}function Q(xe){return 3*xe}function K(xe,me,ye){return((R(me,ye)*xe+j(me,ye))*xe+Q(me))*xe}function Y(xe,me,ye){return 3*R(me,ye)*xe*xe+2*j(me,ye)*xe+Q(me)}var ce=!1;var he=function(xe){return ce||function ue(){ce=!0,d===p&&m===v||function ne(){for(var xe=0;xe<11;++xe)M[xe]=K(xe*D,d,m)}()}(),d===p&&m===v?xe:0===xe?0:1===xe?1:K(function oe(xe){for(var me=0,ye=1;10!==ye&&M[ye]<=xe;++ye)me+=D;--ye;var De=me+(xe-M[ye])/(M[ye+1]-M[ye])*D,Ve=Y(De,d,m);return Ve>=.001?function W(xe,me){for(var ye=0;ye<4;++ye){var Le=Y(me,d,m);if(0===Le)return me;me-=(K(me,d,m)-xe)/Le}return me}(xe,De):0===Ve?De:function ie(xe,me,ye){var Le,De,Ve=0;do{(Le=K(De=me+(ye-me)/2,d,m)-xe)>0?ye=De:me=De}while(Math.abs(Le)>1e-7&&++Ve<10);return De}(xe,me,me+D)}(xe),p,v)};he.getControlPoints=function(){return[{x:d,y:p},{x:m,y:v}]};var ke="generateBezier("+[d,p,m,v]+")";return he.toString=function(){return ke},he}(t,r,a,s);return function(d,p,m){return d+(p-d)*u(m)}},sc={linear:function(t,r,a){return t+(r-t)*a},ease:En(.25,.1,.25,1),"ease-in":En(.42,0,1,1),"ease-out":En(0,0,.58,1),"ease-in-out":En(.42,0,.58,1),"ease-in-sine":En(.47,0,.745,.715),"ease-out-sine":En(.39,.575,.565,1),"ease-in-out-sine":En(.445,.05,.55,.95),"ease-in-quad":En(.55,.085,.68,.53),"ease-out-quad":En(.25,.46,.45,.94),"ease-in-out-quad":En(.455,.03,.515,.955),"ease-in-cubic":En(.55,.055,.675,.19),"ease-out-cubic":En(.215,.61,.355,1),"ease-in-out-cubic":En(.645,.045,.355,1),"ease-in-quart":En(.895,.03,.685,.22),"ease-out-quart":En(.165,.84,.44,1),"ease-in-out-quart":En(.77,0,.175,1),"ease-in-quint":En(.755,.05,.855,.06),"ease-out-quint":En(.23,1,.32,1),"ease-in-out-quint":En(.86,0,.07,1),"ease-in-expo":En(.95,.05,.795,.035),"ease-out-expo":En(.19,1,.22,1),"ease-in-out-expo":En(1,0,0,1),"ease-in-circ":En(.6,.04,.98,.335),"ease-out-circ":En(.075,.82,.165,1),"ease-in-out-circ":En(.785,.135,.15,.86),spring:function(t,r,a){if(0===a)return sc.linear;var s=km(t,r,a);return function(u,d,p){return u+(d-u)*s(p)}},"cubic-bezier":En};function Bp(t,r,a,s,u){if(1===s||r===a)return a;var d=u(r,a,s);return null==t||((t.roundValue||t.color)&&(d=Math.round(d)),void 0!==t.min&&(d=Math.max(d,t.min)),void 0!==t.max&&(d=Math.min(d,t.max))),d}function Lp(t,r){return null!=t.pfValue||null!=t.value?null==t.pfValue||null!=r&&"%"===r.type.units?t.value:t.pfValue:t}function ns(t,r,a,s,u){var d=null!=u?u.type:null;a<0?a=0:a>1&&(a=1);var p=Lp(t,u),m=Lp(r,u);if(B(p)&&B(m))return Bp(d,p,m,a,s);if(I(p)&&I(m)){for(var v=[],b=0;b<m.length;b++){var w=p[b],k=m[b];if(null!=w&&null!=k){var T=Bp(d,w,k,a,s);v.push(T)}else v.push(k)}return v}}function Cm(t,r,a,s){var u=!s,d=t._private,p=r._private,m=p.easing,v=p.startTime,b=(s?t:t.cy()).style();if(!p.easingImpl)if(null==m)p.easingImpl=sc.linear;else{var w,k,T;w=C(m)?b.parse("transition-timing-function",m).value:m,C(w)?(k=w,T=[]):(k=w[1],T=w.slice(2).map(function(me){return+me})),T.length>0?("spring"===k&&T.push(p.duration),p.easingImpl=sc[k].apply(null,T)):p.easingImpl=sc[k]}var O,D=p.easingImpl;if(O=0===p.duration?1:(a-v)/p.duration,p.applying&&(O=p.progress),O<0?O=0:O>1&&(O=1),null==p.delay){var z=p.startPosition,V=p.position;if(V&&u&&!t.locked()){var M={};fl(z.x,V.x)&&(M.x=ns(z.x,V.x,O,D)),fl(z.y,V.y)&&(M.y=ns(z.y,V.y,O,D)),t.position(M)}var R=p.startPan,j=p.pan,Q=d.pan,K=null!=j&&s;K&&(fl(R.x,j.x)&&(Q.x=ns(R.x,j.x,O,D)),fl(R.y,j.y)&&(Q.y=ns(R.y,j.y,O,D)),t.emit("pan"));var Y=p.startZoom,W=p.zoom,ne=null!=W&&s;ne&&(fl(Y,W)&&(d.zoom=pa(d.minZoom,ns(Y,W,O,D),d.maxZoom)),t.emit("zoom")),(K||ne)&&t.emit("viewport");var ie=p.style;if(ie&&ie.length>0&&u){for(var oe=0;oe<ie.length;oe++){var ce=ie[oe],ue=ce.name,ke=p.startStyle[ue],xe=ns(ke,ce,O,D,b.properties[ke.name]);b.overrideBypass(t,ue,xe)}t.emit("style")}}return p.progress=O,O}function fl(t,r){return!(null==t||null==r||!(B(t)&&B(r)||t&&r))}function Sm(t,r,a,s){var u=r._private;u.started=!0,u.startTime=a-u.progress*u.duration}function Op(t,r){var a=r._private.aniEles,s=[];function u(b,w){var k=b._private,T=k.animation.current,O=k.animation.queue,D=!1;if(0===T.length){var z=O.shift();z&&T.push(z)}for(var V=function(Q){for(var K=Q.length-1;K>=0;K--)(0,Q[K])();Q.splice(0,Q.length)},M=T.length-1;M>=0;M--){var R=T[M],j=R._private;j.stopped?(T.splice(M,1),j.hooked=!1,j.playing=!1,j.started=!1,V(j.frames)):(j.playing||j.applying)&&(j.playing&&j.applying&&(j.applying=!1),j.started||Sm(0,R,t),Cm(b,R,t,w),j.applying&&(j.applying=!1),V(j.frames),null!=j.step&&j.step(t),R.completed()&&(T.splice(M,1),j.hooked=!1,j.playing=!1,j.started=!1,V(j.completes)),D=!0)}return w||0!==T.length||0!==O.length||s.push(b),D}for(var d=!1,p=0;p<a.length;p++){var m=u(a[p]);d=d||m}var v=u(r,!0);(d||v)&&(a.length>0?r.notify("draw",a):r.notify("draw")),a.unmerge(s),r.emit("step")}var Tm={animate:Zt.animate(),animation:Zt.animation(),animated:Zt.animated(),clearQueue:Zt.clearQueue(),delay:Zt.delay(),delayAnimation:Zt.delayAnimation(),stop:Zt.stop(),addToAnimationPool:function(t){this.styleEnabled()&&this._private.aniEles.merge(t)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var t=this;if(t._private.animationsRunning=!0,t.styleEnabled()){var r=t.renderer();r&&r.beforeRender?r.beforeRender(function(a,s){Op(s,t)},r.beforeRenderPriorities.animations):function a(){t._private.animationsRunning&&Rn(function(s){Op(s,t),a()})}()}}},Pm={qualifierCompare:function(t,r){return null==t||null==r?null==t&&null==r:t.sameText(r)},eventMatches:function(t,r,a){var s=r.qualifier;return null==s||t!==a.target&&$(a.target)&&s.matches(a.target)},addEventFields:function(t,r){r.cy=t,r.target=t},callbackContext:function(t,r,a){return null!=r.qualifier?a.target:t}},lc=function(t){return C(t)?new Rt(t):t},Np={createEmitter:function(){var t=this._private;return t.emitter||(t.emitter=new ho(Pm,this)),this},emitter:function(){return this._private.emitter},on:function(t,r,a){return this.emitter().on(t,lc(r),a),this},removeListener:function(t,r,a){return this.emitter().removeListener(t,lc(r),a),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(t,r,a){return this.emitter().one(t,lc(r),a),this},once:function(t,r,a){return this.emitter().one(t,lc(r),a),this},emit:function(t,r){return this.emitter().emit(t,r),this},emitAndNotify:function(t,r){return this.emit(t),this.notify(t,r),this}};Zt.eventAliasesOn(Np);var oh={png:function(t){return this._private.renderer.png(t=t||{})},jpg:function(t){var r=this._private.renderer;return(t=t||{}).bg=t.bg||"#fff",r.jpg(t)}};oh.jpeg=oh.jpg;var uc={layout:function(t){if(null!=t)if(null!=t.name){var s,r=t.name,a=this.extension("layout",r);if(null!=a)return s=C(t.eles)?this.$(t.eles):null!=t.eles?t.eles:this.$(),new a(ee({},t,{cy:this,eles:s}));$t("No such layout `"+r+"` found.  Did you forget to import it and `cytoscape.use()` it?")}else $t("A `name` must be specified to make a layout");else $t("Layout options must be specified to make a layout")}};uc.createLayout=uc.makeLayout=uc.layout;var Dm={notify:function(t,r){var a=this._private;if(this.batching()){a.batchNotifications=a.batchNotifications||{};var s=a.batchNotifications[t]=a.batchNotifications[t]||this.collection();null!=r&&s.merge(r)}else if(a.notificationsEnabled){var u=this.renderer();!this.destroyed()&&u&&u.notify(t,r)}},notifications:function(t){var r=this._private;return void 0===t?r.notificationsEnabled:(r.notificationsEnabled=!!t,this)},noNotifications:function(t){this.notifications(!1),t(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var t=this._private;return null==t.batchCount&&(t.batchCount=0),0===t.batchCount&&(t.batchStyleEles=this.collection(),t.batchNotifications={}),t.batchCount++,this},endBatch:function(){var t=this._private;if(0===t.batchCount)return this;if(t.batchCount--,0===t.batchCount){t.batchStyleEles.updateStyle();var r=this.renderer();Object.keys(t.batchNotifications).forEach(function(a){var s=t.batchNotifications[a];s.empty()?r.notify(a):r.notify(a,s)})}return this},batch:function(t){return this.startBatch(),t(),this.endBatch(),this},batchData:function(t){var r=this;return this.batch(function(){for(var a=Object.keys(t),s=0;s<a.length;s++){var u=a[s],d=t[u];r.getElementById(u).data(d)}})}},Mm=un({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1}),sh={renderTo:function(t,r,a,s){return this._private.renderer.renderTo(t,r,a,s),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(t){var r=this.extension("renderer",t.name);if(null!=r){void 0!==t.wheelSensitivity&&nn("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var a=Mm(t);a.cy=this,this._private.renderer=new r(a),this.notify("init")}else $t("Can not initialise: No such renderer `".concat(t.name,"` found. Did you forget to import it and `cytoscape.use()` it?"))},destroyRenderer:function(){this.notify("destroy");var t=this.container();if(t)for(t._cyreg=null;t.childNodes.length>0;)t.removeChild(t.childNodes[0]);this._private.renderer=null,this.mutableElements().forEach(function(r){var a=r._private;a.rscratch={},a.rstyle={},a.animation.current=[],a.animation.queue=[]})},onRender:function(t){return this.on("render",t)},offRender:function(t){return this.off("render",t)}};sh.invalidateDimensions=sh.resize;var cc={collection:function(t,r){return C(t)?this.$(t):G(t)?t.collection():I(t)?(r||(r={}),new or(this,t,r.unique,r.removed)):new or(this)},nodes:function(t){var r=this.$(function(a){return a.isNode()});return t?r.filter(t):r},edges:function(t){var r=this.$(function(a){return a.isEdge()});return t?r.filter(t):r},$:function(t){var r=this._private.elements;return t?r.filter(t):r.spawnSelf()},mutableElements:function(){return this._private.elements}};cc.elements=cc.filter=cc.$;var br={apply:function(t){for(var r=this._private.cy.collection(),a=0;a<t.length;a++){var s=t[a],u=this.getContextMeta(s);if(!u.empty){var d=this.getContextStyle(u),p=this.applyContextStyle(u,d,s);s._private.appliedInitStyle?this.updateTransitions(s,p.diffProps):s._private.appliedInitStyle=!0,this.updateStyleHints(s)&&r.push(s)}}return r},getPropertiesDiff:function(t,r){var a=this._private.propDiffs=this._private.propDiffs||{},s=t+"-"+r,u=a[s];if(u)return u;for(var d=[],p={},m=0;m<this.length;m++){var v=this[m],w="t"===r[m],k="t"===t[m]!==w,T=v.mappedProperties.length>0;if(k||w&&T){var O=void 0;k&&T||k?O=v.properties:T&&(O=v.mappedProperties);for(var D=0;D<O.length;D++){for(var z=O[D],V=z.name,M=!1,R=m+1;R<this.length&&("t"!==r[R]||!(M=null!=this[R].properties[z.name]));R++);p[V]||M||(p[V]=!0,d.push(V))}}}return a[s]=d,d},getContextMeta:function(t){for(var r,a="",s=t._private.styleCxtKey||"",u=0;u<this.length;u++){var d=this[u];a+=d.selector&&d.selector.matches(t)?"t":"f"}return r=this.getPropertiesDiff(s,a),t._private.styleCxtKey=a,{key:a,diffPropNames:r,empty:0===r.length}},getContextStyle:function(t){var r=t.key,a=this._private.contextStyles=this._private.contextStyles||{};if(a[r])return a[r];for(var s={_private:{key:r}},u=0;u<this.length;u++){var d=this[u];if("t"===r[u])for(var p=0;p<d.properties.length;p++){var m=d.properties[p];s[m.name]=m}}return a[r]=s,s},applyContextStyle:function(t,r,a){for(var s=t.diffPropNames,u={},d=this.types,p=0;p<s.length;p++){var m=s[p],v=r[m],b=a.pstyle(m);if(!v){if(!b)continue;v=b.bypass?{name:m,deleteBypassed:!0}:{name:m,delete:!0}}if(b!==v){if(v.mapped===d.fn&&null!=b&&null!=b.mapping&&b.mapping.value===v.value){var w=b.mapping;if((w.fnValue=v.value(a))===w.prevFnValue)continue}var k=u[m]={prev:b};this.applyParsedProperty(a,v),k.next=a.pstyle(m),k.next&&k.next.bypass&&(k.next=k.next.bypassed)}}return{diffProps:u}},updateStyleHints:function(t){var s,r=t._private,a=this,u=a.propertyGroupKeys,d=function(yt,Dt,$e){return a.getPropertiesHash(yt,Dt,$e)},p=r.styleKey;if(t.removed())return!1;var yt,Dt,m="nodes"===r.group,v=t._private.style;s=Object.keys(v);for(var b=0;b<u.length;b++)r.styleKeys[u[b]]=[9261,5381];for(var k,T=function(yt,Dt){return r.styleKeys[Dt][0]=Jn(yt,r.styleKeys[Dt][0])},O=function(yt,Dt){return r.styleKeys[Dt][1]=Mr(yt,r.styleKeys[Dt][1])},z=function(yt,Dt){for(var $e=0;$e<yt.length;$e++){var xt=yt.charCodeAt($e);T(xt,Dt),O(xt,Dt)}},V=0;V<s.length;V++){var M=s[V],R=v[M];if(null!=R){var j=this.properties[M],Q=j.type,K=j.groupKey,Y=void 0;null!=j.hashOverride?Y=j.hashOverride(t,R):null!=R.pfValue&&(Y=R.pfValue);var W=null==j.enums?R.value:null,ne=null!=Y,oe=R.units;!Q.number||!ne&&null==W||Q.multiple?z(R.strValue,K):(yt=-128<(k=ne?Y:W)&&k<128&&Math.floor(k)!==k?2e9-(1024*k|0):k,T(yt,Dt=K),O(yt,Dt),ne||null==oe||z(oe,K))}}for(var he=[9261,5381],ke=0;ke<u.length;ke++){var me=r.styleKeys[u[ke]];he[0]=Jn(me[0],he[0]),he[1]=Mr(me[1],he[1])}r.styleKey=2097152*he[0]+he[1];var ye=r.styleKeys;r.labelDimsKey=Yn(ye.labelDimensions);var Le=d(t,["label"],ye.labelDimensions);if(r.labelKey=Yn(Le),r.labelStyleKey=Yn(da(ye.commonLabel,Le)),!m){var De=d(t,["source-label"],ye.labelDimensions);r.sourceLabelKey=Yn(De),r.sourceLabelStyleKey=Yn(da(ye.commonLabel,De));var Ve=d(t,["target-label"],ye.labelDimensions);r.targetLabelKey=Yn(Ve),r.targetLabelStyleKey=Yn(da(ye.commonLabel,Ve))}if(m){var Te=r.styleKeys,nt=Te.pie,dt=[Te.nodeBody,Te.nodeBorder,Te.nodeOutline,Te.backgroundImage,Te.compound,nt].filter(function(yt){return null!=yt}).reduce(da,[9261,5381]);r.nodeKey=Yn(dt),r.hasPie=null!=nt&&9261!==nt[0]&&5381!==nt[1]}return p!==r.styleKey},clearStyleHints:function(t){var r=t._private;r.styleCxtKey="",r.styleKeys={},r.styleKey=null,r.labelKey=null,r.labelStyleKey=null,r.sourceLabelKey=null,r.sourceLabelStyleKey=null,r.targetLabelKey=null,r.targetLabelStyleKey=null,r.nodeKey=null,r.hasPie=null},applyParsedProperty:function(t,r){var a,s=this,u=r,d=t._private.style,p=s.types,m=s.properties[u.name].type,v=u.bypass,b=d[u.name],w=b&&b.bypass,k=t._private,T=function(De){return null==De?null:null!=De.pfValue?De.pfValue:De.value},O=function(){var De=T(b),Ve=T(u);s.checkTriggers(t,u.name,De,Ve)};if("curve-style"===r.name&&t.isEdge()&&("bezier"!==r.value&&t.isLoop()||"haystack"===r.value&&(t.source().isParent()||t.target().isParent()))&&(u=r=this.parse(r.name,"bezier",v)),u.delete)return d[u.name]=void 0,O(),!0;if(u.deleteBypassed)return b?!!b.bypass&&(b.bypassed=void 0,O(),!0):(O(),!0);if(u.deleteBypass)return b?!!b.bypass&&(d[u.name]=b.bypassed,O(),!0):(O(),!0);var D=function(){nn("Do not assign mappings to elements without corresponding data (i.e. ele `"+t.id()+"` has no mapping for property `"+u.name+"` with data field `"+u.field+"`); try a `["+u.field+"]` selector to limit scope to elements with `"+u.field+"` defined")};switch(u.mapped){case p.mapData:for(var z,V=u.field.split("."),M=k.data,R=0;R<V.length&&M;R++)M=M[V[R]];if(null==M)return D(),!1;if(!B(M))return nn("Do not use continuous mappers without specifying numeric data (i.e. `"+u.field+": "+M+"` for `"+t.id()+"` is non-numeric)"),!1;var j=u.fieldMax-u.fieldMin;if((z=0===j?0:(M-u.fieldMin)/j)<0?z=0:z>1&&(z=1),m.color){var Q=u.valueMin[0],Y=u.valueMin[1],W=u.valueMax[1],ne=u.valueMin[2],ie=u.valueMax[2],oe=null==u.valueMin[3]?1:u.valueMin[3],ce=null==u.valueMax[3]?1:u.valueMax[3],ue=[Math.round(Q+(u.valueMax[0]-Q)*z),Math.round(Y+(W-Y)*z),Math.round(ne+(ie-ne)*z),Math.round(oe+(ce-oe)*z)];a={bypass:u.bypass,name:u.name,value:ue,strValue:"rgb("+ue[0]+", "+ue[1]+", "+ue[2]+")"}}else{if(!m.number)return!1;a=this.parse(u.name,u.valueMin+(u.valueMax-u.valueMin)*z,u.bypass,"mapping")}if(!a)return D(),!1;a.mapping=u,u=a;break;case p.data:for(var ke=u.field.split("."),xe=k.data,me=0;me<ke.length&&xe;me++)xe=xe[ke[me]];if(null!=xe&&(a=this.parse(u.name,xe,u.bypass,"mapping")),!a)return D(),!1;a.mapping=u,u=a;break;case p.fn:var Le=null!=u.fnValue?u.fnValue:(0,u.value)(t);if(u.prevFnValue=Le,null==Le)return nn("Custom function mappers may not return null (i.e. `"+u.name+"` for ele `"+t.id()+"` is null)"),!1;if(!(a=this.parse(u.name,Le,u.bypass,"mapping")))return nn("Custom function mappers may not return invalid values for the property type (i.e. `"+u.name+"` for ele `"+t.id()+"` is invalid)"),!1;a.mapping=ti(u),u=a;break;case void 0:break;default:return!1}return v?(u.bypassed=w?b.bypassed:b,d[u.name]=u):w?b.bypassed=u:d[u.name]=u,O(),!0},cleanElements:function(t,r){for(var a=0;a<t.length;a++){var s=t[a];if(this.clearStyleHints(s),s.dirtyCompoundBoundsCache(),s.dirtyBoundingBoxCache(),r)for(var u=s._private.style,d=Object.keys(u),p=0;p<d.length;p++){var m=d[p],v=u[m];null!=v&&(v.bypass?v.bypassed=null:u[m]=null)}else s._private.style={}}},update:function(){this._private.cy.mutableElements().updateStyle()},updateTransitions:function(t,r){var a=this,s=t._private,u=t.pstyle("transition-property").value,d=t.pstyle("transition-duration").pfValue,p=t.pstyle("transition-delay").pfValue;if(u.length>0&&d>0){for(var m={},v=!1,b=0;b<u.length;b++){var w=u[b],k=t.pstyle(w),T=r[w];if(T){var O=T.prev,D=null!=T.next?T.next:k,z=!1,V=void 0;O&&(B(O.pfValue)&&B(D.pfValue)?V=O.pfValue+1e-6*(z=D.pfValue-O.pfValue):B(O.value)&&B(D.value)?V=O.value+1e-6*(z=D.value-O.value):I(O.value)&&I(D.value)&&(z=O.value[0]!==D.value[0]||O.value[1]!==D.value[1]||O.value[2]!==D.value[2],V=O.strValue),z&&(m[w]=D.strValue,this.applyBypass(t,w,V),v=!0))}}if(!v)return;s.transitioning=!0,new Ui(function(M){p>0?t.delayAnimation(p).play().promise().then(M):M()}).then(function(){return t.animation({style:m,duration:d,easing:t.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){a.removeBypasses(t,u),t.emitAndNotify("style"),s.transitioning=!1})}else s.transitioning&&(this.removeBypasses(t,u),t.emitAndNotify("style"),s.transitioning=!1)},checkTrigger:function(t,r,a,s,u,d){var p=this.properties[r],m=u(p);null!=m&&m(a,s)&&d(p)},checkZOrderTrigger:function(t,r,a,s){var u=this;this.checkTrigger(t,r,a,s,function(d){return d.triggersZOrder},function(){u._private.cy.notify("zorder",t)})},checkBoundsTrigger:function(t,r,a,s){this.checkTrigger(t,r,a,s,function(u){return u.triggersBounds},function(u){t.dirtyCompoundBoundsCache(),t.dirtyBoundingBoxCache(),!u.triggersBoundsOfParallelBeziers||"curve-style"!==r||"bezier"!==a&&"bezier"!==s||t.parallelEdges().forEach(function(d){d.isBundledBezier()&&d.dirtyBoundingBoxCache()}),!u.triggersBoundsOfConnectedEdges||"display"!==r||"none"!==a&&"none"!==s||t.connectedEdges().forEach(function(d){d.dirtyBoundingBoxCache()})})},checkTriggers:function(t,r,a,s){t.dirtyStyleCache(),this.checkZOrderTrigger(t,r,a,s),this.checkBoundsTrigger(t,r,a,s)}},Am={applyBypass:function(t,r,a,s){var u=[];if("*"===r||"**"===r){if(void 0!==a)for(var d=0;d<this.properties.length;d++){var m=this.parse(this.properties[d].name,a,!0);m&&u.push(m)}}else if(C(r)){var v=this.parse(r,a,!0);v&&u.push(v)}else{if(!P(r))return!1;var b=r;s=a;for(var w=Object.keys(b),k=0;k<w.length;k++){var T=w[k],O=b[T];if(void 0===O&&(O=b[de(T)]),void 0!==O){var D=this.parse(T,O,!0);D&&u.push(D)}}}if(0===u.length)return!1;for(var z=!1,V=0;V<t.length;V++){for(var M=t[V],R={},j=void 0,Q=0;Q<u.length;Q++){var K=u[Q];if(s){var Y=M.pstyle(K.name);j=R[K.name]={prev:Y}}z=this.applyParsedProperty(M,ti(K))||z,s&&(j.next=M.pstyle(K.name))}z&&this.updateStyleHints(M),s&&this.updateTransitions(M,R,!0)}return z},overrideBypass:function(t,r,a){r=se(r);for(var s=0;s<t.length;s++){var u=t[s],d=u._private.style[r],p=this.properties[r].type,m=p.color,v=p.mutiple,b=d?null!=d.pfValue?d.pfValue:d.value:null;d&&d.bypass?(d.value=a,null!=d.pfValue&&(d.pfValue=a),d.strValue=m?"rgb("+a.join(",")+")":v?a.join(" "):""+a,this.updateStyleHints(u)):this.applyBypass(u,r,a),this.checkTriggers(u,r,b,a)}},removeAllBypasses:function(t,r){return this.removeBypasses(t,this.propertyNames,r)},removeBypasses:function(t,r,a){for(var s=0;s<t.length;s++){for(var u=t[s],d={},p=0;p<r.length;p++){var m=r[p],v=this.properties[m],b=u.pstyle(v.name);if(b&&b.bypass){var w=this.parse(m,"",!0),k=d[v.name]={prev:b};this.applyParsedProperty(u,w),k.next=u.pstyle(v.name)}}this.updateStyleHints(u),a&&this.updateTransitions(u,d,!0)}}},Bm={getEmSizeInPixels:function(){var t=this.containerCss("font-size");return null!=t?parseFloat(t):1},containerCss:function(t){var r=this._private.cy,a=r.container(),s=r.window();if(s&&a&&s.getComputedStyle)return s.getComputedStyle(a).getPropertyValue(t)}},lh={getRenderedStyle:function(t,r){return r?this.getStylePropertyValue(t,r,!0):this.getRawStyle(t,!0)},getRawStyle:function(t,r){if(t=t[0]){for(var a={},s=0;s<this.properties.length;s++){var u=this.properties[s],d=this.getStylePropertyValue(t,u.name,r);null!=d&&(a[u.name]=d,a[de(u.name)]=d)}return a}},getIndexedStyle:function(t,r,a,s){return t.pstyle(r)[a][s]??t.cy().style().getDefaultProperty(r)[a][0]},getStylePropertyValue:function(t,r,a){if(t=t[0]){var s=this.properties[r];s.alias&&(s=s.pointsTo);var u=s.type,d=t.pstyle(s.name);if(d){var p=d.value,m=d.units,v=d.strValue;if(a&&u.number&&null!=p&&B(p)){var b=t.cy().zoom(),w=function(O){return O*b},k=function(O,D){return w(O)+D},T=I(p);return(T?m.every(function(O){return null!=O}):null!=m)?T?p.map(function(O,D){return k(O,m[D])}).join(" "):k(p,m):T?p.map(function(O){return C(O)?O:""+w(O)}).join(" "):""+w(p)}if(null!=v)return v}return null}},getAnimationStartStyle:function(t,r){for(var a={},s=0;s<r.length;s++){var u=r[s].name,d=t.pstyle(u);void 0!==d&&(d=P(d)?this.parse(u,d.strValue):this.parse(u,d)),d&&(a[u]=d)}return a},getPropsList:function(t){var r=[],a=t,s=this.properties;if(a)for(var u=Object.keys(a),d=0;d<u.length;d++){var p=u[d],m=a[p],v=s[p]||s[se(p)],b=this.parse(v.name,m);b&&r.push(b)}return r},getNonDefaultPropertiesHash:function(t,r,a){var u,d,p,m,v,b=a.slice();for(m=0;m<r.length;m++)if(null!=(u=t.pstyle(r[m],!1)))if(null!=u.pfValue)b[0]=Jn(p,b[0]),b[1]=Mr(p,b[1]);else for(d=u.strValue,v=0;v<d.length;v++)p=d.charCodeAt(v),b[0]=Jn(p,b[0]),b[1]=Mr(p,b[1]);return b}};lh.getPropertiesHash=lh.getNonDefaultPropertiesHash;var Lm={appendFromJson:function(t){for(var r=0;r<t.length;r++){var a=t[r],s=a.selector,u=a.style||a.css,d=Object.keys(u);this.selector(s);for(var p=0;p<d.length;p++){var m=d[p];this.css(m,u[m])}}return this},fromJson:function(t){return this.resetToDefault(),this.appendFromJson(t),this},json:function(){for(var t=[],r=this.defaultLength;r<this.length;r++){for(var a=this[r],s=a.selector,u=a.properties,d={},p=0;p<u.length;p++){var m=u[p];d[m.name]=m.strValue}t.push({selector:s?s.toString():"core",style:d})}return t}},Om={appendFromString:function(t){var r,a,s,u=""+t;function d(){u=u.length>r.length?u.substr(r.length):""}function p(){a=a.length>s.length?a.substr(s.length):""}for(u=u.replace(/[/][*](\s|.)+?[*][/]/g,"");!u.match(/^\s*$/);){var m=u.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!m){nn("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+u);break}r=m[0];var v=m[1];if("core"!==v&&new Rt(v).invalid)nn("Skipping parsing of block: Invalid selector found in string stylesheet: "+v),d();else{var b=m[2],w=!1;a=b;for(var k=[];!a.match(/^\s*$/);){var T=a.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!T){nn("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+b),w=!0;break}s=T[0];var O=T[1],D=T[2];this.properties[O]?this.parse(O,D)?(k.push({name:O,val:D}),p()):(nn("Skipping property: Invalid property definition in: "+s),p()):(nn("Skipping property: Invalid property name in: "+s),p())}if(w){d();break}this.selector(v);for(var z=0;z<k.length;z++){var V=k[z];this.css(V.name,V.val)}d()}}return this},fromString:function(t){return this.resetToDefault(),this.appendFromString(t),this}},sr={};(function(){var t=fe,r=function(Ye){return"^"+Ye+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},a=function(Ye){var qe=t+"|\\w+|rgb[a]?\\((?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)(?:\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)|hsl[a]?\\((?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?)))\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])(?:\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)|\\#[0-9a-fA-F]{3}|\\#[0-9a-fA-F]{6}";return"^"+Ye+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+t+")\\s*\\,\\s*("+t+")\\s*,\\s*("+qe+")\\s*\\,\\s*("+qe+")\\)$"},s=["^url\\s*\\(\\s*['\"]?(.+?)['\"]?\\s*\\)$","^(none)$","^(.+)$"];sr.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},nonNegativeNumber:{number:!0,min:0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials","null"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi"]},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","right-rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},arrowWidth:{number:!0,units:"%|px|em",implicitUnits:"px",enums:["match-line"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:r("data")},layoutData:{mapping:!0,regex:r("layoutData")},scratch:{mapping:!0,regex:r("scratch")},mapData:{mapping:!0,regex:a("mapData")},mapLayoutData:{mapping:!0,regex:a("mapLayoutData")},mapScratch:{mapping:!0,regex:a("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:s,singleRegexMatchValue:!0},urls:{regexes:s,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position","endpoints"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(Ye,qe){switch(Ye.length){case 2:return"deg"!==qe[0]&&"rad"!==qe[0]&&"deg"!==qe[1]&&"rad"!==qe[1];case 1:return C(Ye[0])||"deg"===qe[0]||"rad"===qe[0];default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(Ye){var qe=Ye.length;return 1===qe||2===qe||4===qe}}};var u={zeroNonZero:function(Ye,qe){return(null==Ye||null==qe)&&Ye!==qe||0==Ye&&0!=qe||0!=Ye&&0==qe},any:function(Ye,qe){return Ye!=qe},emptyNonEmpty:function(Ye,qe){var it=re(Ye),at=re(qe);return it&&!at||!it&&at}},d=sr.types,p=[{name:"label",type:d.text,triggersBounds:u.any,triggersZOrder:u.emptyNonEmpty},{name:"text-rotation",type:d.textRotation,triggersBounds:u.any},{name:"text-margin-x",type:d.bidirectionalSize,triggersBounds:u.any},{name:"text-margin-y",type:d.bidirectionalSize,triggersBounds:u.any}],m=[{name:"source-label",type:d.text,triggersBounds:u.any},{name:"source-text-rotation",type:d.textRotation,triggersBounds:u.any},{name:"source-text-margin-x",type:d.bidirectionalSize,triggersBounds:u.any},{name:"source-text-margin-y",type:d.bidirectionalSize,triggersBounds:u.any},{name:"source-text-offset",type:d.size,triggersBounds:u.any}],v=[{name:"target-label",type:d.text,triggersBounds:u.any},{name:"target-text-rotation",type:d.textRotation,triggersBounds:u.any},{name:"target-text-margin-x",type:d.bidirectionalSize,triggersBounds:u.any},{name:"target-text-margin-y",type:d.bidirectionalSize,triggersBounds:u.any},{name:"target-text-offset",type:d.size,triggersBounds:u.any}],b=[{name:"font-family",type:d.fontFamily,triggersBounds:u.any},{name:"font-style",type:d.fontStyle,triggersBounds:u.any},{name:"font-weight",type:d.fontWeight,triggersBounds:u.any},{name:"font-size",type:d.size,triggersBounds:u.any},{name:"text-transform",type:d.textTransform,triggersBounds:u.any},{name:"text-wrap",type:d.textWrap,triggersBounds:u.any},{name:"text-overflow-wrap",type:d.textOverflowWrap,triggersBounds:u.any},{name:"text-max-width",type:d.size,triggersBounds:u.any},{name:"text-outline-width",type:d.size,triggersBounds:u.any},{name:"line-height",type:d.positiveNumber,triggersBounds:u.any}],w=[{name:"text-valign",type:d.valign,triggersBounds:u.any},{name:"text-halign",type:d.halign,triggersBounds:u.any},{name:"color",type:d.color},{name:"text-outline-color",type:d.color},{name:"text-outline-opacity",type:d.zeroOneNumber},{name:"text-background-color",type:d.color},{name:"text-background-opacity",type:d.zeroOneNumber},{name:"text-background-padding",type:d.size,triggersBounds:u.any},{name:"text-border-opacity",type:d.zeroOneNumber},{name:"text-border-color",type:d.color},{name:"text-border-width",type:d.size,triggersBounds:u.any},{name:"text-border-style",type:d.borderStyle,triggersBounds:u.any},{name:"text-background-shape",type:d.textBackgroundShape,triggersBounds:u.any},{name:"text-justification",type:d.justification}],k=[{name:"events",type:d.bool,triggersZOrder:u.any},{name:"text-events",type:d.bool,triggersZOrder:u.any}],T=[{name:"display",type:d.display,triggersZOrder:u.any,triggersBounds:u.any,triggersBoundsOfConnectedEdges:!0},{name:"visibility",type:d.visibility,triggersZOrder:u.any},{name:"opacity",type:d.zeroOneNumber,triggersZOrder:u.zeroNonZero},{name:"text-opacity",type:d.zeroOneNumber},{name:"min-zoomed-font-size",type:d.size},{name:"z-compound-depth",type:d.zCompoundDepth,triggersZOrder:u.any},{name:"z-index-compare",type:d.zIndexCompare,triggersZOrder:u.any},{name:"z-index",type:d.number,triggersZOrder:u.any}],O=[{name:"overlay-padding",type:d.size,triggersBounds:u.any},{name:"overlay-color",type:d.color},{name:"overlay-opacity",type:d.zeroOneNumber,triggersBounds:u.zeroNonZero},{name:"overlay-shape",type:d.overlayShape,triggersBounds:u.any}],D=[{name:"underlay-padding",type:d.size,triggersBounds:u.any},{name:"underlay-color",type:d.color},{name:"underlay-opacity",type:d.zeroOneNumber,triggersBounds:u.zeroNonZero},{name:"underlay-shape",type:d.overlayShape,triggersBounds:u.any}],z=[{name:"transition-property",type:d.propList},{name:"transition-duration",type:d.time},{name:"transition-delay",type:d.time},{name:"transition-timing-function",type:d.easing}],V=function(Ye,qe){return"label"===qe.value?-Ye.poolIndex():qe.pfValue},M=[{name:"height",type:d.nodeSize,triggersBounds:u.any,hashOverride:V},{name:"width",type:d.nodeSize,triggersBounds:u.any,hashOverride:V},{name:"shape",type:d.nodeShape,triggersBounds:u.any},{name:"shape-polygon-points",type:d.polygonPointList,triggersBounds:u.any},{name:"background-color",type:d.color},{name:"background-fill",type:d.fill},{name:"background-opacity",type:d.zeroOneNumber},{name:"background-blacken",type:d.nOneOneNumber},{name:"background-gradient-stop-colors",type:d.colors},{name:"background-gradient-stop-positions",type:d.percentages},{name:"background-gradient-direction",type:d.gradientDirection},{name:"padding",type:d.sizeMaybePercent,triggersBounds:u.any},{name:"padding-relative-to",type:d.paddingRelativeTo,triggersBounds:u.any},{name:"bounds-expansion",type:d.boundsExpansion,triggersBounds:u.any}],R=[{name:"border-color",type:d.color},{name:"border-opacity",type:d.zeroOneNumber},{name:"border-width",type:d.size,triggersBounds:u.any},{name:"border-style",type:d.borderStyle}],j=[{name:"outline-color",type:d.color},{name:"outline-opacity",type:d.zeroOneNumber},{name:"outline-width",type:d.size,triggersBounds:u.any},{name:"outline-style",type:d.borderStyle},{name:"outline-offset",type:d.size,triggersBounds:u.any}],Q=[{name:"background-image",type:d.urls},{name:"background-image-crossorigin",type:d.bgCrossOrigin},{name:"background-image-opacity",type:d.zeroOneNumbers},{name:"background-image-containment",type:d.bgContainment},{name:"background-image-smoothing",type:d.bools},{name:"background-position-x",type:d.bgPos},{name:"background-position-y",type:d.bgPos},{name:"background-width-relative-to",type:d.bgRelativeTo},{name:"background-height-relative-to",type:d.bgRelativeTo},{name:"background-repeat",type:d.bgRepeat},{name:"background-fit",type:d.bgFit},{name:"background-clip",type:d.bgClip},{name:"background-width",type:d.bgWH},{name:"background-height",type:d.bgWH},{name:"background-offset-x",type:d.bgPos},{name:"background-offset-y",type:d.bgPos}],K=[{name:"position",type:d.position,triggersBounds:u.any},{name:"compound-sizing-wrt-labels",type:d.compoundIncludeLabels,triggersBounds:u.any},{name:"min-width",type:d.size,triggersBounds:u.any},{name:"min-width-bias-left",type:d.sizeMaybePercent,triggersBounds:u.any},{name:"min-width-bias-right",type:d.sizeMaybePercent,triggersBounds:u.any},{name:"min-height",type:d.size,triggersBounds:u.any},{name:"min-height-bias-top",type:d.sizeMaybePercent,triggersBounds:u.any},{name:"min-height-bias-bottom",type:d.sizeMaybePercent,triggersBounds:u.any}],Y=[{name:"line-style",type:d.lineStyle},{name:"line-color",type:d.color},{name:"line-fill",type:d.fill},{name:"line-cap",type:d.lineCap},{name:"line-opacity",type:d.zeroOneNumber},{name:"line-dash-pattern",type:d.numbers},{name:"line-dash-offset",type:d.number},{name:"line-gradient-stop-colors",type:d.colors},{name:"line-gradient-stop-positions",type:d.percentages},{name:"curve-style",type:d.curveStyle,triggersBounds:u.any,triggersBoundsOfParallelBeziers:!0},{name:"haystack-radius",type:d.zeroOneNumber,triggersBounds:u.any},{name:"source-endpoint",type:d.edgeEndpoint,triggersBounds:u.any},{name:"target-endpoint",type:d.edgeEndpoint,triggersBounds:u.any},{name:"control-point-step-size",type:d.size,triggersBounds:u.any},{name:"control-point-distances",type:d.bidirectionalSizes,triggersBounds:u.any},{name:"control-point-weights",type:d.numbers,triggersBounds:u.any},{name:"segment-distances",type:d.bidirectionalSizes,triggersBounds:u.any},{name:"segment-weights",type:d.numbers,triggersBounds:u.any},{name:"taxi-turn",type:d.bidirectionalSizeMaybePercent,triggersBounds:u.any},{name:"taxi-turn-min-distance",type:d.size,triggersBounds:u.any},{name:"taxi-direction",type:d.axisDirection,triggersBounds:u.any},{name:"edge-distances",type:d.edgeDistances,triggersBounds:u.any},{name:"arrow-scale",type:d.positiveNumber,triggersBounds:u.any},{name:"loop-direction",type:d.angle,triggersBounds:u.any},{name:"loop-sweep",type:d.angle,triggersBounds:u.any},{name:"source-distance-from-node",type:d.size,triggersBounds:u.any},{name:"target-distance-from-node",type:d.size,triggersBounds:u.any}],W=[{name:"ghost",type:d.bool,triggersBounds:u.any},{name:"ghost-offset-x",type:d.bidirectionalSize,triggersBounds:u.any},{name:"ghost-offset-y",type:d.bidirectionalSize,triggersBounds:u.any},{name:"ghost-opacity",type:d.zeroOneNumber}],ne=[{name:"selection-box-color",type:d.color},{name:"selection-box-opacity",type:d.zeroOneNumber},{name:"selection-box-border-color",type:d.color},{name:"selection-box-border-width",type:d.size},{name:"active-bg-color",type:d.color},{name:"active-bg-opacity",type:d.zeroOneNumber},{name:"active-bg-size",type:d.size},{name:"outside-texture-bg-color",type:d.color},{name:"outside-texture-bg-opacity",type:d.zeroOneNumber}],ie=[];sr.pieBackgroundN=16,ie.push({name:"pie-size",type:d.sizeMaybePercent});for(var oe=1;oe<=sr.pieBackgroundN;oe++)ie.push({name:"pie-"+oe+"-background-color",type:d.color}),ie.push({name:"pie-"+oe+"-background-size",type:d.percent}),ie.push({name:"pie-"+oe+"-background-opacity",type:d.zeroOneNumber});var ce=[],ue=sr.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:d.arrowShape,triggersBounds:u.any},{name:"arrow-color",type:d.color},{name:"arrow-fill",type:d.arrowFill},{name:"arrow-width",type:d.arrowWidth}].forEach(function(Ye){ue.forEach(function(qe){ce.push({name:qe+"-"+Ye.name,type:Ye.type,triggersBounds:Ye.triggersBounds})})},{});var he=sr.properties=[].concat(k,z,T,O,D,W,w,b,p,m,v,M,R,j,Q,ie,K,Y,ce,ne),ke=sr.propertyGroups={behavior:k,transition:z,visibility:T,overlay:O,underlay:D,ghost:W,commonLabel:w,labelDimensions:b,mainLabel:p,sourceLabel:m,targetLabel:v,nodeBody:M,nodeBorder:R,nodeOutline:j,backgroundImage:Q,pie:ie,compound:K,edgeLine:Y,edgeArrow:ce,core:ne},xe=sr.propertyGroupNames={};(sr.propertyGroupKeys=Object.keys(ke)).forEach(function(Ye){xe[Ye]=ke[Ye].map(function(qe){return qe.name}),ke[Ye].forEach(function(qe){return qe.groupKey=Ye})});var me=sr.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];sr.propertyNames=he.map(function(Ye){return Ye.name});for(var ye=0;ye<he.length;ye++){var Le=he[ye];he[Le.name]=Le}for(var De=0;De<me.length;De++){var Ve=me[De],He={name:Ve.name,alias:!0,pointsTo:he[Ve.pointsTo]};he.push(He),he[Ve.name]=He}})(),sr.getDefaultProperty=function(t){return this.getDefaultProperties()[t]},sr.getDefaultProperties=function(){var t=this._private;if(null!=t.defaultProperties)return t.defaultProperties;for(var r=ee({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid","outline-color":"#999","outline-opacity":1,"outline-width":0,"outline-offset":0,"outline-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(v,b){for(var w=1;w<=sr.pieBackgroundN;w++)v[b.name.replace("{{i}}",w)]=b.value;return v},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"taxi-turn":"50%","taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"},{name:"arrow-width",value:1}].reduce(function(v,b){return sr.arrowPrefixes.forEach(function(w){v[w+"-"+b.name]=b.value}),v},{})),a={},s=0;s<this.properties.length;s++){var u=this.properties[s];if(!u.pointsTo){var d=u.name,m=this.parse(d,r[d]);a[d]=m}}return t.defaultProperties=a,t.defaultProperties},sr.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var zp={parse:function(t,r,a,s){if(L(r))return this.parseImplWarn(t,r,a,s);var u,d=Hr(t,""+r,a?"t":"f","mapping"===s||!0===s||!1===s||null==s?"dontcare":s),p=this.propCache=this.propCache||[];return(u=p[d])||(u=p[d]=this.parseImplWarn(t,r,a,s)),(a||"mapping"===s)&&(u=ti(u))&&(u.value=ti(u.value)),u},parseImplWarn:function(t,r,a,s){var u=this.parseImpl(t,r,a,s);return u||null==r||nn("The style property `".concat(t,": ").concat(r,"` is invalid")),!u||"width"!==u.name&&"height"!==u.name||"label"!==r||nn("The style value of `label` is deprecated for `"+u.name+"`"),u},parseImpl:function(t,r,a,s){t=se(t);var u=this.properties[t],d=r,p=this.types;if(!u||void 0===r)return null;u.alias&&(t=(u=u.pointsTo).name);var m=C(r);m&&(r=r.trim());var v,b,w=u.type;if(!w)return null;if(a&&(""===r||null===r))return{name:t,value:r,bypass:!0,deleteBypass:!0};if(L(r))return{name:t,value:r,strValue:"fn",mapped:p.fn,bypass:a};if(!(!m||s||r.length<7||"a"!==r[1])){if(r.length>=7&&"d"===r[0]&&(v=new RegExp(p.data.regex).exec(r)))return!a&&{name:t,value:v,strValue:""+r,mapped:p.data,field:v[1],bypass:a};if(r.length>=10&&"m"===r[0]&&(b=new RegExp(p.mapData.regex).exec(r))){if(a||w.multiple)return!1;var T=p.mapData;if(!w.color&&!w.number)return!1;var O=this.parse(t,b[4]);if(!O||O.mapped)return!1;var D=this.parse(t,b[5]);if(!D||D.mapped)return!1;if(O.pfValue===D.pfValue||O.strValue===D.strValue)return nn("`"+t+": "+r+"` is not a valid mapper because the output range is zero; converting to `"+t+": "+O.strValue+"`"),this.parse(t,O.strValue);if(w.color){var z=O.value,V=D.value;if(!(z[0]!==V[0]||z[1]!==V[1]||z[2]!==V[2]||z[3]!==V[3]&&(null!=z[3]&&1!==z[3]||null!=V[3]&&1!==V[3])))return!1}return{name:t,value:b,strValue:""+r,mapped:T,field:b[1],fieldMin:parseFloat(b[2]),fieldMax:parseFloat(b[3]),valueMin:O.value,valueMax:D.value,bypass:a}}}if(w.multiple&&"multiple"!==s){var M;if(M=m?r.split(/\s+/):I(r)?r:[r],w.evenMultiple&&M.length%2!=0)return null;for(var R=[],j=[],Q=[],K="",Y=!1,W=0;W<M.length;W++){var ne=this.parse(t,M[W],a,"multiple");Y=Y||C(ne.value),R.push(ne.value),Q.push(null!=ne.pfValue?ne.pfValue:ne.value),j.push(ne.units),K+=(W>0?" ":"")+ne.strValue}return w.validate&&!w.validate(R,j)?null:w.singleEnum&&Y?1===R.length&&C(R[0])?{name:t,value:R[0],strValue:R[0],bypass:a}:null:{name:t,value:R,pfValue:Q,strValue:K,bypass:a,units:j}}var oe,ce=function(){for(var nt=0;nt<w.enums.length;nt++)if(w.enums[nt]===r)return{name:t,value:r,strValue:""+r,bypass:a};return null};if(w.number){var ue,he="px";if(w.units&&(ue=w.units),w.implicitUnits&&(he=w.implicitUnits),!w.unitless)if(m){var ke="px|em"+(w.allowPercent?"|\\%":"");ue&&(ke=ue);var xe=r.match("^("+fe+")("+ke+")?$");xe&&(r=xe[1],ue=xe[2]||he)}else ue&&!w.implicitUnits||(ue=he);if(r=parseFloat(r),isNaN(r)&&void 0===w.enums)return null;if(isNaN(r)&&void 0!==w.enums)return r=d,ce();if(w.integer&&(!B(oe=r)||Math.floor(oe)!==oe)||void 0!==w.min&&(r<w.min||w.strictMin&&r===w.min)||void 0!==w.max&&(r>w.max||w.strictMax&&r===w.max))return null;var me={name:t,value:r,strValue:""+r+(ue||""),units:ue,bypass:a};return me.pfValue=w.unitless||"px"!==ue&&"em"!==ue?r:"px"!==ue&&ue?this.getEmSizeInPixels()*r:r,"ms"!==ue&&"s"!==ue||(me.pfValue="ms"===ue?r:1e3*r),"deg"!==ue&&"rad"!==ue||(me.pfValue="rad"===ue?r:Math.PI*r/180),"%"===ue&&(me.pfValue=r/100),me}if(w.propList){var ye=[],Le=""+r;if("none"!==Le){for(var De=Le.split(/\s*,\s*|\s+/),Ve=0;Ve<De.length;Ve++){var Te=De[Ve].trim();this.properties[Te]?ye.push(Te):nn("`"+Te+"` is not a valid property name")}if(0===ye.length)return null}return{name:t,value:ye,strValue:0===ye.length?"none":ye.join(" "),bypass:a}}if(w.color){var He=function(t){return(I(t)?t:null)||Ie[t.toLowerCase()]||function(r){var a,s,u;if((4===r.length||7===r.length)&&"#"===r[0])return 4===r.length?(a=parseInt(r[1]+r[1],16),s=parseInt(r[2]+r[2],16),u=parseInt(r[3]+r[3],16)):(a=parseInt(r[1]+r[2],16),s=parseInt(r[3]+r[4],16),u=parseInt(r[5]+r[6],16)),[a,s,u]}(t)||function(r){var a,s=new RegExp("^rgb[a]?\\(((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)(?:\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)$").exec(r);if(s){a=[];for(var u=[],d=1;d<=3;d++){var p=s[d];if("%"===p[p.length-1]&&(u[d]=!0),p=parseFloat(p),u[d]&&(p=p/100*255),p<0||p>255)return;a.push(Math.floor(p))}if((u[1]||u[2]||u[3])&&!(u[1]&&u[2]&&u[3]))return;var b=s[4];if(void 0!==b){if((b=parseFloat(b))<0||b>1)return;a.push(b)}}return a}(t)||function(r){var a,s,u,d,p,m,v,b;function w(D,z,V){return V<0&&(V+=1),V>1&&(V-=1),V<1/6?D+6*(z-D)*V:V<.5?z:V<2/3?D+(z-D)*(2/3-V)*6:D}var k=new RegExp("^hsl[a]?\\(((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?)))\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])(?:\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)$").exec(r);if(k){if((s=parseInt(k[1]))<0?s=(360- -1*s%360)%360:s>360&&(s%=360),s/=360,(u=parseFloat(k[2]))<0||u>100||(u/=100,(d=parseFloat(k[3]))<0||d>100)||(d/=100,void 0!==(p=k[4])&&((p=parseFloat(p))<0||p>1)))return;if(0===u)m=v=b=Math.round(255*d);else{var T=d<.5?d*(1+u):d+u-d*u,O=2*d-T;m=Math.round(255*w(O,T,s+1/3)),v=Math.round(255*w(O,T,s)),b=Math.round(255*w(O,T,s-1/3))}a=[m,v,b,p]}return a}(t)}(r);return He?{name:t,value:He,pfValue:He,strValue:"rgb("+He[0]+","+He[1]+","+He[2]+")",bypass:a}:null}if(w.regex||w.regexes){if(w.enums){var Ye=ce();if(Ye)return Ye}for(var qe=w.regexes?w.regexes:[w.regex],it=0;it<qe.length;it++){var at=new RegExp(qe[it]).exec(r);if(at)return{name:t,value:w.singleRegexMatchValue?at[1]:at,strValue:""+r,bypass:a}}return null}return w.string?{name:t,value:""+r,strValue:""+r,bypass:a}:w.enums?ce():null}},xr=function t(r){if(!(this instanceof t))return new t(r);H(r)?(this._private={cy:r,coreStyle:{}},this.length=0,this.resetToDefault()):$t("A style must have a core reference")},wr=xr.prototype;wr.instanceString=function(){return"style"},wr.clear=function(){for(var t=this._private,r=t.cy.elements(),a=0;a<this.length;a++)this[a]=void 0;return this.length=0,t.contextStyles={},t.propDiffs={},this.cleanElements(r,!0),r.forEach(function(s){var u=s[0]._private;u.styleDirty=!0,u.appliedInitStyle=!1}),this},wr.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this},wr.core=function(t){return this._private.coreStyle[t]||this.getDefaultProperty(t)},wr.selector=function(t){var r="core"===t?null:new Rt(t),a=this.length++;return this[a]={selector:r,properties:[],mappedProperties:[],index:a},this},wr.css=function(){var r=arguments;if(1===r.length)for(var a=r[0],s=0;s<this.properties.length;s++){var u=this.properties[s],d=a[u.name];void 0===d&&(d=a[de(u.name)]),void 0!==d&&this.cssRule(u.name,d)}else 2===r.length&&this.cssRule(r[0],r[1]);return this},wr.style=wr.css,wr.cssRule=function(t,r){var a=this.parse(t,r);if(a){var s=this.length-1;this[s].properties.push(a),this[s].properties[a.name]=a,a.name.match(/pie-(\d+)-background-size/)&&a.value&&(this._private.hasPie=!0),a.mapped&&this[s].mappedProperties.push(a),!this[s].selector&&(this._private.coreStyle[a.name]=a)}return this},wr.append=function(t){return te(t)?t.appendToStyle(this):I(t)?this.appendFromJson(t):C(t)&&this.appendFromString(t),this},xr.fromJson=function(t,r){var a=new xr(t);return a.fromJson(r),a},xr.fromString=function(t,r){return new xr(t).fromString(r)},[br,Am,Bm,lh,Lm,Om,sr,zp].forEach(function(t){ee(wr,t)}),xr.types=wr.types,xr.properties=wr.properties,xr.propertyGroups=wr.propertyGroups,xr.propertyGroupNames=wr.propertyGroupNames,xr.propertyGroupKeys=wr.propertyGroupKeys;var Nm={style:function(t){return t&&this.setStyle(t).update(),this._private.style},setStyle:function(t){var r=this._private;return r.style=te(t)?t.generateStyle(this):I(t)?xr.fromJson(this,t):C(t)?xr.fromString(this,t):xr(this),r.style},updateStyle:function(){this.mutableElements().updateStyle()}},po={autolock:function(t){return void 0===t?this._private.autolock:(this._private.autolock=!!t,this)},autoungrabify:function(t){return void 0===t?this._private.autoungrabify:(this._private.autoungrabify=!!t,this)},autounselectify:function(t){return void 0===t?this._private.autounselectify:(this._private.autounselectify=!!t,this)},selectionType:function(t){var r=this._private;return null==r.selectionType&&(r.selectionType="single"),void 0===t?r.selectionType:("additive"!==t&&"single"!==t||(r.selectionType=t),this)},panningEnabled:function(t){return void 0===t?this._private.panningEnabled:(this._private.panningEnabled=!!t,this)},userPanningEnabled:function(t){return void 0===t?this._private.userPanningEnabled:(this._private.userPanningEnabled=!!t,this)},zoomingEnabled:function(t){return void 0===t?this._private.zoomingEnabled:(this._private.zoomingEnabled=!!t,this)},userZoomingEnabled:function(t){return void 0===t?this._private.userZoomingEnabled:(this._private.userZoomingEnabled=!!t,this)},boxSelectionEnabled:function(t){return void 0===t?this._private.boxSelectionEnabled:(this._private.boxSelectionEnabled=!!t,this)},pan:function(){var t,r,a,s,u,d=arguments,p=this._private.pan;switch(d.length){case 0:return p;case 1:if(C(d[0]))return p[t=d[0]];if(P(d[0])){if(!this._private.panningEnabled)return this;s=(a=d[0]).x,u=a.y,B(s)&&(p.x=s),B(u)&&(p.y=u),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;r=d[1],"x"!==(t=d[0])&&"y"!==t||!B(r)||(p[t]=r),this.emit("pan viewport")}return this.notify("viewport"),this},panBy:function(t,r){var a,s,u,d,p,m=arguments,v=this._private.pan;if(!this._private.panningEnabled)return this;switch(m.length){case 1:P(t)&&(d=(u=m[0]).x,p=u.y,B(d)&&(v.x+=d),B(p)&&(v.y+=p),this.emit("pan viewport"));break;case 2:s=r,"x"!==(a=t)&&"y"!==a||!B(s)||(v[a]+=s),this.emit("pan viewport")}return this.notify("viewport"),this},fit:function(t,r){var a=this.getFitViewport(t,r);if(a){var s=this._private;s.zoom=a.zoom,s.pan=a.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(t,r){var a,s;if((B(t)&&void 0===r&&(r=t,t=void 0),this._private.panningEnabled&&this._private.zoomingEnabled)&&(C(t)?t=this.$(t):P(s=t)&&B(s.x1)&&B(s.x2)&&B(s.y1)&&B(s.y2)?((a={x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2}).w=a.x2-a.x1,a.h=a.y2-a.y1):G(t)||(t=this.mutableElements()),!G(t)||!t.empty())){a=a||t.boundingBox();var p,m=this.width(),v=this.height();if(r=B(r)?r:0,!isNaN(m)&&!isNaN(v)&&m>0&&v>0&&!isNaN(a.w)&&!isNaN(a.h)&&a.w>0&&a.h>0)return{zoom:p=(p=(p=Math.min((m-2*r)/a.w,(v-2*r)/a.h))>this._private.maxZoom?this._private.maxZoom:p)<this._private.minZoom?this._private.minZoom:p,pan:{x:(m-p*(a.x1+a.x2))/2,y:(v-p*(a.y1+a.y2))/2}}}},zoomRange:function(t,r){var a=this._private;if(null==r){var s=t;t=s.min,r=s.max}return B(t)&&B(r)&&t<=r?(a.minZoom=t,a.maxZoom=r):B(t)&&void 0===r&&t<=a.maxZoom?a.minZoom=t:B(r)&&void 0===t&&r>=a.minZoom&&(a.maxZoom=r),this},minZoom:function(t){return void 0===t?this._private.minZoom:this.zoomRange({min:t})},maxZoom:function(t){return void 0===t?this._private.maxZoom:this.zoomRange({max:t})},getZoomedViewport:function(t){var r,a,s=this._private,u=s.pan,d=s.zoom,p=!1;return s.zoomingEnabled||(p=!0),B(t)?a=t:P(t)&&(a=t.level,null!=t.position?r=rr(t.position,d,u):null!=t.renderedPosition&&(r=t.renderedPosition),null==r||s.panningEnabled||(p=!0)),a=(a=a>s.maxZoom?s.maxZoom:a)<s.minZoom?s.minZoom:a,!p&&B(a)&&a!==d&&(null==r||B(r.x)&&B(r.y))?null!=r?{zoomed:!0,panned:!0,zoom:a,pan:{x:-a/d*(r.x-u.x)+r.x,y:-a/d*(r.y-u.y)+r.y}}:{zoomed:!0,panned:!1,zoom:a,pan:u}:null},zoom:function(t){if(void 0===t)return this._private.zoom;var r=this.getZoomedViewport(t),a=this._private;return null!=r&&r.zoomed?(a.zoom=r.zoom,r.panned&&(a.pan.x=r.pan.x,a.pan.y=r.pan.y),this.emit("zoom"+(r.panned?" pan":"")+" viewport"),this.notify("viewport"),this):this},viewport:function(t){var r=this._private,a=!0,s=!0,u=[],d=!1,p=!1;if(!t)return this;if(B(t.zoom)||(a=!1),P(t.pan)||(s=!1),!a&&!s)return this;if(a){var m=t.zoom;m<r.minZoom||m>r.maxZoom||!r.zoomingEnabled?d=!0:(r.zoom=m,u.push("zoom"))}if(s&&(!d||!t.cancelOnFailedZoom)&&r.panningEnabled){var v=t.pan;B(v.x)&&(r.pan.x=v.x,p=!1),B(v.y)&&(r.pan.y=v.y,p=!1),p||u.push("pan")}return u.length>0&&(u.push("viewport"),this.emit(u.join(" ")),this.notify("viewport")),this},center:function(t){var r=this.getCenterPan(t);return r&&(this._private.pan=r,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(t,r){if(this._private.panningEnabled){if(C(t)){var a=t;t=this.mutableElements().filter(a)}else G(t)||(t=this.mutableElements());if(0!==t.length){var s=t.boundingBox(),u=this.width(),d=this.height();return{x:(u-(r=void 0===r?this._private.zoom:r)*(s.x1+s.x2))/2,y:(d-r*(s.y1+s.y2))/2}}}},reset:function(){return this._private.panningEnabled&&this._private.zoomingEnabled?(this.viewport({pan:{x:0,y:0},zoom:1}),this):this},invalidateSize:function(){this._private.sizeCache=null},size:function(){var t,r,a=this._private,s=a.container;return a.sizeCache=a.sizeCache||(s?(t=this.window().getComputedStyle(s),{width:s.clientWidth-(r=function(d){return parseFloat(t.getPropertyValue(d))})("padding-left")-r("padding-right"),height:s.clientHeight-r("padding-top")-r("padding-bottom")}):{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var t=this._private.pan,r=this._private.zoom,a=this.renderedExtent(),s={x1:(a.x1-t.x)/r,x2:(a.x2-t.x)/r,y1:(a.y1-t.y)/r,y2:(a.y2-t.y)/r};return s.w=s.x2-s.x1,s.h=s.y2-s.y1,s},renderedExtent:function(){var t=this.width(),r=this.height();return{x1:0,y1:0,x2:t,y2:r,w:t,h:r}},multiClickDebounceTime:function(t){return t?(this._private.multiClickDebounceTime=t,this):this._private.multiClickDebounceTime}};po.centre=po.center,po.autolockNodes=po.autolock,po.autoungrabifyNodes=po.autoungrabify;var gl={data:Zt.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:Zt.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:Zt.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:Zt.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};gl.attr=gl.data,gl.removeAttr=gl.removeData;var vl=function(t){var r=this,a=(t=ee({},t)).container;a&&!F(a)&&F(a[0])&&(a=a[0]);var s=a?a._cyreg:null;(s=s||{})&&s.cy&&(s.cy.destroy(),s={});var u=s.readies=s.readies||[];a&&(a._cyreg=s),s.cy=r;var d=void 0!==f&&void 0!==a&&!t.headless,p=t;p.layout=ee({name:d?"grid":"null"},p.layout),p.renderer=ee({name:d?"canvas":"null"},p.renderer);var m=function(w,k,T){return void 0!==k?k:void 0!==T?T:w},v=this._private={container:a,ready:!1,options:p,elements:new or(this),listeners:[],aniEles:new or(this),data:p.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:m(!0,p.zoomingEnabled),userZoomingEnabled:m(!0,p.userZoomingEnabled),panningEnabled:m(!0,p.panningEnabled),userPanningEnabled:m(!0,p.userPanningEnabled),boxSelectionEnabled:m(!0,p.boxSelectionEnabled),autolock:m(!1,p.autolock,p.autolockNodes),autoungrabify:m(!1,p.autoungrabify,p.autoungrabifyNodes),autounselectify:m(!1,p.autounselectify),styleEnabled:void 0===p.styleEnabled?d:p.styleEnabled,zoom:B(p.zoom)?p.zoom:1,pan:{x:P(p.pan)&&B(p.pan.x)?p.pan.x:0,y:P(p.pan)&&B(p.pan.y)?p.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:m(250,p.multiClickDebounceTime)};this.createEmitter(),this.selectionType(p.selectionType),this.zoomRange({min:p.minZoom,max:p.maxZoom}),v.styleEnabled&&r.setStyle([]);var b=ee({},p,p.renderer);r.initRenderer(b),function(w,k){if(w.some(ae))return Ui.all(w).then(k);k(w)}([p.style,p.elements],function(w){var k=w[0],T=w[1];v.styleEnabled&&r.style().append(k),function(O,D,z){r.notifications(!1);var V=r.mutableElements();V.length>0&&V.remove(),null!=O&&(P(O)||I(O))&&r.add(O),r.one("layoutready",function(R){r.notifications(!0),r.emit(R),r.one("load",D),r.emitAndNotify("load")}).one("layoutstop",function(){r.one("done",z),r.emit("done")});var M=ee({},r._private.options.layout);M.eles=r.elements(),r.layout(M).run()}(T,function(){r.startAnimationLoop(),v.ready=!0,L(p.ready)&&r.on("ready",p.ready);for(var O=0;O<u.length;O++)r.on("ready",u[O]);s&&(s.readies=[]),r.emit("ready")},p.done)})},dc=vl.prototype;ee(dc,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(t){return this.isReady()?this.emitter().emit("ready",[],t):this.on("ready",t),this},destroy:function(){var t=this;if(!t.destroyed())return t.stopAnimationLoop(),t.destroyRenderer(),this.emit("destroy"),t._private.destroyed=!0,t},hasElementWithId:function(t){return this._private.elements.hasElementWithId(t)},getElementById:function(t){return this._private.elements.getElementById(t)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(t){return this._private.elements.merge(t),this},removeFromPool:function(t){return this._private.elements.unmerge(t),this},container:function(){return this._private.container||null},window:function(){if(null==this._private.container)return f;var t=this._private.container.ownerDocument;return void 0===t||null==t?f:t.defaultView||f},mount:function(t){if(null!=t){var r=this,a=r._private,s=a.options;return!F(t)&&F(t[0])&&(t=t[0]),r.stopAnimationLoop(),r.destroyRenderer(),a.container=t,a.styleEnabled=!0,r.invalidateSize(),r.initRenderer(ee({},s,s.renderer,{name:"null"===s.renderer.name?"canvas":s.renderer.name})),r.startAnimationLoop(),r.style(s.style),r.emit("mount"),r}},unmount:function(){var t=this;return t.stopAnimationLoop(),t.destroyRenderer(),t.initRenderer({name:"null"}),t.emit("unmount"),t},options:function(){return ti(this._private.options)},json:function(t){var r=this,a=r._private,s=r.mutableElements();if(P(t)){if(r.startBatch(),t.elements){var u={},d=function(V,M){for(var R=[],j=[],Q=0;Q<V.length;Q++){var K=V[Q];if(K.data.id){var Y=""+K.data.id,W=r.getElementById(Y);u[Y]=!0,0!==W.length?j.push({ele:W,json:K}):(M&&(K.group=M),R.push(K))}else nn("cy.json() cannot handle elements without an ID attribute")}r.add(R);for(var ne=0;ne<j.length;ne++){var ie=j[ne];ie.ele.json(ie.json)}};if(I(t.elements))d(t.elements);else for(var p=["nodes","edges"],m=0;m<p.length;m++){var v=p[m],b=t.elements[v];I(b)&&d(b,v)}var w=r.collection();s.filter(function(V){return!u[V.id()]}).forEach(function(V){V.isParent()?w.merge(V):V.remove()}),w.forEach(function(V){return V.children().move({parent:null})}),w.forEach(function(V){return(M=V,r.getElementById(M.id())).remove();var M})}t.style&&r.style(t.style),null!=t.zoom&&t.zoom!==a.zoom&&r.zoom(t.zoom),t.pan&&(t.pan.x===a.pan.x&&t.pan.y===a.pan.y||r.pan(t.pan)),t.data&&r.data(t.data);for(var k=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],T=0;T<k.length;T++){var O=k[T];null!=t[O]&&r[O](t[O])}return r.endBatch(),this}var D={};t?D.elements=this.elements().map(function(V){return V.json()}):(D.elements={},s.forEach(function(V){var M=V.group();D.elements[M]||(D.elements[M]=[]),D.elements[M].push(V.json())})),this._private.styleEnabled&&(D.style=r.style().json()),D.data=ti(r.data());var z=a.options;return D.zoomingEnabled=a.zoomingEnabled,D.userZoomingEnabled=a.userZoomingEnabled,D.zoom=a.zoom,D.minZoom=a.minZoom,D.maxZoom=a.maxZoom,D.panningEnabled=a.panningEnabled,D.userPanningEnabled=a.userPanningEnabled,D.pan=ti(a.pan),D.boxSelectionEnabled=a.boxSelectionEnabled,D.renderer=ti(z.renderer),D.hideEdgesOnViewport=z.hideEdgesOnViewport,D.textureOnViewport=z.textureOnViewport,D.wheelSensitivity=z.wheelSensitivity,D.motionBlur=z.motionBlur,D.multiClickDebounceTime=z.multiClickDebounceTime,D}}),dc.$id=dc.getElementById,[_m,Tm,Np,oh,uc,Dm,sh,cc,Nm,po,gl].forEach(function(t){ee(dc,t)});var zm={fit:!0,directed:!1,padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,r){return!0},ready:void 0,stop:void 0,transform:function(t,r){return r}},Im={maximal:!1,acyclic:!1},rs=function(t){return t.scratch("breadthfirst")},Ip=function(t,r){return t.scratch("breadthfirst",r)};function Rp(t){this.options=ee({},zm,Im,t)}Rp.prototype.run=function(){var t,r=this.options,a=r,s=r.cy,u=a.eles,d=u.nodes().filter(function($e){return!$e.isParent()}),p=u,m=a.directed,v=a.acyclic||a.maximal||a.maximalAdjustments>0,b=Mn(a.boundingBox?a.boundingBox:{x1:0,y1:0,w:s.width(),h:s.height()});if(G(a.roots))t=a.roots;else if(I(a.roots)){for(var w=[],k=0;k<a.roots.length;k++){var O=s.getElementById(a.roots[k]);w.push(O)}t=s.collection(w)}else if(C(a.roots))t=s.$(a.roots);else if(m)t=d.roots();else{var D=u.components();t=s.collection();for(var z=function($e){var xt=D[$e],Tt=xt.maxDegree(!1),ht=xt.filter(function(Z){return Z.degree(!1)===Tt});t=t.add(ht)},V=0;V<D.length;V++)z(V)}var M=[],R={},j=function($e,xt){null==M[xt]&&(M[xt]=[]);var Tt=M[xt].length;M[xt].push($e),Ip($e,{index:Tt,depth:xt})};p.bfs({roots:t,directed:a.directed,visit:function($e,xt,Tt,ht,Z){var ve=$e[0],Me=ve.id();j(ve,Z),R[Me]=!0}});for(var Q=[],K=0;K<d.length;K++){var Y=d[K];R[Y.id()]||Q.push(Y)}var W=function($e){for(var xt=M[$e],Tt=0;Tt<xt.length;Tt++){var ht=xt[Tt];null!=ht?Ip(ht,{depth:$e,index:Tt}):(xt.splice(Tt,1),Tt--)}},ne=function(){for(var $e=0;$e<M.length;$e++)W($e)},ie=function($e,xt){for(var Tt=rs($e),ht=$e.incomers().filter(function(Qe){return Qe.isNode()&&u.has(Qe)}),Z=-1,ve=$e.id(),Me=0;Me<ht.length;Me++){var Be=rs(ht[Me]);Z=Math.max(Z,Be.depth)}if(Tt.depth<=Z){if(!a.acyclic&&xt[ve])return null;var et=Z+1;return Bt=et,ct=rs(Qe=$e),M[ct.depth][ct.index]=null,j(Qe,Bt),xt[ve]=et,!0}var Qe,Bt,ct;return!1};if(m&&v){var oe=[],ce={},ue=function($e){return oe.push($e)};for(d.forEach(function($e){return oe.push($e)});oe.length>0;){var he=oe.shift(),ke=ie(he,ce);if(ke)he.outgoers().filter(function($e){return $e.isNode()&&u.has($e)}).forEach(ue);else if(null===ke){nn("Detected double maximal shift for node `"+he.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}ne();var xe=0;if(a.avoidOverlap)for(var me=0;me<d.length;me++){var ye=d[me].layoutDimensions(a);xe=Math.max(xe,ye.w,ye.h)}var Ve={},Te=function($e){if(Ve[$e.id()])return Ve[$e.id()];for(var xt=rs($e).depth,Tt=$e.neighborhood(),ht=0,Z=0,ve=0;ve<Tt.length;ve++){var Me=Tt[ve];if(!Me.isEdge()&&!Me.isParent()&&d.has(Me)){var Ne=rs(Me);if(null!=Ne){var Be=Ne.index,et=Ne.depth;null!=Be&&null!=et&&et<xt&&(ht+=Be/M[et].length,Z++)}}}return ht/=Z=Math.max(1,Z),0===Z&&(ht=0),Ve[$e.id()]=ht,ht},He=function($e,xt){var Tt=Te($e)-Te(xt);return 0===Tt?ge($e.id(),xt.id()):Tt};void 0!==a.depthSort&&(He=a.depthSort);for(var Ye=0;Ye<M.length;Ye++)M[Ye].sort(He),W(Ye);for(var qe=[],it=0;it<Q.length;it++)qe.push(Q[it]);M.unshift(qe),ne();for(var at=0,nt=0;nt<M.length;nt++)at=Math.max(M[nt].length,at);var dt=b.x1+b.w/2,yt=b.x1+b.h/2,Dt=M.reduce(function($e,xt){return Math.max($e,xt.length)},0);return u.nodes().layoutPositions(this,a,function($e){var xt=rs($e),Tt=xt.depth,ht=xt.index,Z=M[Tt].length,ve=Math.max(b.w/((a.grid?Dt:Z)+1),xe),Me=Math.max(b.h/(M.length+1),xe),Ne=Math.min(b.w/2/M.length,b.h/2/M.length);if(Ne=Math.max(Ne,xe),a.circle){var Be=Ne*Tt+Ne-(M.length>0&&M[0].length<=3?Ne/2:0),et=2*Math.PI/M[Tt].length*ht;return 0===Tt&&1===M[0].length&&(Be=1),{x:dt+Be*Math.cos(et),y:yt+Be*Math.sin(et)}}return{x:dt+(ht+1-(Z+1)/2)*ve,y:(Tt+1)*Me}}),this};var Rm={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,r){return!0},ready:void 0,stop:void 0,transform:function(t,r){return r}};function Fp(t){this.options=ee({},Rm,t)}Fp.prototype.run=function(){var t=this.options,r=t,a=t.cy,s=r.eles,u=void 0!==r.counterclockwise?!r.counterclockwise:r.clockwise,d=s.nodes().not(":parent");r.sort&&(d=d.sort(r.sort));for(var p,m=Mn(r.boundingBox?r.boundingBox:{x1:0,y1:0,w:a.width(),h:a.height()}),v=m.x1+m.w/2,b=m.y1+m.h/2,w=(void 0===r.sweep?2*Math.PI-2*Math.PI/d.length:r.sweep)/Math.max(1,d.length-1),k=0,T=0;T<d.length;T++){var O=d[T].layoutDimensions(r);k=Math.max(k,O.w,O.h)}if(p=B(r.radius)?r.radius:d.length<=1?0:Math.min(m.h,m.w)/2-k,d.length>1&&r.avoidOverlap){k*=1.75;var V=Math.cos(w)-Math.cos(0),M=Math.sin(w)-Math.sin(0),R=Math.sqrt(k*k/(V*V+M*M));p=Math.max(R,p)}return s.nodes().layoutPositions(this,r,function(j,Q){var K=r.startAngle+Q*w*(u?1:-1),Y=p*Math.cos(K),W=p*Math.sin(K);return{x:v+Y,y:b+W}}),this};var Vp,Fm={fit:!0,padding:30,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(t){return t.degree()},levelWidth:function(t){return t.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,r){return!0},ready:void 0,stop:void 0,transform:function(t,r){return r}};function jp(t){this.options=ee({},Fm,t)}jp.prototype.run=function(){for(var t=this.options,r=t,a=void 0!==r.counterclockwise?!r.counterclockwise:r.clockwise,s=t.cy,u=r.eles,d=u.nodes().not(":parent"),p=Mn(r.boundingBox?r.boundingBox:{x1:0,y1:0,w:s.width(),h:s.height()}),m=p.x1+p.w/2,v=p.y1+p.h/2,b=[],w=0,k=0;k<d.length;k++){var T,O=d[k];T=r.concentric(O),b.push({value:T,node:O}),O._private.scratch.concentric=T}d.updateStyle();for(var D=0;D<d.length;D++){var z=d[D].layoutDimensions(r);w=Math.max(w,z.w,z.h)}b.sort(function($e,xt){return xt.value-$e.value});for(var V=r.levelWidth(d),M=[[]],R=M[0],j=0;j<b.length;j++){var Q=b[j];R.length>0&&Math.abs(R[0].value-Q.value)>=V&&M.push(R=[]),R.push(Q)}var K=w+r.minNodeSpacing;if(!r.avoidOverlap){var Y=M.length>0&&M[0].length>1,W=(Math.min(p.w,p.h)/2-K)/(M.length+Y?1:0);K=Math.min(K,W)}for(var ne=0,ie=0;ie<M.length;ie++){var oe=M[ie],ce=void 0===r.sweep?2*Math.PI-2*Math.PI/oe.length:r.sweep,ue=oe.dTheta=ce/Math.max(1,oe.length-1);if(oe.length>1&&r.avoidOverlap){var he=Math.cos(ue)-Math.cos(0),ke=Math.sin(ue)-Math.sin(0),xe=Math.sqrt(K*K/(he*he+ke*ke));ne=Math.max(xe,ne)}oe.r=ne,ne+=K}if(r.equidistant){for(var me=0,ye=0,Le=0;Le<M.length;Le++)me=Math.max(me,M[Le].r-ye);ye=0;for(var Ve=0;Ve<M.length;Ve++){var Te=M[Ve];0===Ve&&(ye=Te.r),Te.r=ye,ye+=me}}for(var He={},Ye=0;Ye<M.length;Ye++)for(var qe=M[Ye],it=qe.dTheta,at=qe.r,nt=0;nt<qe.length;nt++){var dt=qe[nt],yt=r.startAngle+(a?1:-1)*it*nt,Dt={x:m+at*Math.cos(yt),y:v+at*Math.sin(yt)};He[dt.node.id()]=Dt}return u.nodes().layoutPositions(this,r,function($e){var xt=$e.id();return He[xt]}),this};var Vm={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(t,r){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(t){return 2048},nodeOverlap:4,idealEdgeLength:function(t){return 32},edgeElasticity:function(t){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function hc(t){this.options=ee({},Vm,t),this.options.layout=this;var r=this.options.eles.nodes(),a=this.options.eles.edges().filter(function(s){var u=s.source().data("id"),d=s.target().data("id"),p=r.some(function(v){return v.data("id")===u}),m=r.some(function(v){return v.data("id")===d});return!p||!m});this.options.eles=this.options.eles.not(a)}hc.prototype.run=function(){var t=this.options,r=t.cy,a=this;a.stopped=!1,!0!==t.animate&&!1!==t.animate||a.emit({type:"layoutstart",layout:a}),Vp=!0===t.debug;var s=jm(r,a,t);Vp&&(void 0)(s),t.randomize&&Ym(s);var u=Sn(),d=function(){Hm(s,r,t),!0===t.fit&&r.fit(t.padding)},p=function(w){return!(a.stopped||w>=t.numIter||(Wm(s,t),s.temperature=s.temperature*t.coolingFactor,s.temperature<t.minTemp))},m=function(){if(!0===t.animate||!1===t.animate)d(),a.one("layoutstop",t.stop),a.emit({type:"layoutstop",layout:a});else{var w=t.eles.nodes(),k=qp(s,t,w);w.layoutPositions(a,t,k)}},v=0,b=!0;if(!0===t.animate)!function w(){for(var k=0;b&&k<t.refresh;)b=p(v),v++,k++;b?(Sn()-u>=t.animationThreshold&&d(),Rn(w)):(Yp(s,t),m())}();else{for(;b;)b=p(v),v++;Yp(s,t),m()}return this},hc.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this},hc.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var jm=function(t,r,a){for(var s=a.eles.edges(),u=a.eles.nodes(),d=Mn(a.boundingBox?a.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()}),p={isCompound:t.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:u.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:s.size(),temperature:a.initialTemp,clientWidth:d.w,clientHeight:d.h,boundingBox:d},m=a.eles.components(),v={},b=0;b<m.length;b++)for(var w=m[b],k=0;k<w.length;k++)v[w[k].id()]=b;for(b=0;b<p.nodeSize;b++){var T=(M=u[b]).layoutDimensions(a);(ye={}).isLocked=M.locked(),ye.id=M.data("id"),ye.parentId=M.data("parent"),ye.cmptId=v[M.id()],ye.children=[],ye.positionX=M.position("x"),ye.positionY=M.position("y"),ye.offsetX=0,ye.offsetY=0,ye.height=T.w,ye.width=T.h,ye.maxX=ye.positionX+ye.width/2,ye.minX=ye.positionX-ye.width/2,ye.maxY=ye.positionY+ye.height/2,ye.minY=ye.positionY-ye.height/2,ye.padLeft=parseFloat(M.style("padding")),ye.padRight=parseFloat(M.style("padding")),ye.padTop=parseFloat(M.style("padding")),ye.padBottom=parseFloat(M.style("padding")),ye.nodeRepulsion=L(a.nodeRepulsion)?a.nodeRepulsion(M):a.nodeRepulsion,p.layoutNodes.push(ye),p.idToIndex[ye.id]=b}var O=[],D=0,z=-1,V=[];for(b=0;b<p.nodeSize;b++){var M,R=(M=p.layoutNodes[b]).parentId;null!=R?p.layoutNodes[p.idToIndex[R]].children.push(M.id):(O[++z]=M.id,V.push(M.id))}for(p.graphSet.push(V);D<=z;){var j=O[D++],K=p.layoutNodes[p.idToIndex[j]].children;if(K.length>0)for(p.graphSet.push(K),b=0;b<K.length;b++)O[++z]=K[b]}for(b=0;b<p.graphSet.length;b++){var Y=p.graphSet[b];for(k=0;k<Y.length;k++)p.indexToGraph[p.idToIndex[Y[k]]]=b}for(b=0;b<p.edgeSize;b++){var ne=s[b],ie={};ie.id=ne.data("id"),ie.sourceId=ne.data("source"),ie.targetId=ne.data("target");var oe=L(a.idealEdgeLength)?a.idealEdgeLength(ne):a.idealEdgeLength,ce=L(a.edgeElasticity)?a.edgeElasticity(ne):a.edgeElasticity,ue=p.idToIndex[ie.sourceId],he=p.idToIndex[ie.targetId];if(p.indexToGraph[ue]!=p.indexToGraph[he]){for(var ke=qm(ie.sourceId,ie.targetId,p),xe=p.graphSet[ke],me=0,ye=p.layoutNodes[ue];-1===xe.indexOf(ye.id);)ye=p.layoutNodes[p.idToIndex[ye.parentId]],me++;for(ye=p.layoutNodes[he];-1===xe.indexOf(ye.id);)ye=p.layoutNodes[p.idToIndex[ye.parentId]],me++;oe*=me*a.nestingFactor}ie.idealLength=oe,ie.elasticity=ce,p.layoutEdges.push(ie)}return p},qm=function(t,r,a){var s=Xm(t,r,0,a);return 2>s.count?0:s.graph},Xm=function t(r,a,s,u){var d=u.graphSet[s];if(-1<d.indexOf(r)&&-1<d.indexOf(a))return{count:2,graph:s};for(var p=0,m=0;m<d.length;m++){var w=u.layoutNodes[u.idToIndex[d[m]]].children;if(0!==w.length){var k=t(r,a,u.indexToGraph[u.idToIndex[w[0]]],u);if(0!==k.count){if(1!==k.count)return k;if(2==++p)break}}}return{count:p,graph:s}},Ym=function(t,r){for(var a=t.clientWidth,s=t.clientHeight,u=0;u<t.nodeSize;u++){var d=t.layoutNodes[u];0!==d.children.length||d.isLocked||(d.positionX=Math.random()*a,d.positionY=Math.random()*s)}},qp=function(t,r,a){var s=t.boundingBox,u={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return r.boundingBox&&(a.forEach(function(d){var p=t.layoutNodes[t.idToIndex[d.data("id")]];u.x1=Math.min(u.x1,p.positionX),u.x2=Math.max(u.x2,p.positionX),u.y1=Math.min(u.y1,p.positionY),u.y2=Math.max(u.y2,p.positionY)}),u.w=u.x2-u.x1,u.h=u.y2-u.y1),function(d,p){var m=t.layoutNodes[t.idToIndex[d.data("id")]];return r.boundingBox?{x:s.x1+(m.positionX-u.x1)/u.w*s.w,y:s.y1+(m.positionY-u.y1)/u.h*s.h}:{x:m.positionX,y:m.positionY}}},Hm=function(t,r,a){var s=a.layout,u=a.eles.nodes(),d=qp(t,a,u);u.positions(d),!0!==t.ready&&(t.ready=!0,s.one("layoutready",a.ready),s.emit({type:"layoutready",layout:this}))},Wm=function(t,r,a){$m(t,r),Um(t),Zm(t,r),Qm(t),Jm(t)},$m=function(t,r){for(var a=0;a<t.graphSet.length;a++)for(var s=t.graphSet[a],u=s.length,d=0;d<u;d++)for(var p=t.layoutNodes[t.idToIndex[s[d]]],m=d+1;m<u;m++)Km(p,t.layoutNodes[t.idToIndex[s[m]]],t,r)},Xp=function(t){return-t+2*t*Math.random()},Km=function(t,r,a,s){if(t.cmptId===r.cmptId||a.isCompound){var u=r.positionX-t.positionX,d=r.positionY-t.positionY;0===u&&0===d&&(u=Xp(1),d=Xp(1));var p=Gm(t,r,u,d);if(p>0)var m=(b=s.nodeOverlap*p)*u/(z=Math.sqrt(u*u+d*d)),v=b*d/z;else{var b,w=pc(t,u,d),k=pc(r,-1*u,-1*d),T=k.x-w.x,O=k.y-w.y,D=T*T+O*O,z=Math.sqrt(D);m=(b=(t.nodeRepulsion+r.nodeRepulsion)/D)*T/z,v=b*O/z}t.isLocked||(t.offsetX-=m,t.offsetY-=v),r.isLocked||(r.offsetX+=m,r.offsetY+=v)}},Gm=function(t,r,a,s){if(a>0)var u=t.maxX-r.minX;else u=r.maxX-t.minX;if(s>0)var d=t.maxY-r.minY;else d=r.maxY-t.minY;return u>=0&&d>=0?Math.sqrt(u*u+d*d):0},pc=function(t,r,a){var s=t.positionX,u=t.positionY,d=t.height||1,p=t.width||1,m=a/r,v=d/p,b={};return 0===r&&0<a||0===r&&0>a?(b.x=s,b.y=u+d/2,b):0<r&&-1*v<=m&&m<=v?(b.x=s+p/2,b.y=u+p*a/2/r,b):0>r&&-1*v<=m&&m<=v?(b.x=s-p/2,b.y=u-p*a/2/r,b):0<a&&(m<=-1*v||m>=v)?(b.x=s+d*r/2/a,b.y=u+d/2,b):(0>a&&(m<=-1*v||m>=v)&&(b.x=s-d*r/2/a,b.y=u-d/2),b)},Um=function(t,r){for(var a=0;a<t.edgeSize;a++){var s=t.layoutEdges[a],d=t.layoutNodes[t.idToIndex[s.sourceId]],m=t.layoutNodes[t.idToIndex[s.targetId]],v=m.positionX-d.positionX,b=m.positionY-d.positionY;if(0!==v||0!==b){var w=pc(d,v,b),k=pc(m,-1*v,-1*b),T=k.x-w.x,O=k.y-w.y,D=Math.sqrt(T*T+O*O),z=Math.pow(s.idealLength-D,2)/s.elasticity;if(0!==D)var V=z*T/D,M=z*O/D;else V=0,M=0;d.isLocked||(d.offsetX+=V,d.offsetY+=M),m.isLocked||(m.offsetX-=V,m.offsetY-=M)}}},Zm=function(t,r){if(0!==r.gravity)for(var a=0;a<t.graphSet.length;a++){var s=t.graphSet[a],u=s.length;if(0===a)var d=t.clientHeight/2,p=t.clientWidth/2;else{var v=t.layoutNodes[t.idToIndex[t.layoutNodes[t.idToIndex[s[0]]].parentId]];d=v.positionX,p=v.positionY}for(var b=0;b<u;b++){var w=t.layoutNodes[t.idToIndex[s[b]]];if(!w.isLocked){var k=d-w.positionX,T=p-w.positionY,O=Math.sqrt(k*k+T*T);if(O>1){var z=r.gravity*T/O;w.offsetX+=r.gravity*k/O,w.offsetY+=z}}}}},Qm=function(t,r){var a=[],s=0,u=-1;for(a.push.apply(a,t.graphSet[0]),u+=t.graphSet[0].length;s<=u;){var d=a[s++],m=t.layoutNodes[t.idToIndex[d]],v=m.children;if(0<v.length&&!m.isLocked){for(var b=m.offsetX,w=m.offsetY,k=0;k<v.length;k++){var T=t.layoutNodes[t.idToIndex[v[k]]];T.offsetX+=b,T.offsetY+=w,a[++u]=v[k]}m.offsetX=0,m.offsetY=0}}},Jm=function(t,r){for(var a=0;a<t.nodeSize;a++)0<(u=t.layoutNodes[a]).children.length&&(u.maxX=void 0,u.minX=void 0,u.maxY=void 0,u.minY=void 0);for(a=0;a<t.nodeSize;a++)if(!(0<(u=t.layoutNodes[a]).children.length||u.isLocked)){var s=e0(u.offsetX,u.offsetY,t.temperature);u.positionX+=s.x,u.positionY+=s.y,u.offsetX=0,u.offsetY=0,u.minX=u.positionX-u.width,u.maxX=u.positionX+u.width,u.minY=u.positionY-u.height,u.maxY=u.positionY+u.height,t0(u,t)}for(a=0;a<t.nodeSize;a++){var u;0<(u=t.layoutNodes[a]).children.length&&!u.isLocked&&(u.positionX=(u.maxX+u.minX)/2,u.positionY=(u.maxY+u.minY)/2,u.width=u.maxX-u.minX,u.height=u.maxY-u.minY)}},e0=function(t,r,a){var s=Math.sqrt(t*t+r*r);if(s>a)var u={x:a*t/s,y:a*r/s};else u={x:t,y:r};return u},t0=function t(r,a){var s=r.parentId;if(null!=s){var u=a.layoutNodes[a.idToIndex[s]],d=!1;return(null==u.maxX||r.maxX+u.padRight>u.maxX)&&(u.maxX=r.maxX+u.padRight,d=!0),(null==u.minX||r.minX-u.padLeft<u.minX)&&(u.minX=r.minX-u.padLeft,d=!0),(null==u.maxY||r.maxY+u.padBottom>u.maxY)&&(u.maxY=r.maxY+u.padBottom,d=!0),(null==u.minY||r.minY-u.padTop<u.minY)&&(u.minY=r.minY-u.padTop,d=!0),d?t(u,a):void 0}},Yp=function(t,r){for(var a=t.layoutNodes,s=[],u=0;u<a.length;u++){var d=a[u],p=d.cmptId;(s[p]=s[p]||[]).push(d)}var m=0;for(u=0;u<s.length;u++)if(z=s[u]){z.x1=1/0,z.x2=-1/0,z.y1=1/0,z.y2=-1/0;for(var v=0;v<z.length;v++){var b=z[v];z.x1=Math.min(z.x1,b.positionX-b.width/2),z.x2=Math.max(z.x2,b.positionX+b.width/2),z.y1=Math.min(z.y1,b.positionY-b.height/2),z.y2=Math.max(z.y2,b.positionY+b.height/2)}z.w=z.x2-z.x1,z.h=z.y2-z.y1,m+=z.w*z.h}s.sort(function(V,M){return M.w*M.h-V.w*V.h});var w=0,k=0,T=0,O=0,D=Math.sqrt(m)*t.clientWidth/t.clientHeight;for(u=0;u<s.length;u++){var z;if(z=s[u]){for(v=0;v<z.length;v++)(b=z[v]).isLocked||(b.positionX+=w-z.x1,b.positionY+=k-z.y1);w+=z.w+r.componentSpacing,T+=z.w+r.componentSpacing,O=Math.max(O,z.h),T>D&&(k+=O+r.componentSpacing,w=0,T=0,O=0)}}},n0={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(t){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,r){return!0},ready:void 0,stop:void 0,transform:function(t,r){return r}};function Hp(t){this.options=ee({},n0,t)}Hp.prototype.run=function(){var t=this.options,r=t,a=t.cy,s=r.eles,u=s.nodes().not(":parent");r.sort&&(u=u.sort(r.sort));var d=Mn(r.boundingBox?r.boundingBox:{x1:0,y1:0,w:a.width(),h:a.height()});if(0===d.h||0===d.w)s.nodes().layoutPositions(this,r,function(He){return{x:d.x1,y:d.y1}});else{var p=u.size(),m=Math.sqrt(p*d.h/d.w),v=Math.round(m),b=Math.round(d.w/d.h*m),w=function(He){if(null==He)return Math.min(v,b);Math.min(v,b)==v?v=He:b=He},k=function(He){if(null==He)return Math.max(v,b);Math.max(v,b)==v?v=He:b=He},T=r.rows,O=null!=r.cols?r.cols:r.columns;if(null!=T&&null!=O)v=T,b=O;else if(null!=T&&null==O)v=T,b=Math.ceil(p/v);else if(null==T&&null!=O)b=O,v=Math.ceil(p/b);else if(b*v>p){var D=w(),z=k();(D-1)*z>=p?w(D-1):(z-1)*D>=p&&k(z-1)}else for(;b*v<p;){var V=w(),M=k();(M+1)*V>=p?k(M+1):w(V+1)}var R=d.w/b,j=d.h/v;if(r.condense&&(R=0,j=0),r.avoidOverlap)for(var Q=0;Q<u.length;Q++){var K=u[Q],Y=K._private.position;null!=Y.x&&null!=Y.y||(Y.x=0,Y.y=0);var W=K.layoutDimensions(r),ne=r.avoidOverlapPadding,oe=W.h+ne;R=Math.max(R,W.w+ne),j=Math.max(j,oe)}for(var ce={},ue=function(He,Ye){return!!ce["c-"+He+"-"+Ye]},he=function(He,Ye){ce["c-"+He+"-"+Ye]=!0},ke=0,xe=0,me=function(){++xe>=b&&(xe=0,ke++)},ye={},Le=0;Le<u.length;Le++){var De=u[Le],Ve=r.position(De);if(Ve&&(void 0!==Ve.row||void 0!==Ve.col)){var Te={row:Ve.row,col:Ve.col};if(void 0===Te.col)for(Te.col=0;ue(Te.row,Te.col);)Te.col++;else if(void 0===Te.row)for(Te.row=0;ue(Te.row,Te.col);)Te.row++;ye[De.id()]=Te,he(Te.row,Te.col)}}u.layoutPositions(this,r,function(He,Ye){var qe,it;if(He.locked()||He.isParent())return!1;var at=ye[He.id()];if(at)qe=at.col*R+R/2+d.x1,it=at.row*j+j/2+d.y1;else{for(;ue(ke,xe);)me();qe=xe*R+R/2+d.x1,it=ke*j+j/2+d.y1,he(ke,xe),me()}return{x:qe,y:it}})}return this};var r0={ready:function(){},stop:function(){}};function uh(t){this.options=ee({},r0,t)}uh.prototype.run=function(){var t=this.options,r=t.eles;return this.emit("layoutstart"),r.nodes().positions(function(){return{x:0,y:0}}),this.one("layoutready",t.ready),this.emit("layoutready"),this.one("layoutstop",t.stop),this.emit("layoutstop"),this},uh.prototype.stop=function(){return this};var i0={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,spacingFactor:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,r){return!0},ready:void 0,stop:void 0,transform:function(t,r){return r}};function Wp(t){this.options=ee({},i0,t)}Wp.prototype.run=function(){var t=this.options,r=t.eles.nodes(),a=L(t.positions);return r.layoutPositions(this,t,function(s,u){var p,v,d=(p=s,null==t.positions?{x:(v=p.position()).x,y:v.y}:a?t.positions(p):t.positions[p._private.data.id]??null);return!s.locked()&&null!=d&&d}),this};var a0={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,r){return!0},ready:void 0,stop:void 0,transform:function(t,r){return r}};function $p(t){this.options=ee({},a0,t)}$p.prototype.run=function(){var t=this.options,r=t.cy,a=t.eles,s=Mn(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()});return a.nodes().layoutPositions(this,t,function(u,d){return{x:s.x1+Math.round(Math.random()*s.w),y:s.y1+Math.round(Math.random()*s.h)}}),this};var o0=[{name:"breadthfirst",impl:Rp},{name:"circle",impl:Fp},{name:"concentric",impl:jp},{name:"cose",impl:hc},{name:"grid",impl:Hp},{name:"null",impl:uh},{name:"preset",impl:Wp},{name:"random",impl:$p}];function Kp(t){this.options=t,this.notifications=0}var Gp=function(){},Up=function(){throw new Error("A headless instance can not render images")};Kp.prototype={recalculateRenderedStyle:Gp,notify:function(){this.notifications++},init:Gp,isHeadless:function(){return!0},png:Up,jpg:Up};var s0={arrowShapeWidth:.3,registerArrowShapes:function(){var t=this.arrowShapes={},r=this,a=function(v,b,w,k,T,O,D){return T.x-w/2-D<=v&&v<=T.x+w/2+D&&T.y-w/2-D<=b&&b<=T.y+w/2+D},s=function(v,b,w,k,T){var O=v*Math.cos(k)-b*Math.sin(k),D=(v*Math.sin(k)+b*Math.cos(k))*w;return{x:O*w+T.x,y:D+T.y}},u=function(v,b,w,k){for(var T=[],O=0;O<v.length;O+=2)T.push(s(v[O],v[O+1],b,w,k));return T},d=function(v){for(var b=[],w=0;w<v.length;w++){var k=v[w];b.push(k.x,k.y)}return b},p=function(v){return v.pstyle("width").pfValue*v.pstyle("arrow-scale").pfValue*2},m=function(v,b){C(b)&&(b=t[b]),t[v]=ee({name:v,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(w,k,T,O,D,z){var V=d(u(this.points,T+2*z,O,D));return Wn(w,k,V)},roughCollide:a,draw:function(w,k,T,O){var D=u(this.points,k,T,O);r.arrowShapeImpl("polygon")(w,D)},spacing:function(w){return 0},gap:p},b)};m("none",{collide:Jr,roughCollide:Jr,draw:Ir,spacing:ei,gap:ei}),m("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),m("arrow","triangle"),m("triangle-backcurve",{points:t.triangle.points,controlPoint:[0,-.15],roughCollide:a,draw:function(v,b,w,k,T){var O=u(this.points,b,w,k),D=this.controlPoint,z=s(D[0],D[1],b,w,k);r.arrowShapeImpl(this.name)(v,O,z)},gap:function(v){return.8*p(v)}}),m("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(v,b,w,k,T,O,D){var z=d(u(this.points,w+2*D,k,T)),V=d(u(this.pointsTee,w+2*D,k,T));return Wn(v,b,z)||Wn(v,b,V)},draw:function(v,b,w,k,T){var O=u(this.points,b,w,k),D=u(this.pointsTee,b,w,k);r.arrowShapeImpl(this.name)(v,O,D)}}),m("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(v,b,w,k,T,O,D){var z=T,V=Math.pow(z.x-v,2)+Math.pow(z.y-b,2)<=Math.pow((w+2*D)*this.radius,2),M=d(u(this.points,w+2*D,k,T));return Wn(v,b,M)||V},draw:function(v,b,w,k,T){var O=u(this.pointsTr,b,w,k);r.arrowShapeImpl(this.name)(v,O,k.x,k.y,this.radius*b)},spacing:function(v){return r.getArrowWidth(v.pstyle("width").pfValue,v.pstyle("arrow-scale").value)*this.radius}}),m("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(v,b){var w=this.baseCrossLinePts.slice(),k=b/v;return w[3]=w[3]-k,w[5]=w[5]-k,w},collide:function(v,b,w,k,T,O,D){var z=d(u(this.points,w+2*D,k,T)),V=d(u(this.crossLinePts(w,O),w+2*D,k,T));return Wn(v,b,z)||Wn(v,b,V)},draw:function(v,b,w,k,T){var O=u(this.points,b,w,k),D=u(this.crossLinePts(b,T),b,w,k);r.arrowShapeImpl(this.name)(v,O,D)}}),m("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(v){return.525*p(v)}}),m("circle",{radius:.15,collide:function(v,b,w,k,T,O,D){var z=T;return Math.pow(z.x-v,2)+Math.pow(z.y-b,2)<=Math.pow((w+2*D)*this.radius,2)},draw:function(v,b,w,k,T){r.arrowShapeImpl(this.name)(v,k.x,k.y,this.radius*b)},spacing:function(v){return r.getArrowWidth(v.pstyle("width").pfValue,v.pstyle("arrow-scale").value)*this.radius}}),m("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(v){return 1},gap:function(v){return 1}}),m("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),m("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(v){return v.pstyle("width").pfValue*v.pstyle("arrow-scale").value}}),m("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(v){return.95*v.pstyle("width").pfValue*v.pstyle("arrow-scale").value}})}},l0={projectIntoViewport:function(t,r){var a=this.cy,s=this.findContainerClientCoords(),u=s[0],d=s[1],p=s[4],m=a.pan(),v=a.zoom();return[((t-u)/p-m.x)/v,((r-d)/p-m.y)/v]},findContainerClientCoords:function(){if(this.containerBB)return this.containerBB;var t=this.container,r=t.getBoundingClientRect(),a=this.cy.window().getComputedStyle(t),s=function(K){return parseFloat(a.getPropertyValue(K))},u=s("padding-left"),d=s("padding-right"),p=s("padding-top"),m=s("padding-bottom"),v=s("border-left-width"),b=s("border-right-width"),w=s("border-top-width"),k=(s("border-bottom-width"),t.clientWidth);return this.containerBB=[r.left+u+v,r.top+p+w,k-(u+d),t.clientHeight-(p+m),r.width/(k+(v+b))]},invalidateContainerClientCoordsCache:function(){this.containerBB=null},findNearestElement:function(t,r,a,s){return this.findNearestElements(t,r,a,s)[0]},findNearestElements:function(t,r,a,s){var u,d,p=this,m=this,v=m.getCachedZSortedEles(),b=[],w=m.cy.zoom(),k=m.cy.hasCompoundNodes(),T=(s?24:8)/w,O=(s?8:2)/w,D=(s?8:2)/w,z=1/0;function V(W,ne){if(W.isNode()){if(d)return;d=W,b.push(W)}if(W.isEdge()&&(null==ne||ne<z))if(u){if(u.pstyle("z-compound-depth").value===W.pstyle("z-compound-depth").value&&u.pstyle("z-compound-depth").value===W.pstyle("z-compound-depth").value)for(var ie=0;ie<b.length;ie++)if(b[ie].isEdge()){b[ie]=W,u=W,z=ne??z;break}}else b.push(W),u=W,z=ne??z}function M(W){var ne=W.outerWidth()+2*O,ie=W.outerHeight()+2*O,oe=ne/2,ce=ie/2,ue=W.position();if(ue.x-oe<=t&&t<=ue.x+oe&&ue.y-ce<=r&&r<=ue.y+ce&&m.nodeShapes[p.getNodeShape(W)].checkPoint(t,r,0,ne,ie,ue.x,ue.y))return V(W,0),!0}function R(W){var ne,ie=W._private,oe=ie.rscratch,ce=W.pstyle("width").pfValue,ue=W.pstyle("arrow-scale").value,he=ce/2+T,ke=he*he,xe=2*he,me=ie.source,ye=ie.target;if("segments"===oe.edgeType||"straight"===oe.edgeType||"haystack"===oe.edgeType){for(var Le=oe.allpts,De=0;De+3<Le.length;De+=2)if(du(t,r,Le[De],Le[De+1],Le[De+2],Le[De+3],xe)&&ke>(ne=hu(t,r,Le[De],Le[De+1],Le[De+2],Le[De+3])))return V(W,ne),!0}else if("bezier"===oe.edgeType||"multibezier"===oe.edgeType||"self"===oe.edgeType||"compound"===oe.edgeType)for(Le=oe.allpts,De=0;De+5<oe.allpts.length;De+=4)if(ga(t,r,Le[De],Le[De+1],Le[De+2],Le[De+3],Le[De+4],Le[De+5],xe)&&ke>(ne=od(t,r,Le[De],Le[De+1],Le[De+2],Le[De+3],Le[De+4],Le[De+5])))return V(W,ne),!0;me=me||ie.source,ye=ye||ie.target;var Ve=p.getArrowWidth(ce,ue),Te=[{name:"source",x:oe.arrowStartX,y:oe.arrowStartY,angle:oe.srcArrowAngle},{name:"target",x:oe.arrowEndX,y:oe.arrowEndY,angle:oe.tgtArrowAngle},{name:"mid-source",x:oe.midX,y:oe.midY,angle:oe.midsrcArrowAngle},{name:"mid-target",x:oe.midX,y:oe.midY,angle:oe.midtgtArrowAngle}];for(De=0;De<Te.length;De++){var He=Te[De],Ye=m.arrowShapes[W.pstyle(He.name+"-arrow-shape").value],qe=W.pstyle("width").pfValue;if(Ye.roughCollide(t,r,Ve,He.angle,{x:He.x,y:He.y},qe,T)&&Ye.collide(t,r,Ve,He.angle,{x:He.x,y:He.y},qe,T))return V(W),!0}k&&b.length>0&&(M(me),M(ye))}function j(W,ne,ie){return Hn(W,ne,ie)}function Q(W,ne){var ie,oe=W._private,ce=D;ie=ne?ne+"-":"",W.boundingBox();var ue=oe.labelBounds[ne||"main"],he=W.pstyle(ie+"label").value;if("yes"===W.pstyle("text-events").strValue&&he){var ke=j(oe.rscratch,"labelX",ne),xe=j(oe.rscratch,"labelY",ne),me=j(oe.rscratch,"labelAngle",ne),ye=W.pstyle(ie+"text-margin-x").pfValue,Le=W.pstyle(ie+"text-margin-y").pfValue,De=ue.x1-ce-ye,Ve=ue.x2+ce-ye,Te=ue.y1-ce-Le,He=ue.y2+ce-Le;if(me){var Ye=Math.cos(me),qe=Math.sin(me),it=function($e,xt){return{x:($e-=ke)*Ye-(xt-=xe)*qe+ke,y:$e*qe+xt*Ye+xe}},at=it(De,Te),nt=it(De,He),dt=it(Ve,Te),yt=it(Ve,He);if(Wn(t,r,[at.x+ye,at.y+Le,dt.x+ye,dt.y+Le,yt.x+ye,yt.y+Le,nt.x+ye,nt.y+Le]))return V(W),!0}else if(ri(ue,t,r))return V(W),!0}}a&&(v=v.interactive);for(var K=v.length-1;K>=0;K--){var Y=v[K];Y.isNode()?M(Y)||Q(Y):R(Y)||Q(Y)||Q(Y,"source")||Q(Y,"target")}return b},getAllInBox:function(t,r,a,s){for(var d,p=this.getCachedZSortedEles().interactive,m=[],v=Math.min(t,a),b=Math.max(t,a),w=Math.min(r,s),k=Math.max(r,s),T=Mn({x1:t=v,y1:r=w,x2:a=b,y2:s=k}),O=0;O<p.length;O++){var D=p[O];if(D.isNode()){var z=D,V=z.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:!1});$a(T,V)&&!Ns(V,T)&&m.push(z)}else{var M=D,R=M._private,j=R.rscratch;if(null!=j.startX&&null!=j.startY&&!ri(T,j.startX,j.startY)||null!=j.endX&&null!=j.endY&&!ri(T,j.endX,j.endY))continue;if("bezier"===j.edgeType||"multibezier"===j.edgeType||"self"===j.edgeType||"compound"===j.edgeType||"segments"===j.edgeType||"haystack"===j.edgeType){for(var Q=R.rstyle.bezierPts||R.rstyle.linePts||R.rstyle.haystackPts,K=!0,Y=0;Y<Q.length;Y++)if(!ri(T,(d=Q[Y]).x,d.y)){K=!1;break}K&&m.push(M)}else"haystack"!==j.edgeType&&"straight"!==j.edgeType||m.push(M)}}return m}},ch={calculateArrowAngles:function(t){var r,a,s,u,d,p,m=t._private.rscratch,v="haystack"===m.edgeType,b="bezier"===m.edgeType,w="multibezier"===m.edgeType,k="segments"===m.edgeType,T="compound"===m.edgeType,O="self"===m.edgeType;v?(s=m.haystackPts[0],u=m.haystackPts[1],d=m.haystackPts[2],p=m.haystackPts[3]):(s=m.arrowStartX,u=m.arrowStartY,d=m.arrowEndX,p=m.arrowEndY),z=m.midX,V=m.midY,k?(r=s-m.segpts[0],a=u-m.segpts[1]):w||T||O||b?(r=s-Tn((D=m.allpts)[0],D[2],D[4],.1),a=u-Tn(D[1],D[3],D[5],.1)):(r=s-z,a=u-V),m.srcArrowAngle=Lr(r,a);var z=m.midX,V=m.midY;if(v&&(z=(s+d)/2,V=(u+p)/2),r=d-s,a=p-u,k)if((D=m.allpts).length/2%2==0){var M=(R=D.length/2)-2;r=D[R]-D[M],a=D[R+1]-D[M+1]}else{M=(R=D.length/2-1)-2;var R,j=R+2;r=D[R]-D[M],a=D[R+1]-D[M+1]}else if(w||T||O){var Q,K,Y,W,D=m.allpts;if(m.ctrlpts.length/2%2==0){var ne=2+(ie=2+(oe=D.length/2-1));Q=Tn(D[oe],D[ie],D[ne],0),K=Tn(D[oe+1],D[ie+1],D[ne+1],0),Y=Tn(D[oe],D[ie],D[ne],1e-4),W=Tn(D[oe+1],D[ie+1],D[ne+1],1e-4)}else{var ie,oe;ne=2+(ie=D.length/2-1),Q=Tn(D[oe=ie-2],D[ie],D[ne],.4999),K=Tn(D[oe+1],D[ie+1],D[ne+1],.4999),Y=Tn(D[oe],D[ie],D[ne],.5),W=Tn(D[oe+1],D[ie+1],D[ne+1],.5)}r=Y-Q,a=W-K}if(m.midtgtArrowAngle=Lr(r,a),m.midDispX=r,m.midDispY=a,r*=-1,a*=-1,k&&((D=m.allpts).length/2%2==0||(r=-(D[j=2+(R=D.length/2-1)]-D[R]),a=-(D[j+1]-D[R+1]))),m.midsrcArrowAngle=Lr(r,a),k)r=d-m.segpts[m.segpts.length-2],a=p-m.segpts[m.segpts.length-1];else if(w||T||O||b){var ce=(D=m.allpts).length;r=d-Tn(D[ce-6],D[ce-4],D[ce-2],.9),a=p-Tn(D[ce-5],D[ce-3],D[ce-1],.9)}else r=d-z,a=p-V;m.tgtArrowAngle=Lr(r,a)}};ch.getArrowWidth=ch.getArrowHeight=function(t,r){var a=this.arrowWidthCache=this.arrowWidthCache||{},s=a[t+", "+r];return s||(s=Math.max(Math.pow(13.37*t,.9),29)*r,a[t+", "+r]=s,s)};var Er={};function Zp(t){var r=[];if(null!=t){for(var a=0;a<t.length;a+=2)r.push({x:t[a],y:t[a+1]});return r}}Er.findMidptPtsEtc=function(t,r){var a,Q,K,Y,s=r.posPts,u=r.intersectionPts,d=r.vectorNormInverse,p=t.pstyle("source-endpoint"),m=t.pstyle("target-endpoint"),v=null!=p.units&&null!=m.units;switch(t.pstyle("edge-distances").value){case"node-position":a=s;break;case"intersection":a=u;break;case"endpoints":if(v){var b=c(this.manualEndptToPx(t.source()[0],p),2),w=b[0],k=b[1],T=c(this.manualEndptToPx(t.target()[0],m),2),O=T[0],D=T[1],z={x1:w,y1:k,x2:O,y2:D};K=O-w,d={x:-(Q=D-k)/(Y=Math.sqrt(K*K+Q*Q)),y:K/Y},a=z}else nn("Edge ".concat(t.id()," has edge-distances:endpoints specified without manual endpoints specified via source-endpoint and target-endpoint.  Falling back on edge-distances:intersection (default).")),a=u}return{midptPts:a,vectorNormInverse:d}},Er.findHaystackPoints=function(t){for(var r=0;r<t.length;r++){var a=t[r],s=a._private,u=s.rscratch;if(!u.haystack){var d=2*Math.random()*Math.PI;u.source={x:Math.cos(d),y:Math.sin(d)},d=2*Math.random()*Math.PI,u.target={x:Math.cos(d),y:Math.sin(d)}}var p=s.source,m=s.target,v=p.position(),b=m.position(),w=p.width(),k=m.width(),T=p.height(),O=m.height(),D=a.pstyle("haystack-radius").value/2;u.haystackPts=u.allpts=[u.source.x*w*D+v.x,u.source.y*T*D+v.y,u.target.x*k*D+b.x,u.target.y*O*D+b.y],u.midX=(u.allpts[0]+u.allpts[2])/2,u.midY=(u.allpts[1]+u.allpts[3])/2,u.edgeType="haystack",u.haystack=!0,this.storeEdgeProjections(a),this.calculateArrowAngles(a),this.recalculateEdgeLabelProjections(a),this.calculateLabelAngles(a)}},Er.findSegmentsPoints=function(t,r){var a=t._private.rscratch,s=t.pstyle("segment-weights"),u=t.pstyle("segment-distances"),d=Math.min(s.pfValue.length,u.pfValue.length);a.edgeType="segments",a.segpts=[];for(var p=0;p<d;p++){var m=s.pfValue[p],v=u.pfValue[p],b=1-m,w=m,k=this.findMidptPtsEtc(t,r),T=k.midptPts,O=k.vectorNormInverse,D={x:T.x1*b+T.x2*w,y:T.y1*b+T.y2*w};a.segpts.push(D.x+O.x*v,D.y+O.y*v)}},Er.findLoopPoints=function(t,r,a,s){var u=t._private.rscratch,d=r.dirCounts,p=r.srcPos,m=t.pstyle("control-point-distances"),v=m?m.pfValue[0]:void 0,b=t.pstyle("loop-direction").pfValue,w=t.pstyle("loop-sweep").pfValue,k=t.pstyle("control-point-step-size").pfValue;u.edgeType="self";var T=a,O=k;s&&(T=0,O=v);var D=b-Math.PI/2,z=D-w/2,V=D+w/2,M=b+"_"+w;T=void 0===d[M]?d[M]=0:++d[M],u.ctrlpts=[p.x+1.4*Math.cos(z)*O*(T/3+1),p.y+1.4*Math.sin(z)*O*(T/3+1),p.x+1.4*Math.cos(V)*O*(T/3+1),p.y+1.4*Math.sin(V)*O*(T/3+1)]},Er.findCompoundLoopPoints=function(t,r,a,s){var u=t._private.rscratch;u.edgeType="compound";var d=r.srcPos,p=r.tgtPos,m=r.srcW,v=r.srcH,b=r.tgtW,w=r.tgtH,k=t.pstyle("control-point-step-size").pfValue,T=t.pstyle("control-point-distances"),D=a,z=k;s&&(D=0,z=T?T.pfValue[0]:void 0);var V={x:d.x-m/2,y:d.y-v/2},M={x:p.x-b/2,y:p.y-w/2},R={x:Math.min(V.x,M.x),y:Math.min(V.y,M.y)},j=Math.max(.5,Math.log(.01*m)),Q=Math.max(.5,Math.log(.01*b));u.ctrlpts=[R.x,R.y-(1+Math.pow(50,1.12)/100)*z*(D/3+1)*j,R.x-(1+Math.pow(50,1.12)/100)*z*(D/3+1)*Q,R.y]},Er.findStraightEdgePoints=function(t){t._private.rscratch.edgeType="straight"},Er.findBezierPoints=function(t,r,a,s,u){var d=t._private.rscratch,p=t.pstyle("control-point-step-size").pfValue,m=t.pstyle("control-point-distances"),v=t.pstyle("control-point-weights"),b=m&&v?Math.min(m.value.length,v.value.length):1,w=m?m.pfValue[0]:void 0,k=v.value[0],T=s;d.edgeType=T?"multibezier":"bezier",d.ctrlpts=[];for(var O=0;O<b;O++){var z,D=(.5-r.eles.length/2+a)*p*(u?-1:1),V=Ha(D);T&&(w=m?m.pfValue[O]:p,k=v.value[O]);var M=void 0!==(z=s?w:void 0!==w?V*w:void 0)?z:D,R=1-k,j=k,Q=this.findMidptPtsEtc(t,r),K=Q.midptPts,Y=Q.vectorNormInverse,W={x:K.x1*R+K.x2*j,y:K.y1*R+K.y2*j};d.ctrlpts.push(W.x+Y.x*M,W.y+Y.y*M)}},Er.findTaxiPoints=function(t,r){var a=t._private.rscratch;a.edgeType="segments";var s=r.posPts,u=r.srcW,d=r.srcH,p=r.tgtW,m=r.tgtH,v="node-position"!==t.pstyle("edge-distances").value,b=t.pstyle("taxi-direction").value,w=b,k=t.pstyle("taxi-turn"),T="%"===k.units,O=k.pfValue,D=O<0,z=t.pstyle("taxi-turn-min-distance").pfValue,M=v?(d+m)/2:0,R=s.x2-s.x1,j=s.y2-s.y1,Q=function(Be,et){return Be>0?Math.max(Be-et,0):Math.min(Be+et,0)},K=Q(R,v?(u+p)/2:0),Y=Q(j,M),W=!1;"auto"===w?b=Math.abs(K)>Math.abs(Y)?"horizontal":"vertical":"upward"===w||"downward"===w?(b="vertical",W=!0):"leftward"!==w&&"rightward"!==w||(b="horizontal",W=!0);var ne,ie="vertical"===b,oe=ie?Y:K,ce=ie?j:R,ue=Ha(ce),he=!1;W&&(T||D)||!("downward"===w&&ce<0||"upward"===w&&ce>0||"leftward"===w&&ce>0||"rightward"===w&&ce<0)||(oe=(ue*=-1)*Math.abs(oe),he=!0);var ke=function(Be){return Math.abs(Be)<z||Math.abs(Be)>=Math.abs(oe)},xe=ke(ne=T?(O<0?1+O:O)*oe:(O<0?oe:0)+O*ue),me=ke(Math.abs(oe)-Math.abs(ne));if(!xe&&!me||he)if(ie){var Tt=s.y1+ne+(v?d/2*ue:0);a.segpts=[s.x1,Tt,s.x2,Tt]}else{var ve=s.x1+ne+(v?u/2*ue:0);a.segpts=[ve,s.y1,ve,s.y2]}else if(ie){var ye=Math.abs(ce)<=d/2,Le=Math.abs(R)<=p/2;if(ye){var De=(s.x1+s.x2)/2;a.segpts=[De,s.y1,De,s.y2]}else if(Le){var He=(s.y1+s.y2)/2;a.segpts=[s.x1,He,s.x2,He]}else a.segpts=[s.x1,s.y2]}else{var it=Math.abs(ce)<=u/2,at=Math.abs(j)<=m/2;if(it){var nt=(s.y1+s.y2)/2;a.segpts=[s.x1,nt,s.x2,nt]}else if(at){var Dt=(s.x1+s.x2)/2;a.segpts=[Dt,s.y1,Dt,s.y2]}else a.segpts=[s.x2,s.y1]}},Er.tryToCorrectInvalidPoints=function(t,r){var a=t._private.rscratch;if("bezier"===a.edgeType){var s=r.srcPos,u=r.tgtPos,d=r.srcW,p=r.srcH,m=r.tgtW,v=r.tgtH,b=r.srcShape,w=r.tgtShape,k=!B(a.startX)||!B(a.startY),T=!B(a.arrowStartX)||!B(a.arrowStartY),O=!B(a.endX)||!B(a.endY),D=!B(a.arrowEndX)||!B(a.arrowEndY),z=this.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.arrowShapeWidth*3,V=Rr({x:a.ctrlpts[0],y:a.ctrlpts[1]},{x:a.startX,y:a.startY}),M=V<z,R=Rr({x:a.ctrlpts[0],y:a.ctrlpts[1]},{x:a.endX,y:a.endY}),j=R<z,Q=!1;if(k||T||M){Q=!0;var K={x:a.ctrlpts[0]-s.x,y:a.ctrlpts[1]-s.y},Y=Math.sqrt(K.x*K.x+K.y*K.y),W={x:K.x/Y,y:K.y/Y},ne=Math.max(d,p),ie={x:a.ctrlpts[0]+2*W.x*ne,y:a.ctrlpts[1]+2*W.y*ne},oe=b.intersectLine(s.x,s.y,d,p,ie.x,ie.y,0);M?(a.ctrlpts[0]=a.ctrlpts[0]+W.x*(z-V),a.ctrlpts[1]=a.ctrlpts[1]+W.y*(z-V)):(a.ctrlpts[0]=oe[0]+W.x*z,a.ctrlpts[1]=oe[1]+W.y*z)}if(O||D||j){Q=!0;var ce={x:a.ctrlpts[0]-u.x,y:a.ctrlpts[1]-u.y},ue=Math.sqrt(ce.x*ce.x+ce.y*ce.y),he={x:ce.x/ue,y:ce.y/ue},ke=Math.max(d,p),xe={x:a.ctrlpts[0]+2*he.x*ke,y:a.ctrlpts[1]+2*he.y*ke},me=w.intersectLine(u.x,u.y,m,v,xe.x,xe.y,0);j?(a.ctrlpts[0]=a.ctrlpts[0]+he.x*(z-R),a.ctrlpts[1]=a.ctrlpts[1]+he.y*(z-R)):(a.ctrlpts[0]=me[0]+he.x*z,a.ctrlpts[1]=me[1]+he.y*z)}Q&&this.findEndpoints(t)}},Er.storeAllpts=function(t){var r=t._private.rscratch;if("multibezier"===r.edgeType||"bezier"===r.edgeType||"self"===r.edgeType||"compound"===r.edgeType){r.allpts=[],r.allpts.push(r.startX,r.startY);for(var a=0;a+1<r.ctrlpts.length;a+=2)r.allpts.push(r.ctrlpts[a],r.ctrlpts[a+1]),a+3<r.ctrlpts.length&&r.allpts.push((r.ctrlpts[a]+r.ctrlpts[a+2])/2,(r.ctrlpts[a+1]+r.ctrlpts[a+3])/2);var s;r.allpts.push(r.endX,r.endY),r.ctrlpts.length/2%2==0?(r.midX=r.allpts[s=r.allpts.length/2-1],r.midY=r.allpts[s+1]):(r.midX=Tn(r.allpts[s=r.allpts.length/2-3],r.allpts[s+2],r.allpts[s+4],.5),r.midY=Tn(r.allpts[s+1],r.allpts[s+3],r.allpts[s+5],.5))}else if("straight"===r.edgeType)r.allpts=[r.startX,r.startY,r.endX,r.endY],r.midX=(r.startX+r.endX+r.arrowStartX+r.arrowEndX)/4,r.midY=(r.startY+r.endY+r.arrowStartY+r.arrowEndY)/4;else if("segments"===r.edgeType)if(r.allpts=[],r.allpts.push(r.startX,r.startY),r.allpts.push.apply(r.allpts,r.segpts),r.allpts.push(r.endX,r.endY),r.segpts.length%4==0){var u=r.segpts.length/2,d=u-2;r.midX=(r.segpts[d]+r.segpts[u])/2,r.midY=(r.segpts[d+1]+r.segpts[u+1])/2}else{var p=r.segpts.length/2-1;r.midX=r.segpts[p],r.midY=r.segpts[p+1]}},Er.checkForInvalidEdgeWarning=function(t){var r=t[0]._private.rscratch;r.nodesOverlap||B(r.startX)&&B(r.startY)&&B(r.endX)&&B(r.endY)?r.loggedErr=!1:r.loggedErr||(r.loggedErr=!0,nn("Edge `"+t.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))},Er.findEdgeControlPoints=function(t){var r=this;if(t&&0!==t.length){for(var a=this,s=a.cy.hasCompoundNodes(),u={map:new tr,get:function(j){var Q=this.map.get(j[0]);return null!=Q?Q.get(j[1]):null},set:function(j,Q){var K=this.map.get(j[0]);null==K&&(K=new tr,this.map.set(j[0],K)),K.set(j[1],Q)}},d=[],p=[],m=0;m<t.length;m++){var v=t[m],b=v._private,w=v.pstyle("curve-style").value;if(!v.removed()&&v.takesUpSpace())if("haystack"!==w){var k="unbundled-bezier"===w||"segments"===w||"straight"===w||"straight-triangle"===w||"taxi"===w,T="unbundled-bezier"===w||"bezier"===w,D=b.target,z=[b.source.poolIndex(),D.poolIndex()].sort(),V=u.get(z);null==V&&(u.set(z,V={eles:[]}),d.push(z)),V.eles.push(v),k&&(V.hasUnbundled=!0),T&&(V.hasBezier=!0)}else p.push(v)}for(var M=function(j){var K=u.get(d[j]),Y=void 0;if(!K.hasUnbundled){var W=K.eles[0].parallelEdges().filter(function(Be){return Be.isBundledBezier()});ha(K.eles),W.forEach(function(Be){return K.eles.push(Be)}),K.eles.sort(function(Be,et){return Be.poolIndex()-et.poolIndex()})}var ne=K.eles[0],ie=ne.source(),oe=ne.target();if(ie.poolIndex()>oe.poolIndex()){var ce=ie;ie=oe,oe=ce}var ue=K.srcPos=ie.position(),he=K.tgtPos=oe.position(),ke=K.srcW=ie.outerWidth(),xe=K.srcH=ie.outerHeight(),me=K.tgtW=oe.outerWidth(),ye=K.tgtH=oe.outerHeight(),Le=K.srcShape=a.nodeShapes[r.getNodeShape(ie)],De=K.tgtShape=a.nodeShapes[r.getNodeShape(oe)];K.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var Ve=0;Ve<K.eles.length;Ve++){var Te=K.eles[Ve],He=Te[0]._private.rscratch,Ye=Te.pstyle("curve-style").value,qe="unbundled-bezier"===Ye||"segments"===Ye||"taxi"===Ye,it=!ie.same(Te.source());if(!K.calculatedIntersection&&ie!==oe&&(K.hasBezier||K.hasUnbundled)){K.calculatedIntersection=!0;var at=Le.intersectLine(ue.x,ue.y,ke,xe,he.x,he.y,0),nt=K.srcIntn=at,dt=De.intersectLine(he.x,he.y,me,ye,ue.x,ue.y,0),yt=K.tgtIntn=dt,Dt=K.intersectionPts={x1:at[0],x2:dt[0],y1:at[1],y2:dt[1]},$e=K.posPts={x1:ue.x,x2:he.x,y1:ue.y,y2:he.y},xt=dt[1]-at[1],Tt=dt[0]-at[0],ht=Math.sqrt(Tt*Tt+xt*xt),Z=K.vector={x:Tt,y:xt},ve=K.vectorNorm={x:Z.x/ht,y:Z.y/ht},Me={x:-ve.y,y:ve.x};K.nodesOverlap=!B(ht)||De.checkPoint(at[0],at[1],0,me,ye,he.x,he.y)||Le.checkPoint(dt[0],dt[1],0,ke,xe,ue.x,ue.y),K.vectorNormInverse=Me,Y={nodesOverlap:K.nodesOverlap,dirCounts:K.dirCounts,calculatedIntersection:!0,hasBezier:K.hasBezier,hasUnbundled:K.hasUnbundled,eles:K.eles,srcPos:he,tgtPos:ue,srcW:me,srcH:ye,tgtW:ke,tgtH:xe,srcIntn:yt,tgtIntn:nt,srcShape:De,tgtShape:Le,posPts:{x1:$e.x2,y1:$e.y2,x2:$e.x1,y2:$e.y1},intersectionPts:{x1:Dt.x2,y1:Dt.y2,x2:Dt.x1,y2:Dt.y1},vector:{x:-Z.x,y:-Z.y},vectorNorm:{x:-ve.x,y:-ve.y},vectorNormInverse:{x:-Me.x,y:-Me.y}}}var Ne=it?Y:K;He.nodesOverlap=Ne.nodesOverlap,He.srcIntn=Ne.srcIntn,He.tgtIntn=Ne.tgtIntn,s&&(ie.isParent()||ie.isChild()||oe.isParent()||oe.isChild())&&(ie.parents().anySame(oe)||oe.parents().anySame(ie)||ie.same(oe)&&ie.isParent())?r.findCompoundLoopPoints(Te,Ne,Ve,qe):ie===oe?r.findLoopPoints(Te,Ne,Ve,qe):"segments"===Ye?r.findSegmentsPoints(Te,Ne):"taxi"===Ye?r.findTaxiPoints(Te,Ne):"straight"===Ye||!qe&&K.eles.length%2==1&&Ve===Math.floor(K.eles.length/2)?r.findStraightEdgePoints(Te):r.findBezierPoints(Te,Ne,Ve,qe,it),r.findEndpoints(Te),r.tryToCorrectInvalidPoints(Te,Ne),r.checkForInvalidEdgeWarning(Te),r.storeAllpts(Te),r.storeEdgeProjections(Te),r.calculateArrowAngles(Te),r.recalculateEdgeLabelProjections(Te),r.calculateLabelAngles(Te)}},R=0;R<d.length;R++)M(R);this.findHaystackPoints(p)}},Er.getSegmentPoints=function(t){var r=t[0]._private.rscratch;if("segments"===r.edgeType)return this.recalculateRenderedStyle(t),Zp(r.segpts)},Er.getControlPoints=function(t){var r=t[0]._private.rscratch,a=r.edgeType;if("bezier"===a||"multibezier"===a||"self"===a||"compound"===a)return this.recalculateRenderedStyle(t),Zp(r.ctrlpts)},Er.getEdgeMidpoint=function(t){var r=t[0]._private.rscratch;return this.recalculateRenderedStyle(t),{x:r.midX,y:r.midY}};var u0={manualEndptToPx:function(t,r){var a=t.position(),s=t.outerWidth(),u=t.outerHeight();if(2===r.value.length){var d=[r.pfValue[0],r.pfValue[1]];return"%"===r.units[0]&&(d[0]=d[0]*s),"%"===r.units[1]&&(d[1]=d[1]*u),d[0]+=a.x,d[1]+=a.y,d}var p=r.pfValue[0];p=-Math.PI/2+p;var m=2*Math.max(s,u),v=[a.x+Math.cos(p)*m,a.y+Math.sin(p)*m];return this.nodeShapes[this.getNodeShape(t)].intersectLine(a.x,a.y,s,u,v[0],v[1],0)},findEndpoints:function(t){var r,a,s,u,d,p=this,m=t.source()[0],v=t.target()[0],b=m.position(),w=v.position(),k=t.pstyle("target-arrow-shape").value,T=t.pstyle("source-arrow-shape").value,O=t.pstyle("target-distance-from-node").pfValue,D=t.pstyle("source-distance-from-node").pfValue,z=t.pstyle("curve-style").value,V=t._private.rscratch,M=V.edgeType,R="self"===M||"compound"===M,j="bezier"===M||"multibezier"===M||R,Q="bezier"!==M,K="straight"===M||"segments"===M,Y="segments"===M,W=j||Q||K,ne=R||"taxi"===z,ie=t.pstyle("source-endpoint"),oe=ne?"outside-to-node":ie.value,ce=t.pstyle("target-endpoint"),ue=ne?"outside-to-node":ce.value;if(V.srcManEndpt=ie,V.tgtManEndpt=ce,j){var he=[V.ctrlpts[0],V.ctrlpts[1]];a=Q?[V.ctrlpts[V.ctrlpts.length-2],V.ctrlpts[V.ctrlpts.length-1]]:he,s=he}else if(K){var ke=Y?V.segpts.slice(0,2):[w.x,w.y];a=Y?V.segpts.slice(V.segpts.length-2):[b.x,b.y],s=ke}if("inside-to-node"===ue)r=[w.x,w.y];else if(ce.units)r=this.manualEndptToPx(v,ce);else if("outside-to-line"===ue)r=V.tgtIntn;else if("outside-to-node"===ue||"outside-to-node-or-label"===ue?u=a:"outside-to-line"!==ue&&"outside-to-line-or-label"!==ue||(u=[b.x,b.y]),r=p.nodeShapes[this.getNodeShape(v)].intersectLine(w.x,w.y,v.outerWidth(),v.outerHeight(),u[0],u[1],0),"outside-to-node-or-label"===ue||"outside-to-line-or-label"===ue){var xe=v._private.rscratch,Le=xe.labelX,De=xe.labelY,Ve=xe.labelWidth/2,Te=xe.labelHeight/2,He=v.pstyle("text-valign").value;"top"===He?De-=Te:"bottom"===He&&(De+=Te);var Ye=v.pstyle("text-halign").value;"left"===Ye?Le-=Ve:"right"===Ye&&(Le+=Ve);var qe=Wi(u[0],u[1],[Le-Ve,De-Te,Le+Ve,De-Te,Le+Ve,De+Te,Le-Ve,De+Te],w.x,w.y);if(qe.length>0){var it=b,at=fi(it,Pi(r)),nt=fi(it,Pi(qe)),dt=at;nt<at&&(r=qe,dt=nt),qe.length>2&&fi(it,{x:qe[2],y:qe[3]})<dt&&(r=[qe[2],qe[3]])}}var yt=ma(r,a,p.arrowShapes[k].spacing(t)+O),Dt=ma(r,a,p.arrowShapes[k].gap(t)+O);if(V.endX=Dt[0],V.endY=Dt[1],V.arrowEndX=yt[0],V.arrowEndY=yt[1],"inside-to-node"===oe)r=[b.x,b.y];else if(ie.units)r=this.manualEndptToPx(m,ie);else if("outside-to-line"===oe)r=V.srcIntn;else if("outside-to-node"===oe||"outside-to-node-or-label"===oe?d=s:"outside-to-line"!==oe&&"outside-to-line-or-label"!==oe||(d=[w.x,w.y]),r=p.nodeShapes[this.getNodeShape(m)].intersectLine(b.x,b.y,m.outerWidth(),m.outerHeight(),d[0],d[1],0),"outside-to-node-or-label"===oe||"outside-to-line-or-label"===oe){var $e=m._private.rscratch,ht=$e.labelX,Z=$e.labelY,ve=$e.labelWidth/2,Me=$e.labelHeight/2,Ne=m.pstyle("text-valign").value;"top"===Ne?Z-=Me:"bottom"===Ne&&(Z+=Me);var Be=m.pstyle("text-halign").value;"left"===Be?ht-=ve:"right"===Be&&(ht+=ve);var et=Wi(d[0],d[1],[ht-ve,Z-Me,ht+ve,Z-Me,ht+ve,Z+Me,ht-ve,Z+Me],b.x,b.y);if(et.length>0){var Qe=w,Bt=fi(Qe,Pi(r)),ct=fi(Qe,Pi(et)),Pt=Bt;ct<Bt&&(r=[et[0],et[1]],Pt=ct),et.length>2&&fi(Qe,{x:et[2],y:et[3]})<Pt&&(r=[et[2],et[3]])}}var kt=ma(r,s,p.arrowShapes[T].spacing(t)+D),Mt=ma(r,s,p.arrowShapes[T].gap(t)+D);V.startX=Mt[0],V.startY=Mt[1],V.arrowStartX=kt[0],V.arrowStartY=kt[1],W&&(V.badLine=!(B(V.startX)&&B(V.startY)&&B(V.endX)&&B(V.endY)))},getSourceEndpoint:function(t){var r=t[0]._private.rscratch;return"haystack"===(this.recalculateRenderedStyle(t),r.edgeType)?{x:r.haystackPts[0],y:r.haystackPts[1]}:{x:r.arrowStartX,y:r.arrowStartY}},getTargetEndpoint:function(t){var r=t[0]._private.rscratch;return"haystack"===(this.recalculateRenderedStyle(t),r.edgeType)?{x:r.haystackPts[2],y:r.haystackPts[3]}:{x:r.arrowEndX,y:r.arrowEndY}}},dh={};function c0(t,r,a){for(var s=function(m,v,b,w){return Tn(m,v,b,w)},u=r._private.rstyle.bezierPts,d=0;d<t.bezierProjPcts.length;d++){var p=t.bezierProjPcts[d];u.push({x:s(a[0],a[2],a[4],p),y:s(a[1],a[3],a[5],p)})}}dh.storeEdgeProjections=function(t){var r=t._private,a=r.rscratch,s=a.edgeType;if(r.rstyle.bezierPts=null,r.rstyle.linePts=null,r.rstyle.haystackPts=null,"multibezier"===s||"bezier"===s||"self"===s||"compound"===s){r.rstyle.bezierPts=[];for(var u=0;u+5<a.allpts.length;u+=4)c0(this,t,a.allpts.slice(u,u+6))}else if("segments"===s){var d=r.rstyle.linePts=[];for(u=0;u+1<a.allpts.length;u+=2)d.push({x:a.allpts[u],y:a.allpts[u+1]})}else if("haystack"===s){var p=a.haystackPts;r.rstyle.haystackPts=[{x:p[0],y:p[1]},{x:p[2],y:p[3]}]}r.rstyle.arrowWidth=this.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.arrowShapeWidth},dh.recalculateEdgeProjections=function(t){this.findEdgeControlPoints(t)};var aa={recalculateNodeLabelProjection:function(t){var r=t.pstyle("label").strValue;if(!re(r)){var a,s,u=t._private,d=t.width(),p=t.height(),m=t.padding(),v=t.position(),b=t.pstyle("text-halign").strValue,w=t.pstyle("text-valign").strValue,k=u.rscratch,T=u.rstyle;switch(b){case"left":a=v.x-d/2-m;break;case"right":a=v.x+d/2+m;break;default:a=v.x}switch(w){case"top":s=v.y-p/2-m;break;case"bottom":s=v.y+p/2+m;break;default:s=v.y}k.labelX=a,k.labelY=s,T.labelX=a,T.labelY=s,this.calculateLabelAngles(t),this.applyLabelDimensions(t)}}},Qp=function(t,r){var a=Math.atan(r/t);return 0===t&&a<0&&(a*=-1),a},Jp=function(t,r){return Qp(r.x-t.x,r.y-t.y)};aa.recalculateEdgeLabelProjections=function(t){var r,a=t._private,s=a.rscratch,u=this,d={mid:t.pstyle("label").strValue,source:t.pstyle("source-label").strValue,target:t.pstyle("target-label").strValue};if(d.mid||d.source||d.target){var p=function(b,w,k){vr(a.rscratch,b,w,k),vr(a.rstyle,b,w,k)};p("labelX",null,(r={x:s.midX,y:s.midY}).x),p("labelY",null,r.y);var m=Qp(s.midDispX,s.midDispY);p("labelAutoAngle",null,m);var v=function(b){var w,De,Ve,Te,He,Ye,qe,it,at,k="source"===b;if(d[b]){var T=t.pstyle(b+"-text-offset").pfValue;switch(s.edgeType){case"self":case"compound":case"bezier":case"multibezier":for(var O,D=function De(){if(De.cache)return De.cache;for(var Ve=[],Te=0;Te+5<s.allpts.length;Te+=4)Ve.push({p0:{x:s.allpts[Te],y:s.allpts[Te+1]},p1:{x:s.allpts[Te+2],y:s.allpts[Te+3]},p2:{x:s.allpts[Te+4],y:s.allpts[Te+5]},startDist:0,length:0,segments:[]});var it=a.rstyle.bezierPts,at=u.bezierProjPcts.length;function nt(xt,Tt,ht,Z,ve){var Me=Rr(Tt,ht),Ne=xt.segments[xt.segments.length-1];xt.segments.push({p0:Tt,p1:ht,t0:Z,t1:ve,startDist:Ne?Ne.startDist+Ne.length:0,length:Me}),xt.length+=Me}for(var dt=0;dt<Ve.length;dt++){var yt=Ve[dt],Dt=Ve[dt-1];Dt&&(yt.startDist=Dt.startDist+Dt.length),nt(yt,yt.p0,it[dt*at],0,u.bezierProjPcts[0]);for(var $e=0;$e<at-1;$e++)nt(yt,it[dt*at+$e],it[dt*at+$e+1],u.bezierProjPcts[$e],u.bezierProjPcts[$e+1]);nt(yt,it[dt*at+at-1],yt.p2,u.bezierProjPcts[at-1],1)}return De.cache=Ve}(),z=0,V=0,M=0;M<D.length;M++){for(var R=D[k?M:D.length-1-M],j=0;j<R.segments.length;j++){var Q=R.segments[k?j:R.segments.length-1-j];if(z=V,(V+=Q.length)>=T||M===D.length-1&&j===R.segments.length-1){O={cp:R,segment:Q};break}}if(O)break}var Y=O.cp,W=O.segment,ne=(T-z)/W.length,ie=W.t1-W.t0,oe=k?W.t0+ie*ne:W.t1-ie*ne;oe=pa(0,oe,1),r=Di(Y.p0,Y.p1,Y.p2,oe),De=Y.p0,Ve=Y.p1,Te=Y.p2,Ye=pa(0,(He=oe)-.001,1),qe=pa(0,He+.001,1),it=Di(De,Ve,Te,Ye),at=Di(De,Ve,Te,qe),w=Jp(it,at);break;case"straight":case"segments":case"haystack":for(var ce,ue,he,ke,xe=0,me=s.allpts.length,ye=0;ye+3<me&&(k?(he={x:s.allpts[ye],y:s.allpts[ye+1]},ke={x:s.allpts[ye+2],y:s.allpts[ye+3]}):(he={x:s.allpts[me-2-ye],y:s.allpts[me-1-ye]},ke={x:s.allpts[me-4-ye],y:s.allpts[me-3-ye]}),ue=xe,!((xe+=ce=Rr(he,ke))>=T));ye+=2);var Le=(T-ue)/ce;Le=pa(0,Le,1),r=function(De,Ve,Te,He){var Ye=Ve.x-De.x,qe=Ve.y-De.y,it=Rr(De,Ve);return Te=Te??0,{x:De.x+Ye/it*(He=He??Te*it),y:De.y+qe/it*He}}(he,ke,Le),w=Jp(he,ke)}p("labelX",b,r.x),p("labelY",b,r.y),p("labelAutoAngle",b,w)}};v("source"),v("target"),this.applyLabelDimensions(t)}},aa.applyLabelDimensions=function(t){this.applyPrefixedLabelDimensions(t),t.isEdge()&&(this.applyPrefixedLabelDimensions(t,"source"),this.applyPrefixedLabelDimensions(t,"target"))},aa.applyPrefixedLabelDimensions=function(t,r){var a=t._private,s=this.getLabelText(t,r),u=this.calculateLabelDimensions(t,s),d=t.pstyle("line-height").pfValue,p=t.pstyle("text-wrap").strValue,m=Hn(a.rscratch,"labelWrapCachedLines",r)||[],v="wrap"!==p?1:Math.max(m.length,1),b=u.height/v,w=b*d,k=u.width,T=u.height+(v-1)*(d-1)*b;vr(a.rstyle,"labelWidth",r,k),vr(a.rscratch,"labelWidth",r,k),vr(a.rstyle,"labelHeight",r,T),vr(a.rscratch,"labelHeight",r,T),vr(a.rscratch,"labelLineHeight",r,w)},aa.getLabelText=function(t,r){var a=t._private,u=t.pstyle((r?r+"-":"")+"label").strValue,d=t.pstyle("text-transform").value,p=function(ue,he){return he?(vr(a.rscratch,ue,r,he),he):Hn(a.rscratch,ue,r)};if(!u)return"";"none"==d||("uppercase"==d?u=u.toUpperCase():"lowercase"==d&&(u=u.toLowerCase()));var m=t.pstyle("text-wrap").value;if("wrap"===m){var v=p("labelKey");if(null!=v&&p("labelWrapKey")===v)return p("labelWrapCachedText");for(var b=u.split("\n"),w=t.pstyle("text-max-width").pfValue,k="anywhere"===t.pstyle("text-overflow-wrap").value,T=[],O=/[\s\u200b]+/,D=k?"":" ",z=0;z<b.length;z++){var V=b[z],M=this.calculateLabelDimensions(t,V).width;if(k){var R=V.split("").join("\u200b");V=R}if(M>w){for(var j=V.split(O),Q="",K=0;K<j.length;K++){var Y=j[K];this.calculateLabelDimensions(t,0===Q.length?Y:Q+D+Y).width<=w?Q+=Y+D:(Q&&T.push(Q),Q=Y+D)}Q.match(/^[\s\u200b]+$/)||T.push(Q)}else T.push(V)}p("labelWrapCachedLines",T),u=p("labelWrapCachedText",T.join("\n")),p("labelWrapKey",v)}else if("ellipsis"===m){var ne=t.pstyle("text-max-width").pfValue,ie="",oe=!1;if(this.calculateLabelDimensions(t,u).width<ne)return u;for(var ce=0;ce<u.length&&!(this.calculateLabelDimensions(t,ie+u[ce]+"\u2026").width>ne);ce++)ie+=u[ce],ce===u.length-1&&(oe=!0);return oe||(ie+="\u2026"),ie}return u},aa.getLabelJustification=function(t){var r=t.pstyle("text-justification").strValue,a=t.pstyle("text-halign").strValue;if("auto"!==r)return r;if(!t.isNode())return"center";switch(a){case"left":return"right";case"right":return"left";default:return"center"}},aa.calculateLabelDimensions=function(t,r){var a=Ar(r,t._private.labelDimsKey),s=this.labelDimCache||(this.labelDimCache=[]),u=s[a];if(null!=u)return u;var d=t.pstyle("font-style").strValue,p=t.pstyle("font-size").pfValue,m=t.pstyle("font-family").strValue,v=t.pstyle("font-weight").strValue,b=this.labelCalcCanvas,w=this.labelCalcCanvasContext;if(!b){b=this.labelCalcCanvas=document.createElement("canvas"),w=this.labelCalcCanvasContext=b.getContext("2d");var k=b.style;k.position="absolute",k.left="-9999px",k.top="-9999px",k.zIndex="-1",k.visibility="hidden",k.pointerEvents="none"}w.font="".concat(d," ").concat(v," ").concat(p,"px ").concat(m);for(var T=0,O=0,D=r.split("\n"),z=0;z<D.length;z++){var M=w.measureText(D[z]),R=Math.ceil(M.width),j=p;T=Math.max(R,T),O+=j}return s[a]={width:T+=0,height:O+=0}},aa.calculateLabelAngle=function(t,r){var a=t._private.rscratch,s=t.isEdge(),d=t.pstyle((r?r+"-":"")+"text-rotation"),p=d.strValue;return"none"===p?0:s&&"autorotate"===p?a.labelAutoAngle:"autorotate"===p?0:d.pfValue},aa.calculateLabelAngles=function(t){var r=this,a=t.isEdge(),s=t._private.rscratch;s.labelAngle=r.calculateLabelAngle(t),a&&(s.sourceLabelAngle=r.calculateLabelAngle(t,"source"),s.targetLabelAngle=r.calculateLabelAngle(t,"target"))};var ef={},tf=!1;ef.getNodeShape=function(t){var r=t.pstyle("shape").value;if("cutrectangle"===r&&(t.width()<28||t.height()<28))return tf||(nn("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),tf=!0),"rectangle";if(t.isParent())return"rectangle"===r||"roundrectangle"===r||"round-rectangle"===r||"cutrectangle"===r||"cut-rectangle"===r||"barrel"===r?r:"rectangle";if("polygon"===r){var a=t.pstyle("shape-polygon-points").value;return this.nodeShapes.makePolygon(a).name}return r};var h0={updateCachedGrabbedEles:function(){var t=this.cachedZSortedEles;if(t){t.drag=[],t.nondrag=[];for(var r=[],a=0;a<t.length;a++){var s=(u=t[a])._private.rscratch;u.grabbed()&&!u.isParent()?r.push(u):s.inDragLayer?t.drag.push(u):t.nondrag.push(u)}for(a=0;a<r.length;a++){var u=r[a];t.drag.push(u)}}},invalidateCachedZSortedEles:function(){this.cachedZSortedEles=null},getCachedZSortedEles:function(t){if(t||!this.cachedZSortedEles){var r=this.cy.mutableElements().toArray();r.sort(_p),r.interactive=r.filter(function(a){return a.interactive()}),this.cachedZSortedEles=r,this.updateCachedGrabbedEles()}else r=this.cachedZSortedEles;return r}},nf={};[l0,ch,Er,u0,dh,aa,ef,{registerCalculationListeners:function(){var t=this.cy,r=t.collection(),a=this,s=function(d){var p=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(r.merge(d),p)for(var m=0;m<d.length;m++){var w=d[m]._private.rstyle;w.clean=!1,w.cleanConnected=!1}};a.binder(t).on("bounds.* dirty.*",function(d){s(d.target)}).on("style.* background.*",function(d){s(d.target,!1)});var u=function(d){if(d){var p=a.onUpdateEleCalcsFns;r.cleanStyle();for(var m=0;m<r.length;m++){var v=r[m],b=v._private.rstyle;v.isNode()&&!b.cleanConnected&&(s(v.connectedEdges()),b.cleanConnected=!0)}if(p)for(var w=0;w<p.length;w++)(0,p[w])(d,r);a.recalculateRenderedStyle(r),r=t.collection()}};a.flushRenderedStyleQueue=function(){u(!0)},a.beforeRender(u,a.beforeRenderPriorities.eleCalcs)},onUpdateEleCalcs:function(t){(this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[]).push(t)},recalculateRenderedStyle:function(t,r){var a=function(M){return M._private.rstyle.cleanConnected},s=[],u=[];if(!this.destroyed){void 0===r&&(r=!0);for(var d=0;d<t.length;d++){var p=t[d],m=p._private,v=m.rstyle;!p.isEdge()||a(p.source())&&a(p.target())||(v.clean=!1),r&&v.clean||p.removed()||"none"!==p.pstyle("display").value&&("nodes"===m.group?u.push(p):s.push(p),v.clean=!0)}for(var b=0;b<u.length;b++){var w=u[b],k=w._private.rstyle,T=w.position();this.recalculateNodeLabelProjection(w),k.nodeX=T.x,k.nodeY=T.y,k.nodeW=w.pstyle("width").pfValue,k.nodeH=w.pstyle("height").pfValue}this.recalculateEdgeProjections(s);for(var O=0;O<s.length;O++){var D=s[O]._private,z=D.rstyle,V=D.rscratch;z.srcX=V.arrowStartX,z.srcY=V.arrowStartY,z.tgtX=V.arrowEndX,z.tgtY=V.arrowEndY,z.midX=V.midX,z.midY=V.midY,z.labelAngle=V.labelAngle,z.sourceLabelAngle=V.sourceLabelAngle,z.targetLabelAngle=V.targetLabelAngle}}}},h0].forEach(function(t){ee(nf,t)});var p0={getCachedImage:function(t,r,a){var s=this.imageCache=this.imageCache||{},u=s[t];if(u)return u.image.complete||u.image.addEventListener("load",a),u.image;var d=(u=s[t]=s[t]||{}).image=new Image;return d.addEventListener("load",a),d.addEventListener("error",function(){d.error=!0}),"data:"===t.substring(0,5).toLowerCase()||(d.crossOrigin=r="null"===r?null:r),d.src=t,d}},ml={registerBinding:function(t,r,a,s){var u=Array.prototype.slice.apply(arguments,[1]),d=this.binder(t);return d.on.apply(d,u)},binder:function(t){var a=this,s=a.cy.window(),u=t===s||t===s.document||t===s.document.body||typeof HTMLElement<"u"&&t instanceof HTMLElement;if(null==a.supportsPassiveEvents){var d=!1;try{var p=Object.defineProperty({},"passive",{get:function(){return d=!0,!0}});s.addEventListener("test",null,p)}catch{}a.supportsPassiveEvents=d}var m=function(v,b,w){var k=Array.prototype.slice.call(arguments);return u&&a.supportsPassiveEvents&&(k[2]={capture:null!=w&&w,passive:!1,once:!1}),a.bindings.push({target:t,args:k}),(t.addEventListener||t.on).apply(t,k),this};return{on:m,addEventListener:m,addListener:m,bind:m}},nodeIsDraggable:function(t){return t&&t.isNode()&&!t.locked()&&t.grabbable()},nodeIsGrabbable:function(t){return this.nodeIsDraggable(t)&&t.interactive()},load:function(){var t=this,r=t.cy.window(),a=function(Z){return Z.selected()},s=function(Z,ve,Me,Ne){null==Z&&(Z=t.cy);for(var Be=0;Be<ve.length;Be++)Z.emit({originalEvent:Me,type:ve[Be],position:Ne})},u=function(Z){return Z.shiftKey||Z.metaKey||Z.ctrlKey},d=function(Z,ve){var Me=!0;if(t.cy.hasCompoundNodes()&&Z&&Z.pannable()){for(var Ne=0;ve&&Ne<ve.length;Ne++)if((Z=ve[Ne]).isNode()&&Z.isParent()&&!Z.pannable()){Me=!1;break}}else Me=!0;return Me},p=function(Z){Z[0]._private.rscratch.inDragLayer=!0},m=function(Z){Z[0]._private.rscratch.isGrabTarget=!0},v=function(Z,ve){var Me=ve.addToList;Me.has(Z)||!Z.grabbable()||Z.locked()||(Me.merge(Z),Z[0]._private.grabbed=!0)},b=function(Z,ve){ve=ve||{};var Me=Z.cy().hasCompoundNodes();ve.inDragLayer&&(Z.forEach(p),Z.neighborhood().stdFilter(function(Ne){return!Me||Ne.isEdge()}).forEach(p)),ve.addToList&&Z.forEach(function(Ne){v(Ne,ve)}),function(Ne,Be){if(Ne.cy().hasCompoundNodes()&&(null!=Be.inDragLayer||null!=Be.addToList)){var et=Ne.descendants();Be.inDragLayer&&(et.forEach(p),et.connectedEdges().forEach(p)),Be.addToList&&v(et,Be)}}(Z,ve),T(Z,{inDragLayer:ve.inDragLayer}),t.updateCachedGrabbedEles()},w=b,k=function(Z){Z&&(t.getCachedZSortedEles().forEach(function(ve){ve[0]._private.grabbed=!1,ve[0]._private.rscratch.inDragLayer=!1,function(Me){Me[0]._private.rscratch.isGrabTarget=!1}(ve)}),t.updateCachedGrabbedEles())},T=function(Z,ve){if((null!=ve.inDragLayer||null!=ve.addToList)&&Z.cy().hasCompoundNodes()){var Me=Z.ancestors().orphans();if(!Me.same(Z)){var Ne=Me.descendants().spawnSelf().merge(Me).unmerge(Z).unmerge(Z.descendants()),Be=Ne.connectedEdges();ve.inDragLayer&&(Be.forEach(p),Ne.forEach(p)),ve.addToList&&Ne.forEach(function(et){v(et,ve)})}}},O=function(){null!=document.activeElement&&null!=document.activeElement.blur&&document.activeElement.blur()},D=typeof MutationObserver<"u",z=typeof ResizeObserver<"u";D?(t.removeObserver=new MutationObserver(function(Z){for(var ve=0;ve<Z.length;ve++){var Me=Z[ve].removedNodes;if(Me)for(var Ne=0;Ne<Me.length;Ne++)if(Me[Ne]===t.container){t.destroy();break}}}),t.container.parentNode&&t.removeObserver.observe(t.container.parentNode,{childList:!0})):t.registerBinding(t.container,"DOMNodeRemoved",function(Z){t.destroy()});var V=Ln(function(){t.cy.resize()},100);D&&(t.styleObserver=new MutationObserver(V),t.styleObserver.observe(t.container,{attributes:!0})),t.registerBinding(r,"resize",V),z&&(t.resizeObserver=new ResizeObserver(V),t.resizeObserver.observe(t.container));var M=function(){t.invalidateContainerClientCoordsCache()};(function(Z,ve){for(;null!=Z;)ve(Z),Z=Z.parentNode})(t.container,function(Z){t.registerBinding(Z,"transitionend",M),t.registerBinding(Z,"animationend",M),t.registerBinding(Z,"scroll",M)}),t.registerBinding(t.container,"contextmenu",function(Z){Z.preventDefault()});var R,j,Q,K=function(Z){for(var ve=t.findContainerClientCoords(),Me=ve[0],Ne=ve[1],Be=ve[2],et=ve[3],Qe=Z.touches?Z.touches:[Z],Bt=!1,ct=0;ct<Qe.length;ct++){var Pt=Qe[ct];if(Me<=Pt.clientX&&Pt.clientX<=Me+Be&&Ne<=Pt.clientY&&Pt.clientY<=Ne+et){Bt=!0;break}}if(!Bt)return!1;for(var kt=t.container,Mt=Z.target.parentNode,Lt=!1;Mt;){if(Mt===kt){Lt=!0;break}Mt=Mt.parentNode}return!!Lt};t.registerBinding(t.container,"mousedown",function(Z){if(K(Z)){Z.preventDefault(),O(),t.hoverData.capture=!0,t.hoverData.which=Z.which;var ve=t.cy,Me=[Z.clientX,Z.clientY],Ne=t.projectIntoViewport(Me[0],Me[1]),Be=t.selection,et=t.findNearestElements(Ne[0],Ne[1],!0,!1),Qe=et[0],Bt=t.dragData.possibleDragElements;if(t.hoverData.mdownPos=Ne,t.hoverData.mdownGPos=Me,3==Z.which){t.hoverData.cxtStarted=!0;var ct={originalEvent:Z,type:"cxttapstart",position:{x:Ne[0],y:Ne[1]}};Qe?(Qe.activate(),Qe.emit(ct),t.hoverData.down=Qe):ve.emit(ct),t.hoverData.downTime=(new Date).getTime(),t.hoverData.cxtDragged=!1}else if(1==Z.which){if(Qe&&Qe.activate(),null!=Qe&&t.nodeIsGrabbable(Qe)){var Pt=function(Mt){return{originalEvent:Z,type:Mt,position:{x:Ne[0],y:Ne[1]}}};if(m(Qe),Qe.selected()){Bt=t.dragData.possibleDragElements=ve.collection();var kt=ve.$(function(Mt){return Mt.isNode()&&Mt.selected()&&t.nodeIsGrabbable(Mt)});b(kt,{addToList:Bt}),Qe.emit(Pt("grabon")),kt.forEach(function(Mt){Mt.emit(Pt("grab"))})}else Bt=t.dragData.possibleDragElements=ve.collection(),w(Qe,{addToList:Bt}),Qe.emit(Pt("grabon")).emit(Pt("grab"));t.redrawHint("eles",!0),t.redrawHint("drag",!0)}t.hoverData.down=Qe,t.hoverData.downs=et,t.hoverData.downTime=(new Date).getTime(),s(Qe,["mousedown","tapstart","vmousedown"],Z,{x:Ne[0],y:Ne[1]}),null==Qe?(Be[4]=1,t.data.bgActivePosistion={x:Ne[0],y:Ne[1]},t.redrawHint("select",!0),t.redraw()):Qe.pannable()&&(Be[4]=1),t.hoverData.tapholdCancelled=!1,clearTimeout(t.hoverData.tapholdTimeout),t.hoverData.tapholdTimeout=setTimeout(function(){if(!t.hoverData.tapholdCancelled){var Mt=t.hoverData.down;Mt?Mt.emit({originalEvent:Z,type:"taphold",position:{x:Ne[0],y:Ne[1]}}):ve.emit({originalEvent:Z,type:"taphold",position:{x:Ne[0],y:Ne[1]}})}},t.tapholdDuration)}Be[0]=Be[2]=Ne[0],Be[1]=Be[3]=Ne[1]}},!1),t.registerBinding(r,"mousemove",function(Z){if(t.hoverData.capture||K(Z)){var ve=!1,Me=t.cy,Ne=Me.zoom(),Be=[Z.clientX,Z.clientY],et=t.projectIntoViewport(Be[0],Be[1]),Qe=t.hoverData.mdownPos,Bt=t.hoverData.mdownGPos,ct=t.selection,Pt=null;t.hoverData.draggingEles||t.hoverData.dragging||t.hoverData.selecting||(Pt=t.findNearestElement(et[0],et[1],!0,!1));var kt,Mt=t.hoverData.last,Lt=t.hoverData.down,Kt=[et[0]-ct[2],et[1]-ct[3]],_n=t.dragData.possibleDragElements;if(Bt){var An=Be[0]-Bt[0],_r=Be[1]-Bt[1];t.hoverData.isOverThresholdDrag=kt=An*An+_r*_r>=t.desktopTapThreshold2}var zi=u(Z);kt&&(t.hoverData.tapholdCancelled=!0),ve=!0,s(Pt,["mousemove","vmousemove","tapdrag"],Z,{x:et[0],y:et[1]});var Pa=function(){t.data.bgActivePosistion=void 0,t.hoverData.selecting||Me.emit({originalEvent:Z,type:"boxstart",position:{x:et[0],y:et[1]}}),ct[4]=1,t.hoverData.selecting=!0,t.redrawHint("select",!0),t.redraw()};if(3===t.hoverData.which){if(kt){var Kr={originalEvent:Z,type:"cxtdrag",position:{x:et[0],y:et[1]}};Lt?Lt.emit(Kr):Me.emit(Kr),t.hoverData.cxtDragged=!0,t.hoverData.cxtOver&&Pt===t.hoverData.cxtOver||(t.hoverData.cxtOver&&t.hoverData.cxtOver.emit({originalEvent:Z,type:"cxtdragout",position:{x:et[0],y:et[1]}}),t.hoverData.cxtOver=Pt,Pt&&Pt.emit({originalEvent:Z,type:"cxtdragover",position:{x:et[0],y:et[1]}}))}}else if(t.hoverData.dragging){if(ve=!0,Me.panningEnabled()&&Me.userPanningEnabled()){var ui;if(t.hoverData.justStartedPan){var wl=t.hoverData.mdownPos;ui={x:(et[0]-wl[0])*Ne,y:(et[1]-wl[1])*Ne},t.hoverData.justStartedPan=!1}else ui={x:Kt[0]*Ne,y:Kt[1]*Ne};Me.panBy(ui),Me.emit("dragpan"),t.hoverData.dragged=!0}et=t.projectIntoViewport(Z.clientX,Z.clientY)}else if(1!=ct[4]||null!=Lt&&!Lt.pannable()){if(Lt&&Lt.pannable()&&Lt.active()&&Lt.unactivate(),Lt&&Lt.grabbed()||Pt==Mt||(Mt&&s(Mt,["mouseout","tapdragout"],Z,{x:et[0],y:et[1]}),Pt&&s(Pt,["mouseover","tapdragover"],Z,{x:et[0],y:et[1]}),t.hoverData.last=Pt),Lt)if(kt){if(Me.boxSelectionEnabled()&&zi)Lt&&Lt.grabbed()&&(k(_n),Lt.emit("freeon"),_n.emit("free"),t.dragData.didDrag&&(Lt.emit("dragfreeon"),_n.emit("dragfree"))),Pa();else if(Lt&&Lt.grabbed()&&t.nodeIsDraggable(Lt)){var mo=!t.dragData.didDrag;mo&&t.redrawHint("eles",!0),t.dragData.didDrag=!0,t.hoverData.draggingEles||b(_n,{inDragLayer:!0});var Da={x:0,y:0};if(B(Kt[0])&&B(Kt[1])&&(Da.x+=Kt[0],Da.y+=Kt[1],mo)){var yo=t.hoverData.dragDelta;yo&&B(yo[0])&&B(yo[1])&&(Da.x+=yo[0],Da.y+=yo[1])}t.hoverData.draggingEles=!0,_n.silentShift(Da).emit("position drag"),t.redrawHint("drag",!0),t.redraw()}}else 0===(bo=t.hoverData.dragDelta=t.hoverData.dragDelta||[]).length?(bo.push(Kt[0]),bo.push(Kt[1])):(bo[0]+=Kt[0],bo[1]+=Kt[1]);ve=!0}else kt&&(t.hoverData.dragging||!Me.boxSelectionEnabled()||!zi&&Me.panningEnabled()&&Me.userPanningEnabled()?!t.hoverData.selecting&&Me.panningEnabled()&&Me.userPanningEnabled()&&d(Lt,t.hoverData.downs)&&(t.hoverData.dragging=!0,t.hoverData.justStartedPan=!0,ct[4]=0,t.data.bgActivePosistion=Pi(Qe),t.redrawHint("select",!0),t.redraw()):Pa(),Lt&&Lt.pannable()&&Lt.active()&&Lt.unactivate());return ct[2]=et[0],ct[3]=et[1],ve?(Z.stopPropagation&&Z.stopPropagation(),Z.preventDefault&&Z.preventDefault(),!1):void 0}var bo},!1),t.registerBinding(r,"mouseup",function(Z){if(t.hoverData.capture){t.hoverData.capture=!1;var ve=t.cy,Me=t.projectIntoViewport(Z.clientX,Z.clientY),Ne=t.selection,Be=t.findNearestElement(Me[0],Me[1],!0,!1),et=t.dragData.possibleDragElements,Qe=t.hoverData.down,Bt=u(Z);if(t.data.bgActivePosistion&&(t.redrawHint("select",!0),t.redraw()),t.hoverData.tapholdCancelled=!0,t.data.bgActivePosistion=void 0,Qe&&Qe.unactivate(),3===t.hoverData.which){var ct={originalEvent:Z,type:"cxttapend",position:{x:Me[0],y:Me[1]}};if(Qe?Qe.emit(ct):ve.emit(ct),!t.hoverData.cxtDragged){var Pt={originalEvent:Z,type:"cxttap",position:{x:Me[0],y:Me[1]}};Qe?Qe.emit(Pt):ve.emit(Pt)}t.hoverData.cxtDragged=!1,t.hoverData.which=null}else if(1===t.hoverData.which){if(s(Be,["mouseup","tapend","vmouseup"],Z,{x:Me[0],y:Me[1]}),t.dragData.didDrag||t.hoverData.dragged||t.hoverData.selecting||t.hoverData.isOverThresholdDrag||(s(Qe,["click","tap","vclick"],Z,{x:Me[0],y:Me[1]}),j=!1,Z.timeStamp-Q<=ve.multiClickDebounceTime()?(R&&clearTimeout(R),j=!0,Q=null,s(Qe,["dblclick","dbltap","vdblclick"],Z,{x:Me[0],y:Me[1]})):(R=setTimeout(function(){j||s(Qe,["oneclick","onetap","voneclick"],Z,{x:Me[0],y:Me[1]})},ve.multiClickDebounceTime()),Q=Z.timeStamp)),null!=Qe||t.dragData.didDrag||t.hoverData.selecting||t.hoverData.dragged||u(Z)||(ve.$(a).unselect(["tapunselect"]),et.length>0&&t.redrawHint("eles",!0),t.dragData.possibleDragElements=et=ve.collection()),Be!=Qe||t.dragData.didDrag||t.hoverData.selecting||null!=Be&&Be._private.selectable&&(t.hoverData.dragging||("additive"===ve.selectionType()||Bt?Be.selected()?Be.unselect(["tapunselect"]):Be.select(["tapselect"]):Bt||(ve.$(a).unmerge(Be).unselect(["tapunselect"]),Be.select(["tapselect"]))),t.redrawHint("eles",!0)),t.hoverData.selecting){var kt=ve.collection(t.getAllInBox(Ne[0],Ne[1],Ne[2],Ne[3]));t.redrawHint("select",!0),kt.length>0&&t.redrawHint("eles",!0),ve.emit({type:"boxend",originalEvent:Z,position:{x:Me[0],y:Me[1]}}),"additive"===ve.selectionType()||Bt||ve.$(a).unmerge(kt).unselect(),kt.emit("box").stdFilter(function(Kt){return Kt.selectable()&&!Kt.selected()}).select().emit("boxselect"),t.redraw()}if(t.hoverData.dragging&&(t.hoverData.dragging=!1,t.redrawHint("select",!0),t.redrawHint("eles",!0),t.redraw()),!Ne[4]){t.redrawHint("drag",!0),t.redrawHint("eles",!0);var Lt=Qe&&Qe.grabbed();k(et),Lt&&(Qe.emit("freeon"),et.emit("free"),t.dragData.didDrag&&(Qe.emit("dragfreeon"),et.emit("dragfree")))}}Ne[4]=0,t.hoverData.down=null,t.hoverData.cxtStarted=!1,t.hoverData.draggingEles=!1,t.hoverData.selecting=!1,t.hoverData.isOverThresholdDrag=!1,t.dragData.didDrag=!1,t.hoverData.dragged=!1,t.hoverData.dragDelta=[],t.hoverData.mdownPos=null,t.hoverData.mdownGPos=null}},!1);var Y,W,ne,ie,oe,ce,ue,he,ke,xe,me,ye,Le,De=function(Z){if(!t.scrollingPage){var ve=t.cy,Me=ve.zoom(),Ne=ve.pan(),Be=t.projectIntoViewport(Z.clientX,Z.clientY),et=[Be[0]*Me+Ne.x,Be[1]*Me+Ne.y];if(t.hoverData.draggingEles||t.hoverData.dragging||t.hoverData.cxtStarted||0!==t.selection[4])Z.preventDefault();else if(ve.panningEnabled()&&ve.userPanningEnabled()&&ve.zoomingEnabled()&&ve.userZoomingEnabled()){var Qe;Z.preventDefault(),t.data.wheelZooming=!0,clearTimeout(t.data.wheelTimeout),t.data.wheelTimeout=setTimeout(function(){t.data.wheelZooming=!1,t.redrawHint("eles",!0),t.redraw()},150),Qe=null!=Z.deltaY?Z.deltaY/-250:null!=Z.wheelDeltaY?Z.wheelDeltaY/1e3:Z.wheelDelta/1e3,Qe*=t.wheelSensitivity,1===Z.deltaMode&&(Qe*=33);var Bt=ve.zoom()*Math.pow(10,Qe);"gesturechange"===Z.type&&(Bt=t.gestureStartZoom*Z.scale),ve.zoom({level:Bt,renderedPosition:{x:et[0],y:et[1]}}),ve.emit("gesturechange"===Z.type?"pinchzoom":"scrollzoom")}}};t.registerBinding(t.container,"wheel",De,!0),t.registerBinding(r,"scroll",function(Z){t.scrollingPage=!0,clearTimeout(t.scrollingPageTimeout),t.scrollingPageTimeout=setTimeout(function(){t.scrollingPage=!1},250)},!0),t.registerBinding(t.container,"gesturestart",function(Z){t.gestureStartZoom=t.cy.zoom(),t.hasTouchStarted||Z.preventDefault()},!0),t.registerBinding(t.container,"gesturechange",function(Z){t.hasTouchStarted||De(Z)},!0),t.registerBinding(t.container,"mouseout",function(Z){var ve=t.projectIntoViewport(Z.clientX,Z.clientY);t.cy.emit({originalEvent:Z,type:"mouseout",position:{x:ve[0],y:ve[1]}})},!1),t.registerBinding(t.container,"mouseover",function(Z){var ve=t.projectIntoViewport(Z.clientX,Z.clientY);t.cy.emit({originalEvent:Z,type:"mouseover",position:{x:ve[0],y:ve[1]}})},!1);var Ve,Te,He,Ye,qe,it,at,nt=function(Z,ve,Me,Ne){return Math.sqrt((Me-Z)*(Me-Z)+(Ne-ve)*(Ne-ve))},dt=function(Z,ve,Me,Ne){return(Me-Z)*(Me-Z)+(Ne-ve)*(Ne-ve)};if(t.registerBinding(t.container,"touchstart",Ve=function(Z){if(t.hasTouchStarted=!0,K(Z)){O(),t.touchData.capture=!0,t.data.bgActivePosistion=void 0;var ve=t.cy,Me=t.touchData.now,Ne=t.touchData.earlier;if(Z.touches[0]){var Be=t.projectIntoViewport(Z.touches[0].clientX,Z.touches[0].clientY);Me[0]=Be[0],Me[1]=Be[1]}if(Z.touches[1]&&(Be=t.projectIntoViewport(Z.touches[1].clientX,Z.touches[1].clientY),Me[2]=Be[0],Me[3]=Be[1]),Z.touches[2]&&(Be=t.projectIntoViewport(Z.touches[2].clientX,Z.touches[2].clientY),Me[4]=Be[0],Me[5]=Be[1]),Z.touches[1]){t.touchData.singleTouchMoved=!0,k(t.dragData.touchDragEles);var et=t.findContainerClientCoords();me=et[2],ye=et[3],W=Z.touches[0].clientY-(xe=et[1]),ne=Z.touches[1].clientX-(ke=et[0]),ie=Z.touches[1].clientY-xe,Le=0<=(Y=Z.touches[0].clientX-ke)&&Y<=me&&0<=ne&&ne<=me&&0<=W&&W<=ye&&0<=ie&&ie<=ye;var Qe=ve.pan(),Bt=ve.zoom();if(oe=nt(Y,W,ne,ie),ce=dt(Y,W,ne,ie),he=[((ue=[(Y+ne)/2,(W+ie)/2])[0]-Qe.x)/Bt,(ue[1]-Qe.y)/Bt],ce<4e4&&!Z.touches[2]){var ct=t.findNearestElement(Me[0],Me[1],!0,!0),Pt=t.findNearestElement(Me[2],Me[3],!0,!0);return ct&&ct.isNode()?(ct.activate().emit({originalEvent:Z,type:"cxttapstart",position:{x:Me[0],y:Me[1]}}),t.touchData.start=ct):Pt&&Pt.isNode()?(Pt.activate().emit({originalEvent:Z,type:"cxttapstart",position:{x:Me[0],y:Me[1]}}),t.touchData.start=Pt):ve.emit({originalEvent:Z,type:"cxttapstart",position:{x:Me[0],y:Me[1]}}),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!0,t.touchData.cxtDragged=!1,t.data.bgActivePosistion=void 0,void t.redraw()}}if(Z.touches[2])ve.boxSelectionEnabled()&&Z.preventDefault();else if(!Z.touches[1]&&Z.touches[0]){var kt=t.findNearestElements(Me[0],Me[1],!0,!0),Mt=kt[0];if(null!=Mt&&(Mt.activate(),t.touchData.start=Mt,t.touchData.starts=kt,t.nodeIsGrabbable(Mt))){var Lt=t.dragData.touchDragEles=ve.collection(),Kt=null;t.redrawHint("eles",!0),t.redrawHint("drag",!0),Mt.selected()?(Kt=ve.$(function(Bn){return Bn.selected()&&t.nodeIsGrabbable(Bn)}),b(Kt,{addToList:Lt})):w(Mt,{addToList:Lt}),m(Mt);var _n=function(Bn){return{originalEvent:Z,type:Bn,position:{x:Me[0],y:Me[1]}}};Mt.emit(_n("grabon")),Kt?Kt.forEach(function(Bn){Bn.emit(_n("grab"))}):Mt.emit(_n("grab"))}s(Mt,["touchstart","tapstart","vmousedown"],Z,{x:Me[0],y:Me[1]}),null==Mt&&(t.data.bgActivePosistion={x:Be[0],y:Be[1]},t.redrawHint("select",!0),t.redraw()),t.touchData.singleTouchMoved=!1,t.touchData.singleTouchStartTime=+new Date,clearTimeout(t.touchData.tapholdTimeout),t.touchData.tapholdTimeout=setTimeout(function(){!1!==t.touchData.singleTouchMoved||t.pinching||t.touchData.selecting||s(t.touchData.start,["taphold"],Z,{x:Me[0],y:Me[1]})},t.tapholdDuration)}if(Z.touches.length>=1){for(var An=t.touchData.startPosition=[null,null,null,null,null,null],mn=0;mn<Me.length;mn++)An[mn]=Ne[mn]=Me[mn];var _r=Z.touches[0];t.touchData.startGPosition=[_r.clientX,_r.clientY]}}},!1),t.registerBinding(window,"touchmove",Te=function(Z){var ve=t.touchData.capture;if(ve||K(Z)){var Me=t.selection,Ne=t.cy,Be=t.touchData.now,et=t.touchData.earlier,Qe=Ne.zoom();if(Z.touches[0]){var Bt=t.projectIntoViewport(Z.touches[0].clientX,Z.touches[0].clientY);Be[0]=Bt[0],Be[1]=Bt[1]}Z.touches[1]&&(Bt=t.projectIntoViewport(Z.touches[1].clientX,Z.touches[1].clientY),Be[2]=Bt[0],Be[3]=Bt[1]),Z.touches[2]&&(Bt=t.projectIntoViewport(Z.touches[2].clientX,Z.touches[2].clientY),Be[4]=Bt[0],Be[5]=Bt[1]);var ct,Pt=t.touchData.startGPosition;if(ve&&Z.touches[0]&&Pt){for(var kt=[],Mt=0;Mt<Be.length;Mt++)kt[Mt]=Be[Mt]-et[Mt];var Lt=Z.touches[0].clientX-Pt[0],_n=Z.touches[0].clientY-Pt[1];ct=Lt*Lt+_n*_n>=t.touchTapThreshold2}if(ve&&t.touchData.cxt){Z.preventDefault();var An=Z.touches[0].clientX-ke,mn=Z.touches[0].clientY-xe,_r=Z.touches[1].clientX-ke,Bn=Z.touches[1].clientY-xe,zi=dt(An,mn,_r,Bn);if(zi/ce>=2.25||zi>=22500){t.touchData.cxt=!1,t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var Pa={originalEvent:Z,type:"cxttapend",position:{x:Be[0],y:Be[1]}};t.touchData.start?(t.touchData.start.unactivate().emit(Pa),t.touchData.start=null):Ne.emit(Pa)}}if(ve&&t.touchData.cxt){Pa={originalEvent:Z,type:"cxtdrag",position:{x:Be[0],y:Be[1]}},t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.touchData.start?t.touchData.start.emit(Pa):Ne.emit(Pa),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxtDragged=!0;var Kr=t.findNearestElement(Be[0],Be[1],!0,!0);t.touchData.cxtOver&&Kr===t.touchData.cxtOver||(t.touchData.cxtOver&&t.touchData.cxtOver.emit({originalEvent:Z,type:"cxtdragout",position:{x:Be[0],y:Be[1]}}),t.touchData.cxtOver=Kr,Kr&&Kr.emit({originalEvent:Z,type:"cxtdragover",position:{x:Be[0],y:Be[1]}}))}else if(ve&&Z.touches[2]&&Ne.boxSelectionEnabled())Z.preventDefault(),t.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,t.touchData.selecting||Ne.emit({originalEvent:Z,type:"boxstart",position:{x:Be[0],y:Be[1]}}),t.touchData.selecting=!0,t.touchData.didSelect=!0,Me[4]=1,Me&&0!==Me.length&&void 0!==Me[0]?(Me[2]=(Be[0]+Be[2]+Be[4])/3,Me[3]=(Be[1]+Be[3]+Be[5])/3):(Me[0]=(Be[0]+Be[2]+Be[4])/3,Me[1]=(Be[1]+Be[3]+Be[5])/3,Me[2]=(Be[0]+Be[2]+Be[4])/3+1,Me[3]=(Be[1]+Be[3]+Be[5])/3+1),t.redrawHint("select",!0),t.redraw();else if(ve&&Z.touches[1]&&!t.touchData.didSelect&&Ne.zoomingEnabled()&&Ne.panningEnabled()&&Ne.userZoomingEnabled()&&Ne.userPanningEnabled()){if(Z.preventDefault(),t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),oa=t.dragData.touchDragEles){t.redrawHint("drag",!0);for(var ui=0;ui<oa.length;ui++){var wl=oa[ui]._private;wl.grabbed=!1,wl.rscratch.inDragLayer=!1}}var mo=t.touchData.start,Da=nt(An=Z.touches[0].clientX-ke,mn=Z.touches[0].clientY-xe,_r=Z.touches[1].clientX-ke,Bn=Z.touches[1].clientY-xe),yo=Da/oe;if(Le){var bo=(An-Y+(_r-ne))/2,L0=(mn-W+(Bn-ie))/2,El=Ne.zoom(),mh=El*yo,fc=Ne.pan(),Tf=he[0]*El+fc.x,Pf=he[1]*El+fc.y,O0={x:-mh/El*(Tf-fc.x-bo)+Tf,y:-mh/El*(Pf-fc.y-L0)+Pf};if(mo&&mo.active()){var oa=t.dragData.touchDragEles;k(oa),t.redrawHint("drag",!0),t.redrawHint("eles",!0),mo.unactivate().emit("freeon"),oa.emit("free"),t.dragData.didDrag&&(mo.emit("dragfreeon"),oa.emit("dragfree"))}Ne.viewport({zoom:mh,pan:O0,cancelOnFailedZoom:!0}),Ne.emit("pinchzoom"),oe=Da,Y=An,W=mn,ne=_r,ie=Bn,t.pinching=!0}Z.touches[0]&&(Bt=t.projectIntoViewport(Z.touches[0].clientX,Z.touches[0].clientY),Be[0]=Bt[0],Be[1]=Bt[1]),Z.touches[1]&&(Bt=t.projectIntoViewport(Z.touches[1].clientX,Z.touches[1].clientY),Be[2]=Bt[0],Be[3]=Bt[1]),Z.touches[2]&&(Bt=t.projectIntoViewport(Z.touches[2].clientX,Z.touches[2].clientY),Be[4]=Bt[0],Be[5]=Bt[1])}else if(Z.touches[0]&&!t.touchData.didSelect){var _i=t.touchData.start,yh=t.touchData.last;if(t.hoverData.draggingEles||t.swipePanning||(Kr=t.findNearestElement(Be[0],Be[1],!0,!0)),ve&&null!=_i&&Z.preventDefault(),ve&&null!=_i&&t.nodeIsDraggable(_i))if(ct){oa=t.dragData.touchDragEles;var Df=!t.dragData.didDrag;Df&&b(oa,{inDragLayer:!0}),t.dragData.didDrag=!0;var _l={x:0,y:0};B(kt[0])&&B(kt[1])&&(_l.x+=kt[0],_l.y+=kt[1],Df&&(t.redrawHint("eles",!0),(Ii=t.touchData.dragDelta)&&B(Ii[0])&&B(Ii[1])&&(_l.x+=Ii[0],_l.y+=Ii[1]))),t.hoverData.draggingEles=!0,oa.silentShift(_l).emit("position drag"),t.redrawHint("drag",!0),t.touchData.startPosition[0]==et[0]&&t.touchData.startPosition[1]==et[1]&&t.redrawHint("eles",!0),t.redraw()}else{var Ii;0===(Ii=t.touchData.dragDelta=t.touchData.dragDelta||[]).length?(Ii.push(kt[0]),Ii.push(kt[1])):(Ii[0]+=kt[0],Ii[1]+=kt[1])}if(s(_i||Kr,["touchmove","tapdrag","vmousemove"],Z,{x:Be[0],y:Be[1]}),_i&&_i.grabbed()||Kr==yh||(yh&&yh.emit({originalEvent:Z,type:"tapdragout",position:{x:Be[0],y:Be[1]}}),Kr&&Kr.emit({originalEvent:Z,type:"tapdragover",position:{x:Be[0],y:Be[1]}})),t.touchData.last=Kr,ve)for(ui=0;ui<Be.length;ui++)Be[ui]&&t.touchData.startPosition[ui]&&ct&&(t.touchData.singleTouchMoved=!0);ve&&(null==_i||_i.pannable())&&Ne.panningEnabled()&&Ne.userPanningEnabled()&&(d(_i,t.touchData.starts)&&(Z.preventDefault(),t.data.bgActivePosistion||(t.data.bgActivePosistion=Pi(t.touchData.startPosition)),t.swipePanning?(Ne.panBy({x:kt[0]*Qe,y:kt[1]*Qe}),Ne.emit("dragpan")):ct&&(t.swipePanning=!0,Ne.panBy({x:Lt*Qe,y:_n*Qe}),Ne.emit("dragpan"),_i&&(_i.unactivate(),t.redrawHint("select",!0),t.touchData.start=null))),Bt=t.projectIntoViewport(Z.touches[0].clientX,Z.touches[0].clientY),Be[0]=Bt[0],Be[1]=Bt[1])}for(Mt=0;Mt<Be.length;Mt++)et[Mt]=Be[Mt];ve&&Z.touches.length>0&&!t.hoverData.draggingEles&&!t.swipePanning&&null!=t.data.bgActivePosistion&&(t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.redraw())}},!1),t.registerBinding(r,"touchcancel",He=function(Z){var ve=t.touchData.start;t.touchData.capture=!1,ve&&ve.unactivate()}),t.registerBinding(r,"touchend",Ye=function(Z){var ve=t.touchData.start;if(t.touchData.capture){0===Z.touches.length&&(t.touchData.capture=!1),Z.preventDefault();var Me=t.selection;t.swipePanning=!1,t.hoverData.draggingEles=!1;var Ne,Be=t.cy,et=Be.zoom(),Qe=t.touchData.now,Bt=t.touchData.earlier;if(Z.touches[0]){var ct=t.projectIntoViewport(Z.touches[0].clientX,Z.touches[0].clientY);Qe[0]=ct[0],Qe[1]=ct[1]}if(Z.touches[1]&&(ct=t.projectIntoViewport(Z.touches[1].clientX,Z.touches[1].clientY),Qe[2]=ct[0],Qe[3]=ct[1]),Z.touches[2]&&(ct=t.projectIntoViewport(Z.touches[2].clientX,Z.touches[2].clientY),Qe[4]=ct[0],Qe[5]=ct[1]),ve&&ve.unactivate(),t.touchData.cxt){if(Ne={originalEvent:Z,type:"cxttapend",position:{x:Qe[0],y:Qe[1]}},ve?ve.emit(Ne):Be.emit(Ne),!t.touchData.cxtDragged){var Pt={originalEvent:Z,type:"cxttap",position:{x:Qe[0],y:Qe[1]}};ve?ve.emit(Pt):Be.emit(Pt)}return t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!1,t.touchData.start=null,void t.redraw()}if(!Z.touches[2]&&Be.boxSelectionEnabled()&&t.touchData.selecting){t.touchData.selecting=!1;var kt=Be.collection(t.getAllInBox(Me[0],Me[1],Me[2],Me[3]));Me[0]=void 0,Me[1]=void 0,Me[2]=void 0,Me[3]=void 0,Me[4]=0,t.redrawHint("select",!0),Be.emit({type:"boxend",originalEvent:Z,position:{x:Qe[0],y:Qe[1]}}),kt.emit("box").stdFilter(function(zi){return zi.selectable()&&!zi.selected()}).select().emit("boxselect"),kt.nonempty()&&t.redrawHint("eles",!0),t.redraw()}if(ve?.unactivate(),Z.touches[2])t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);else if(!Z.touches[1]&&!Z.touches[0]&&!Z.touches[0]){t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var Mt=t.dragData.touchDragEles;if(null!=ve){var Lt=ve._private.grabbed;k(Mt),t.redrawHint("drag",!0),t.redrawHint("eles",!0),Lt&&(ve.emit("freeon"),Mt.emit("free"),t.dragData.didDrag&&(ve.emit("dragfreeon"),Mt.emit("dragfree"))),s(ve,["touchend","tapend","vmouseup","tapdragout"],Z,{x:Qe[0],y:Qe[1]}),ve.unactivate(),t.touchData.start=null}else{var Kt=t.findNearestElement(Qe[0],Qe[1],!0,!0);s(Kt,["touchend","tapend","vmouseup","tapdragout"],Z,{x:Qe[0],y:Qe[1]})}var _n=t.touchData.startPosition[0]-Qe[0],mn=t.touchData.startPosition[1]-Qe[1],_r=(_n*_n+mn*mn)*et*et;t.touchData.singleTouchMoved||(ve||Be.$(":selected").unselect(["tapunselect"]),s(ve,["tap","vclick"],Z,{x:Qe[0],y:Qe[1]}),qe=!1,Z.timeStamp-at<=Be.multiClickDebounceTime()?(it&&clearTimeout(it),qe=!0,at=null,s(ve,["dbltap","vdblclick"],Z,{x:Qe[0],y:Qe[1]})):(it=setTimeout(function(){qe||s(ve,["onetap","voneclick"],Z,{x:Qe[0],y:Qe[1]})},Be.multiClickDebounceTime()),at=Z.timeStamp)),null!=ve&&!t.dragData.didDrag&&ve._private.selectable&&_r<t.touchTapThreshold2&&!t.pinching&&("single"===Be.selectionType()?(Be.$(a).unmerge(ve).unselect(["tapunselect"]),ve.select(["tapselect"])):ve.selected()?ve.unselect(["tapunselect"]):ve.select(["tapselect"]),t.redrawHint("eles",!0)),t.touchData.singleTouchMoved=!0}for(var Bn=0;Bn<Qe.length;Bn++)Bt[Bn]=Qe[Bn];t.dragData.didDrag=!1,0===Z.touches.length&&(t.touchData.dragDelta=[],t.touchData.startPosition=[null,null,null,null,null,null],t.touchData.startGPosition=null,t.touchData.didSelect=!1),Z.touches.length<2&&(1===Z.touches.length&&(t.touchData.startGPosition=[Z.touches[0].clientX,Z.touches[0].clientY]),t.pinching=!1,t.redrawHint("eles",!0),t.redraw())}},!1),typeof TouchEvent>"u"){var yt=[],Dt=function(Z){return{clientX:Z.clientX,clientY:Z.clientY,force:1,identifier:Z.pointerId,pageX:Z.pageX,pageY:Z.pageY,radiusX:Z.width/2,radiusY:Z.height/2,screenX:Z.screenX,screenY:Z.screenY,target:Z.target}},xt=function(Z){for(var ve=0;ve<yt.length;ve++)if(yt[ve].event.pointerId===Z.pointerId)return void yt.splice(ve,1)},Tt=function(Z){Z.touches=yt.map(function(ve){return ve.touch})},ht=function(Z){return"mouse"===Z.pointerType||4===Z.pointerType};t.registerBinding(t.container,"pointerdown",function(Z){ht(Z)||(Z.preventDefault(),function(Z){var ve;yt.push({event:ve=Z,touch:Dt(ve)})}(Z),Tt(Z),Ve(Z))}),t.registerBinding(t.container,"pointerup",function(Z){ht(Z)||(xt(Z),Tt(Z),Ye(Z))}),t.registerBinding(t.container,"pointercancel",function(Z){ht(Z)||(xt(Z),Tt(Z),He())}),t.registerBinding(t.container,"pointermove",function(Z){var ve,Me;ht(Z)||(Z.preventDefault(),ve=Z,(Me=yt.filter(function(Ne){return Ne.event.pointerId===ve.pointerId})[0]).event=ve,Me.touch=Dt(ve),Tt(Z),Te(Z))})}}},Sa={generatePolygon:function(t,r){return this.nodeShapes[t]={renderer:this,name:t,points:r,draw:function(a,s,u,d,p){this.renderer.nodeShapeImpl("polygon",a,s,u,d,p,this.points)},intersectLine:function(a,s,u,d,p,m,v){return Wi(p,m,this.points,a,s,u/2,d/2,v)},checkPoint:function(a,s,u,d,p,m,v){return Fr(a,s,this.points,m,v,d,p,[0,-1],u)}}},generateEllipse:function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(t,r,a,s,u){this.renderer.nodeShapeImpl(this.name,t,r,a,s,u)},intersectLine:function(t,r,a,s,u,d,p){return function(m,v,b,w,k,T){var O=b-m,D=w-v;O/=k,D/=T;var z=Math.sqrt(O*O+D*D),V=z-1;if(V<0)return[];var M=V/z;return[(b-m)*M+m,(w-v)*M+v]}(u,d,t,r,a/2+p,s/2+p)},checkPoint:function(t,r,a,s,u,d,p){return ii(t,r,s,u,d,p,a)}}},generateRoundPolygon:function(t,r){for(var a=new Array(2*r.length),s=0;s<r.length/2;s++){var d,u=2*s;d=s<r.length/2-1?2*(s+1):0,a[4*s]=r[u],a[4*s+1]=r[u+1];var p=r[d]-r[u],m=r[d+1]-r[u+1],v=Math.sqrt(p*p+m*m);a[4*s+2]=p/v,a[4*s+3]=m/v}return this.nodeShapes[t]={renderer:this,name:t,points:a,draw:function(b,w,k,T,O){this.renderer.nodeShapeImpl("round-polygon",b,w,k,T,O,this.points)},intersectLine:function(b,w,k,T,O,D,z){return function(V,M,R,j,Q,K,Y,W){for(var ne,ie=[],oe=new Array(R.length),ce=K/2,ue=Y/2,he=zo(K,Y),ke=0;ke<R.length/4;ke++){var xe,me;me=0===ke?R.length-2:4*ke-2,xe=4*ke+2;var ye=j+ce*R[4*ke],Le=Q+ue*R[4*ke+1],Ve=he/Math.tan(Math.acos(-R[me]*R[xe]-R[me+1]*R[xe+1])/2),Te=ye-Ve*R[me],He=Le-Ve*R[me+1],Ye=ye+Ve*R[xe],qe=Le+Ve*R[xe+1];0===ke?(oe[R.length-2]=Te,oe[R.length-1]=He):(oe[4*ke-2]=Te,oe[4*ke-1]=He),oe[4*ke]=Ye,oe[4*ke+1]=qe;var it=R[me+1],at=-R[me];it*R[xe]+at*R[xe+1]<0&&(it*=-1,at*=-1),0!==(ne=Ka(V,M,j,Q,Te+it*he,He+at*he,he)).length&&ie.push(ne[0],ne[1])}for(var nt=0;nt<oe.length/4;nt++)0!==(ne=ai(V,M,j,Q,oe[4*nt],oe[4*nt+1],oe[4*nt+2],oe[4*nt+3],!1)).length&&ie.push(ne[0],ne[1]);if(ie.length>2){for(var dt=[ie[0],ie[1]],yt=Math.pow(dt[0]-V,2)+Math.pow(dt[1]-M,2),Dt=1;Dt<ie.length/2;Dt++){var $e=Math.pow(ie[2*Dt]-V,2)+Math.pow(ie[2*Dt+1]-M,2);$e<=yt&&(dt[0]=ie[2*Dt],dt[1]=ie[2*Dt+1],yt=$e)}return dt}return ie}(O,D,this.points,b,w,k,T)},checkPoint:function(b,w,k,T,O,D,z){return function(V,M,R,j,Q,K,Y){for(var W=new Array(R.length),ne=K/2,ie=Y/2,oe=zo(K,Y),ce=oe*oe,ue=0;ue<R.length/4;ue++){var he,ke;ke=0===ue?R.length-2:4*ue-2,he=4*ue+2;var xe=j+ne*R[4*ue],me=Q+ie*R[4*ue+1],Le=oe/Math.tan(Math.acos(-R[ke]*R[he]-R[ke+1]*R[he+1])/2),De=xe-Le*R[ke],Ve=me-Le*R[ke+1],Te=xe+Le*R[he],He=me+Le*R[he+1];W[4*ue]=De,W[4*ue+1]=Ve,W[4*ue+2]=Te,W[4*ue+3]=He;var Ye=R[ke+1],qe=-R[ke];Ye*R[he]+qe*R[he+1]<0&&(Ye*=-1,qe*=-1);var at=Ve+qe*oe;if(Math.pow(De+Ye*oe-V,2)+Math.pow(at-M,2)<=ce)return!0}return Wn(V,M,W)}(b,w,this.points,D,z,T,O)}}},generateRoundRectangle:function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:$n(4,0),draw:function(t,r,a,s,u){this.renderer.nodeShapeImpl(this.name,t,r,a,s,u)},intersectLine:function(t,r,a,s,u,d,p){return zs(u,d,t,r,a,s,p)},checkPoint:function(t,r,a,s,u,d,p){var m=ba(s,u),v=2*m;return!!(Fr(t,r,this.points,d,p,s,u-v,[0,-1],a)||Fr(t,r,this.points,d,p,s-v,u,[0,-1],a)||ii(t,r,v,v,d-s/2+m,p-u/2+m,a)||ii(t,r,v,v,d+s/2-m,p-u/2+m,a)||ii(t,r,v,v,d+s/2-m,p+u/2-m,a)||ii(t,r,v,v,d-s/2+m,p+u/2-m,a))}}},generateCutRectangle:function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:8,points:$n(4,0),draw:function(t,r,a,s,u){this.renderer.nodeShapeImpl(this.name,t,r,a,s,u)},generateCutTrianglePts:function(t,r,a,s){var u=this.cornerLength,d=r/2,p=t/2,m=a-p,v=a+p,b=s-d,w=s+d;return{topLeft:[m,b+u,m+u,b,m+u,b+u],topRight:[v-u,b,v,b+u,v-u,b+u],bottomRight:[v,w-u,v-u,w,v-u,w-u],bottomLeft:[m+u,w,m,w-u,m+u,w-u]}},intersectLine:function(t,r,a,s,u,d,p){var m=this.generateCutTrianglePts(a+2*p,s+2*p,t,r),v=[].concat.apply([],[m.topLeft.splice(0,4),m.topRight.splice(0,4),m.bottomRight.splice(0,4),m.bottomLeft.splice(0,4)]);return Wi(u,d,v,t,r)},checkPoint:function(t,r,a,s,u,d,p){if(Fr(t,r,this.points,d,p,s,u-2*this.cornerLength,[0,-1],a)||Fr(t,r,this.points,d,p,s-2*this.cornerLength,u,[0,-1],a))return!0;var m=this.generateCutTrianglePts(s,u,d,p);return Wn(t,r,m.topLeft)||Wn(t,r,m.topRight)||Wn(t,r,m.bottomRight)||Wn(t,r,m.bottomLeft)}}},generateBarrel:function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:$n(4,0),draw:function(t,r,a,s,u){this.renderer.nodeShapeImpl(this.name,t,r,a,s,u)},intersectLine:function(t,r,a,s,u,d,p){var m=this.generateBarrelBezierPts(a+2*p,s+2*p,t,r),v=function(w){var k=Di({x:w[0],y:w[1]},{x:w[2],y:w[3]},{x:w[4],y:w[5]},.15),T=Di({x:w[0],y:w[1]},{x:w[2],y:w[3]},{x:w[4],y:w[5]},.5),O=Di({x:w[0],y:w[1]},{x:w[2],y:w[3]},{x:w[4],y:w[5]},.85);return[w[0],w[1],k.x,k.y,T.x,T.y,O.x,O.y,w[4],w[5]]},b=[].concat(v(m.topLeft),v(m.topRight),v(m.bottomRight),v(m.bottomLeft));return Wi(u,d,b,t,r)},generateBarrelBezierPts:function(t,r,a,s){var u=r/2,d=t/2,p=a-d,m=a+d,v=s-u,b=s+u,w=Ai(t,r),k=w.heightOffset,T=w.widthOffset,O=w.ctrlPtOffsetPct*t,D={topLeft:[p,v+k,p+O,v,p+T,v],topRight:[m-T,v,m-O,v,m,v+k],bottomRight:[m,b-k,m-O,b,m-T,b],bottomLeft:[p+T,b,p+O,b,p,b-k]};return D.topLeft.isTop=!0,D.topRight.isTop=!0,D.bottomLeft.isBottom=!0,D.bottomRight.isBottom=!0,D},checkPoint:function(t,r,a,s,u,d,p){var m=Ai(s,u),b=m.widthOffset;if(Fr(t,r,this.points,d,p,s,u-2*m.heightOffset,[0,-1],a)||Fr(t,r,this.points,d,p,s-2*b,u,[0,-1],a))return!0;for(var w=this.generateBarrelBezierPts(s,u,d,p),k=function(Q,K,Y){var W,ne,ie=Y[4],oe=Y[2],ce=Y[0],ue=Y[5],he=Y[1],ke=Math.min(ie,ce),xe=Math.max(ie,ce),me=Math.min(ue,he),ye=Math.max(ue,he);if(ke<=Q&&Q<=xe&&me<=K&&K<=ye){var Le=[(W=ie)-2*(ne=oe)+ce,2*(ne-W),W],De=function(Ve,Te,He,Ye){var qe=Te*Te-4*Ve*(He-=Ye);if(qe<0)return[];var it=Math.sqrt(qe),at=2*Ve;return[(-Te+it)/at,(-Te-it)/at]}(Le[0],Le[1],Le[2],Q).filter(function(Ve){return 0<=Ve&&Ve<=1});if(De.length>0)return De[0]}return null},T=Object.keys(w),O=0;O<T.length;O++){var D=w[T[O]],z=k(t,r,D);if(null!=z){var j=Tn(D[5],D[3],D[1],z);if(D.isTop&&j<=r||D.isBottom&&r<=j)return!0}}return!1}}},generateBottomRoundrectangle:function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:$n(4,0),draw:function(t,r,a,s,u){this.renderer.nodeShapeImpl(this.name,t,r,a,s,u)},intersectLine:function(t,r,a,s,u,d,p){var m=r-(s/2+p),v=ai(u,d,t,r,t-(a/2+p),m,t+(a/2+p),m,!1);return v.length>0?v:zs(u,d,t,r,a,s,p)},checkPoint:function(t,r,a,s,u,d,p){var m=ba(s,u),v=2*m;if(Fr(t,r,this.points,d,p,s,u-v,[0,-1],a)||Fr(t,r,this.points,d,p,s-v,u,[0,-1],a))return!0;var b=s/2+2*a,w=u/2+2*a;return!!Wn(t,r,[d-b,p-w,d-b,p,d+b,p,d+b,p-w])||!!ii(t,r,v,v,d+s/2-m,p+u/2-m,a)||!!ii(t,r,v,v,d-s/2+m,p+u/2-m,a)}}},registerNodeShapes:function(){var t=this.nodeShapes={},r=this;this.generateEllipse(),this.generatePolygon("triangle",$n(3,0)),this.generateRoundPolygon("round-triangle",$n(3,0)),this.generatePolygon("rectangle",$n(4,0)),t.square=t.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();var a=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",a),this.generateRoundPolygon("round-diamond",a),this.generatePolygon("pentagon",$n(5,0)),this.generateRoundPolygon("round-pentagon",$n(5,0)),this.generatePolygon("hexagon",$n(6,0)),this.generateRoundPolygon("round-hexagon",$n(6,0)),this.generatePolygon("heptagon",$n(7,0)),this.generateRoundPolygon("round-heptagon",$n(7,0)),this.generatePolygon("octagon",$n(8,0)),this.generateRoundPolygon("round-octagon",$n(8,0));var s=new Array(20),u=Ga(5,0),d=Ga(5,Math.PI/5),p=.5*(3-Math.sqrt(5));p*=1.57;for(var m=0;m<d.length/2;m++)d[2*m]*=p,d[2*m+1]*=p;for(m=0;m<5;m++)s[4*m]=u[2*m],s[4*m+1]=u[2*m+1],s[4*m+2]=d[2*m],s[4*m+3]=d[2*m+1];s=ya(s),this.generatePolygon("star",s),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.generatePolygon("right-rhomboid",[-.333,-1,1,-1,.333,1,-1,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);var v=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",v),this.generateRoundPolygon("round-tag",v),t.makePolygon=function(b){var w,k="polygon-"+b.join("$");return(w=this[k])?w:r.generatePolygon(k,b)}}},rf={timeToRender:function(){return this.redrawTotalTime/this.redrawCount},redraw:function(t){t=t||gr();var r=this;void 0===r.averageRedrawTime&&(r.averageRedrawTime=0),void 0===r.lastRedrawTime&&(r.lastRedrawTime=0),void 0===r.lastDrawTime&&(r.lastDrawTime=0),r.requestedFrame=!0,r.renderOptions=t},beforeRender:function(t,r){if(!this.destroyed){null==r&&$t("Priority is not optional for beforeRender");var a=this.beforeRenderCallbacks;a.push({fn:t,priority:r}),a.sort(function(s,u){return u.priority-s.priority})}}},af=function(t,r,a){for(var s=t.beforeRenderCallbacks,u=0;u<s.length;u++)s[u].fn(r,a)};rf.startRenderLoop=function(){var t=this,r=t.cy;t.renderLoopStarted||(t.renderLoopStarted=!0,Rn(function a(s){if(!t.destroyed){if(!r.batching())if(t.requestedFrame&&!t.skipFrame){af(t,!0,s);var u=Sn();t.render(t.renderOptions);var d=t.lastDrawTime=Sn();void 0===t.averageRedrawTime&&(t.averageRedrawTime=d-u),void 0===t.redrawCount&&(t.redrawCount=0),t.redrawCount++,void 0===t.redrawTotalTime&&(t.redrawTotalTime=0);var p=d-u;t.redrawTotalTime+=p,t.lastRedrawTime=p,t.averageRedrawTime=t.averageRedrawTime/2+p/2,t.requestedFrame=!1}else af(t,!1,s);t.skipFrame=!1,Rn(a)}}))};var of=function(t){this.init(t)},is=of.prototype;is.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"],is.init=function(t){var r=this;r.options=t,r.cy=t.cy;var a=r.container=t.cy.container(),s=r.cy.window();if(s){var u=s.document,d=u.head,p="__________cytoscape_container",m=null!=u.getElementById("__________cytoscape_stylesheet");if(a.className.indexOf(p)<0&&(a.className=(a.className||"")+" "+p),!m){var v=u.createElement("style");v.id="__________cytoscape_stylesheet",v.textContent="."+p+" { position: relative; }",d.insertBefore(v,d.children[0])}"static"===s.getComputedStyle(a).getPropertyValue("position")&&nn("A Cytoscape container has style position:static and so can not use UI extensions properly")}r.selection=[void 0,void 0,void 0,void 0,0],r.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],r.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},r.dragData={possibleDragElements:[]},r.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},r.redraws=0,r.showFps=t.showFps,r.debug=t.debug,r.hideEdgesOnViewport=t.hideEdgesOnViewport,r.textureOnViewport=t.textureOnViewport,r.wheelSensitivity=t.wheelSensitivity,r.motionBlurEnabled=t.motionBlur,r.forcedPixelRatio=B(t.pixelRatio)?t.pixelRatio:null,r.motionBlur=t.motionBlur,r.motionBlurOpacity=t.motionBlurOpacity,r.motionBlurTransparency=1-r.motionBlurOpacity,r.motionBlurPxRatio=1,r.mbPxRBlurry=1,r.minMbLowQualFrames=4,r.fullQualityMb=!1,r.clearedForMotionBlur=[],r.desktopTapThreshold=t.desktopTapThreshold,r.desktopTapThreshold2=t.desktopTapThreshold*t.desktopTapThreshold,r.touchTapThreshold=t.touchTapThreshold,r.touchTapThreshold2=t.touchTapThreshold*t.touchTapThreshold,r.tapholdDuration=500,r.bindings=[],r.beforeRenderCallbacks=[],r.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},r.registerNodeShapes(),r.registerArrowShapes(),r.registerCalculationListeners()},is.notify=function(t,r){var a=this;this.destroyed||("init"!==t?"destroy"!==t?(("add"===t||"remove"===t||"move"===t&&a.cy.hasCompoundNodes()||"load"===t||"zorder"===t||"mount"===t)&&a.invalidateCachedZSortedEles(),"viewport"===t&&a.redrawHint("select",!0),"load"!==t&&"resize"!==t&&"mount"!==t||(a.invalidateContainerClientCoordsCache(),a.matchCanvasSize(a.container)),a.redrawHint("eles",!0),a.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()):a.destroy():a.load())},is.destroy=function(){var t=this;t.destroyed=!0,t.cy.stopAnimationLoop();for(var r=0;r<t.bindings.length;r++){var a=t.bindings[r],s=a.target;(s.off||s.removeEventListener).apply(s,a.args)}if(t.bindings=[],t.beforeRenderCallbacks=[],t.onUpdateEleCalcsFns=[],t.removeObserver&&t.removeObserver.disconnect(),t.styleObserver&&t.styleObserver.disconnect(),t.resizeObserver&&t.resizeObserver.disconnect(),t.labelCalcDiv)try{document.body.removeChild(t.labelCalcDiv)}catch{}},is.isHeadless=function(){return!1},[s0,nf,p0,ml,Sa,rf].forEach(function(t){ee(is,t)});var sf=function(t){return function(){var r=this,a=this.renderer;if(!r.dequeueingSetup){r.dequeueingSetup=!0;var s=Ln(function(){a.redrawHint("eles",!0),a.redrawHint("drag",!0),a.redraw()},t.deqRedrawThreshold);a.beforeRender(function(d,p){var m=Sn(),v=a.averageRedrawTime,b=a.lastRedrawTime,w=[],k=a.cy.extent(),T=a.getPixelRatio();for(d||a.flushRenderedStyleQueue();;){var O=Sn(),D=O-m,z=O-p;if(b<1e3/60){if(z>=t.deqFastCost*(16.666666666666668-(d?v:0)))break}else if(d){if(D>=t.deqCost*b||D>=t.deqAvgCost*v)break}else if(z>=t.deqNoDrawCost*(1e3/60))break;var M=t.deq(r,T,k);if(!(M.length>0))break;for(var R=0;R<M.length;R++)w.push(M[R])}w.length>0&&(t.onDeqd(r,w),!d&&t.shouldRedraw(r,w,T,k)&&s())},(t.priority||Ir)(r))}}},f0=function(){function t(r){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Jr;n(this,t),this.idsByKey=new tr,this.keyForId=new tr,this.cachesByLvl=new tr,this.lvls=[],this.getKey=r,this.doesEleInvalidateKey=a}return o(t,[{key:"getIdsFor",value:function(r){null==r&&$t("Can not get id list for null key");var a=this.idsByKey,s=this.idsByKey.get(r);return s||(s=new Ti,a.set(r,s)),s}},{key:"addIdForKey",value:function(r,a){null!=r&&this.getIdsFor(r).add(a)}},{key:"deleteIdForKey",value:function(r,a){null!=r&&this.getIdsFor(r).delete(a)}},{key:"getNumberOfIdsForKey",value:function(r){return null==r?0:this.getIdsFor(r).size}},{key:"updateKeyMappingFor",value:function(r){var a=r.id(),s=this.keyForId.get(a),u=this.getKey(r);this.deleteIdForKey(s,a),this.addIdForKey(u,a),this.keyForId.set(a,u)}},{key:"deleteKeyMappingFor",value:function(r){var a=r.id(),s=this.keyForId.get(a);this.deleteIdForKey(s,a),this.keyForId.delete(a)}},{key:"keyHasChangedFor",value:function(r){var a=r.id();return this.keyForId.get(a)!==this.getKey(r)}},{key:"isInvalid",value:function(r){return this.keyHasChangedFor(r)||this.doesEleInvalidateKey(r)}},{key:"getCachesAt",value:function(r){var a=this.cachesByLvl,s=this.lvls,u=a.get(r);return u||(u=new tr,a.set(r,u),s.push(r)),u}},{key:"getCache",value:function(r,a){return this.getCachesAt(a).get(r)}},{key:"get",value:function(r,a){var s=this.getKey(r),u=this.getCache(s,a);return null!=u&&this.updateKeyMappingFor(r),u}},{key:"getForCachedKey",value:function(r,a){var s=this.keyForId.get(r.id());return this.getCache(s,a)}},{key:"hasCache",value:function(r,a){return this.getCachesAt(a).has(r)}},{key:"has",value:function(r,a){var s=this.getKey(r);return this.hasCache(s,a)}},{key:"setCache",value:function(r,a,s){s.key=r,this.getCachesAt(a).set(r,s)}},{key:"set",value:function(r,a,s){var u=this.getKey(r);this.setCache(u,a,s),this.updateKeyMappingFor(r)}},{key:"deleteCache",value:function(r,a){this.getCachesAt(a).delete(r)}},{key:"delete",value:function(r,a){var s=this.getKey(r);this.deleteCache(s,a)}},{key:"invalidateKey",value:function(r){var a=this;this.lvls.forEach(function(s){return a.deleteCache(r,s)})}},{key:"invalidate",value:function(r){var a=r.id(),s=this.keyForId.get(a);this.deleteKeyMappingFor(r);var u=this.doesEleInvalidateKey(r);return u&&this.invalidateKey(s),u||0===this.getNumberOfIdsForKey(s)}}]),t}(),as={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},g0=un({getKey:null,doesEleInvalidateKey:Jr,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:fr,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),yl=function(t,r){this.renderer=t,this.onDequeues=[];var a=g0(r);ee(this,a),this.lookup=new f0(a.getKey,a.doesEleInvalidateKey),this.setupDequeueing()},jn=yl.prototype;jn.reasons=as,jn.getTextureQueue=function(t){return this.eleImgCaches=this.eleImgCaches||{},this.eleImgCaches[t]=this.eleImgCaches[t]||[]},jn.getRetiredTextureQueue=function(t){var r=this.eleImgCaches.retired=this.eleImgCaches.retired||{};return r[t]=r[t]||[]},jn.getElementQueue=function(){return this.eleCacheQueue=this.eleCacheQueue||new Xi(function(t,r){return r.reqs-t.reqs})},jn.getElementKeyToQueue=function(){return this.eleKeyToCacheQueue=this.eleKeyToCacheQueue||{}},jn.getElement=function(t,r,a,s,u){var d=this,p=this.renderer,m=p.cy.zoom(),v=this.lookup;if(!r||0===r.w||0===r.h||isNaN(r.w)||isNaN(r.h)||!t.visible()||t.removed()||!d.allowEdgeTxrCaching&&t.isEdge()||!d.allowParentTxrCaching&&t.isParent())return null;if(null==s&&(s=Math.ceil(pi(m*a))),s<-4)s=-4;else if(m>=7.99||s>3)return null;var b=Math.pow(2,s),w=r.h*b,k=r.w*b,T=p.eleTextBiggerThanMin(t,b);if(!this.isVisible(t,T))return null;var O,D=v.get(t,s);if(D&&D.invalidated&&(D.invalidated=!1,D.texture.invalidatedWidth-=D.width),D)return D;if(O=w<=25?25:w<=50?50:50*Math.ceil(w/50),w>1024||k>1024)return null;var z=d.getTextureQueue(O),V=z[z.length-2],M=function(){return d.recycleTexture(O,k)||d.addTexture(O,k)};V||(V=z[z.length-1]),V||(V=M()),V.width-V.usedWidth<k&&(V=M());for(var R,j=function(xe){return xe&&xe.scaledLabelShown===T},Q=u&&u===as.dequeue,K=u&&u===as.highQuality,Y=u&&u===as.downscale,W=s+1;W<=3;W++){var ne=v.get(t,W);if(ne){R=ne;break}}var ie=R&&R.level===s+1?R:null,oe=function(){V.context.drawImage(ie.texture.canvas,ie.x,0,ie.width,ie.height,V.usedWidth,0,k,w)};if(V.context.setTransform(1,0,0,1,0,0),V.context.clearRect(V.usedWidth,0,k,O),j(ie))oe();else if(j(R)){if(!K)return d.queueElement(t,R.level-1),R;for(var ce=R.level;ce>s;ce--)ie=d.getElement(t,r,a,ce,as.downscale);oe()}else{var ue;if(!Q&&!K&&!Y)for(var he=s-1;he>=-4;he--){var ke=v.get(t,he);if(ke){ue=ke;break}}if(j(ue))return d.queueElement(t,s),ue;V.context.translate(V.usedWidth,0),V.context.scale(b,b),this.drawElement(V.context,t,r,T,!1),V.context.scale(1/b,1/b),V.context.translate(-V.usedWidth,0)}return D={x:V.usedWidth,texture:V,level:s,scale:b,width:k,height:w,scaledLabelShown:T},V.usedWidth+=Math.ceil(k+8),V.eleCaches.push(D),v.set(t,s,D),d.checkTextureFullness(V),D},jn.invalidateElements=function(t){for(var r=0;r<t.length;r++)this.invalidateElement(t[r])},jn.invalidateElement=function(t){var r=this.lookup,a=[];if(r.isInvalid(t)){for(var s=-4;s<=3;s++){var u=r.getForCachedKey(t,s);u&&a.push(u)}if(r.invalidate(t))for(var d=0;d<a.length;d++){var p=a[d],m=p.texture;m.invalidatedWidth+=p.width,p.invalidated=!0,this.checkTextureUtility(m)}this.removeFromQueue(t)}},jn.checkTextureUtility=function(t){t.invalidatedWidth>=.2*t.width&&this.retireTexture(t)},jn.checkTextureFullness=function(t){var r=this.getTextureQueue(t.height);t.usedWidth/t.width>.8&&t.fullnessChecks>=10?Dn(r,t):t.fullnessChecks++},jn.retireTexture=function(t){var r=t.height,a=this.getTextureQueue(r),s=this.lookup;Dn(a,t),t.retired=!0;for(var u=t.eleCaches,d=0;d<u.length;d++){var p=u[d];s.deleteCache(p.key,p.level)}ha(u),this.getRetiredTextureQueue(r).push(t)},jn.addTexture=function(t,r){var a={};return this.getTextureQueue(t).push(a),a.eleCaches=[],a.height=t,a.width=Math.max(1024,r),a.usedWidth=0,a.invalidatedWidth=0,a.fullnessChecks=0,a.canvas=this.renderer.makeOffscreenCanvas(a.width,a.height),a.context=a.canvas.getContext("2d"),a},jn.recycleTexture=function(t,r){for(var a=this.getTextureQueue(t),s=this.getRetiredTextureQueue(t),u=0;u<s.length;u++){var d=s[u];if(d.width>=r)return d.retired=!1,d.usedWidth=0,d.invalidatedWidth=0,d.fullnessChecks=0,ha(d.eleCaches),d.context.setTransform(1,0,0,1,0,0),d.context.clearRect(0,0,d.width,d.height),Dn(s,d),a.push(d),d}},jn.queueElement=function(t,r){var a=this.getElementQueue(),s=this.getElementKeyToQueue(),u=this.getKey(t),d=s[u];if(d)d.level=Math.max(d.level,r),d.eles.merge(t),d.reqs++,a.updateItem(d);else{var p={eles:t.spawn().merge(t),level:r,reqs:1,key:u};a.push(p),s[u]=p}},jn.dequeue=function(t){for(var r=this.getElementQueue(),a=this.getElementKeyToQueue(),s=[],u=this.lookup,d=0;d<1&&r.size()>0;d++){var p=r.pop(),m=p.key,v=p.eles[0],b=u.hasCache(v,p.level);if(a[m]=null,!b){s.push(p);var w=this.getBoundingBox(v);this.getElement(v,w,t,p.level,as.dequeue)}}return s},jn.removeFromQueue=function(t){var r=this.getElementQueue(),a=this.getElementKeyToQueue(),s=this.getKey(t),u=a[s];null!=u&&(1===u.eles.length?(u.reqs=Br,r.updateItem(u),r.pop(),a[s]=null):u.eles.unmerge(t))},jn.onDequeue=function(t){this.onDequeues.push(t)},jn.offDequeue=function(t){Dn(this.onDequeues,t)},jn.setupDequeueing=sf({deqRedrawThreshold:100,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(t,r,a){return t.dequeue(r,a)},onDeqd:function(t,r){for(var a=0;a<t.onDequeues.length;a++)(0,t.onDequeues[a])(r)},shouldRedraw:function(t,r,a,s){for(var u=0;u<r.length;u++)for(var d=r[u].eles,p=0;p<d.length;p++){var m=d[p].boundingBox();if($a(m,s))return!0}return!1},priority:function(t){return t.renderer.beforeRenderPriorities.eleTxrDeq}});var lf=function(t){var r=this,a=r.renderer=t,s=a.cy;r.layersByLevel={},r.firstGet=!0,r.lastInvalidationTime=Sn()-500,r.skipping=!1,r.eleTxrDeqs=s.collection(),r.scheduleElementRefinement=Ln(function(){r.refineElementTextures(r.eleTxrDeqs),r.eleTxrDeqs.unmerge(r.eleTxrDeqs)},50),a.beforeRender(function(u,d){r.skipping=d-r.lastInvalidationTime<=250},a.beforeRenderPriorities.lyrTxrSkip),r.layersQueue=new Xi(function(u,d){return d.reqs-u.reqs}),r.setupDequeueing()},lr=lf.prototype,uf=0,v0=Math.pow(2,53)-1;lr.makeLayer=function(t,r){var a=Math.pow(2,r),s=Math.ceil(t.w*a),u=Math.ceil(t.h*a),d=this.renderer.makeOffscreenCanvas(s,u),p={id:uf=++uf%v0,bb:t,level:r,width:s,height:u,canvas:d,context:d.getContext("2d"),eles:[],elesQueue:[],reqs:0},m=p.context,v=-p.bb.x1,b=-p.bb.y1;return m.scale(a,a),m.translate(v,b),p},lr.getLayers=function(t,r,a){var s=this,u=s.renderer.cy.zoom(),d=s.firstGet;if(s.firstGet=!1,null==a)if((a=Math.ceil(pi(u*r)))<-4)a=-4;else if(u>=3.99||a>2)return null;s.validateLayersElesOrdering(a,t);var p,m,v=s.layersByLevel,b=Math.pow(2,a),w=v[a]=v[a]||[];if(s.levelIsComplete(a,t))return w;!function(){var Q=function(ne){if(s.validateLayersElesOrdering(ne,t),s.levelIsComplete(ne,t))return m=v[ne],!0},K=function(ne){if(!m)for(var ie=a+ne;-4<=ie&&ie<=2&&!Q(ie);ie+=ne);};K(1),K(-1);for(var Y=w.length-1;Y>=0;Y--){var W=w[Y];W.invalid&&Dn(w,W)}}();var k=function(Q){var K=(Q=Q||{}).after;if(function(){if(!p){p=Mn();for(var ne=0;ne<t.length;ne++)cu(p,t[ne].boundingBox())}}(),p.w*b*(p.h*b)>16e6)return null;var Y=s.makeLayer(p,a);if(null!=K){var W=w.indexOf(K)+1;w.splice(W,0,Y)}else(void 0===Q.insert||Q.insert)&&w.unshift(Y);return Y};if(s.skipping&&!d)return null;for(var T=null,O=t.length/1,D=!d,z=0;z<t.length;z++){var V=t[z],M=V._private.rscratch,R=M.imgLayerCaches=M.imgLayerCaches||{},j=R[a];if(j)T=j;else{if((!T||T.eles.length>=O||!Ns(T.bb,V.boundingBox()))&&!(T=k({insert:!0,after:T})))return null;m||D?s.queueLayer(T,V):s.drawEleInLayer(T,V,a,r),T.eles.push(V),R[a]=T}}return m||(D?null:w)},lr.getEleLevelForLayerLevel=function(t,r){return t},lr.drawEleInLayer=function(t,r,a,s){var u=this.renderer,d=t.context,p=r.boundingBox();0!==p.w&&0!==p.h&&r.visible()&&(a=this.getEleLevelForLayerLevel(a,s),u.setImgSmoothing(d,!1),u.drawCachedElement(d,r,null,null,a,!0),u.setImgSmoothing(d,!0))},lr.levelIsComplete=function(t,r){var a=this.layersByLevel[t];if(!a||0===a.length)return!1;for(var s=0,u=0;u<a.length;u++){var d=a[u];if(d.reqs>0||d.invalid)return!1;s+=d.eles.length}return s===r.length},lr.validateLayersElesOrdering=function(t,r){var a=this.layersByLevel[t];if(a)for(var s=0;s<a.length;s++){for(var u=a[s],d=-1,p=0;p<r.length;p++)if(u.eles[0]===r[p]){d=p;break}if(d<0)this.invalidateLayer(u);else{var m=d;for(p=0;p<u.eles.length;p++)if(u.eles[p]!==r[m+p]){this.invalidateLayer(u);break}}}},lr.updateElementsInLayers=function(t,r){for(var a=$(t[0]),s=0;s<t.length;s++)for(var u=a?null:t[s],d=a?t[s]:t[s].ele,p=d._private.rscratch,m=p.imgLayerCaches=p.imgLayerCaches||{},v=-4;v<=2;v++){var b=m[v];b&&(u&&this.getEleLevelForLayerLevel(b.level)!==u.level||r(b,d,u))}},lr.haveLayers=function(){for(var t=!1,r=-4;r<=2;r++){var a=this.layersByLevel[r];if(a&&a.length>0){t=!0;break}}return t},lr.invalidateElements=function(t){var r=this;0!==t.length&&(r.lastInvalidationTime=Sn(),0!==t.length&&r.haveLayers()&&r.updateElementsInLayers(t,function(a,s,u){r.invalidateLayer(a)}))},lr.invalidateLayer=function(t){if(this.lastInvalidationTime=Sn(),!t.invalid){var r=t.level,a=t.eles;Dn(this.layersByLevel[r],t),t.elesQueue=[],t.invalid=!0,t.replacement&&(t.replacement.invalid=!0);for(var u=0;u<a.length;u++){var d=a[u]._private.rscratch.imgLayerCaches;d&&(d[r]=null)}}},lr.refineElementTextures=function(t){var r=this;r.updateElementsInLayers(t,function(a,s,u){var d=a.replacement;if(d||((d=a.replacement=r.makeLayer(a.bb,a.level)).replaces=a,d.eles=a.eles),!d.reqs)for(var p=0;p<d.eles.length;p++)r.queueLayer(d,d.eles[p])})},lr.enqueueElementRefinement=function(t){this.eleTxrDeqs.merge(t),this.scheduleElementRefinement()},lr.queueLayer=function(t,r){var a=this.layersQueue,s=t.elesQueue,u=s.hasId=s.hasId||{};if(!t.replacement){if(r){if(u[r.id()])return;s.push(r),u[r.id()]=!0}t.reqs?(t.reqs++,a.updateItem(t)):(t.reqs=1,a.push(t))}},lr.dequeue=function(t){for(var r=this.layersQueue,a=[],s=0;s<1&&0!==r.size();){var u=r.peek();if(u.replacement)r.pop();else if(u.replaces&&u!==u.replaces.replacement)r.pop();else if(u.invalid)r.pop();else{var d=u.elesQueue.shift();d&&(this.drawEleInLayer(u,d,u.level,t),s++),0===a.length&&a.push(!0),0===u.elesQueue.length&&(r.pop(),u.reqs=0,u.replaces&&this.applyLayerReplacement(u),this.requestRedraw())}}return a},lr.applyLayerReplacement=function(t){var r=this.layersByLevel[t.level],a=t.replaces,s=r.indexOf(a);if(!(s<0||a.invalid)){r[s]=t;for(var u=0;u<t.eles.length;u++){var d=t.eles[u]._private,p=d.imgLayerCaches=d.imgLayerCaches||{};p&&(p[t.level]=t)}this.requestRedraw()}},lr.requestRedraw=Ln(function(){var t=this.renderer;t.redrawHint("eles",!0),t.redrawHint("drag",!0),t.redraw()},100),lr.setupDequeueing=sf({deqRedrawThreshold:50,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(t,r){return t.dequeue(r)},onDeqd:Ir,shouldRedraw:fr,priority:function(t){return t.renderer.beforeRenderPriorities.lyrTxrDeq}});var cf,df={};function m0(t,r){for(var a=0;a<r.length;a++){var s=r[a];t.lineTo(s.x,s.y)}}function y0(t,r,a){for(var s,u=0;u<r.length;u++){var d=r[u];0===u&&(s=d),t.lineTo(d.x,d.y)}t.quadraticCurveTo(a.x,a.y,s.x,s.y)}function hf(t,r,a){t.beginPath&&t.beginPath();for(var s=r,u=0;u<s.length;u++){var d=s[u];t.lineTo(d.x,d.y)}var p=a,m=a[0];for(t.moveTo(m.x,m.y),u=1;u<p.length;u++)t.lineTo((d=p[u]).x,d.y);t.closePath&&t.closePath()}function b0(t,r,a,s,u){t.beginPath&&t.beginPath(),t.arc(a,s,u,0,2*Math.PI,!1);var d=r,p=d[0];t.moveTo(p.x,p.y);for(var m=0;m<d.length;m++){var v=d[m];t.lineTo(v.x,v.y)}t.closePath&&t.closePath()}function x0(t,r,a,s){t.arc(r,a,s,0,2*Math.PI,!1)}df.arrowShapeImpl=function(t){return(cf||(cf={polygon:m0,"triangle-backcurve":y0,"triangle-tee":hf,"circle-triangle":b0,"triangle-cross":hf,circle:x0}))[t]};var os={drawElement:function(t,r,a,s,u,d){r.isNode()?this.drawNode(t,r,a,s,u,d):this.drawEdge(t,r,a,s,u,d)},drawElementOverlay:function(t,r){r.isNode()?this.drawNodeOverlay(t,r):this.drawEdgeOverlay(t,r)},drawElementUnderlay:function(t,r){r.isNode()?this.drawNodeUnderlay(t,r):this.drawEdgeUnderlay(t,r)},drawCachedElementPortion:function(t,r,a,s,u,d,p,m){var v=this,b=a.getBoundingBox(r);if(0!==b.w&&0!==b.h){var w=a.getElement(r,b,s,u,d);if(null!=w){var k=m(v,r);if(0===k)return;var T,O,D,z,V,M,R=p(v,r),j=b.x1,Q=b.y1,K=b.w,Y=b.h;if(0!==R){var W=a.getRotationPoint(r);t.translate(D=W.x,z=W.y),t.rotate(R),(V=v.getImgSmoothing(t))||v.setImgSmoothing(t,!0);var ne=a.getRotationOffset(r);T=ne.x,O=ne.y}else T=j,O=Q;1!==k&&(t.globalAlpha=(M=t.globalAlpha)*k),t.drawImage(w.texture.canvas,w.x,0,w.width,w.height,T,O,K,Y),1!==k&&(t.globalAlpha=M),0!==R&&(t.rotate(-R),t.translate(-D,-z),V||v.setImgSmoothing(t,!1))}else a.drawElement(t,r)}}},w0=function(){return 0},E0=function(t,r){return t.getTextAngle(r,null)},_0=function(t,r){return t.getTextAngle(r,"source")},k0=function(t,r){return t.getTextAngle(r,"target")},C0=function(t,r){return r.effectiveOpacity()},hh=function(t,r){return r.pstyle("text-opacity").pfValue*r.effectiveOpacity()};os.drawCachedElement=function(t,r,a,s,u,d){var p=this,m=p.data,v=m.eleTxrCache,b=m.lblTxrCache,w=m.slbTxrCache,k=m.tlbTxrCache,T=r.boundingBox(),O=!0===d?v.reasons.highQuality:null;if(0!==T.w&&0!==T.h&&r.visible()&&(!s||$a(T,s))){var D=r.isEdge(),z=r.element()._private.rscratch.badLine;p.drawElementUnderlay(t,r),p.drawCachedElementPortion(t,r,v,a,u,O,w0,C0),D&&z||p.drawCachedElementPortion(t,r,b,a,u,O,E0,hh),D&&!z&&(p.drawCachedElementPortion(t,r,w,a,u,O,_0,hh),p.drawCachedElementPortion(t,r,k,a,u,O,k0,hh)),p.drawElementOverlay(t,r)}},os.drawElements=function(t,r){for(var a=0;a<r.length;a++)this.drawElement(t,r[a])},os.drawCachedElements=function(t,r,a,s){for(var u=0;u<r.length;u++)this.drawCachedElement(t,r[u],a,s)},os.drawCachedNodes=function(t,r,a,s){for(var u=0;u<r.length;u++){var d=r[u];d.isNode()&&this.drawCachedElement(t,d,a,s)}},os.drawLayeredElements=function(t,r,a,s){var u=this.data.lyrTxrCache.getLayers(r,a);if(u)for(var d=0;d<u.length;d++){var p=u[d],m=p.bb;0!==m.w&&0!==m.h&&t.drawImage(p.canvas,m.x1,m.y1,m.w,m.h)}else this.drawCachedElements(t,r,a,s)};var Ta={drawEdge:function(t,r,a){var s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],u=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],d=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],p=this,m=r._private.rscratch;if((!d||r.visible())&&!m.badLine&&null!=m.allpts&&!isNaN(m.allpts[0])){var v;a&&t.translate(-(v=a).x1,-v.y1);var b=d?r.pstyle("opacity").value:1,w=d?r.pstyle("line-opacity").value:1,k=r.pstyle("curve-style").value,T=r.pstyle("line-style").value,O=r.pstyle("width").pfValue,D=r.pstyle("line-cap").value,z=b*w,V=b*w,M=function(){var ce=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z;"straight-triangle"===k?(p.eleStrokeStyle(t,r,ce),p.drawEdgeTrianglePath(r,t,m.allpts)):(t.lineWidth=O,t.lineCap=D,p.eleStrokeStyle(t,r,ce),p.drawEdgePath(r,t,m.allpts,T),t.lineCap="butt")},Q=function(){p.drawArrowheads(t,r,arguments.length>0&&void 0!==arguments[0]?arguments[0]:V)};if(t.lineJoin="round","yes"===r.pstyle("ghost").value){var W=r.pstyle("ghost-offset-x").pfValue,ne=r.pstyle("ghost-offset-y").pfValue,ie=r.pstyle("ghost-opacity").value,oe=z*ie;t.translate(W,ne),M(oe),Q(oe),t.translate(-W,-ne)}u&&p.drawEdgeUnderlay(t,r),M(),Q(),u&&p.drawEdgeOverlay(t,r),p.drawElementText(t,r,null,s),a&&t.translate(v.x1,v.y1)}}},pf=function(t){if(!["overlay","underlay"].includes(t))throw new Error("Invalid state");return function(r,a){if(a.visible()){var s=a.pstyle("".concat(t,"-opacity")).value;if(0!==s){var u=this,d=u.usePaths(),p=a._private.rscratch,m=2*a.pstyle("".concat(t,"-padding")).pfValue,v=a.pstyle("".concat(t,"-color")).value;r.lineWidth=m,r.lineCap="self"!==p.edgeType||d?"round":"butt",u.colorStrokeStyle(r,v[0],v[1],v[2],s),u.drawEdgePath(a,r,p.allpts,"solid")}}}};Ta.drawEdgeOverlay=pf("overlay"),Ta.drawEdgeUnderlay=pf("underlay"),Ta.drawEdgePath=function(t,r,a,s){var u,d=t._private.rscratch,p=r,m=!1,v=this.usePaths(),b=t.pstyle("line-dash-pattern").pfValue,w=t.pstyle("line-dash-offset").pfValue;if(v){var k=a.join("$");d.pathCacheKey&&d.pathCacheKey===k?(u=r=d.pathCache,m=!0):(u=r=new Path2D,d.pathCacheKey=k,d.pathCache=u)}if(p.setLineDash)switch(s){case"dotted":p.setLineDash([1,1]);break;case"dashed":p.setLineDash(b),p.lineDashOffset=w;break;case"solid":p.setLineDash([])}if(!m&&!d.badLine)switch(r.beginPath&&r.beginPath(),r.moveTo(a[0],a[1]),d.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var T=2;T+3<a.length;T+=4)r.quadraticCurveTo(a[T],a[T+1],a[T+2],a[T+3]);break;case"straight":case"segments":case"haystack":for(var O=2;O+1<a.length;O+=2)r.lineTo(a[O],a[O+1])}r=p,v?r.stroke(u):r.stroke(),r.setLineDash&&r.setLineDash([])},Ta.drawEdgeTrianglePath=function(t,r,a){r.fillStyle=r.strokeStyle;for(var s=t.pstyle("width").pfValue,u=0;u+1<a.length;u+=2){var d=[a[u+2]-a[u],a[u+3]-a[u+1]],p=Math.sqrt(d[0]*d[0]+d[1]*d[1]),m=[d[1]/p,-d[0]/p],v=[m[0]*s/2,m[1]*s/2];r.beginPath(),r.moveTo(a[u]-v[0],a[u+1]-v[1]),r.lineTo(a[u]+v[0],a[u+1]+v[1]),r.lineTo(a[u+2],a[u+3]),r.closePath(),r.fill()}},Ta.drawArrowheads=function(t,r,a){var s=r._private.rscratch,u="haystack"===s.edgeType;u||this.drawArrowhead(t,r,"source",s.arrowStartX,s.arrowStartY,s.srcArrowAngle,a),this.drawArrowhead(t,r,"mid-target",s.midX,s.midY,s.midtgtArrowAngle,a),this.drawArrowhead(t,r,"mid-source",s.midX,s.midY,s.midsrcArrowAngle,a),u||this.drawArrowhead(t,r,"target",s.arrowEndX,s.arrowEndY,s.tgtArrowAngle,a)},Ta.drawArrowhead=function(t,r,a,s,u,d,p){if(!(isNaN(s)||null==s||isNaN(u)||null==u||isNaN(d)||null==d)){var m=r.pstyle(a+"-arrow-shape").value;if("none"!==m){var v="hollow"===r.pstyle(a+"-arrow-fill").value?"both":"filled",b=r.pstyle(a+"-arrow-fill").value,w=r.pstyle("width").pfValue,k=r.pstyle(a+"-arrow-width"),T="match-line"===k.value?w:k.pfValue;"%"===k.units&&(T*=w);var O=r.pstyle("opacity").value;void 0===p&&(p=O);var D=t.globalCompositeOperation;1===p&&"hollow"!==b||(t.globalCompositeOperation="destination-out",this.colorFillStyle(t,255,255,255,1),this.colorStrokeStyle(t,255,255,255,1),this.drawArrowShape(r,t,v,w,m,T,s,u,d),t.globalCompositeOperation=D);var z=r.pstyle(a+"-arrow-color").value;this.colorFillStyle(t,z[0],z[1],z[2],p),this.colorStrokeStyle(t,z[0],z[1],z[2],p),this.drawArrowShape(r,t,b,w,m,T,s,u,d)}}},Ta.drawArrowShape=function(t,r,a,s,u,d,p,m,v){var b,w=this,k=this.usePaths()&&"triangle-cross"!==u,T=!1,O=r,D={x:p,y:m},z=t.pstyle("arrow-scale").value,V=this.getArrowWidth(s,z),M=w.arrowShapes[u];if(k){var R=w.arrowPathCache=w.arrowPathCache||[],j=Ar(u),Q=R[j];null!=Q?(b=r=Q,T=!0):(b=r=new Path2D,R[j]=b)}T||(r.beginPath&&r.beginPath(),k?M.draw(r,1,0,{x:0,y:0},1):M.draw(r,V,v,D,s),r.closePath&&r.closePath()),r=O,k&&(r.translate(p,m),r.rotate(v),r.scale(V,V)),"filled"!==a&&"both"!==a||(k?r.fill(b):r.fill()),"hollow"!==a&&"both"!==a||(r.lineWidth=d/(k?V:1),r.lineJoin="miter",k?r.stroke(b):r.stroke()),k&&(r.scale(1/V,1/V),r.rotate(-v),r.translate(-p,-m))};var S0={safeDrawImage:function(t,r,a,s,u,d,p,m,v,b){if(!(u<=0||d<=0||v<=0||b<=0))try{t.drawImage(r,a,s,u,d,p,m,v,b)}catch(w){nn(w)}},drawInscribedImage:function(t,r,a,s,u){var d=this,p=a.position(),m=p.x,v=p.y,b=a.cy().style(),w=b.getIndexedStyle.bind(b),k=w(a,"background-fit","value",s),T=w(a,"background-repeat","value",s),O=a.width(),D=a.height(),z=2*a.padding(),V=O+("inner"===w(a,"background-width-relative-to","value",s)?0:z),M=D+("inner"===w(a,"background-height-relative-to","value",s)?0:z),R=a._private.rscratch,j="node"===w(a,"background-clip","value",s),Q=w(a,"background-image-opacity","value",s)*u,K=w(a,"background-image-smoothing","value",s),Y=r.width||r.cachedW,W=r.height||r.cachedH;null!=Y&&null!=W||(document.body.appendChild(r),Y=r.cachedW=r.width||r.offsetWidth,W=r.cachedH=r.height||r.offsetHeight,document.body.removeChild(r));var ne=Y,ie=W;if("auto"!==w(a,"background-width","value",s)&&(ne="%"===w(a,"background-width","units",s)?w(a,"background-width","pfValue",s)*V:w(a,"background-width","pfValue",s)),"auto"!==w(a,"background-height","value",s)&&(ie="%"===w(a,"background-height","units",s)?w(a,"background-height","pfValue",s)*M:w(a,"background-height","pfValue",s)),0!==ne&&0!==ie){if("contain"===k)ne*=oe=Math.min(V/ne,M/ie),ie*=oe;else if("cover"===k){var oe;ne*=oe=Math.max(V/ne,M/ie),ie*=oe}var ce=m-V/2,ue=w(a,"background-position-x","units",s),he=w(a,"background-position-x","pfValue",s);ce+="%"===ue?(V-ne)*he:he;var ke=w(a,"background-offset-x","units",s),xe=w(a,"background-offset-x","pfValue",s);ce+="%"===ke?(V-ne)*xe:xe;var me=v-M/2,ye=w(a,"background-position-y","units",s),Le=w(a,"background-position-y","pfValue",s);me+="%"===ye?(M-ie)*Le:Le;var De=w(a,"background-offset-y","units",s),Ve=w(a,"background-offset-y","pfValue",s);me+="%"===De?(M-ie)*Ve:Ve,R.pathCache&&(ce-=m,me-=v,m=0,v=0);var Te=t.globalAlpha;t.globalAlpha=Q;var He=d.getImgSmoothing(t),Ye=!1;if("no"===K&&He?(d.setImgSmoothing(t,!1),Ye=!0):"yes"!==K||He||(d.setImgSmoothing(t,!0),Ye=!0),"no-repeat"===T)j&&(t.save(),R.pathCache?t.clip(R.pathCache):(d.nodeShapes[d.getNodeShape(a)].draw(t,m,v,V,M),t.clip())),d.safeDrawImage(t,r,0,0,Y,W,ce,me,ne,ie),j&&t.restore();else{var qe=t.createPattern(r,T);t.fillStyle=qe,d.nodeShapes[d.getNodeShape(a)].draw(t,m,v,V,M),t.translate(ce,me),t.fill(),t.translate(-ce,-me)}t.globalAlpha=Te,Ye&&d.setImgSmoothing(t,He)}}},fo={};function ph(t,r,a,s,u){var d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:5,p=arguments.length>6?arguments[6]:void 0;t.beginPath(),t.moveTo(r+d,a),t.lineTo(r+s-d,a),t.quadraticCurveTo(r+s,a,r+s,a+d),t.lineTo(r+s,a+u-d),t.quadraticCurveTo(r+s,a+u,r+s-d,a+u),t.lineTo(r+d,a+u),t.quadraticCurveTo(r,a+u,r,a+u-d),t.lineTo(r,a+d),t.quadraticCurveTo(r,a,r+d,a),t.closePath(),p?t.stroke():t.fill()}fo.eleTextBiggerThanMin=function(t,r){if(!r){var a=t.cy().zoom(),s=this.getPixelRatio(),u=Math.ceil(pi(a*s));r=Math.pow(2,u)}return!(t.pstyle("font-size").pfValue*r<t.pstyle("min-zoomed-font-size").pfValue)},fo.drawElementText=function(t,r,a,s,u){var d=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],p=this;if(null==s){if(d&&!p.eleTextBiggerThanMin(r))return}else if(!1===s)return;if(r.isNode()){var m=r.pstyle("label");if(!m||!m.value)return;var v=p.getLabelJustification(r);t.textAlign=v,t.textBaseline="bottom"}else{var b=r.element()._private.rscratch.badLine,w=r.pstyle("label"),k=r.pstyle("source-label"),T=r.pstyle("target-label");if(b||(!w||!w.value)&&(!k||!k.value)&&(!T||!T.value))return;t.textAlign="center",t.textBaseline="bottom"}var O,D=!a;a&&t.translate(-(O=a).x1,-O.y1),null==u?(p.drawText(t,r,null,D,d),r.isEdge()&&(p.drawText(t,r,"source",D,d),p.drawText(t,r,"target",D,d))):p.drawText(t,r,u,D,d),a&&t.translate(O.x1,O.y1)},fo.getFontCache=function(t){var r;this.fontCaches=this.fontCaches||[];for(var a=0;a<this.fontCaches.length;a++)if((r=this.fontCaches[a]).context===t)return r;return this.fontCaches.push(r={context:t}),r},fo.setupTextStyle=function(t,r){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=r.pstyle("font-style").strValue,u=r.pstyle("font-size").pfValue+"px",d=r.pstyle("font-family").strValue,p=r.pstyle("font-weight").strValue,m=a?r.effectiveOpacity()*r.pstyle("text-opacity").value:1,v=r.pstyle("text-outline-opacity").value*m,b=r.pstyle("color").value,w=r.pstyle("text-outline-color").value;t.font=s+" "+p+" "+u+" "+d,t.lineJoin="round",this.colorFillStyle(t,b[0],b[1],b[2],m),this.colorStrokeStyle(t,w[0],w[1],w[2],v)},fo.getTextAngle=function(t,r){var a=t._private.rscratch,u=t.pstyle((r?r+"-":"")+"text-rotation"),d=Hn(a,"labelAngle",r);return"autorotate"===u.strValue?t.isEdge()?d:0:"none"===u.strValue?0:u.pfValue},fo.drawText=function(t,r,a){var s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],u=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],p=r._private.rscratch,m=u?r.effectiveOpacity():1;if(!u||0!==m&&0!==r.pstyle("text-opacity").value){"main"===a&&(a=null);var v,b,w=Hn(p,"labelX",a),k=Hn(p,"labelY",a),T=this.getLabelText(r,a);if(null!=T&&""!==T&&!isNaN(w)&&!isNaN(k)){this.setupTextStyle(t,r,u);var O,D=a?a+"-":"",z=Hn(p,"labelWidth",a),V=Hn(p,"labelHeight",a),M=r.pstyle(D+"text-margin-x").pfValue,R=r.pstyle(D+"text-margin-y").pfValue,j=r.isEdge(),Q=r.pstyle("text-halign").value,K=r.pstyle("text-valign").value;switch(j&&(Q="center",K="center"),w+=M,k+=R,0!==(O=s?this.getTextAngle(r,a):0)&&(t.translate(v=w,b=k),t.rotate(O),w=0,k=0),K){case"top":break;case"center":k+=V/2;break;case"bottom":k+=V}var Y=r.pstyle("text-background-opacity").value,W=r.pstyle("text-border-opacity").value,ne=r.pstyle("text-border-width").pfValue,ie=r.pstyle("text-background-padding").pfValue,ce=0===r.pstyle("text-background-shape").strValue.indexOf("round");if(Y>0||ne>0&&W>0){var he=w-ie;switch(Q){case"left":he-=z;break;case"center":he-=z/2}var ke=k-V-ie,xe=z+2*ie,me=V+2*ie;if(Y>0){var ye=t.fillStyle,Le=r.pstyle("text-background-color").value;t.fillStyle="rgba("+Le[0]+","+Le[1]+","+Le[2]+","+Y*m+")",ce?ph(t,he,ke,xe,me,2):t.fillRect(he,ke,xe,me),t.fillStyle=ye}if(ne>0&&W>0){var De=t.strokeStyle,Ve=t.lineWidth,Te=r.pstyle("text-border-color").value,He=r.pstyle("text-border-style").value;if(t.strokeStyle="rgba("+Te[0]+","+Te[1]+","+Te[2]+","+W*m+")",t.lineWidth=ne,t.setLineDash)switch(He){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"double":t.lineWidth=ne/4,t.setLineDash([]);break;case"solid":t.setLineDash([])}if(ce?ph(t,he,ke,xe,me,2,"stroke"):t.strokeRect(he,ke,xe,me),"double"===He){var Ye=ne/2;ce?ph(t,he+Ye,ke+Ye,xe-2*Ye,me-2*Ye,2,"stroke"):t.strokeRect(he+Ye,ke+Ye,xe-2*Ye,me-2*Ye)}t.setLineDash&&t.setLineDash([]),t.lineWidth=Ve,t.strokeStyle=De}}var qe=2*r.pstyle("text-outline-width").pfValue;if(qe>0&&(t.lineWidth=qe),"wrap"===r.pstyle("text-wrap").value){var it=Hn(p,"labelWrapCachedLines",a),at=Hn(p,"labelLineHeight",a),nt=z/2,dt=this.getLabelJustification(r);switch("auto"===dt||("left"===Q?"left"===dt?w+=-z:"center"===dt&&(w+=-nt):"center"===Q?"left"===dt?w+=-nt:"right"===dt&&(w+=nt):"right"===Q&&("center"===dt?w+=nt:"right"===dt&&(w+=z))),K){case"top":case"center":case"bottom":k-=(it.length-1)*at}for(var yt=0;yt<it.length;yt++)qe>0&&t.strokeText(it[yt],w,k),t.fillText(it[yt],w,k),k+=at}else qe>0&&t.strokeText(T,w,k),t.fillText(T,w,k);0!==O&&(t.rotate(-O),t.translate(-v,-b))}}};var bl={drawNode:function(t,r,a){var s,u,d=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],p=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],m=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],v=this,b=r._private,w=b.rscratch,k=r.position();if(B(k.x)&&B(k.y)&&(!m||r.visible())){var T,O,D=m?r.effectiveOpacity():1,z=v.usePaths(),V=!1,M=r.padding();s=r.width()+2*M,u=r.height()+2*M,a&&t.translate(-(O=a).x1,-O.y1);for(var j=r.pstyle("background-image").value,Q=new Array(j.length),K=new Array(j.length),Y=0,W=0;W<j.length;W++){var ne=j[W];if(Q[W]=null!=ne&&"none"!==ne){var oe=r.cy().style().getIndexedStyle(r,"background-image-crossorigin","value",W);Y++,K[W]=v.getCachedImage(ne,oe,function(){b.backgroundTimestamp=Date.now(),r.emitAndNotify("background")})}}var ce=r.pstyle("background-blacken").value,ue=r.pstyle("border-width").pfValue,he=r.pstyle("background-opacity").value*D,ke=r.pstyle("border-color").value,xe=r.pstyle("border-style").value,me=r.pstyle("border-opacity").value*D,ye=r.pstyle("outline-width").pfValue,Le=r.pstyle("outline-color").value,De=r.pstyle("outline-style").value,Ve=r.pstyle("outline-opacity").value*D,Te=r.pstyle("outline-offset").value;t.lineJoin="miter";var He=function(){v.eleFillStyle(t,r,arguments.length>0&&void 0!==arguments[0]?arguments[0]:he)},Ye=function(){v.colorStrokeStyle(t,ke[0],ke[1],ke[2],arguments.length>0&&void 0!==arguments[0]?arguments[0]:me)},qe=function(){v.colorStrokeStyle(t,Le[0],Le[1],Le[2],arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve)},it=function(ct,Pt,kt,Mt){var Lt,Kt=v.nodePathCache=v.nodePathCache||[],_n=Hr("polygon"===kt?kt+","+Mt.join(","):kt,""+Pt,""+ct),An=Kt[_n],mn=!1;return null!=An?(mn=!0,w.pathCache=Lt=An):(Lt=new Path2D,Kt[_n]=w.pathCache=Lt),{path:Lt,cacheHit:mn}},at=r.pstyle("shape").strValue,nt=r.pstyle("shape-polygon-points").pfValue;if(z){t.translate(k.x,k.y);var dt=it(s,u,at,nt);T=dt.path,V=dt.cacheHit}var yt=function(){if(!V){var ct=k;z&&(ct={x:0,y:0}),v.nodeShapes[v.getNodeShape(r)].draw(T||t,ct.x,ct.y,s,u)}z?t.fill(T):t.fill()},Dt=function(){for(var ct=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,Pt=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],kt=b.backgrounding,Mt=0,Lt=0;Lt<K.length;Lt++){var Kt=r.cy().style().getIndexedStyle(r,"background-image-containment","value",Lt);Pt&&"over"===Kt||!Pt&&"inside"===Kt?Mt++:Q[Lt]&&K[Lt].complete&&!K[Lt].error&&(Mt++,v.drawInscribedImage(t,K[Lt],r,Lt,ct))}b.backgrounding=Mt!==Y,kt!==b.backgrounding&&r.updateStyle(!1)},$e=function(){var ct=arguments.length>0&&void 0!==arguments[0]&&arguments[0],Pt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:D;v.hasPie(r)&&(v.drawPie(t,r,Pt),ct&&(z||v.nodeShapes[v.getNodeShape(r)].draw(t,k.x,k.y,s,u)))},xt=function(){var kt=ce>0?0:255;0!==ce&&(v.colorFillStyle(t,kt,kt,kt,(ce>0?ce:-ce)*(arguments.length>0&&void 0!==arguments[0]?arguments[0]:D)),z?t.fill(T):t.fill())},Tt=function(){if(ue>0){if(t.lineWidth=ue,t.lineCap="butt",t.setLineDash)switch(xe){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"solid":case"double":t.setLineDash([])}if(z?t.stroke(T):t.stroke(),"double"===xe){t.lineWidth=ue/3;var ct=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",z?t.stroke(T):t.stroke(),t.globalCompositeOperation=ct}t.setLineDash&&t.setLineDash([])}},ht=function(){if(ye>0){if(t.lineWidth=ye,t.lineCap="butt",t.setLineDash)switch(De){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"solid":case"double":t.setLineDash([])}var ct=k;z&&(ct={x:0,y:0});var Pt,kt=v.getNodeShape(r),Mt=(s+ue+(ye+Te))/s,Lt=(u+ue+(ye+Te))/u,Kt=s*Mt,_n=u*Lt,An=v.nodeShapes[kt].points;if(z&&(Pt=it(Kt,_n,kt,An).path),"ellipse"===kt)v.drawEllipsePath(Pt||t,ct.x,ct.y,Kt,_n);else if(["round-diamond","round-heptagon","round-hexagon","round-octagon","round-pentagon","round-polygon","round-triangle","round-tag"].includes(kt)){var mn=0,_r=0,Bn=0;"round-diamond"===kt?mn=1.4*(ue+Te+ye):"round-heptagon"===kt?(mn=1.075*(ue+Te+ye),Bn=-(ue/2+Te+ye)/35):"round-hexagon"===kt?mn=1.12*(ue+Te+ye):"round-pentagon"===kt?(mn=1.13*(ue+Te+ye),Bn=-(ue/2+Te+ye)/15):"round-tag"===kt?(mn=1.12*(ue+Te+ye),_r=.07*(ue/2+ye+Te)):"round-triangle"===kt&&(mn=(ue+Te+ye)*(Math.PI/2),Bn=-(ue+Te/2+ye)/Math.PI),0!==mn&&(Mt=(s+mn)/s,Lt=(u+mn)/u),v.drawRoundPolygonPath(Pt||t,ct.x+_r,ct.y+Bn,s*Mt,u*Lt,An)}else["roundrectangle","round-rectangle"].includes(kt)?v.drawRoundRectanglePath(Pt||t,ct.x,ct.y,Kt,_n):["cutrectangle","cut-rectangle"].includes(kt)?v.drawCutRectanglePath(Pt||t,ct.x,ct.y,Kt,_n):["bottomroundrectangle","bottom-round-rectangle"].includes(kt)?v.drawBottomRoundRectanglePath(Pt||t,ct.x,ct.y,Kt,_n):"barrel"===kt?v.drawBarrelPath(Pt||t,ct.x,ct.y,Kt,_n):kt.startsWith("polygon")||["rhomboid","right-rhomboid","round-tag","tag","vee"].includes(kt)?(An=va(Oo(An,(ue+ye+Te)/s)),v.drawPolygonPath(Pt||t,ct.x,ct.y,s,u,An)):(An=va(Oo(An,-(ue+ye+Te)/s)),v.drawPolygonPath(Pt||t,ct.x,ct.y,s,u,An));if(z?t.stroke(Pt):t.stroke(),"double"===De){t.lineWidth=ue/3;var zi=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",z?t.stroke(Pt):t.stroke(),t.globalCompositeOperation=zi}t.setLineDash&&t.setLineDash([])}};if("yes"===r.pstyle("ghost").value){var Be=r.pstyle("ghost-offset-x").pfValue,et=r.pstyle("ghost-offset-y").pfValue,Qe=r.pstyle("ghost-opacity").value,Bt=Qe*D;t.translate(Be,et),qe(),ht(),He(Qe*he),yt(),Dt(Bt,!0),Ye(Qe*me),Tt(),$e(0!==ce||0!==ue),Dt(Bt,!1),xt(Bt),t.translate(-Be,-et)}z&&t.translate(-k.x,-k.y),p&&v.drawNodeUnderlay(t,r,k,s,u),z&&t.translate(k.x,k.y),qe(),ht(),He(),yt(),Dt(D,!0),Ye(),Tt(),$e(0!==ce||0!==ue),Dt(D,!1),xt(),z&&t.translate(-k.x,-k.y),v.drawElementText(t,r,null,d),p&&v.drawNodeOverlay(t,r,k,s,u),a&&t.translate(O.x1,O.y1)}}},ff=function(t){if(!["overlay","underlay"].includes(t))throw new Error("Invalid state");return function(r,a,s,u,d){if(a.visible()){var p=a.pstyle("".concat(t,"-padding")).pfValue,m=a.pstyle("".concat(t,"-opacity")).value,v=a.pstyle("".concat(t,"-color")).value,b=a.pstyle("".concat(t,"-shape")).value;if(m>0){if(s=s||a.position(),null==u||null==d){var w=a.padding();u=a.width()+2*w,d=a.height()+2*w}this.colorFillStyle(r,v[0],v[1],v[2],m),this.nodeShapes[b].draw(r,s.x,s.y,u+2*p,d+2*p),r.fill()}}}};bl.drawNodeOverlay=ff("overlay"),bl.drawNodeUnderlay=ff("underlay"),bl.hasPie=function(t){return(t=t[0])._private.hasPie},bl.drawPie=function(t,r,a,s){r=r[0],s=s||r.position();var u=r.cy().style(),d=r.pstyle("pie-size"),p=s.x,m=s.y,v=r.width(),b=r.height(),w=Math.min(v,b)/2,k=0;this.usePaths()&&(p=0,m=0),"%"===d.units?w*=d.pfValue:void 0!==d.pfValue&&(w=d.pfValue/2);for(var T=1;T<=u.pieBackgroundN;T++){var O=r.pstyle("pie-"+T+"-background-size").value,D=r.pstyle("pie-"+T+"-background-color").value,z=r.pstyle("pie-"+T+"-background-opacity").value*a,V=O/100;V+k>1&&(V=1-k);var M=1.5*Math.PI+2*Math.PI*k,R=M+2*Math.PI*V;0===O||k>=1||k+V>1||(t.beginPath(),t.moveTo(p,m),t.arc(p,m,w,M,R),t.closePath(),this.colorFillStyle(t,D[0],D[1],D[2],z),t.fill(),k+=V)}};for(var $r={getPixelRatio:function(){var t=this.data.contexts[0];return null!=this.forcedPixelRatio?this.forcedPixelRatio:(window.devicePixelRatio||1)/(t.backingStorePixelRatio||t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)},paintCache:function(t){for(var r,a=this.paintCaches=this.paintCaches||[],s=!0,u=0;u<a.length;u++)if((r=a[u]).context===t){s=!1;break}return s&&a.push(r={context:t}),r},createGradientStyleFor:function(t,r,a,s,u){var d,p=this.usePaths(),m=a.pstyle(r+"-gradient-stop-colors").value,v=a.pstyle(r+"-gradient-stop-positions").pfValue;if("radial-gradient"===s)if(a.isEdge()){var b=a.sourceEndpoint(),w=a.targetEndpoint(),k=a.midpoint(),T=Rr(b,k),O=Rr(w,k);d=t.createRadialGradient(k.x,k.y,0,k.x,k.y,Math.max(T,O))}else{var D=p?{x:0,y:0}:a.position(),z=a.paddedWidth(),V=a.paddedHeight();d=t.createRadialGradient(D.x,D.y,0,D.x,D.y,Math.max(z,V))}else if(a.isEdge()){var M=a.sourceEndpoint(),R=a.targetEndpoint();d=t.createLinearGradient(M.x,M.y,R.x,R.y)}else{var j=p?{x:0,y:0}:a.position(),Q=a.paddedWidth()/2,K=a.paddedHeight()/2;switch(a.pstyle("background-gradient-direction").value){case"to-bottom":d=t.createLinearGradient(j.x,j.y-K,j.x,j.y+K);break;case"to-top":d=t.createLinearGradient(j.x,j.y+K,j.x,j.y-K);break;case"to-left":d=t.createLinearGradient(j.x+Q,j.y,j.x-Q,j.y);break;case"to-right":d=t.createLinearGradient(j.x-Q,j.y,j.x+Q,j.y);break;case"to-bottom-right":case"to-right-bottom":d=t.createLinearGradient(j.x-Q,j.y-K,j.x+Q,j.y+K);break;case"to-top-right":case"to-right-top":d=t.createLinearGradient(j.x-Q,j.y+K,j.x+Q,j.y-K);break;case"to-bottom-left":case"to-left-bottom":d=t.createLinearGradient(j.x+Q,j.y-K,j.x-Q,j.y+K);break;case"to-top-left":case"to-left-top":d=t.createLinearGradient(j.x+Q,j.y+K,j.x-Q,j.y-K)}}if(!d)return null;for(var Y=v.length===m.length,W=m.length,ne=0;ne<W;ne++)d.addColorStop(Y?v[ne]:ne/(W-1),"rgba("+m[ne][0]+","+m[ne][1]+","+m[ne][2]+","+u+")");return d},gradientFillStyle:function(t,r,a,s){var u=this.createGradientStyleFor(t,"background",r,a,s);if(!u)return null;t.fillStyle=u},colorFillStyle:function(t,r,a,s,u){t.fillStyle="rgba("+r+","+a+","+s+","+u+")"},eleFillStyle:function(t,r,a){var s=r.pstyle("background-fill").value;if("linear-gradient"===s||"radial-gradient"===s)this.gradientFillStyle(t,r,s,a);else{var u=r.pstyle("background-color").value;this.colorFillStyle(t,u[0],u[1],u[2],a)}},gradientStrokeStyle:function(t,r,a,s){var u=this.createGradientStyleFor(t,"line",r,a,s);if(!u)return null;t.strokeStyle=u},colorStrokeStyle:function(t,r,a,s,u){t.strokeStyle="rgba("+r+","+a+","+s+","+u+")"},eleStrokeStyle:function(t,r,a){var s=r.pstyle("line-fill").value;if("linear-gradient"===s||"radial-gradient"===s)this.gradientStrokeStyle(t,r,s,a);else{var u=r.pstyle("line-color").value;this.colorStrokeStyle(t,u[0],u[1],u[2],a)}},matchCanvasSize:function(t){var r=this,a=r.data,s=r.findContainerClientCoords(),u=s[2],d=s[3],p=r.getPixelRatio();t!==r.data.bufferCanvases[r.MOTIONBLUR_BUFFER_NODE]&&t!==r.data.bufferCanvases[r.MOTIONBLUR_BUFFER_DRAG]||(p=r.motionBlurPxRatio);var v,b=u*p,w=d*p;if(b!==r.canvasWidth||w!==r.canvasHeight){r.fontCaches=null;var k=a.canvasContainer;k.style.width=u+"px",k.style.height=d+"px";for(var T=0;T<r.CANVAS_LAYERS;T++)(v=a.canvases[T]).width=b,v.height=w,v.style.width=u+"px",v.style.height=d+"px";for(T=0;T<r.BUFFER_COUNT;T++)(v=a.bufferCanvases[T]).width=b,v.height=w,v.style.width=u+"px",v.style.height=d+"px";r.textureMult=1,p<=1&&(v=a.bufferCanvases[r.TEXTURE_BUFFER],r.textureMult=2,v.width=b*r.textureMult,v.height=w*r.textureMult),r.canvasWidth=b,r.canvasHeight=w}},renderTo:function(t,r,a,s){this.render({forcedContext:t,forcedZoom:r,forcedPan:a,drawAllLayers:!0,forcedPxRatio:s})},render:function(t){var r=(t=t||gr()).forcedContext,a=t.drawAllLayers,s=t.drawOnlyNodeLayer,u=t.forcedZoom,d=t.forcedPan,p=this,m=void 0===t.forcedPxRatio?this.getPixelRatio():t.forcedPxRatio,v=p.cy,b=p.data,w=b.canvasNeedsRedraw,k=p.textureOnViewport&&!r&&(p.pinching||p.hoverData.dragging||p.swipePanning||p.data.wheelZooming),T=void 0!==t.motionBlur?t.motionBlur:p.motionBlur,O=p.motionBlurPxRatio,D=v.hasCompoundNodes(),z=p.hoverData.draggingEles,M=T=T&&!r&&p.motionBlurEnabled&&!(p.hoverData.selecting||p.touchData.selecting);r||(p.prevPxRatio!==m&&(p.invalidateContainerClientCoordsCache(),p.matchCanvasSize(p.container),p.redrawHint("eles",!0),p.redrawHint("drag",!0)),p.prevPxRatio=m),!r&&p.motionBlurTimeout&&clearTimeout(p.motionBlurTimeout),T&&(null==p.mbFrames&&(p.mbFrames=0),p.mbFrames++,p.mbFrames<3&&(M=!1),p.mbFrames>p.minMbLowQualFrames&&(p.motionBlurPxRatio=p.mbPxRBlurry)),p.clearingMotionBlur&&(p.motionBlurPxRatio=1),p.textureDrawLastFrame&&!k&&(w[p.NODE]=!0,w[p.SELECT_BOX]=!0);var R=v.style(),j=v.zoom(),Q=void 0!==u?u:j,K=v.pan(),Y={x:K.x,y:K.y},W={zoom:j,pan:{x:K.x,y:K.y}},ne=p.prevViewport;void 0===ne||W.zoom!==ne.zoom||W.pan.x!==ne.pan.x||W.pan.y!==ne.pan.y||z&&!D||(p.motionBlurPxRatio=1),d&&(Y=d),Q*=m,Y.x*=m,Y.y*=m;var ie=p.getCachedZSortedEles();function oe($e,xt,Tt,ht,Z){var ve=$e.globalCompositeOperation;$e.globalCompositeOperation="destination-out",p.colorFillStyle($e,255,255,255,p.motionBlurTransparency),$e.fillRect(xt,Tt,ht,Z),$e.globalCompositeOperation=ve}function ce($e,xt){var Tt,ht,Z,ve;p.clearingMotionBlur||$e!==b.bufferContexts[p.MOTIONBLUR_BUFFER_NODE]&&$e!==b.bufferContexts[p.MOTIONBLUR_BUFFER_DRAG]?(Tt=Y,ht=Q,Z=p.canvasWidth,ve=p.canvasHeight):(Tt={x:K.x*O,y:K.y*O},ht=j*O,Z=p.canvasWidth*O,ve=p.canvasHeight*O),$e.setTransform(1,0,0,1,0,0),"motionBlur"===xt?oe($e,0,0,Z,ve):r||void 0!==xt&&!xt||$e.clearRect(0,0,Z,ve),a||($e.translate(Tt.x,Tt.y),$e.scale(ht,ht)),d&&$e.translate(d.x,d.y),u&&$e.scale(u,u)}if(k||(p.textureDrawLastFrame=!1),k){if(p.textureDrawLastFrame=!0,!p.textureCache){p.textureCache={},p.textureCache.bb=v.mutableElements().boundingBox(),p.textureCache.texture=p.data.bufferCanvases[p.TEXTURE_BUFFER];var ue=p.data.bufferContexts[p.TEXTURE_BUFFER];ue.setTransform(1,0,0,1,0,0),ue.clearRect(0,0,p.canvasWidth*p.textureMult,p.canvasHeight*p.textureMult),p.render({forcedContext:ue,drawOnlyNodeLayer:!0,forcedPxRatio:m*p.textureMult}),(W=p.textureCache.viewport={zoom:v.zoom(),pan:v.pan(),width:p.canvasWidth,height:p.canvasHeight}).mpan={x:(0-W.pan.x)/W.zoom,y:(0-W.pan.y)/W.zoom}}w[p.DRAG]=!1,w[p.NODE]=!1;var he=b.contexts[p.NODE],ke=p.textureCache.texture;W=p.textureCache.viewport,he.setTransform(1,0,0,1,0,0),T?oe(he,0,0,W.width,W.height):he.clearRect(0,0,W.width,W.height);var xe=R.core("outside-texture-bg-color").value,me=R.core("outside-texture-bg-opacity").value;p.colorFillStyle(he,xe[0],xe[1],xe[2],me),he.fillRect(0,0,W.width,W.height),j=v.zoom(),ce(he,!1),he.clearRect(W.mpan.x,W.mpan.y,W.width/W.zoom/m,W.height/W.zoom/m),he.drawImage(ke,W.mpan.x,W.mpan.y,W.width/W.zoom/m,W.height/W.zoom/m)}else p.textureOnViewport&&!r&&(p.textureCache=null);var ye=v.extent(),Le=p.pinching||p.hoverData.dragging||p.swipePanning||p.data.wheelZooming||p.hoverData.draggingEles||p.cy.animated(),De=p.hideEdgesOnViewport&&Le,Ve=[];if(Ve[p.NODE]=!w[p.NODE]&&T&&!p.clearedForMotionBlur[p.NODE]||p.clearingMotionBlur,Ve[p.NODE]&&(p.clearedForMotionBlur[p.NODE]=!0),Ve[p.DRAG]=!w[p.DRAG]&&T&&!p.clearedForMotionBlur[p.DRAG]||p.clearingMotionBlur,Ve[p.DRAG]&&(p.clearedForMotionBlur[p.DRAG]=!0),w[p.NODE]||a||s||Ve[p.NODE]){var Te=T&&!Ve[p.NODE]&&1!==O;ce(he=r||(Te?p.data.bufferContexts[p.MOTIONBLUR_BUFFER_NODE]:b.contexts[p.NODE]),T&&!Te?"motionBlur":void 0),De?p.drawCachedNodes(he,ie.nondrag,m,ye):p.drawLayeredElements(he,ie.nondrag,m,ye),p.debug&&p.drawDebugPoints(he,ie.nondrag),a||T||(w[p.NODE]=!1)}if(!s&&(w[p.DRAG]||a||Ve[p.DRAG])&&(Te=T&&!Ve[p.DRAG]&&1!==O,ce(he=r||(Te?p.data.bufferContexts[p.MOTIONBLUR_BUFFER_DRAG]:b.contexts[p.DRAG]),T&&!Te?"motionBlur":void 0),De?p.drawCachedNodes(he,ie.drag,m,ye):p.drawCachedElements(he,ie.drag,m,ye),p.debug&&p.drawDebugPoints(he,ie.drag),a||T||(w[p.DRAG]=!1)),p.showFps||!s&&w[p.SELECT_BOX]&&!a){if(ce(he=r||b.contexts[p.SELECT_BOX]),1==p.selection[4]&&(p.hoverData.selecting||p.touchData.selecting)){j=p.cy.zoom();var He=R.core("selection-box-border-width").value/j;he.lineWidth=He,he.fillStyle="rgba("+R.core("selection-box-color").value[0]+","+R.core("selection-box-color").value[1]+","+R.core("selection-box-color").value[2]+","+R.core("selection-box-opacity").value+")",he.fillRect(p.selection[0],p.selection[1],p.selection[2]-p.selection[0],p.selection[3]-p.selection[1]),He>0&&(he.strokeStyle="rgba("+R.core("selection-box-border-color").value[0]+","+R.core("selection-box-border-color").value[1]+","+R.core("selection-box-border-color").value[2]+","+R.core("selection-box-opacity").value+")",he.strokeRect(p.selection[0],p.selection[1],p.selection[2]-p.selection[0],p.selection[3]-p.selection[1]))}if(b.bgActivePosistion&&!p.hoverData.selecting){j=p.cy.zoom();var Ye=b.bgActivePosistion;he.fillStyle="rgba("+R.core("active-bg-color").value[0]+","+R.core("active-bg-color").value[1]+","+R.core("active-bg-color").value[2]+","+R.core("active-bg-opacity").value+")",he.beginPath(),he.arc(Ye.x,Ye.y,R.core("active-bg-size").pfValue/j,0,2*Math.PI),he.fill()}var qe=p.lastRedrawTime;if(p.showFps&&qe){qe=Math.round(qe);var it=Math.round(1e3/qe);he.setTransform(1,0,0,1,0,0),he.fillStyle="rgba(255, 0, 0, 0.75)",he.strokeStyle="rgba(255, 0, 0, 0.75)",he.lineWidth=1,he.fillText("1 frame = "+qe+" ms = "+it+" fps",0,20),he.strokeRect(0,30,250,20),he.fillRect(0,30,250*Math.min(it/60,1),20)}a||(w[p.SELECT_BOX]=!1)}if(T&&1!==O){var dt=b.contexts[p.DRAG],yt=p.data.bufferCanvases[p.MOTIONBLUR_BUFFER_DRAG],Dt=function($e,xt,Tt){$e.setTransform(1,0,0,1,0,0),Tt||!M?$e.clearRect(0,0,p.canvasWidth,p.canvasHeight):oe($e,0,0,p.canvasWidth,p.canvasHeight),$e.drawImage(xt,0,0,p.canvasWidth*O,p.canvasHeight*O,0,0,p.canvasWidth,p.canvasHeight)};(w[p.NODE]||Ve[p.NODE])&&(Dt(b.contexts[p.NODE],p.data.bufferCanvases[p.MOTIONBLUR_BUFFER_NODE],Ve[p.NODE]),w[p.NODE]=!1),(w[p.DRAG]||Ve[p.DRAG])&&(Dt(dt,yt,Ve[p.DRAG]),w[p.DRAG]=!1)}p.prevViewport=W,p.clearingMotionBlur&&(p.clearingMotionBlur=!1,p.motionBlurCleared=!0,p.motionBlur=!0),T&&(p.motionBlurTimeout=setTimeout(function(){p.motionBlurTimeout=null,p.clearedForMotionBlur[p.NODE]=!1,p.clearedForMotionBlur[p.DRAG]=!1,p.motionBlur=!1,p.clearingMotionBlur=!k,p.mbFrames=0,w[p.NODE]=!0,w[p.DRAG]=!0,p.redraw()},100)),r||v.emit("render")}},gf={drawPolygonPath:function(t,r,a,s,u,d){var p=s/2,m=u/2;t.beginPath&&t.beginPath(),t.moveTo(r+p*d[0],a+m*d[1]);for(var v=1;v<d.length/2;v++)t.lineTo(r+p*d[2*v],a+m*d[2*v+1]);t.closePath()},drawRoundPolygonPath:function(t,r,a,s,u,d){var p=s/2,m=u/2,v=zo(s,u);t.beginPath&&t.beginPath();for(var b=0;b<d.length/4;b++){var w,k;k=0===b?d.length-2:4*b-2,w=4*b+2;var T=r+p*d[4*b],O=a+m*d[4*b+1],z=v/Math.tan(Math.acos(-d[k]*d[w]-d[k+1]*d[w+1])/2),V=T-z*d[k],M=O-z*d[k+1],R=T+z*d[w],j=O+z*d[w+1];0===b?t.moveTo(V,M):t.lineTo(V,M),t.arcTo(T,O,R,j,v)}t.closePath()},drawRoundRectanglePath:function(t,r,a,s,u){var d=s/2,p=u/2,m=ba(s,u);t.beginPath&&t.beginPath(),t.moveTo(r,a-p),t.arcTo(r+d,a-p,r+d,a,m),t.arcTo(r+d,a+p,r,a+p,m),t.arcTo(r-d,a+p,r-d,a,m),t.arcTo(r-d,a-p,r,a-p,m),t.lineTo(r,a-p),t.closePath()},drawBottomRoundRectanglePath:function(t,r,a,s,u){var d=s/2,p=u/2,m=ba(s,u);t.beginPath&&t.beginPath(),t.moveTo(r,a-p),t.lineTo(r+d,a-p),t.lineTo(r+d,a),t.arcTo(r+d,a+p,r,a+p,m),t.arcTo(r-d,a+p,r-d,a,m),t.lineTo(r-d,a-p),t.lineTo(r,a-p),t.closePath()},drawCutRectanglePath:function(t,r,a,s,u){var d=s/2,p=u/2;t.beginPath&&t.beginPath(),t.moveTo(r-d+8,a-p),t.lineTo(r+d-8,a-p),t.lineTo(r+d,a-p+8),t.lineTo(r+d,a+p-8),t.lineTo(r+d-8,a+p),t.lineTo(r-d+8,a+p),t.lineTo(r-d,a+p-8),t.lineTo(r-d,a-p+8),t.closePath()},drawBarrelPath:function(t,r,a,s,u){var d=s/2,p=u/2,m=r-d,v=r+d,b=a-p,w=a+p,k=Ai(s,u),T=k.widthOffset,O=k.heightOffset,D=k.ctrlPtOffsetPct*T;t.beginPath&&t.beginPath(),t.moveTo(m,b+O),t.lineTo(m,w-O),t.quadraticCurveTo(m+D,w,m+T,w),t.lineTo(v-T,w),t.quadraticCurveTo(v-D,w,v,w-O),t.lineTo(v,b+O),t.quadraticCurveTo(v-D,b,v-T,b),t.lineTo(m+T,b),t.quadraticCurveTo(m+D,b,m,b+O),t.closePath()}},vf=Math.sin(0),mf=Math.cos(0),fh={},gh={},yf=Math.PI/40,ss=0*Math.PI;ss<2*Math.PI;ss+=yf)fh[ss]=Math.sin(ss),gh[ss]=Math.cos(ss);gf.drawEllipsePath=function(t,r,a,s,u){if(t.beginPath&&t.beginPath(),t.ellipse)t.ellipse(r,a,s/2,u/2,0,0,2*Math.PI);else for(var d,p,m=s/2,v=u/2,b=0*Math.PI;b<2*Math.PI;b+=yf)d=r-m*fh[b]*vf+m*gh[b]*mf,p=a+v*gh[b]*vf+v*fh[b]*mf,0===b?t.moveTo(d,p):t.lineTo(d,p);t.closePath()};var xl={};function bf(t){var r=t.indexOf(",");return t.substr(r+1)}function xf(t,r,a){var s=function(){return r.toDataURL(a,t.quality)};switch(t.output){case"blob-promise":return new Ui(function(u,d){try{r.toBlob(function(p){null!=p?u(p):d(new Error("`canvas.toBlob()` sent a null value in its callback"))},a,t.quality)}catch(p){d(p)}});case"blob":return function(u,d){for(var p=atob(u),m=new ArrayBuffer(p.length),v=new Uint8Array(m),b=0;b<p.length;b++)v[b]=p.charCodeAt(b);return new Blob([m],{type:d})}(bf(s()),a);case"base64":return bf(s());default:return s()}}xl.createBuffer=function(t,r){var a=document.createElement("canvas");return a.width=t,a.height=r,[a,a.getContext("2d")]},xl.bufferCanvasImage=function(t){var r=this.cy,a=r.mutableElements().boundingBox(),s=this.findContainerClientCoords(),u=t.full?Math.ceil(a.w):s[2],d=t.full?Math.ceil(a.h):s[3],p=B(t.maxWidth)||B(t.maxHeight),m=this.getPixelRatio(),v=1;if(void 0!==t.scale)u*=t.scale,d*=t.scale,v=t.scale;else if(p){var b=1/0,w=1/0;B(t.maxWidth)&&(b=v*t.maxWidth/u),B(t.maxHeight)&&(w=v*t.maxHeight/d),u*=v=Math.min(b,w),d*=v}p||(u*=m,d*=m,v*=m);var k=document.createElement("canvas");k.width=u,k.height=d,k.style.width=u+"px",k.style.height=d+"px";var T=k.getContext("2d");if(u>0&&d>0){T.clearRect(0,0,u,d),T.globalCompositeOperation="source-over";var O=this.getCachedZSortedEles();if(t.full)T.translate(-a.x1*v,-a.y1*v),T.scale(v,v),this.drawElements(T,O),T.scale(1/v,1/v),T.translate(a.x1*v,a.y1*v);else{var D=r.pan(),z={x:D.x*v,y:D.y*v};v*=r.zoom(),T.translate(z.x,z.y),T.scale(v,v),this.drawElements(T,O),T.scale(1/v,1/v),T.translate(-z.x,-z.y)}t.bg&&(T.globalCompositeOperation="destination-over",T.fillStyle=t.bg,T.rect(0,0,u,d),T.fill())}return k},xl.png=function(t){return xf(t,this.bufferCanvasImage(t),"image/png")},xl.jpg=function(t){return xf(t,this.bufferCanvasImage(t),"image/jpeg")};var P0=wf,an=wf.prototype;function wf(t){var r=this;r.data={canvases:new Array(an.CANVAS_LAYERS),contexts:new Array(an.CANVAS_LAYERS),canvasNeedsRedraw:new Array(an.CANVAS_LAYERS),bufferCanvases:new Array(an.BUFFER_COUNT),bufferContexts:new Array(an.CANVAS_LAYERS)},r.data.canvasContainer=document.createElement("div");var a=r.data.canvasContainer.style;r.data.canvasContainer.style["-webkit-tap-highlight-color"]="rgba(0,0,0,0)",a.position="relative",a.zIndex="0",a.overflow="hidden";var s=t.cy.container();s.appendChild(r.data.canvasContainer),s.style["-webkit-tap-highlight-color"]="rgba(0,0,0,0)";var u={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};g&&g.userAgent.match(/msie|trident|edge/i)&&(u["-ms-touch-action"]="none",u["touch-action"]="none");for(var d=0;d<an.CANVAS_LAYERS;d++){var p=r.data.canvases[d]=document.createElement("canvas");r.data.contexts[d]=p.getContext("2d"),Object.keys(u).forEach(function(Y){p.style[Y]=u[Y]}),p.style.position="absolute",p.setAttribute("data-id","layer"+d),p.style.zIndex=String(an.CANVAS_LAYERS-d),r.data.canvasContainer.appendChild(p),r.data.canvasNeedsRedraw[d]=!1}for(r.data.topCanvas=r.data.canvases[0],r.data.canvases[an.NODE].setAttribute("data-id","layer"+an.NODE+"-node"),r.data.canvases[an.SELECT_BOX].setAttribute("data-id","layer"+an.SELECT_BOX+"-selectbox"),r.data.canvases[an.DRAG].setAttribute("data-id","layer"+an.DRAG+"-drag"),d=0;d<an.BUFFER_COUNT;d++)r.data.bufferCanvases[d]=document.createElement("canvas"),r.data.bufferContexts[d]=r.data.bufferCanvases[d].getContext("2d"),r.data.bufferCanvases[d].style.position="absolute",r.data.bufferCanvases[d].setAttribute("data-id","buffer"+d),r.data.bufferCanvases[d].style.zIndex=String(-d-1),r.data.bufferCanvases[d].style.visibility="hidden";r.pathsEnabled=!0;var m=Mn(),v=function(Y){return{x:-Y.w/2,y:-Y.h/2}},b=function(Y){return Y.boundingBox(),Y[0]._private.bodyBounds},w=function(Y){return Y.boundingBox(),Y[0]._private.labelBounds.main||m},k=function(Y){return Y.boundingBox(),Y[0]._private.labelBounds.source||m},T=function(Y){return Y.boundingBox(),Y[0]._private.labelBounds.target||m},O=function(Y,W){return W},D=function(Y,W,ne){var ie=Y?Y+"-":"";return{x:W.x+ne.pstyle(ie+"text-margin-x").pfValue,y:W.y+ne.pstyle(ie+"text-margin-y").pfValue}},z=function(Y,W,ne){var ie=Y[0]._private.rscratch;return{x:ie[W],y:ie[ne]}},V=r.data.eleTxrCache=new yl(r,{getKey:function(Y){return Y[0]._private.nodeKey},doesEleInvalidateKey:function(Y){var W=Y[0]._private;return W.oldBackgroundTimestamp!==W.backgroundTimestamp},drawElement:function(Y,W,ne,ie,oe){return r.drawElement(Y,W,ne,!1,!1,oe)},getBoundingBox:b,getRotationPoint:function(Y){return{x:((W=b(Y)).x1+W.x2)/2,y:(W.y1+W.y2)/2};var W},getRotationOffset:function(Y){return v(b(Y))},allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),M=r.data.lblTxrCache=new yl(r,{getKey:function(Y){return Y[0]._private.labelStyleKey},drawElement:function(Y,W,ne,ie,oe){return r.drawElementText(Y,W,ne,ie,"main",oe)},getBoundingBox:w,getRotationPoint:function(Y){return D("",z(Y,"labelX","labelY"),Y)},getRotationOffset:function(Y){var W=w(Y),ne=v(w(Y));if(Y.isNode()){switch(Y.pstyle("text-halign").value){case"left":ne.x=-W.w;break;case"right":ne.x=0}switch(Y.pstyle("text-valign").value){case"top":ne.y=-W.h;break;case"bottom":ne.y=0}}return ne},isVisible:O}),R=r.data.slbTxrCache=new yl(r,{getKey:function(Y){return Y[0]._private.sourceLabelStyleKey},drawElement:function(Y,W,ne,ie,oe){return r.drawElementText(Y,W,ne,ie,"source",oe)},getBoundingBox:k,getRotationPoint:function(Y){return D("source",z(Y,"sourceLabelX","sourceLabelY"),Y)},getRotationOffset:function(Y){return v(k(Y))},isVisible:O}),j=r.data.tlbTxrCache=new yl(r,{getKey:function(Y){return Y[0]._private.targetLabelStyleKey},drawElement:function(Y,W,ne,ie,oe){return r.drawElementText(Y,W,ne,ie,"target",oe)},getBoundingBox:T,getRotationPoint:function(Y){return D("target",z(Y,"targetLabelX","targetLabelY"),Y)},getRotationOffset:function(Y){return v(T(Y))},isVisible:O}),Q=r.data.lyrTxrCache=new lf(r);r.onUpdateEleCalcs(function(Y,W){V.invalidateElements(W),M.invalidateElements(W),R.invalidateElements(W),j.invalidateElements(W),Q.invalidateElements(W);for(var ne=0;ne<W.length;ne++){var ie=W[ne]._private;ie.oldBackgroundTimestamp=ie.backgroundTimestamp}});var K=function(Y){for(var W=0;W<Y.length;W++)Q.enqueueElementRefinement(Y[W].ele)};V.onDequeue(K),M.onDequeue(K),R.onDequeue(K),j.onDequeue(K)}an.CANVAS_LAYERS=3,an.SELECT_BOX=0,an.DRAG=1,an.NODE=2,an.BUFFER_COUNT=3,an.TEXTURE_BUFFER=0,an.MOTIONBLUR_BUFFER_NODE=1,an.MOTIONBLUR_BUFFER_DRAG=2,an.redrawHint=function(t,r){var a=this;switch(t){case"eles":a.data.canvasNeedsRedraw[an.NODE]=r;break;case"drag":a.data.canvasNeedsRedraw[an.DRAG]=r;break;case"select":a.data.canvasNeedsRedraw[an.SELECT_BOX]=r}};var D0=typeof Path2D<"u";an.path2dEnabled=function(t){if(void 0===t)return this.pathsEnabled;this.pathsEnabled=!!t},an.usePaths=function(){return D0&&this.pathsEnabled},an.setImgSmoothing=function(t,r){null!=t.imageSmoothingEnabled?t.imageSmoothingEnabled=r:(t.webkitImageSmoothingEnabled=r,t.mozImageSmoothingEnabled=r,t.msImageSmoothingEnabled=r)},an.getImgSmoothing=function(t){return null!=t.imageSmoothingEnabled?t.imageSmoothingEnabled:t.webkitImageSmoothingEnabled||t.mozImageSmoothingEnabled||t.msImageSmoothingEnabled},an.makeOffscreenCanvas=function(t,r){var a;return"undefined"!==(typeof OffscreenCanvas>"u"?"undefined":e(OffscreenCanvas))?a=new OffscreenCanvas(t,r):((a=document.createElement("canvas")).width=t,a.height=r),a},[df,os,Ta,S0,fo,bl,$r,gf,xl,{nodeShapeImpl:function(t,r,a,s,u,d,p){switch(t){case"ellipse":return this.drawEllipsePath(r,a,s,u,d);case"polygon":return this.drawPolygonPath(r,a,s,u,d,p);case"round-polygon":return this.drawRoundPolygonPath(r,a,s,u,d,p);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(r,a,s,u,d);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(r,a,s,u,d);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(r,a,s,u,d);case"barrel":return this.drawBarrelPath(r,a,s,u,d)}}}].forEach(function(t){ee(an,t)});var M0=[{type:"layout",extensions:o0},{type:"renderer",extensions:[{name:"null",impl:Kp},{name:"base",impl:of},{name:"canvas",impl:P0}]}],Ef={},_f={};function kf(t,r,a){var s=a,u=function(Y){nn("Can not register `"+r+"` for `"+t+"` since `"+Y+"` already exists in the prototype and can not be overridden")};if("core"===t){if(vl.prototype[r])return u(r);vl.prototype[r]=a}else if("collection"===t){if(or.prototype[r])return u(r);or.prototype[r]=a}else if("layout"===t){for(var d=function(Y){this.options=Y,a.call(this,Y),P(this._private)||(this._private={}),this._private.cy=Y.cy,this._private.listeners=[],this.createEmitter()},p=d.prototype=Object.create(a.prototype),m=[],v=0;v<m.length;v++){var b=m[v];p[b]=p[b]||function(){return this}}p.start&&!p.run?p.run=function(){return this.start(),this}:!p.start&&p.run&&(p.start=function(){return this.run(),this});var w=a.prototype.stop;p.stop=function(){var Y=this.options;if(Y&&Y.animate){var W=this.animations;if(W)for(var ne=0;ne<W.length;ne++)W[ne].stop()}return w?w.call(this):this.emit("layoutstop"),this},p.destroy||(p.destroy=function(){return this}),p.cy=function(){return this._private.cy};var k=function(Y){return Y._private.cy},T={addEventFields:function(Y,W){W.layout=Y,W.cy=k(Y),W.target=Y},bubble:function(){return!0},parent:function(Y){return k(Y)}};ee(p,{createEmitter:function(){return this._private.emitter=new ho(T,this),this},emitter:function(){return this._private.emitter},on:function(Y,W){return this.emitter().on(Y,W),this},one:function(Y,W){return this.emitter().one(Y,W),this},once:function(Y,W){return this.emitter().one(Y,W),this},removeListener:function(Y,W){return this.emitter().removeListener(Y,W),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(Y,W){return this.emitter().emit(Y,W),this}}),Zt.eventAliasesOn(p),s=d}else if("renderer"===t&&"null"!==r&&"base"!==r){var O=Cf("renderer","base"),D=O.prototype,z=a,V=a.prototype,M=function(){O.apply(this,arguments),z.apply(this,arguments)},R=M.prototype;for(var j in D){var Q=D[j];if(null!=V[j])return u(j);R[j]=Q}for(var K in V)R[K]=V[K];D.clientFunctions.forEach(function(Y){R[Y]=R[Y]||function(){$t("Renderer does not implement `renderer."+Y+"()` on its prototype")}}),s=M}else if("__proto__"===t||"constructor"===t||"prototype"===t)return $t(t+" is an illegal type to be registered, possibly lead to prototype pollutions");return _e({map:Ef,keys:[t,r],value:s})}function Cf(t,r){return je({map:Ef,keys:[t,r]})}function A0(t,r,a,s,u){return _e({map:_f,keys:[t,r,a,s],value:u})}function B0(t,r,a,s){return je({map:_f,keys:[t,r,a,s]})}var vh=function(){return 2===arguments.length?Cf.apply(null,arguments):3===arguments.length?kf.apply(null,arguments):4===arguments.length?B0.apply(null,arguments):5===arguments.length?A0.apply(null,arguments):void $t("Invalid extension access syntax")};vl.prototype.extension=vh,M0.forEach(function(t){t.extensions.forEach(function(r){kf(t.type,r.name,r.impl)})});var Sf=function t(){if(!(this instanceof t))return new t;this.length=0},go=Sf.prototype;go.instanceString=function(){return"stylesheet"},go.selector=function(t){return this[this.length++]={selector:t,properties:[]},this},go.css=function(t,r){var a=this.length-1;if(C(t))this[a].properties.push({name:t,value:r});else if(P(t))for(var s=t,u=Object.keys(s),d=0;d<u.length;d++){var p=u[d],m=s[p];if(null!=m){var v=xr.properties[p]||xr.properties[de(p)];null!=v&&this[a].properties.push({name:v.name,value:m})}}return this},go.style=go.css,go.generateStyle=function(t){var r=new xr(t);return this.appendToStyle(r)},go.appendToStyle=function(t){for(var r=0;r<this.length;r++){var a=this[r],u=a.properties;t.selector(a.selector);for(var d=0;d<u.length;d++){var p=u[d];t.css(p.name,p.value)}}return t};var vo=function(t){return void 0===t&&(t={}),P(t)?new vl(t):C(t)?vh.apply(vh,arguments):void 0};return vo.use=function(t){var r=Array.prototype.slice.call(arguments,1);return r.unshift(vo),t.apply(null,r),this},vo.warnings=function(t){return Bo(t)},vo.version="3.28.1",vo.stylesheet=vo.Stylesheet=Sf,vo});var qn=typeof window>"u"?null:window,Lf=qn?qn.navigator:null,N0=Zn(""),Of=Zn({}),z0=Zn(function(){}),I0=typeof HTMLElement>"u"?"undefined":Zn(HTMLElement),kl=function(e){return e&&e.instanceString&&Nn(e.instanceString)?e.instanceString():null},Ot=function(e){return null!=e&&Zn(e)==N0},Nn=function(e){return null!=e&&Zn(e)===z0},yn=function(e){return!Gr(e)&&(Array.isArray?Array.isArray(e):null!=e&&e instanceof Array)},en=function(e){return null!=e&&Zn(e)===Of&&!yn(e)&&e.constructor===Object},gt=function(e){return null!=e&&Zn(e)===Zn(1)&&!isNaN(e)},gc=function(e){return"undefined"===I0?void 0:null!=e&&e instanceof HTMLElement},Gr=function(e){return Cl(e)||Nf(e)},Cl=function(e){return"collection"===kl(e)&&e._private.single},Nf=function(e){return"collection"===kl(e)&&!e._private.single},wh=function(e){return"core"===kl(e)},zf=function(e){return"stylesheet"===kl(e)},Ma=function(e){return null==e||!(""!==e&&!e.match(/^\s+$/))},R0=function(e){return null!=(n=e)&&Zn(n)===Of&&Nn(e.then);var n},Sl=function(e,n){n||(n=function(){if(1===arguments.length)return arguments[0];if(0===arguments.length)return"undefined";for(var o=[],l=0;l<arguments.length;l++)o.push(arguments[l]);return o.join("$")});var i=function o(){var l,h=arguments,f=n.apply(this,h),g=o.cache;return(l=g[f])||(l=g[f]=e.apply(this,h)),l};return i.cache={},i},Eh=Sl(function(e){return e.replace(/([A-Z])/g,function(n){return"-"+n.toLowerCase()})}),vc=Sl(function(e){return e.replace(/(-\w)/g,function(n){return n[1].toUpperCase()})}),If=Sl(function(e,n){return e+n[0].toUpperCase()+n.substring(1)},function(e,n){return e+"$"+n}),Rf=function(e){return Ma(e)?e:e.charAt(0).toUpperCase()+e.substring(1)},_h="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",Ff=function(e,n){return e<n?-1:e>n?1:0},It=null!=Object.assign?Object.assign.bind(Object):function(e){for(var n=arguments,i=1;i<n.length;i++){var o=n[i];if(null!=o)for(var l=Object.keys(o),c=0;c<l.length;c++){var h=l[c];e[h]=o[h]}}return e},F0=function(e){return(yn(e)?e:null)||V0[e.toLowerCase()]||function(n){var i,o,l;if((4===n.length||7===n.length)&&"#"===n[0])return 4===n.length?(i=parseInt(n[1]+n[1],16),o=parseInt(n[2]+n[2],16),l=parseInt(n[3]+n[3],16)):(i=parseInt(n[1]+n[2],16),o=parseInt(n[3]+n[4],16),l=parseInt(n[5]+n[6],16)),[i,o,l]}(e)||function(n){var i,o=new RegExp("^rgb[a]?\\(((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)(?:\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)$").exec(n);if(o){i=[];for(var l=[],c=1;c<=3;c++){var h=o[c];if("%"===h[h.length-1]&&(l[c]=!0),h=parseFloat(h),l[c]&&(h=h/100*255),h<0||h>255)return;i.push(Math.floor(h))}if((l[1]||l[2]||l[3])&&!(l[1]&&l[2]&&l[3]))return;var y=o[4];if(void 0!==y){if((y=parseFloat(y))<0||y>1)return;i.push(y)}}return i}(e)||function(n){var i,o,l,c,h,f,g,y;function x(C,L,I){return I<0&&(I+=1),I>1&&(I-=1),I<1/6?C+6*(L-C)*I:I<.5?L:I<2/3?C+(L-C)*(2/3-I)*6:C}var _=new RegExp("^hsl[a]?\\(((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?)))\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])(?:\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)$").exec(n);if(_){if((o=parseInt(_[1]))<0?o=(360- -1*o%360)%360:o>360&&(o%=360),o/=360,(l=parseFloat(_[2]))<0||l>100||(l/=100,(c=parseFloat(_[3]))<0||c>100)||(c/=100,void 0!==(h=_[4])&&((h=parseFloat(h))<0||h>1)))return;if(0===l)f=g=y=Math.round(255*c);else{var S=c<.5?c*(1+l):c+l-c*l,A=2*c-S;f=Math.round(255*x(A,S,o+1/3)),g=Math.round(255*x(A,S,o)),y=Math.round(255*x(A,S,o-1/3))}i=[f,g,y,h]}return i}(e)},V0={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},Vf=function(e){for(var n=e.map,i=e.keys,o=i.length,l=0;l<o;l++){var c=i[l];if(en(c))throw Error("Tried to set map with object key");l<i.length-1?(null==n[c]&&(n[c]={}),n=n[c]):n[c]=e.value}},jf=function(e){for(var n=e.map,i=e.keys,o=i.length,l=0;l<o;l++){var c=i[l];if(en(c))throw Error("Tried to get map with object key");if(null==(n=n[c]))return n}return n},xo=function(e){var n=typeof e;return null!=e&&("object"==n||"function"==n)},Tl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},j0="object"==typeof Tl&&Tl&&Tl.Object===Object&&Tl,q0="object"==typeof self&&self&&self.Object===Object&&self,mc=j0||q0||Function("return this")(),kh=function(){return mc.Date.now()},X0=/\s/,Y0=function(e){for(var n=e.length;n--&&X0.test(e.charAt(n)););return n},H0=/^\s+/,W0=function(e){return e&&e.slice(0,Y0(e)+1).replace(H0,"")},ls=mc.Symbol,qf=Object.prototype,$0=qf.hasOwnProperty,K0=qf.toString,Pl=ls?ls.toStringTag:void 0,G0=function(e){var n=$0.call(e,Pl),i=e[Pl];try{e[Pl]=void 0;var o=!0}catch{}var l=K0.call(e);return o&&(n?e[Pl]=i:delete e[Pl]),l},U0=Object.prototype.toString,Z0=function(e){return U0.call(e)},Xf=ls?ls.toStringTag:void 0,Yf=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Xf&&Xf in Object(e)?G0(e):Z0(e)},Q0=function(e){return null!=e&&"object"==typeof e},Dl=function(e){return"symbol"==typeof e||Q0(e)&&"[object Symbol]"==Yf(e)},J0=/^[-+]0x[0-9a-f]+$/i,ey=/^0b[01]+$/i,ty=/^0o[0-7]+$/i,ny=parseInt,Hf=function(e){if("number"==typeof e)return e;if(Dl(e))return NaN;if(xo(e)){var n="function"==typeof e.valueOf?e.valueOf():e;e=xo(n)?n+"":n}if("string"!=typeof e)return 0===e?e:+e;e=W0(e);var i=ey.test(e);return i||ty.test(e)?ny(e.slice(2),i?2:8):J0.test(e)?NaN:+e},ry=Math.max,iy=Math.min,yc=function(e,n,i){var o,l,c,h,f,g,y=0,x=!1,_=!1,S=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function A(F){var G=o,$=l;return o=l=void 0,y=F,h=e.apply($,G)}function L(F){var G=F-g;return void 0===g||G>=n||G<0||_&&F-y>=c}function I(){var G,$,F=kh();if(L(F))return P(F);f=setTimeout(I,($=n-((G=F)-g),_?iy($,c-(G-y)):$))}function P(F){return f=void 0,S&&o?A(F):(o=l=void 0,h)}function B(){var F=kh(),G=L(F);if(o=arguments,l=this,g=F,G){if(void 0===f)return function C(F){return y=F,f=setTimeout(I,n),x?A(F):h}(g);if(_)return clearTimeout(f),f=setTimeout(I,n),A(g)}return void 0===f&&(f=setTimeout(I,n)),h}return n=Hf(n)||0,xo(i)&&(x=!!i.leading,c=(_="maxWait"in i)?ry(Hf(i.maxWait)||0,n):c,S="trailing"in i?!!i.trailing:S),B.cancel=function(){void 0!==f&&clearTimeout(f),y=0,o=g=l=f=void 0},B.flush=function(){return void 0===f?h:P(kh())},B},Ch=qn?qn.performance:null,Wf=Ch&&Ch.now?function(){return Ch.now()}:function(){return Date.now()},ay=function(){if(qn){if(qn.requestAnimationFrame)return function(e){qn.requestAnimationFrame(e)};if(qn.mozRequestAnimationFrame)return function(e){qn.mozRequestAnimationFrame(e)};if(qn.webkitRequestAnimationFrame)return function(e){qn.webkitRequestAnimationFrame(e)};if(qn.msRequestAnimationFrame)return function(e){qn.msRequestAnimationFrame(e)}}return function(e){e&&setTimeout(function(){e(Wf())},1e3/60)}}(),bc=function(e){return ay(e)},sa=Wf,$f=65599,Kf=function(e){for(var n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:9261;!(n=e.next()).done;)o=o*$f+n.value|0;return o},Ml=function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:9261)*$f+e|0},Al=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5381;return(n<<5)+n+e|0},Aa=function(e){return 2097152*e[0]+e[1]},xc=function(e,n){return[Ml(e[0],n[0]),Al(e[1],n[1])]},wo=function(e,n){var i={value:0,done:!1},o=0,l=e.length;return Kf({next:function(){return o<l?i.value=e.charCodeAt(o++):i.done=!0,i}},n)},Gf=function(){return oy(arguments)},oy=function(e){for(var n,i=0;i<e.length;i++){var o=e[i];n=0===i?wo(o):wo(o,n)}return n},Uf=!0,sy=null!=console.warn,ly=null!=console.trace,Sh=Number.MAX_SAFE_INTEGER||9007199254740991,Zf=function(){return!0},wc=function(){return!1},Qf=function(){return 0},Th=function(){},zn=function(e){throw new Error(e)},Jf=function(e){if(void 0===e)return Uf;Uf=!!e},gn=function(e){Jf()&&(sy?console.warn(e):(console.log(e),ly&&console.trace()))},Ri=function(e){return null==e?e:yn(e)?e.slice():en(e)?It({},e):e},eg=function(e,n){for(n=e="";e++<36;n+=51*e&52?(15^e?8^Math.random()*(20^e?16:4):4).toString(16):"-");return n},uy={},tg=function(){return uy},ur=function(e){var n=Object.keys(e);return function(i){for(var o={},l=0;l<n.length;l++){var c=n[l],h=i?.[c];o[c]=void 0===h?e[c]:h}return o}},Ba=function(e,n,i){for(var o=e.length-1;o>=0&&(e[o]!==n||(e.splice(o,1),!i));o--);},Ph=function(e){e.splice(0,e.length)},Ci=function(e,n,i){return i&&(n=If(i,n)),e[n]},La=function(e,n,i,o){i&&(n=If(i,n)),e[n]=o},Fi=typeof Map<"u"?Map:function(){function e(){bh(this,e),this._obj={}}return xh(e,[{key:"set",value:function(n,i){return this._obj[n]=i,this}},{key:"delete",value:function(n){return this._obj[n]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(n){return void 0!==this._obj[n]}},{key:"get",value:function(n){return this._obj[n]}}]),e}(),cy=function(){function e(n){if(bh(this,e),this._obj=Object.create(null),this.size=0,null!=n){var i;i=null!=n.instanceString&&n.instanceString()===this.instanceString()?n.toArray():n;for(var o=0;o<i.length;o++)this.add(i[o])}}return xh(e,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(n){var i=this._obj;1!==i[n]&&(i[n]=1,this.size++)}},{key:"delete",value:function(n){var i=this._obj;1===i[n]&&(i[n]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(n){return 1===this._obj[n]}},{key:"toArray",value:function(){var n=this;return Object.keys(this._obj).filter(function(i){return n.has(i)})}},{key:"forEach",value:function(n,i){return this.toArray().forEach(n,i)}}]),e}(),us="undefined"!==(typeof Set>"u"?"undefined":Zn(Set))?Set:cy,Ec=function(e,n){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(void 0!==e&&void 0!==n&&wh(e)){var o=n.group;if(null==o&&(o=n.data&&null!=n.data.source&&null!=n.data.target?"edges":"nodes"),"nodes"===o||"edges"===o){this.length=1,this[0]=this;var l=this._private={cy:e,single:!0,data:n.data||{},position:n.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:o,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!n.selected,selectable:void 0===n.selectable||!!n.selectable,locked:!!n.locked,grabbed:!1,grabbable:void 0===n.grabbable||!!n.grabbable,pannable:void 0===n.pannable?"edges"===o:!!n.pannable,active:!1,classes:new us,animation:{current:[],queue:[]},rscratch:{},scratch:n.scratch||{},edges:[],children:[],parent:n.parent&&n.parent.isNode()?n.parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(null==l.position.x&&(l.position.x=0),null==l.position.y&&(l.position.y=0),n.renderedPosition){var c=n.renderedPosition,h=e.pan(),f=e.zoom();l.position={x:(c.x-h.x)/f,y:(c.y-h.y)/f}}var g=[];yn(n.classes)?g=n.classes:Ot(n.classes)&&(g=n.classes.split(/\s+/));for(var y=0,x=g.length;y<x;y++){var _=g[y];_&&""!==_&&l.classes.add(_)}this.createEmitter();var S=n.style||n.css;S&&(gn("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(S)),(void 0===i||i)&&this.restore()}else zn("An element must be of type `nodes` or `edges`; you specified `"+o+"`")}else zn("An element must have a core reference and parameters set")},ng=function(e){return e={bfs:e.bfs||!e.dfs,dfs:e.dfs||!e.bfs},function(n,i,o){var l;en(n)&&!Gr(n)&&(n=(l=n).roots||l.root,i=l.visit,o=l.directed),o=2!==arguments.length||Nn(i)?o:i,i=Nn(i)?i:function(){};for(var c,h=this._private.cy,f=n=Ot(n)?this.filter(n):n,g=[],y=[],x={},_={},S={},A=0,C=this.byGroup(),L=C.nodes,I=C.edges,P=0;P<f.length;P++){var B=f[P],F=B.id();B.isNode()&&(g.unshift(B),e.bfs&&(S[F]=!0,y.push(B)),_[F]=0)}for(var G=function(){var ae=e.bfs?g.shift():g.pop(),le=ae.id();if(e.dfs){if(S[le])return"continue";S[le]=!0,y.push(ae)}var se,de=_[le],we=x[le],be=null!=we?we.source():null,fe=null!=we?we.target():null,ge=null==we?void 0:ae.same(be)?fe[0]:be[0];if(!0===(se=i(ae,we,ge,A++,de)))return c=ae,"break";if(!1===se)return"break";for(var ee=ae.connectedEdges().filter(function(Fe){return(!o||Fe.source().same(ae))&&I.has(Fe)}),Se=0;Se<ee.length;Se++){var Ie=ee[Se],_e=Ie.connectedNodes().filter(function(Fe){return!Fe.same(ae)&&L.has(Fe)}),je=_e.id();0===_e.length||S[je]||(g.push(_e=_e[0]),e.bfs&&(S[je]=!0,y.push(_e)),x[je]=Ie,_[je]=_[le]+1)}};0!==g.length;){var $=G();if("continue"!==$&&"break"===$)break}for(var X=h.collection(),H=0;H<y.length;H++){var te=y[H],re=x[te.id()];null!=re&&X.push(re),X.push(te)}return{path:h.collection(X),found:h.collection(c)}}},Bl={breadthFirstSearch:ng({bfs:!0}),depthFirstSearch:ng({dfs:!0})};Bl.bfs=Bl.breadthFirstSearch,Bl.dfs=Bl.depthFirstSearch;var Ll=function(e,n){return function(e,n){(function(){var i,o,l,c,h,f,g,y,x,_,S,A,C,L,I;l=Math.floor,_=Math.min,o=function(P,B){return P<B?-1:P>B?1:0},x=function(P,B,F,G,$){var X;if(null==F&&(F=0),null==$&&($=o),F<0)throw new Error("lo must be non-negative");for(null==G&&(G=P.length);F<G;)$(B,P[X=l((F+G)/2)])<0?G=X:F=X+1;return[].splice.apply(P,[F,F-F].concat(B)),B},f=function(P,B,F){return null==F&&(F=o),P.push(B),L(P,0,P.length-1,F)},h=function(P,B){var F,G;return null==B&&(B=o),F=P.pop(),P.length?(G=P[0],P[0]=F,I(P,0,B)):G=F,G},y=function(P,B,F){var G;return null==F&&(F=o),G=P[0],P[0]=B,I(P,0,F),G},g=function(P,B,F){var G;return null==F&&(F=o),P.length&&F(P[0],B)<0&&(B=(G=[P[0],B])[0],P[0]=G[1],I(P,0,F)),B},c=function(P,B){var G,$,X,H,te;for(null==B&&(B=o),H=[],G=0,$=(X=function(){te=[];for(var re=0,ae=l(P.length/2);0<=ae?re<ae:re>ae;0<=ae?re++:re--)te.push(re);return te}.apply(this).reverse()).length;G<$;G++)H.push(I(P,X[G],B));return H},C=function(P,B,F){var G;if(null==F&&(F=o),-1!==(G=P.indexOf(B)))return L(P,0,G,F),I(P,G,F)},S=function(P,B,F){var $,X,H,te;if(null==F&&(F=o),!($=P.slice(0,B)).length)return $;for(c($,F),X=0,H=(te=P.slice(B)).length;X<H;X++)g($,te[X],F);return $.sort(F).reverse()},A=function(P,B,F){var G,$,X,H,te,re,ae,le,se;if(null==F&&(F=o),10*B<=P.length){if(!(X=P.slice(0,B).sort(F)).length)return X;for($=X[X.length-1],H=0,re=(ae=P.slice(B)).length;H<re;H++)F(G=ae[H],$)<0&&(x(X,G,0,null,F),X.pop(),$=X[X.length-1]);return X}for(c(P,F),se=[],te=0,le=_(B,P.length);0<=le?te<le:te>le;0<=le?++te:--te)se.push(h(P,F));return se},L=function(P,B,F,G){var $,X,H;for(null==G&&(G=o),$=P[F];F>B&&G($,X=P[H=F-1>>1])<0;)P[F]=X,F=H;return P[F]=$},I=function(P,B,F){var G,$,X,H,te;for(null==F&&(F=o),$=P.length,te=B,X=P[B],G=2*B+1;G<$;)(H=G+1)<$&&!(F(P[G],P[H])<0)&&(G=H),P[B]=P[G],G=2*(B=G)+1;return P[B]=X,L(P,te,B,F)},i=function(){function P(B){this.cmp=B??o,this.nodes=[]}return P.push=f,P.pop=h,P.replace=y,P.pushpop=g,P.heapify=c,P.updateItem=C,P.nlargest=S,P.nsmallest=A,P.prototype.push=function(B){return f(this.nodes,B,this.cmp)},P.prototype.pop=function(){return h(this.nodes,this.cmp)},P.prototype.peek=function(){return this.nodes[0]},P.prototype.contains=function(B){return-1!==this.nodes.indexOf(B)},P.prototype.replace=function(B){return y(this.nodes,B,this.cmp)},P.prototype.pushpop=function(B){return g(this.nodes,B,this.cmp)},P.prototype.heapify=function(){return c(this.nodes,this.cmp)},P.prototype.updateItem=function(B){return C(this.nodes,B,this.cmp)},P.prototype.clear=function(){return this.nodes=[]},P.prototype.empty=function(){return 0===this.nodes.length},P.prototype.size=function(){return this.nodes.length},P.prototype.clone=function(){var B;return(B=new P).nodes=this.nodes.slice(0),B},P.prototype.toArray=function(){return this.nodes.slice(0)},P.prototype.insert=P.prototype.push,P.prototype.top=P.prototype.peek,P.prototype.front=P.prototype.peek,P.prototype.has=P.prototype.contains,P.prototype.copy=P.prototype.clone,P}(),e.exports=i}).call(Tl)}(n={exports:{}}),n.exports}(),dy=ur({root:null,weight:function(e){return 1},directed:!1}),hy={dijkstra:function(e){if(!en(e)){var n=arguments;e={root:n[0],weight:n[1],directed:n[2]}}var we,be,i=dy(e),o=i.root,c=i.directed,h=this,f=i.weight,g=Ot(o)?this.filter(o)[0]:o[0],y={},x={},_={},S=this.byGroup(),A=S.nodes,C=S.edges;C.unmergeBy(function(we){return we.isLoop()});for(var L=function(we){return y[we.id()]},P=new Ll(function(we,be){return L(we)-L(be)}),B=0;B<A.length;B++){var F=A[B];y[F.id()]=F.same(g)?0:1/0,P.push(F)}for(var G=function(we,be){for(var fe,ge=(c?we.edgesTo(be):we.edgesWith(be)).intersect(C),ee=1/0,Se=0;Se<ge.length;Se++){var Ie=ge[Se],_e=f(Ie);(_e<ee||!fe)&&(ee=_e,fe=Ie)}return{edge:fe,dist:ee}};P.size()>0;){var $=P.pop(),X=L($),H=$.id();if(_[H]=X,X!==1/0)for(var te=$.neighborhood().intersect(A),re=0;re<te.length;re++){var ae=te[re],le=ae.id(),se=G($,ae),de=X+se.dist;de<L(ae)&&(be=de,y[(we=ae).id()]=be,P.updateItem(we),x[le]={node:$,edge:se.edge})}}return{distanceTo:function(we){var be=Ot(we)?A.filter(we)[0]:we[0];return _[be.id()]},pathTo:function(we){var be=Ot(we)?A.filter(we)[0]:we[0],fe=[],ge=be,ee=ge.id();if(be.length>0)for(fe.unshift(be);x[ee];){var Se=x[ee];fe.unshift(Se.edge),fe.unshift(Se.node),ee=(ge=Se.node).id()}return h.spawn(fe)}}}},py={kruskal:function(e){e=e||function(B){return 1};for(var n=this.byGroup(),i=n.nodes,o=n.edges,l=i.length,c=new Array(l),h=i,f=function(B){for(var F=0;F<c.length;F++)if(c[F].has(B))return F},g=0;g<l;g++)c[g]=this.spawn(i[g]);for(var y=o.sort(function(B,F){return e(B)-e(F)}),x=0;x<y.length;x++){var _=y[x],S=_.source()[0],A=_.target()[0],C=f(S),L=f(A),I=c[C],P=c[L];C!==L&&(h.merge(_),I.merge(P),c.splice(L,1))}return h}},fy=ur({root:null,goal:null,weight:function(e){return 1},heuristic:function(e){return 0},directed:!1}),gy={aStar:function(e){var n=this.cy(),i=fy(e),o=i.root,l=i.goal,c=i.heuristic,h=i.directed,f=i.weight;o=n.collection(o)[0],l=n.collection(l)[0];var g,y,x=o.id(),_=l.id(),S={},A={},C={},L=new Ll(function(ee,Se){return A[ee.id()]-A[Se.id()]}),I=new us,P={},B={},F=function(ee,Se){L.push(ee),I.add(Se)};F(o,x),S[x]=0,A[x]=c(o);for(var $=0;L.size()>0;){if(y=(g=L.pop()).id(),I.delete(y),$++,y===_){for(var X=[],H=l,te=_,re=B[te];X.unshift(H),null!=re&&X.unshift(re),null!=(H=P[te]);)re=B[te=H.id()];return{found:!0,distance:S[y],path:this.spawn(X),steps:$}}C[y]=!0;for(var ae=g._private.edges,le=0;le<ae.length;le++){var se=ae[le];if(this.hasElementWithId(se.id())&&(!h||se.data("source")===y)){var de=se.source(),we=se.target(),be=de.id()!==y?de:we,fe=be.id();if(this.hasElementWithId(fe)&&!C[fe]){var ge=S[y]+f(se);I.has(fe)?ge<S[fe]&&(S[fe]=ge,A[fe]=ge+c(be),P[fe]=g,B[fe]=se):(S[fe]=ge,A[fe]=ge+c(be),F(be,fe),P[fe]=g,B[fe]=se)}}}}return{found:!1,distance:void 0,path:void 0,steps:$}}},vy=ur({weight:function(e){return 1},directed:!1}),my={floydWarshall:function(e){for(var n=this.cy(),i=vy(e),l=i.directed,c=i.weight,h=this.byGroup(),f=h.nodes,g=h.edges,y=f.length,x=y*y,_=function(Se){return f.indexOf(Se)},S=function(Se){return f[Se]},A=new Array(x),C=0;C<x;C++){var L=C%y;A[C]=(C-L)/y===L?0:1/0}for(var P=new Array(x),B=new Array(x),F=0;F<g.length;F++){var G=g[F],$=G.source()[0],X=G.target()[0];if($!==X){var H=_($),te=_(X),re=H*y+te,ae=c(G);if(A[re]>ae&&(A[re]=ae,P[re]=te,B[re]=G),!l){var le=te*y+H;!l&&A[le]>ae&&(A[le]=ae,P[le]=H,B[le]=G)}}}for(var se=0;se<y;se++)for(var de=0;de<y;de++)for(var we=de*y+se,be=0;be<y;be++){var fe=de*y+be,ge=se*y+be;A[we]+A[ge]<A[fe]&&(A[fe]=A[we]+A[ge],P[fe]=P[we])}var ee=function(Se){return _((Ot(Ie=Se)?n.filter(Ie):Ie)[0]);var Ie};return{distance:function(Se,Ie){var _e=ee(Se),je=ee(Ie);return A[_e*y+je]},path:function(Se,Ie){var _e=ee(Se),je=ee(Ie),Fe=S(_e);if(_e===je)return Fe.collection();if(null==P[_e*y+je])return n.collection();var Je=n.collection();for(Je.merge(Fe);_e!==je;)Je.merge(B[_e*y+(_e=P[_e*y+je])]),Je.merge(S(_e));return Je}}}},yy=ur({weight:function(e){return 1},directed:!1,root:null}),by={bellmanFord:function(e){var n=this,i=yy(e),l=i.directed,c=i.root,h=i.weight,f=this,g=this.cy(),y=this.byGroup(),x=y.edges,_=y.nodes,S=_.length,A=new Fi,C=!1,L=[];c=g.collection(c)[0],x.unmergeBy(function(ot){return ot.isLoop()});for(var I=x.length,P=function(ot){var U=A.get(ot.id());return U||(U={},A.set(ot.id(),U)),U},B=function(ot){return(Ot(ot)?g.$(ot):ot)[0]},F=0;F<S;F++){var G=_[F],$=P(G);$.dist=G.same(c)?0:1/0,$.pred=null,$.edge=null}for(var X=!1,H=function(ot,U,pe,Ce,Oe,Ae){var Ze=Ce.dist+Ae;Ze<Oe.dist&&!pe.same(Ce.edge)&&(Oe.dist=Ze,Oe.pred=ot,Oe.edge=pe,X=!0)},te=1;te<S;te++){X=!1;for(var re=0;re<I;re++){var ae=x[re],le=ae.source(),se=ae.target(),de=h(ae),we=P(le),be=P(se);H(le,0,ae,we,be,de),l||H(se,0,ae,be,we,de)}if(!X)break}if(X)for(var fe=[],ge=0;ge<I;ge++){var ee=x[ge],Se=ee.source(),Ie=ee.target(),_e=h(ee),je=P(Se).dist,Fe=P(Ie).dist;if(je+_e<Fe||!l&&Fe+_e<je){if(C||(gn("Graph contains a negative weight cycle for Bellman-Ford"),C=!0),!1===e.findNegativeWeightCycles)break;var ze=[];je+_e<Fe&&ze.push(Se),!l&&Fe+_e<je&&ze.push(Ie);for(var Je=ze.length,Re=0;Re<Je;Re++){var Ge=ze[Re],st=[Ge];st.push(P(Ge).edge);for(var pt=P(Ge).pred;-1===st.indexOf(pt);)st.push(pt),st.push(P(pt).edge),pt=P(pt).pred;for(var _t=(st=st.slice(st.indexOf(pt)))[0].id(),We=0,ft=2;ft<st.length;ft+=2)st[ft].id()<_t&&(_t=st[ft].id(),We=ft);(st=st.slice(We).concat(st.slice(0,We))).push(st[0]);var vt=st.map(function(ot){return ot.id()}).join(",");-1===fe.indexOf(vt)&&(L.push(f.spawn(st)),fe.push(vt))}}}return{distanceTo:function(ot){return P(B(ot)).dist},pathTo:function(ot){for(var U=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c,Ce=[],Oe=B(ot);;){if(null==Oe)return n.spawn();var Ae=P(Oe),Ze=Ae.edge,Ue=Ae.pred;if(Ce.unshift(Oe[0]),Oe.same(U)&&Ce.length>0)break;null!=Ze&&Ce.unshift(Ze),Oe=Ue}return f.spawn(Ce)},hasNegativeWeightCycle:C,negativeWeightCycles:L}}},xy=Math.sqrt(2),wy=function(e,n,i){0===i.length&&zn("Karger-Stein must be run on a connected (sub)graph");for(var o=i[e],h=n[o[1]],f=n[o[2]],g=i,y=g.length-1;y>=0;y--){var x=g[y],_=x[1],S=x[2];(n[_]===h&&n[S]===f||n[_]===f&&n[S]===h)&&g.splice(y,1)}for(var A=0;A<g.length;A++){var C=g[A];C[1]===f?(g[A]=C.slice(),g[A][1]=h):C[2]===f&&(g[A]=C.slice(),g[A][2]=h)}for(var L=0;L<n.length;L++)n[L]===f&&(n[L]=h);return g},Dh=function(e,n,i,o){for(;i>o;){var l=Math.floor(Math.random()*n.length);n=wy(l,e,n),i--}return n},Ey={kargerStein:function(){var e=this,n=this.byGroup(),i=n.nodes,o=n.edges;o.unmergeBy(function(fe){return fe.isLoop()});var l=i.length,c=o.length,h=Math.ceil(Math.pow(Math.log(l)/Math.LN2,2)),f=Math.floor(l/xy);if(!(l<2)){for(var g=[],y=0;y<c;y++){var x=o[y];g.push([y,i.indexOf(x.source()),i.indexOf(x.target())])}for(var _=1/0,S=[],A=new Array(l),C=new Array(l),L=new Array(l),I=function(fe,ge){for(var ee=0;ee<l;ee++)ge[ee]=fe[ee]},P=0;P<=h;P++){for(var B=0;B<l;B++)C[B]=B;var F=Dh(C,g.slice(),l,f),G=F.slice();I(C,L);var $=Dh(C,F,f,2),X=Dh(L,G,f,2);$.length<=X.length&&$.length<_?(_=$.length,S=$,I(C,A)):X.length<=$.length&&X.length<_&&(_=X.length,S=X,I(L,A))}for(var H=this.spawn(S.map(function(fe){return o[fe[0]]})),te=this.spawn(),re=this.spawn(),ae=A[0],le=0;le<A.length;le++){var de=i[le];A[le]===ae?te.merge(de):re.merge(de)}var we=function(fe){var ge=e.spawn();return fe.forEach(function(ee){ge.merge(ee),ee.connectedEdges().forEach(function(Se){e.contains(Se)&&!H.contains(Se)&&ge.merge(Se)})}),ge},be=[we(te),we(re)];return{cut:H,components:be,partition1:te,partition2:re}}zn("At least 2 nodes are required for Karger-Stein algorithm")}},_c=function(e,n,i){return{x:e.x*n+i.x,y:e.y*n+i.y}},rg=function(e,n,i){return{x:(e.x-i.x)/n,y:(e.y-i.y)/n}},cs=function(e){return{x:e[0],y:e[1]}},kc=function(e,n){return Math.atan2(n,e)-Math.PI/2},Mh=Math.log2||function(e){return Math.log(e)/Math.log(2)},ig=function(e){return e>0?1:e<0?-1:0},Eo=function(e,n){return Math.sqrt(_o(e,n))},_o=function(e,n){var i=n.x-e.x,o=n.y-e.y;return i*i+o*o},_y=function(e){for(var n=e.length,i=0,o=0;o<n;o++)i+=e[o];for(var l=0;l<n;l++)e[l]=e[l]/i;return e},Qn=function(e,n,i,o){return(1-o)*(1-o)*e+2*(1-o)*o*n+o*o*i},ds=function(e,n,i,o){return{x:Qn(e.x,n.x,i.x,o),y:Qn(e.y,n.y,i.y,o)}},Ol=function(e,n,i){return Math.max(e,Math.min(i,n))},jr=function(e){if(null==e)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(null!=e.x1&&null!=e.y1){if(null!=e.x2&&null!=e.y2&&e.x2>=e.x1&&e.y2>=e.y1)return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,w:e.x2-e.x1,h:e.y2-e.y1};if(null!=e.w&&null!=e.h&&e.w>=0&&e.h>=0)return{x1:e.x1,y1:e.y1,x2:e.x1+e.w,y2:e.y1+e.h,w:e.w,h:e.h}}},ag=function(e,n){e.x1=Math.min(e.x1,n.x1),e.x2=Math.max(e.x2,n.x2),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,n.y1),e.y2=Math.max(e.y2,n.y2),e.h=e.y2-e.y1},ky=function(e,n,i){e.x1=Math.min(e.x1,n),e.x2=Math.max(e.x2,n),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,i),e.y2=Math.max(e.y2,i),e.h=e.y2-e.y1},Cc=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.x1-=n,e.x2+=n,e.y1-=n,e.y2+=n,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},Sc=function(e){var n,i,o,l,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0];if(1===c.length)n=i=o=l=c[0];else if(2===c.length)n=o=c[0],l=i=c[1];else if(4===c.length){var h=ki(c,4);n=h[0],i=h[1],o=h[2],l=h[3]}return e.x1-=l,e.x2+=i,e.y1-=n,e.y2+=o,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},og=function(e,n){e.x1=n.x1,e.y1=n.y1,e.x2=n.x2,e.y2=n.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1},Ah=function(e,n){return!(e.x1>n.x2||n.x1>e.x2||e.x2<n.x1||n.x2<e.x1||e.y2<n.y1||n.y2<e.y1||e.y1>n.y2||n.y1>e.y2)},hs=function(e,n,i){return e.x1<=n&&n<=e.x2&&e.y1<=i&&i<=e.y2},sg=function(e,n){return hs(e,n.x1,n.y1)&&hs(e,n.x2,n.y2)},lg=function(e,n,i,o,l,c,h){var f,g=Il(l,c),y=l/2,x=c/2,_=o-x-h;if((f=Oa(e,n,i,o,i-y+g-h,_,i+y-g+h,_,!1)).length>0)return f;var S=i+y+h;if((f=Oa(e,n,i,o,S,o-x+g-h,S,o+x-g+h,!1)).length>0)return f;var A=o+x+h;if((f=Oa(e,n,i,o,i-y+g-h,A,i+y-g+h,A,!1)).length>0)return f;var C,L=i-y-h;if((f=Oa(e,n,i,o,L,o-x+g-h,L,o+x-g+h,!1)).length>0)return f;var I=i-y+g,P=o-x+g;if((C=Nl(e,n,i,o,I,P,g+h)).length>0&&C[0]<=I&&C[1]<=P)return[C[0],C[1]];var B=i+y-g,F=o-x+g;if((C=Nl(e,n,i,o,B,F,g+h)).length>0&&C[0]>=B&&C[1]<=F)return[C[0],C[1]];var G=i+y-g,$=o+x-g;if((C=Nl(e,n,i,o,G,$,g+h)).length>0&&C[0]>=G&&C[1]>=$)return[C[0],C[1]];var X=i-y+g,H=o+x-g;return(C=Nl(e,n,i,o,X,H,g+h)).length>0&&C[0]<=X&&C[1]>=H?[C[0],C[1]]:[]},Cy=function(e,n,i,o,l,c,h){var f=h,g=Math.min(i,l),y=Math.max(i,l),x=Math.min(o,c),_=Math.max(o,c);return g-f<=e&&e<=y+f&&x-f<=n&&n<=_+f},Sy=function(e,n,i,o,l,c,h,f,g){var y=Math.min(i,h,l)-g,x=Math.max(i,h,l)+g,_=Math.min(o,f,c)-g,S=Math.max(o,f,c)+g;return!(e<y||e>x||n<_||n>S)},Ty=function(e,n,i,o,l,c,h,f){var I,P,B,F,G,$,X,H,te,re,ae,le,se,g=[];P=9*i*l-3*i*i-3*i*h-6*l*l+3*l*h+9*o*c-3*o*o-3*o*f-6*c*c+3*c*f,B=3*i*i-6*i*l+i*h-i*e+2*l*l+2*l*e-h*e+3*o*o-6*o*c+o*f-o*n+2*c*c+2*c*n-f*n,F=1*i*l-i*i+i*e-l*e+o*c-o*o+o*n-c*n,0==(I=1*i*i-4*i*l+2*i*h+4*l*l-4*l*h+h*h+o*o-4*o*c+2*o*f+4*c*c-4*c*f+f*f)&&(I=1e-5),H=-27*(F/=I)+(P/=I)*(9*(B/=I)-P*P*2),$=(X=(3*B-P*P)/9)*X*X+(H/=54)*H,(G=g)[1]=0,le=P/3,$>0?(re=(re=H+Math.sqrt($))<0?-Math.pow(-re,1/3):Math.pow(re,1/3),ae=(ae=H-Math.sqrt($))<0?-Math.pow(-ae,1/3):Math.pow(ae,1/3),G[0]=-le+re+ae,G[4]=G[2]=-(le+=(re+ae)/2),le=Math.sqrt(3)*(-ae+re)/2,G[3]=le,G[5]=-le):(G[5]=G[3]=0,0===$?(se=H<0?-Math.pow(-H,1/3):Math.pow(H,1/3),G[0]=2*se-le,G[4]=G[2]=-(se+le)):(te=(X=-X)*X*X,te=Math.acos(H/Math.sqrt(te)),se=2*Math.sqrt(X),G[0]=-le+se*Math.cos(te/3),G[2]=-le+se*Math.cos((te+2*Math.PI)/3),G[4]=-le+se*Math.cos((te+4*Math.PI)/3)));for(var y=[],x=0;x<6;x+=2)Math.abs(g[x+1])<1e-7&&g[x]>=0&&g[x]<=1&&y.push(g[x]);y.push(1),y.push(0);for(var _,S,A,C=-1,L=0;L<y.length;L++)_=Math.pow(1-y[L],2)*i+2*(1-y[L])*y[L]*l+y[L]*y[L]*h,S=Math.pow(1-y[L],2)*o+2*(1-y[L])*y[L]*c+y[L]*y[L]*f,A=Math.pow(_-e,2)+Math.pow(S-n,2),C>=0?A<C&&(C=A):C=A;return C},Py=function(e,n,i,o,l,c){var h=[e-i,n-o],f=[l-i,c-o],g=f[0]*f[0]+f[1]*f[1],y=h[0]*h[0]+h[1]*h[1],x=h[0]*f[0]+h[1]*f[1],_=x*x/g;return x<0?y:_>g?(e-l)*(e-l)+(n-c)*(n-c):y-_},qr=function(e,n,i){for(var o,l,c,h,f=0,g=0;g<i.length/2;g++)if(l=i[2*g+1],g+1<i.length/2?(c=i[2*(g+1)],h=i[2*(g+1)+1]):(c=i[2*(g+1-i.length/2)],h=i[2*(g+1-i.length/2)+1]),(o=i[2*g])!=e||c!=e){if(!(o>=e&&e>=c||o<=e&&e<=c))continue;(e-o)/(c-o)*(h-l)+l>n&&f++}return f%2!=0},la=function(e,n,i,o,l,c,h,f,g){var y,x=new Array(i.length);null!=f[0]?(y=Math.atan(f[1]/f[0]),f[0]<0?y+=Math.PI/2:y=-y-Math.PI/2):y=f;for(var _,S=Math.cos(-y),A=Math.sin(-y),C=0;C<x.length/2;C++)x[2*C]=c/2*(i[2*C]*S-i[2*C+1]*A),x[2*C+1]=h/2*(i[2*C+1]*S+i[2*C]*A),x[2*C]+=o,x[2*C+1]+=l;if(g>0){var L=Pc(x,-g);_=Tc(L)}else _=x;return qr(e,n,_)},Tc=function(e){for(var c,h,f,g,y=new Array(e.length/2),x=0;x<e.length/4;x++){x<e.length/4-1?(c=e[4*(x+1)],h=e[4*(x+1)+1],f=e[4*(x+1)+2],g=e[4*(x+1)+3]):(c=e[0],h=e[1],f=e[2],g=e[3]);var _=Oa(e[4*x],e[4*x+1],e[4*x+2],e[4*x+3],c,h,f,g,!0);y[2*x]=_[0],y[2*x+1]=_[1]}return y},Pc=function(e,n){for(var i,o,l,c,h=new Array(2*e.length),f=0;f<e.length/2;f++){f<e.length/2-1?(l=e[2*(f+1)],c=e[2*(f+1)+1]):(l=e[0],c=e[1]);var g=c-(o=e[2*f+1]),y=-(l-(i=e[2*f])),x=Math.sqrt(g*g+y*y),_=g/x,S=y/x;h[4*f]=i+_*n,h[4*f+1]=o+S*n,h[4*f+2]=l+_*n,h[4*f+3]=c+S*n}return h},ko=function(e,n,i,o,l,c,h){return e-=l,n-=c,(e/=i/2+h)*e+(n/=o/2+h)*n<=1},Nl=function(e,n,i,o,l,c,h){var f=[i-e,o-n],g=[e-l,n-c],y=f[0]*f[0]+f[1]*f[1],x=2*(g[0]*f[0]+g[1]*f[1]),_=x*x-4*y*(g[0]*g[0]+g[1]*g[1]-h*h);if(_<0)return[];var S=(-x+Math.sqrt(_))/(2*y),A=(-x-Math.sqrt(_))/(2*y),C=Math.min(S,A),L=Math.max(S,A),I=[];if(C>=0&&C<=1&&I.push(C),L>=0&&L<=1&&I.push(L),0===I.length)return[];var P=I[0]*f[0]+e,B=I[0]*f[1]+n;return I.length>1?I[0]==I[1]?[P,B]:[P,B,I[1]*f[0]+e,I[1]*f[1]+n]:[P,B]},Bh=function(e,n,i){return n<=e&&e<=i||i<=e&&e<=n?e:e<=n&&n<=i||i<=n&&n<=e?n:i},Oa=function(e,n,i,o,l,c,h,f,g){var y=e-l,x=i-e,_=h-l,S=n-c,A=o-n,C=f-c,L=_*S-C*y,I=x*S-A*y,P=C*x-_*A;if(0!==P){var B=L/P,F=I/P;return-.001<=B&&B<=1.001&&-.001<=F&&F<=1.001||g?[e+B*x,n+B*A]:[]}return 0===L||0===I?Bh(e,i,h)===h?[h,f]:Bh(e,i,l)===l?[l,c]:Bh(l,h,i)===i?[i,o]:[]:[]},zl=function(e,n,i,o,l,c,h,f){var g,y,S,A,C=[],L=new Array(i.length),I=!0;if(null==c&&(I=!1),I){for(var P=0;P<L.length/2;P++)L[2*P]=i[2*P]*c+o,L[2*P+1]=i[2*P+1]*h+l;if(f>0){var B=Pc(L,-f);y=Tc(B)}else y=L}else y=i;for(var F=0;F<y.length/2;F++)F<y.length/2-1?(S=y[2*(F+1)],A=y[2*(F+1)+1]):(S=y[0],A=y[1]),0!==(g=Oa(e,n,o,l,y[2*F],y[2*F+1],S,A)).length&&C.push(g[0],g[1]);return C},Dc=function(e,n,i){var o=[e[0]-n[0],e[1]-n[1]],l=Math.sqrt(o[0]*o[0]+o[1]*o[1]),c=(l-i)/l;return c<0&&(c=1e-5),[n[0]+c*o[0],n[1]+c*o[1]]},zr=function(e,n){var i=Lh(e,n);return ug(i)},ug=function(e){for(var n,i,o=e.length/2,l=1/0,c=1/0,h=-1/0,f=-1/0,g=0;g<o;g++)n=e[2*g],i=e[2*g+1],l=Math.min(l,n),h=Math.max(h,n),c=Math.min(c,i),f=Math.max(f,i);for(var y=2/(h-l),x=2/(f-c),_=0;_<o;_++)n=e[2*_]=e[2*_]*y,i=e[2*_+1]=e[2*_+1]*x,l=Math.min(l,n),h=Math.max(h,n),c=Math.min(c,i),f=Math.max(f,i);if(c<-1)for(var S=0;S<o;S++)i=e[2*S+1]=e[2*S+1]+(-1-c);return e},Lh=function(e,n){var i=1/e*2*Math.PI,o=e%2==0?Math.PI/2+i/2:Math.PI/2;o+=n;for(var l,c=new Array(2*e),h=0;h<e;h++)l=h*i+o,c[2*h]=Math.cos(l),c[2*h+1]=Math.sin(-l);return c},Il=function(e,n){return Math.min(e/4,n/4,8)},Oh=function(e,n){return Math.min(e/10,n/10,8)},Nh=function(e,n){return{heightOffset:Math.min(15,.05*n),widthOffset:Math.min(100,.25*e),ctrlPtOffsetPct:.05}},Dy=ur({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(e){return 1}}),My={pageRank:function(e){for(var n=Dy(e),i=n.dampingFactor,o=n.precision,l=n.iterations,c=n.weight,h=this._private.cy,f=this.byGroup(),g=f.nodes,y=f.edges,x=g.length,S=y.length,A=new Array(x*x),C=new Array(x),L=(1-i)/x,I=0;I<x;I++){for(var P=0;P<x;P++)A[I*x+P]=0;C[I]=0}for(var B=0;B<S;B++){var F=y[B],G=F.data("source"),$=F.data("target");if(G!==$){var X=g.indexOfId(G),H=g.indexOfId($),te=c(F);A[H*x+X]+=te,C[X]+=te}}for(var re=1/x+L,ae=0;ae<x;ae++)if(0===C[ae])for(var le=0;le<x;le++)A[le*x+ae]=re;else for(var se=0;se<x;se++){var de=se*x+ae;A[de]=A[de]/C[ae]+L}for(var we,be=new Array(x),fe=new Array(x),ge=0;ge<x;ge++)be[ge]=1;for(var ee=0;ee<l;ee++){for(var Se=0;Se<x;Se++)fe[Se]=0;for(var Ie=0;Ie<x;Ie++)for(var _e=0;_e<x;_e++)fe[Ie]+=A[Ie*x+_e]*be[_e];_y(fe),we=be,be=fe,fe=we;for(var Fe=0,ze=0;ze<x;ze++){var Je=we[ze]-be[ze];Fe+=Je*Je}if(Fe<o)break}return{rank:function(Re){return Re=h.collection(Re)[0],be[g.indexOf(Re)]}}}},cg=ur({root:null,weight:function(e){return 1},directed:!1,alpha:0}),ps={degreeCentralityNormalized:function(e){e=cg(e);var n=this.cy(),i=this.nodes(),o=i.length;if(e.directed){for(var l={},c={},h=0,f=0,g=0;g<o;g++){var y=i[g],x=y.id();e.root=y;var _=this.degreeCentrality(e);h<_.indegree&&(h=_.indegree),f<_.outdegree&&(f=_.outdegree),l[x]=_.indegree,c[x]=_.outdegree}return{indegree:function(P){return 0==h?0:(Ot(P)&&(P=n.filter(P)),l[P.id()]/h)},outdegree:function(P){return 0===f?0:(Ot(P)&&(P=n.filter(P)),c[P.id()]/f)}}}for(var S={},A=0,C=0;C<o;C++){var L=i[C];e.root=L;var I=this.degreeCentrality(e);A<I.degree&&(A=I.degree),S[L.id()]=I.degree}return{degree:function(P){return 0===A?0:(Ot(P)&&(P=n.filter(P)),S[P.id()]/A)}}},degreeCentrality:function(e){e=cg(e);var n=this.cy(),i=this,l=e.root,c=e.weight,h=e.directed,f=e.alpha;if(l=n.collection(l)[0],h){for(var g=l.connectedEdges(),y=g.filter(function($){return $.target().same(l)&&i.has($)}),x=g.filter(function($){return $.source().same(l)&&i.has($)}),_=y.length,S=x.length,A=0,C=0,L=0;L<y.length;L++)A+=c(y[L]);for(var I=0;I<x.length;I++)C+=c(x[I]);return{indegree:Math.pow(_,1-f)*Math.pow(A,f),outdegree:Math.pow(S,1-f)*Math.pow(C,f)}}for(var P=l.connectedEdges().intersection(i),B=P.length,F=0,G=0;G<P.length;G++)F+=c(P[G]);return{degree:Math.pow(B,1-f)*Math.pow(F,f)}}};ps.dc=ps.degreeCentrality,ps.dcn=ps.degreeCentralityNormalised=ps.degreeCentralityNormalized;var dg=ur({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),fs={closenessCentralityNormalized:function(e){for(var n=dg(e),i=n.harmonic,o=n.weight,l=n.directed,c=this.cy(),h={},f=0,g=this.nodes(),y=this.floydWarshall({weight:o,directed:l}),x=0;x<g.length;x++){for(var _=0,S=g[x],A=0;A<g.length;A++)if(x!==A){var C=y.distance(S,g[A]);_+=i?1/C:C}i||(_=1/_),f<_&&(f=_),h[S.id()]=_}return{closeness:function(L){return 0==f?0:(L=Ot(L)?c.filter(L)[0].id():L.id(),h[L]/f)}}},closenessCentrality:function(e){var n=dg(e),i=n.root,o=n.weight,l=n.directed,c=n.harmonic;i=this.filter(i)[0];for(var h=this.dijkstra({root:i,weight:o,directed:l}),f=0,g=this.nodes(),y=0;y<g.length;y++){var x=g[y];if(!x.same(i)){var _=h.distanceTo(x);f+=c?1/_:_}}return c?f:1/f}};fs.cc=fs.closenessCentrality,fs.ccn=fs.closenessCentralityNormalised=fs.closenessCentralityNormalized;var Ay=ur({weight:null,directed:!1}),zh={betweennessCentrality:function(e){for(var n=Ay(e),i=n.directed,o=n.weight,l=null!=o,c=this.cy(),h=this.nodes(),f={},g={},y=0,x=function(B,F){g[B]=F,F>y&&(y=F)},_=function(B){return g[B]},S=0;S<h.length;S++){var A=h[S],C=A.id();f[C]=i?A.outgoers().nodes():A.openNeighborhood().nodes(),x(C,0)}for(var L=function(B){for(var F=h[B].id(),G=[],$={},X={},H={},te=new Ll(function(ze,Je){return H[ze]-H[Je]}),re=0;re<h.length;re++){var ae=h[re].id();$[ae]=[],X[ae]=0,H[ae]=1/0}for(X[F]=1,H[F]=0,te.push(F);!te.empty();){var le=te.pop();if(G.push(le),l)for(var se=0;se<f[le].length;se++){var be,de=f[le][se],we=c.getElementById(le);be=we.edgesTo(de).length>0?we.edgesTo(de)[0]:de.edgesTo(we)[0];var fe=o(be);de=de.id(),H[de]>H[le]+fe&&(H[de]=H[le]+fe,te.nodes.indexOf(de)<0?te.push(de):te.updateItem(de),X[de]=0,$[de]=[]),H[de]==H[le]+fe&&(X[de]=X[de]+X[le],$[de].push(le))}else for(var ge=0;ge<f[le].length;ge++){var ee=f[le][ge].id();H[ee]==1/0&&(te.push(ee),H[ee]=H[le]+1),H[ee]==H[le]+1&&(X[ee]=X[ee]+X[le],$[ee].push(le))}}for(var Se={},Ie=0;Ie<h.length;Ie++)Se[h[Ie].id()]=0;for(;G.length>0;){for(var _e=G.pop(),je=0;je<$[_e].length;je++){var Fe=$[_e][je];Se[Fe]=Se[Fe]+X[Fe]/X[_e]*(1+Se[_e])}_e!=h[B].id()&&x(_e,_(_e)+Se[_e])}},I=0;I<h.length;I++)L(I);var P={betweenness:function(B){var F=c.collection(B).id();return _(F)},betweennessNormalized:function(B){if(0==y)return 0;var F=c.collection(B).id();return _(F)/y}};return P.betweennessNormalised=P.betweennessNormalized,P}};zh.bc=zh.betweennessCentrality;var By=ur({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(e){return 1}]}),Ly=function(e,n){for(var i=0,o=0;o<n.length;o++)i+=n[o](e);return i},hg=function(e,n){for(var i,o=0;o<n;o++){i=0;for(var l=0;l<n;l++)i+=e[l*n+o];for(var c=0;c<n;c++)e[c*n+o]=e[c*n+o]/i}},Oy=function(e,n,i){for(var o=new Array(i*i),l=0;l<i;l++){for(var c=0;c<i;c++)o[l*i+c]=0;for(var h=0;h<i;h++)for(var f=0;f<i;f++)o[l*i+f]+=e[l*i+h]*n[h*i+f]}return o},Ny=function(e,n,i){for(var o=e.slice(0),l=1;l<i;l++)e=Oy(e,o,n);return e},zy=function(e,n,i){for(var o=new Array(n*n),l=0;l<n*n;l++)o[l]=Math.pow(e[l],i);return hg(o,n),o},Iy=function(e,n,i,o){for(var l=0;l<i;l++)if(Math.round(e[l]*Math.pow(10,o))/Math.pow(10,o)!=Math.round(n[l]*Math.pow(10,o))/Math.pow(10,o))return!1;return!0},Ry=function(e,n){for(var i=0;i<e.length;i++)if(!n[i]||e[i].id()!==n[i].id())return!1;return!0},pg=function(e){for(var n=this.nodes(),i=this.edges(),o=this.cy(),l=By(e),c={},h=0;h<n.length;h++)c[n[h].id()]=h;for(var f,g=n.length,y=g*g,x=new Array(y),_=0;_<y;_++)x[_]=0;for(var S=0;S<i.length;S++){var A=i[S],C=c[A.source().id()],L=c[A.target().id()],I=Ly(A,l.attributes);x[C*g+L]+=I,x[L*g+C]+=I}(function(G,$,X){for(var H=0;H<$;H++)G[H*$+H]=X})(x,g,l.multFactor),hg(x,g);for(var P=!0,B=0;P&&B<l.maxIterations;)P=!1,f=Ny(x,g,l.expandFactor),x=zy(f,g,l.inflateFactor),Iy(x,f,y,4)||(P=!0),B++;return function(G){for(var $=0;$<G.length;$++)for(var X=0;X<G.length;X++)$!=X&&Ry(G[$],G[X])&&G.splice(X,1);return G}(function(G,$,X,H){for(var te=[],re=0;re<$;re++){for(var ae=[],le=0;le<$;le++)Math.round(1e3*G[re*$+le])/1e3>0&&ae.push(X[le]);0!==ae.length&&te.push(H.collection(ae))}return te}(x,g,n,o))},Fy={markovClustering:pg,mcl:pg},Vy=function(e){return e},fg=function(e,n){return Math.abs(n-e)},gg=function(e,n,i){return e+fg(n,i)},vg=function(e,n,i){return e+Math.pow(i-n,2)},jy=function(e){return Math.sqrt(e)},qy=function(e,n,i){return Math.max(e,fg(n,i))},Rl=function(e,n,i,o,l){for(var c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Vy,h=o,f=0;f<e;f++)h=l(h,n(f),i(f));return c(h)},gs={euclidean:function(e,n,i){return e>=2?Rl(e,n,i,0,vg,jy):Rl(e,n,i,0,gg)},squaredEuclidean:function(e,n,i){return Rl(e,n,i,0,vg)},manhattan:function(e,n,i){return Rl(e,n,i,0,gg)},max:function(e,n,i){return Rl(e,n,i,-1/0,qy)}};function Mc(e,n,i,o,l,c){var h;return h=Nn(e)?e:gs[e]||gs.euclidean,0===n&&Nn(e)?h(l,c):h(n,i,o,l,c)}gs["squared-euclidean"]=gs.squaredEuclidean,gs.squaredeuclidean=gs.squaredEuclidean;var Xy=ur({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),Ih=function(e){return Xy(e)},Ac=function(e,n,i,o,l){var c="kMedoids"!==l?function(g){return i[g]}:function(g){return o[g](i)};return Mc(e,o.length,c,function(g){return o[g](n)},i,n)},Rh=function(e,n,i){for(var o=i.length,l=new Array(o),c=new Array(o),h=new Array(n),f=null,g=0;g<o;g++)l[g]=e.min(i[g]).value,c[g]=e.max(i[g]).value;for(var y=0;y<n;y++){f=[];for(var x=0;x<o;x++)f[x]=Math.random()*(c[x]-l[x])+l[x];h[y]=f}return h},mg=function(e,n,i,o,l){for(var c=1/0,h=0,f=0;f<n.length;f++){var g=Ac(i,e,n[f],o,l);g<c&&(c=g,h=f)}return h},yg=function(e,n,i){for(var o=[],l=null,c=0;c<n.length;c++)i[(l=n[c]).id()]===e&&o.push(l);return o},Yy=function(e,n,i){for(var o=0;o<e.length;o++)for(var l=0;l<e[o].length;l++)if(Math.abs(e[o][l]-n[o][l])>i)return!1;return!0},Hy=function(e,n,i){for(var o=0;o<i;o++)if(e===n[o])return!0;return!1},bg=function(e,n){var i=new Array(n);if(e.length<50)for(var o=0;o<n;o++){for(var l=e[Math.floor(Math.random()*e.length)];Hy(l,i,o);)l=e[Math.floor(Math.random()*e.length)];i[o]=l}else for(var c=0;c<n;c++)i[c]=e[Math.floor(Math.random()*e.length)];return i},xg=function(e,n,i){for(var o=0,l=0;l<n.length;l++)o+=Ac("manhattan",n[l],e,i,"kMedoids");return o},Wy=function(e,n,i,o,l){for(var c,h,f=0;f<n.length;f++)for(var g=0;g<e.length;g++)o[f][g]=Math.pow(i[f][g],l.m);for(var y=0;y<e.length;y++)for(var x=0;x<l.attributes.length;x++){c=0,h=0;for(var _=0;_<n.length;_++)c+=o[_][y]*l.attributes[x](n[_]),h+=o[_][y];e[y][x]=c/h}},$y=function(e,n,i,o,l){for(var c=0;c<e.length;c++)n[c]=e[c].slice();for(var h,f,g,y=2/(l.m-1),x=0;x<i.length;x++)for(var _=0;_<o.length;_++){h=0;for(var S=0;S<i.length;S++)f=Ac(l.distance,o[_],i[x],l.attributes,"cmeans"),g=Ac(l.distance,o[_],i[S],l.attributes,"cmeans"),h+=Math.pow(f/g,y);e[_][x]=1/h}},wg=function(e){var n,i,o,l,c=this.cy(),h=this.nodes(),f=Ih(e);o=new Array(h.length);for(var g=0;g<h.length;g++)o[g]=new Array(f.k);i=new Array(h.length);for(var y=0;y<h.length;y++)i[y]=new Array(f.k);for(var x=0;x<h.length;x++){for(var _=0,S=0;S<f.k;S++)i[x][S]=Math.random(),_+=i[x][S];for(var A=0;A<f.k;A++)i[x][A]=i[x][A]/_}n=new Array(f.k);for(var C=0;C<f.k;C++)n[C]=new Array(f.attributes.length);l=new Array(h.length);for(var L=0;L<h.length;L++)l[L]=new Array(f.k);for(var I=!0,P=0;I&&P<f.maxIterations;)I=!1,Wy(n,h,i,l,f),$y(i,o,n,h,f),Yy(i,o,f.sensitivityThreshold)||(I=!0),P++;return{clusters:function(B,F,G,$){for(var X,H,te=new Array(G.k),re=0;re<te.length;re++)te[re]=[];for(var ae=0;ae<F.length;ae++){X=-1/0,H=-1;for(var le=0;le<F[0].length;le++)F[ae][le]>X&&(X=F[ae][le],H=le);te[H].push(B[ae])}for(var se=0;se<te.length;se++)te[se]=$.collection(te[se]);return te}(h,i,f,c),degreeOfMembership:i}},Ky={kMeans:function(e){var n,i=this.cy(),o=this.nodes(),l=null,c=Ih(e),h=new Array(c.k),f={};n=c.testMode?"number"==typeof c.testCentroids?Rh(o,c.k,c.attributes):"object"===Zn(c.testCentroids)?c.testCentroids:Rh(o,c.k,c.attributes):Rh(o,c.k,c.attributes);for(var x,_=!0,S=0;_&&S<c.maxIterations;){for(var A=0;A<o.length;A++)f[(l=o[A]).id()]=mg(l,n,c.distance,c.attributes,"kMeans");_=!1;for(var C=0;C<c.k;C++){var L=yg(C,o,f);if(0!==L.length){for(var I=c.attributes.length,P=n[C],B=new Array(I),F=new Array(I),G=0;G<I;G++){F[G]=0;for(var $=0;$<L.length;$++)F[G]+=c.attributes[G](l=L[$]);B[G]=F[G]/L.length,x=c.sensitivityThreshold,Math.abs(P[G]-B[G])<=x||(_=!0)}n[C]=B,h[C]=i.collection(L)}}S++}return h},kMedoids:function(e){var n,i,o=this.cy(),l=this.nodes(),c=null,h=Ih(e),f=new Array(h.k),g={},y=new Array(h.k);h.testMode?"number"==typeof h.testCentroids||(n="object"===Zn(h.testCentroids)?h.testCentroids:bg(l,h.k)):n=bg(l,h.k);for(var x=!0,_=0;x&&_<h.maxIterations;){for(var S=0;S<l.length;S++)g[(c=l[S]).id()]=mg(c,n,h.distance,h.attributes,"kMedoids");x=!1;for(var A=0;A<n.length;A++){var C=yg(A,l,g);if(0!==C.length){y[A]=xg(n[A],C,h.attributes);for(var L=0;L<C.length;L++)(i=xg(C[L],C,h.attributes))<y[A]&&(y[A]=i,n[A]=C[L],x=!0);f[A]=o.collection(C)}}_++}return f},fuzzyCMeans:wg,fcm:wg},Gy=ur({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),Uy={single:"min",complete:"max"},Eg=function(e,n,i,o,l){for(var c,h=0,f=1/0,g=l.attributes,y=function(H,te){return Mc(l.distance,g.length,function(re){return g[re](H)},function(re){return g[re](te)},H,te)},x=0;x<e.length;x++){var _=e[x].key,S=i[_][o[_]];S<f&&(h=_,f=S)}if("threshold"===l.mode&&f>=l.threshold||"dendrogram"===l.mode&&1===e.length)return!1;var A,C=n[h],L=n[o[h]];A="dendrogram"===l.mode?{left:C,right:L,key:C.key}:{value:C.value.concat(L.value),key:C.key},e[C.index]=A,e.splice(L.index,1),n[C.key]=A;for(var I=0;I<e.length;I++){var P=e[I];C.key===P.key?c=1/0:"min"===l.linkage?(c=i[C.key][P.key],i[C.key][P.key]>i[L.key][P.key]&&(c=i[L.key][P.key])):"max"===l.linkage?(c=i[C.key][P.key],i[C.key][P.key]<i[L.key][P.key]&&(c=i[L.key][P.key])):c="mean"===l.linkage?(i[C.key][P.key]*C.size+i[L.key][P.key]*L.size)/(C.size+L.size):"dendrogram"===l.mode?y(P.value,C.value):y(P.value[0],C.value[0]),i[C.key][P.key]=i[P.key][C.key]=c}for(var B=0;B<e.length;B++){var F=e[B].key;if(o[F]===C.key||o[F]===L.key){for(var G=F,$=0;$<e.length;$++){var X=e[$].key;i[F][X]<i[F][G]&&(G=X)}o[F]=G}e[B].index=B}return C.key=L.key=C.index=L.index=null,!0},Bc=function e(n,i,o){n&&(n.value?i.push(n.value):(n.left&&e(n.left,i),n.right&&e(n.right,i)))},_g=function(e){for(var n=this.cy(),i=this.nodes(),o=(B=void 0,void 0,B=Gy(e),null!=(F=Uy[B.linkage])&&(B.linkage=F),B),l=o.attributes,c=function(P,B){return Mc(o.distance,l.length,function(F){return l[F](P)},function(F){return l[F](B)},P,B)},h=[],f=[],g=[],y=[],x=0;x<i.length;x++){var _={value:"dendrogram"===o.mode?i[x]:[i[x]],key:x,index:x};h[x]=_,y[x]=_,f[x]=[],g[x]=0}for(var B,F,S=0;S<h.length;S++)for(var A=0;A<=S;A++){var C;C="dendrogram"===o.mode?S===A?1/0:c(h[S].value,h[A].value):S===A?1/0:c(h[S].value[0],h[A].value[0]),f[S][A]=C,f[A][S]=C,C<f[S][g[S]]&&(g[S]=A)}for(var L,I=Eg(h,y,f,g,o);I;)I=Eg(h,y,f,g,o);return"dendrogram"===o.mode?(L=function P(B,F,G){if(!B)return[];var $=[],X=[],H=[];return 0===F?(B.left&&Bc(B.left,$),B.right&&Bc(B.right,X),H=$.concat(X),[G.collection(H)]):1===F?B.value?[G.collection(B.value)]:(B.left&&Bc(B.left,$),B.right&&Bc(B.right,X),[G.collection($),G.collection(X)]):B.value?[G.collection(B.value)]:(B.left&&($=P(B.left,F-1,G)),B.right&&(X=P(B.right,F-1,G)),$.concat(X))}(h[0],o.dendrogramDepth,n),o.addDendrogram&&function P(B,F){if(!B)return"";if(B.left&&B.right){var G=P(B.left,F),$=P(B.right,F),X=F.add({group:"nodes",data:{id:G+","+$}});return F.add({group:"edges",data:{source:G,target:X.id()}}),F.add({group:"edges",data:{source:$,target:X.id()}}),X.id()}return B.value?B.value.id():void 0}(h[0],n)):(L=new Array(h.length),h.forEach(function(P,B){P.key=P.index=null,L[B]=n.collection(P.value)})),L},Zy={hierarchicalClustering:_g,hca:_g},Qy=ur({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),Jy=function(e,n,i,o){var l=function(c,h){return o[h](c)};return-Mc(e,o.length,function(c){return l(n,c)},function(c){return l(i,c)},n,i)},e1=function(e,n){return"median"===n?function(i){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.length,h=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],f=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];arguments.length>3&&void 0!==arguments[3]&&!arguments[3]?(l<i.length&&i.splice(l,i.length-l),o>0&&i.splice(0,o)):i=i.slice(o,l);for(var g=0,y=i.length-1;y>=0;y--)f?isFinite(i[y])||(i[y]=-1/0,g++):i.splice(y,1);h&&i.sort(function(A,C){return A-C});var _=i.length,S=Math.floor(_/2);return _%2!=0?i[S+1+g]:(i[S-1+g]+i[S+g])/2}(e):"mean"===n?function(i){for(var l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.length,c=0,h=0,f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;f<l;f++){var g=i[f];isFinite(g)&&(c+=g,h++)}return c/h}(e):"min"===n?function(i){for(var l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.length,c=1/0,h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;h<l;h++){var f=i[h];isFinite(f)&&(c=Math.min(f,c))}return c}(e):"max"===n?function(i){for(var l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.length,c=-1/0,h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;h<l;h++){var f=i[h];isFinite(f)&&(c=Math.max(f,c))}return c}(e):n},kg=function(e,n,i){for(var o=[],l=0;l<e;l++){for(var c=-1,h=-1/0,f=0;f<i.length;f++){var g=i[f];n[l*e+g]>h&&(c=g,h=n[l*e+g])}c>0&&o.push(c)}for(var y=0;y<i.length;y++)o[i[y]]=i[y];return o},Cg=function(e){for(var n,i,o,l,c,h,f=this.cy(),g=this.nodes(),y=function(ot){var U=ot.damping,pe=ot.preference;.5<=U&&U<1||zn("Damping must range on [0.5, 1).  Got: ".concat(U));var Ce=["median","mean","min","max"];return Ce.some(function(Oe){return Oe===pe})||gt(pe)||zn("Preference must be one of [".concat(Ce.map(function(Oe){return"'".concat(Oe,"'")}).join(", "),"] or a number.  Got: ").concat(pe)),Qy(ot)}(e),x={},_=0;_<g.length;_++)x[g[_].id()]=_;i=(n=g.length)*n,o=new Array(i);for(var S=0;S<i;S++)o[S]=-1/0;for(var A=0;A<n;A++)for(var C=0;C<n;C++)A!==C&&(o[A*n+C]=Jy(y.distance,g[A],g[C],y.attributes));l=e1(o,y.preference);for(var L=0;L<n;L++)o[L*n+L]=l;c=new Array(i);for(var I=0;I<i;I++)c[I]=0;h=new Array(i);for(var P=0;P<i;P++)h[P]=0;for(var B=new Array(n),F=new Array(n),G=new Array(n),$=0;$<n;$++)B[$]=0,F[$]=0,G[$]=0;for(var X,H=new Array(n*y.minIterations),te=0;te<H.length;te++)H[te]=0;for(X=0;X<y.maxIterations;X++){for(var re=0;re<n;re++){for(var ae=-1/0,le=-1/0,se=-1,de=0,we=0;we<n;we++)B[we]=c[re*n+we],(de=h[re*n+we]+o[re*n+we])>=ae?(le=ae,ae=de,se=we):de>le&&(le=de);for(var be=0;be<n;be++)c[re*n+be]=(1-y.damping)*(o[re*n+be]-ae)+y.damping*B[be];c[re*n+se]=(1-y.damping)*(o[re*n+se]-le)+y.damping*B[se]}for(var fe=0;fe<n;fe++){for(var ge=0,ee=0;ee<n;ee++)B[ee]=h[ee*n+fe],F[ee]=Math.max(0,c[ee*n+fe]),ge+=F[ee];ge-=F[fe],F[fe]=c[fe*n+fe],ge+=F[fe];for(var Se=0;Se<n;Se++)h[Se*n+fe]=(1-y.damping)*Math.min(0,ge-F[Se])+y.damping*B[Se];h[fe*n+fe]=(1-y.damping)*(ge-F[fe])+y.damping*B[fe]}for(var Ie=0,_e=0;_e<n;_e++){var je=h[_e*n+_e]+c[_e*n+_e]>0?1:0;H[X%y.minIterations*n+_e]=je,Ie+=je}if(Ie>0&&(X>=y.minIterations-1||X==y.maxIterations-1)){for(var Fe=0,ze=0;ze<n;ze++){G[ze]=0;for(var Je=0;Je<y.minIterations;Je++)G[ze]+=H[Je*n+ze];0!==G[ze]&&G[ze]!==y.minIterations||Fe++}if(Fe===n)break}}for(var Re=function(ot,U,pe){for(var Ce=[],Oe=0;Oe<ot;Oe++)U[Oe*ot+Oe]+pe[Oe*ot+Oe]>0&&Ce.push(Oe);return Ce}(n,c,h),Ge=function(ot,U,pe){for(var Ce=kg(ot,U,pe),Oe=0;Oe<pe.length;Oe++){for(var Ae=[],Ze=0;Ze<Ce.length;Ze++)Ce[Ze]===pe[Oe]&&Ae.push(Ze);for(var Ue=-1,Ct=-1/0,rt=0;rt<Ae.length;rt++){for(var bt=0,mt=0;mt<Ae.length;mt++)bt+=U[Ae[mt]*ot+Ae[rt]];bt>Ct&&(Ue=rt,Ct=bt)}pe[Oe]=Ae[Ue]}return kg(ot,U,pe)}(n,o,Re),st={},pt=0;pt<Re.length;pt++)st[Re[pt]]=[];for(var _t=0;_t<g.length;_t++){var We=Ge[x[g[_t].id()]];null!=We&&st[We].push(g[_t])}for(var ft=new Array(Re.length),vt=0;vt<Re.length;vt++)ft[vt]=f.collection(st[Re[vt]]);return ft},t1={affinityPropagation:Cg,ap:Cg},n1=ur({root:void 0,directed:!1}),Lc=function(){var e=this,n={},i=0,o=0,l=[],c=[],h={},f=function y(x,_,S){x===S&&(o+=1),n[_]={id:i,low:i++,cutVertex:!1};var A,C,L,I,P=e.getElementById(_).connectedEdges().intersection(e);0===P.size()?l.push(e.spawn(e.getElementById(_))):P.forEach(function(B){A=B.source().id(),C=B.target().id(),(L=A===_?C:A)!==S&&(I=B.id(),h[I]||(h[I]=!0,c.push({x:_,y:L,edge:B})),L in n?n[_].low=Math.min(n[_].low,n[L].id):(y(x,L,_),n[_].low=Math.min(n[_].low,n[L].low),n[_].id<=n[L].low&&(n[_].cutVertex=!0,function(F,G){for(var $=c.length-1,X=[],H=e.spawn();c[$].x!=F||c[$].y!=G;)X.push(c.pop().edge),$--;X.push(c.pop().edge),X.forEach(function(te){var re=te.connectedNodes().intersection(e);H.merge(te),re.forEach(function(ae){var le=ae.id(),se=ae.connectedEdges().intersection(e);H.merge(ae),H.merge(n[le].cutVertex?se.filter(function(de){return de.isLoop()}):se)})}),l.push(H)}(_,L))))})};e.forEach(function(y){if(y.isNode()){var x=y.id();x in n||(o=0,f(x,x),n[x].cutVertex=o>1)}});var g=Object.keys(n).filter(function(y){return n[y].cutVertex}).map(function(y){return e.getElementById(y)});return{cut:e.spawn(g),components:l}},Oc=function(){var e=this,n={},i=0,o=[],l=[],c=e.spawn(e);return e.forEach(function(h){if(h.isNode()){var f=h.id();f in n||function g(y){if(l.push(y),n[y]={index:i,low:i++,explored:!1},e.getElementById(y).connectedEdges().intersection(e).forEach(function(C){var L=C.target().id();L!==y&&(L in n||g(L),n[L].explored||(n[y].low=Math.min(n[y].low,n[L].low)))}),n[y].index===n[y].low){for(var x=e.spawn();;){var _=l.pop();if(x.merge(e.getElementById(_)),n[_].low=n[y].index,n[_].explored=!0,_===y)break}var S=x.edgesWith(x),A=x.merge(S);o.push(A),c=c.difference(A)}}(f)}}),{cut:c,components:o}},Sg={};[Bl,hy,py,gy,my,by,Ey,My,ps,fs,zh,Fy,Ky,Zy,t1,{hierholzer:function(e){if(!en(e)){var n=arguments;e={root:n[0],directed:n[1]}}var i,o,l,c=n1(e),h=c.root,f=c.directed,g=this,y=!1;h&&(l=Ot(h)?this.filter(h)[0].id():h[0].id());var x={},_={};g.forEach(f?function(P){var B=P.id();if(P.isNode()){var F=P.indegree(!0),G=P.outdegree(!0),$=F-G,X=G-F;1==$?i?y=!0:i=B:1==X?o?y=!0:o=B:(X>1||$>1)&&(y=!0),x[B]=[],P.outgoers().forEach(function(H){H.isEdge()&&x[B].push(H.id())})}else _[B]=[void 0,P.target().id()]}:function(P){var B=P.id();P.isNode()?(P.degree(!0)%2&&(i?o?y=!0:o=B:i=B),x[B]=[],P.connectedEdges().forEach(function(F){return x[B].push(F.id())})):_[B]=[P.source().id(),P.target().id()]});var S={found:!1,trail:void 0};if(y)return S;if(o&&i)if(f){if(l&&o!=l)return S;l=o}else{if(l&&o!=l&&i!=l)return S;l||(l=o)}else l||(l=g[0].id());var A=function(P){for(var B,F,G,$=P,X=[P];x[$].length;)B=x[$].shift(),F=_[B][0],$!=(G=_[B][1])?(x[G]=x[G].filter(function(H){return H!=B}),$=G):f||$==F||(x[F]=x[F].filter(function(H){return H!=B}),$=F),X.unshift(B),X.unshift($);return X},C=[],L=[];for(L=A(l);1!=L.length;)0==x[L[0]].length?(C.unshift(g.getElementById(L.shift())),C.unshift(g.getElementById(L.shift()))):L=A(L.shift()).concat(L);for(var I in C.unshift(g.getElementById(L.shift())),x)if(x[I].length)return S;return S.found=!0,S.trail=this.spawn(C,!0),S}},{hopcroftTarjanBiconnected:Lc,htbc:Lc,htb:Lc,hopcroftTarjanBiconnectedComponents:Lc},{tarjanStronglyConnected:Oc,tsc:Oc,tscc:Oc,tarjanStronglyConnectedComponents:Oc}].forEach(function(e){It(Sg,e)});var ua=function e(n){if(!(this instanceof e))return new e(n);this.id="Thenable/1.0.7",this.state=0,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},"function"==typeof n&&n.call(this,this.fulfill.bind(this),this.reject.bind(this))};ua.prototype={fulfill:function(e){return Tg(this,1,"fulfillValue",e)},reject:function(e){return Tg(this,2,"rejectReason",e)},then:function(e,n){var i=new ua;return this.onFulfilled.push(Mg(e,i,"fulfill")),this.onRejected.push(Mg(n,i,"reject")),Pg(this),i.proxy}};var Tg=function(e,n,i,o){return 0===e.state&&(e.state=n,e[i]=o,Pg(e)),e},Pg=function(e){1===e.state?Dg(e,"onFulfilled",e.fulfillValue):2===e.state&&Dg(e,"onRejected",e.rejectReason)},Dg=function(e,n,i){if(0!==e[n].length){var o=e[n];e[n]=[];var l=function(){for(var c=0;c<o.length;c++)o[c](i)};"function"==typeof setImmediate?setImmediate(l):setTimeout(l,0)}},Mg=function(e,n,i){return function(o){if("function"!=typeof e)n[i].call(n,o);else{var l;try{l=e(o)}catch(c){return void n.reject(c)}r1(n,l)}}},r1=function e(n,i){if(n!==i&&n.proxy!==i){var o;if("object"===Zn(i)&&null!==i||"function"==typeof i)try{o=i.then}catch(c){return void n.reject(c)}if("function"!=typeof o)n.fulfill(i);else{var l=!1;try{o.call(i,function(c){l||(l=!0,c===i?n.reject(new TypeError("circular thenable chain")):e(n,c))},function(c){l||(l=!0,n.reject(c))})}catch(c){l||n.reject(c)}}}else n.reject(new TypeError("cannot resolve promise with itself"))};ua.all=function(e){return new ua(function(n,i){for(var o=new Array(e.length),l=0,c=function(f,g){o[f]=g,++l===e.length&&n(o)},h=0;h<e.length;h++)!function(f){var g=e[f];null!=g&&null!=g.then?g.then(function(y){c(f,y)},function(y){i(y)}):c(f,g)}(h)})},ua.resolve=function(e){return new ua(function(n,i){n(e)})},ua.reject=function(e){return new ua(function(n,i){i(e)})};var vs=typeof Promise<"u"?Promise:ua,Fh=function(e,n,i){var o=wh(e),l=!o,c=this._private=It({duration:1e3},n,i);if(c.target=e,c.style=c.style||c.css,c.started=!1,c.playing=!1,c.hooked=!1,c.applying=!1,c.progress=0,c.completes=[],c.frames=[],c.complete&&Nn(c.complete)&&c.completes.push(c.complete),l){var h=e.position();c.startPosition=c.startPosition||{x:h.x,y:h.y},c.startStyle=c.startStyle||e.cy().style().getAnimationStartStyle(e,c.style)}if(o){var f=e.pan();c.startPan={x:f.x,y:f.y},c.startZoom=e.zoom()}this.length=1,this[0]=this},Co=Fh.prototype;It(Co,{instanceString:function(){return"animation"},hook:function(){var e=this._private;if(!e.hooked){var n=e.target._private.animation;(e.queue?n.queue:n.current).push(this),Gr(e.target)&&e.target.cy().addToAnimationPool(e.target),e.hooked=!0}return this},play:function(){var e=this._private;return 1===e.progress&&(e.progress=0),e.playing=!0,e.started=!1,e.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var e=this._private;return e.applying=!0,e.started=!1,e.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var e=this._private;return e.playing=!1,e.started=!1,this},stop:function(){var e=this._private;return e.playing=!1,e.started=!1,e.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(e){var n=this._private;return void 0===e?n.progress*n.duration:this.progress(e/n.duration)},progress:function(e){var n=this._private,i=n.playing;return void 0===e?n.progress:(i&&this.pause(),n.progress=e,n.started=!1,i&&this.play(),this)},completed:function(){return 1===this._private.progress},reverse:function(){var e=this._private,n=e.playing;n&&this.pause(),e.progress=1-e.progress,e.started=!1;var i=function(f,g){var y=e[f];null!=y&&(e[f]=e[g],e[g]=y)};if(i("zoom","startZoom"),i("pan","startPan"),i("position","startPosition"),e.style)for(var o=0;o<e.style.length;o++){var l=e.style[o],c=l.name,h=e.startStyle[c];e.startStyle[c]=l,e.style[o]=h}return n&&this.play(),this},promise:function(e){var n,i=this._private;return n="frame"===e?i.frames:i.completes,new vs(function(o,l){n.push(function(){o()})})}}),Co.complete=Co.completed,Co.run=Co.play,Co.running=Co.playing;var Ag,i1={animated:function(){return function(){var e=void 0!==this.length?this:[this];if(!(this._private.cy||this).styleEnabled())return!1;var n=e[0];return n?n._private.animation.current.length>0:void 0}},clearQueue:function(){return function(){var e=void 0!==this.length?this:[this];if(!(this._private.cy||this).styleEnabled())return this;for(var n=0;n<e.length;n++)e[n]._private.animation.queue=[];return this}},delay:function(){return function(e,n){return(this._private.cy||this).styleEnabled()?this.animate({delay:e,duration:e,complete:n}):this}},delayAnimation:function(){return function(e,n){return(this._private.cy||this).styleEnabled()?this.animation({delay:e,duration:e,complete:n}):this}},animation:function(){return function(e,n){var i=void 0!==this.length,o=i?this:[this],l=this._private.cy||this,c=!i,h=!c;if(!l.styleEnabled())return this;var f=l.style();if(e=It({},e,n),0===Object.keys(e).length)return new Fh(o[0],e);switch(void 0===e.duration&&(e.duration=400),e.duration){case"slow":e.duration=600;break;case"fast":e.duration=200}if(h&&(e.style=f.getPropsList(e.style||e.css),e.css=void 0),h&&null!=e.renderedPosition){var g=e.renderedPosition,y=l.pan(),x=l.zoom();e.position=rg(g,x,y)}if(c&&null!=e.panBy){var _=e.panBy,S=l.pan();e.pan={x:S.x+_.x,y:S.y+_.y}}var A=e.center||e.centre;if(c&&null!=A){var C=l.getCenterPan(A.eles,e.zoom);null!=C&&(e.pan=C)}if(c&&null!=e.fit){var L=e.fit,I=l.getFitViewport(L.eles||L.boundingBox,L.padding);null!=I&&(e.pan=I.pan,e.zoom=I.zoom)}if(c&&en(e.zoom)){var P=l.getZoomedViewport(e.zoom);null!=P?(P.zoomed&&(e.zoom=P.zoom),P.panned&&(e.pan=P.pan)):e.zoom=null}return new Fh(o[0],e)}},animate:function(){return function(e,n){var i=void 0!==this.length?this:[this];if(!(this._private.cy||this).styleEnabled())return this;n&&(e=It({},e,n));for(var o=0;o<i.length;o++){var l=i[o],c=l.animated()&&(void 0===e.queue||e.queue);l.animation(e,c?{queue:!0}:void 0).play()}return this}},stop:function(){return function(e,n){var i=void 0!==this.length?this:[this],o=this._private.cy||this;if(!o.styleEnabled())return this;for(var l=0;l<i.length;l++){for(var c=i[l]._private,h=c.animation.current,f=0;f<h.length;f++)n&&(h[f]._private.duration=0);e&&(c.animation.queue=[]),n||(c.animation.current=[])}return o.notify("draw"),this}}},Nc=Array.isArray,a1=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o1=/^\w*$/,s1=function(e,n){if(Nc(e))return!1;var i=typeof e;return!("number"!=i&&"symbol"!=i&&"boolean"!=i&&null!=e&&!Dl(e))||o1.test(e)||!a1.test(e)||null!=n&&e in Object(n)},l1=function(e){if(!xo(e))return!1;var n=Yf(e);return"[object Function]"==n||"[object GeneratorFunction]"==n||"[object AsyncFunction]"==n||"[object Proxy]"==n},Vh=mc["__core-js_shared__"],Bg=(Ag=/[^.]+$/.exec(Vh&&Vh.keys&&Vh.keys.IE_PROTO||""))?"Symbol(src)_1."+Ag:"",u1=function(e){return!!Bg&&Bg in e},c1=Function.prototype.toString,d1=function(e){if(null!=e){try{return c1.call(e)}catch{}try{return e+""}catch{}}return""},h1=/^\[object .+?Constructor\]$/,p1=Function.prototype,f1=Object.prototype,g1=p1.toString,v1=f1.hasOwnProperty,m1=RegExp("^"+g1.call(v1).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),y1=function(e){return!(!xo(e)||u1(e))&&(l1(e)?m1:h1).test(d1(e))},b1=function(e,n){return e?.[n]},jh=function(e,n){var i=b1(e,n);return y1(i)?i:void 0},Fl=jh(Object,"create"),x1=function(){this.__data__=Fl?Fl(null):{},this.size=0},w1=function(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n},E1=Object.prototype.hasOwnProperty,_1=function(e){var n=this.__data__;if(Fl){var i=n[e];return"__lodash_hash_undefined__"===i?void 0:i}return E1.call(n,e)?n[e]:void 0},k1=Object.prototype.hasOwnProperty,C1=function(e){var n=this.__data__;return Fl?void 0!==n[e]:k1.call(n,e)},S1=function(e,n){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=Fl&&void 0===n?"__lodash_hash_undefined__":n,this};function ms(e){var n=-1,i=null==e?0:e.length;for(this.clear();++n<i;){var o=e[n];this.set(o[0],o[1])}}ms.prototype.clear=x1,ms.prototype.delete=w1,ms.prototype.get=_1,ms.prototype.has=C1,ms.prototype.set=S1;var Lg=ms,T1=function(){this.__data__=[],this.size=0},Og=function(e,n){return e===n||e!=e&&n!=n},zc=function(e,n){for(var i=e.length;i--;)if(Og(e[i][0],n))return i;return-1},P1=Array.prototype.splice,D1=function(e){var n=this.__data__,i=zc(n,e);return!(i<0||(i==n.length-1?n.pop():P1.call(n,i,1),--this.size,0))},M1=function(e){var n=this.__data__,i=zc(n,e);return i<0?void 0:n[i][1]},A1=function(e){return zc(this.__data__,e)>-1},B1=function(e,n){var i=this.__data__,o=zc(i,e);return o<0?(++this.size,i.push([e,n])):i[o][1]=n,this};function ys(e){var n=-1,i=null==e?0:e.length;for(this.clear();++n<i;){var o=e[n];this.set(o[0],o[1])}}ys.prototype.clear=T1,ys.prototype.delete=D1,ys.prototype.get=M1,ys.prototype.has=A1,ys.prototype.set=B1;var L1=ys,O1=jh(mc,"Map"),N1=function(){this.size=0,this.__data__={hash:new Lg,map:new(O1||L1),string:new Lg}},z1=function(e){var n=typeof e;return"string"==n||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==e:null===e},Ic=function(e,n){var i=e.__data__;return z1(n)?i["string"==typeof n?"string":"hash"]:i.map},I1=function(e){var n=Ic(this,e).delete(e);return this.size-=n?1:0,n},R1=function(e){return Ic(this,e).get(e)},F1=function(e){return Ic(this,e).has(e)},V1=function(e,n){var i=Ic(this,e),o=i.size;return i.set(e,n),this.size+=i.size==o?0:1,this};function bs(e){var n=-1,i=null==e?0:e.length;for(this.clear();++n<i;){var o=e[n];this.set(o[0],o[1])}}bs.prototype.clear=N1,bs.prototype.delete=I1,bs.prototype.get=R1,bs.prototype.has=F1,bs.prototype.set=V1;var Ng=bs;function qh(e,n){if("function"!=typeof e||null!=n&&"function"!=typeof n)throw new TypeError("Expected a function");var i=function(){var o=arguments,l=n?n.apply(this,o):o[0],c=i.cache;if(c.has(l))return c.get(l);var h=e.apply(this,o);return i.cache=c.set(l,h)||c,h};return i.cache=new(qh.Cache||Ng),i}qh.Cache=Ng;var j1=qh,q1=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,X1=/\\(\\)?/g,zg=function(e){var n=j1(function(e){var n=[];return 46===e.charCodeAt(0)&&n.push(""),e.replace(q1,function(i,o,l,c){n.push(l?c.replace(X1,"$1"):o||i)}),n},function(o){return 500===i.size&&i.clear(),o}),i=n.cache;return n}(),Ig=function(e,n){for(var i=-1,o=null==e?0:e.length,l=Array(o);++i<o;)l[i]=n(e[i],i,e);return l},Rg=ls?ls.prototype:void 0,Fg=Rg?Rg.toString:void 0,Y1=function e(n){if("string"==typeof n)return n;if(Nc(n))return Ig(n,e)+"";if(Dl(n))return Fg?Fg.call(n):"";var i=n+"";return"0"==i&&1/n==-1/0?"-0":i},Vg=function(e){return null==e?"":Y1(e)},jg=function(e,n){return Nc(e)?e:s1(e,n)?[e]:zg(Vg(e))},Xh=function(e){if("string"==typeof e||Dl(e))return e;var n=e+"";return"0"==n&&1/e==-1/0?"-0":n},H1=function(e,n){for(var i=0,o=(n=jg(n,e)).length;null!=e&&i<o;)e=e[Xh(n[i++])];return i&&i==o?e:void 0},W1=function(e,n,i){var o=null==e?void 0:H1(e,n);return void 0===o?i:o},qg=function(){try{var e=jh(Object,"defineProperty");return e({},"",{}),e}catch{}}(),$1=function(e,n,i){"__proto__"==n&&qg?qg(e,n,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[n]=i},K1=Object.prototype.hasOwnProperty,G1=function(e,n,i){var o=e[n];K1.call(e,n)&&Og(o,i)&&(void 0!==i||n in e)||$1(e,n,i)},U1=/^(?:0|[1-9]\d*)$/,Z1=function(e,n){var i=typeof e;return!!(n=n??9007199254740991)&&("number"==i||"symbol"!=i&&U1.test(e))&&e>-1&&e%1==0&&e<n},Q1=function(e,n,i,o){if(!xo(e))return e;for(var l=-1,c=(n=jg(n,e)).length,h=c-1,f=e;null!=f&&++l<c;){var g=Xh(n[l]),y=i;if("__proto__"===g||"constructor"===g||"prototype"===g)return e;if(l!=h){var x=f[g];void 0===(y=o?o(x,g,f):void 0)&&(y=xo(x)?x:Z1(n[l+1])?[]:{})}G1(f,g,y),f=f[g]}return e},J1=function(e,n,i){return null==e?e:Q1(e,n,i)},eb=function(e,n){var i=-1,o=e.length;for(n||(n=Array(o));++i<o;)n[i]=e[i];return n},tb=function(e){return Nc(e)?Ig(e,Xh):Dl(e)?[e]:eb(zg(Vg(e)))},vn={};[i1,{data:function(e){return e=It({},{field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(n){},beforeSet:function(n,i){},onSet:function(n){},canSet:function(n){return!0}},e),function(n,i){var o=e,l=void 0!==this.length,c=l?this:[this],h=l?this[0]:this;if(Ot(n)){var f,g=-1!==n.indexOf(".")&&tb(n);if(o.allowGetting&&void 0===i)return h&&(o.beforeGet(h),f=g&&void 0===h._private[o.field][n]?W1(h._private[o.field],g):h._private[o.field][n]),f;if(o.allowSetting&&void 0!==i&&!o.immutableKeys[n]){var y=Af({},n,i);o.beforeSet(this,y);for(var x=0,_=c.length;x<_;x++){var S=c[x];o.canSet(S)&&(g&&void 0===h._private[o.field][n]?J1(S._private[o.field],g,i):S._private[o.field][n]=i)}o.updateStyle&&this.updateStyle(),o.onSet(this),o.settingTriggersEvent&&this[o.triggerFnName](o.settingEvent)}}else if(o.allowSetting&&en(n)){var A,C,L=n,I=Object.keys(L);o.beforeSet(this,L);for(var P=0;P<I.length;P++)if(C=L[A=I[P]],!o.immutableKeys[A])for(var B=0;B<c.length;B++){var F=c[B];o.canSet(F)&&(F._private[o.field][A]=C)}o.updateStyle&&this.updateStyle(),o.onSet(this),o.settingTriggersEvent&&this[o.triggerFnName](o.settingEvent)}else if(o.allowBinding&&Nn(n))this.on(o.bindingEvent,n);else if(o.allowGetting&&void 0===n){var $;return h&&(o.beforeGet(h),$=h._private[o.field]),$}return this}},removeData:function(e){return e=It({},{field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}},e),function(n){var i=e,o=void 0!==this.length?this:[this];if(Ot(n)){for(var l=n.split(/\s+/),c=l.length,h=0;h<c;h++){var f=l[h];if(!Ma(f)&&!i.immutableKeys[f])for(var g=0,y=o.length;g<y;g++)o[g]._private[i.field][f]=void 0}i.triggerEvent&&this[i.triggerFnName](i.event)}else if(void 0===n){for(var x=0,_=o.length;x<_;x++)for(var S=o[x]._private[i.field],A=Object.keys(S),C=0;C<A.length;C++){var L=A[C];!i.immutableKeys[L]&&(S[L]=void 0)}i.triggerEvent&&this[i.triggerFnName](i.event)}return this}}},{eventAliasesOn:function(e){var n=e;n.addListener=n.listen=n.bind=n.on,n.unlisten=n.unbind=n.off=n.removeListener,n.trigger=n.emit,n.pon=n.promiseOn=function(i,o){var l=this,c=Array.prototype.slice.call(arguments,0);return new vs(function(h,f){var g=c.concat([function(x){l.off.apply(l,y),h(x)}]),y=g.concat([]);l.on.apply(l,g)})}}}].forEach(function(e){It(vn,e)});var nb={animate:vn.animate(),animation:vn.animation(),animated:vn.animated(),clearQueue:vn.clearQueue(),delay:vn.delay(),delayAnimation:vn.delayAnimation(),stop:vn.stop()},Rc={classes:function(e){if(void 0===e){var n=[];return this[0]._private.classes.forEach(function(_){return n.push(_)}),n}yn(e)||(e=(e||"").match(/\S+/g)||[]);for(var i=[],o=new us(e),l=0;l<this.length;l++){for(var c=this[l],h=c._private,f=h.classes,g=!1,y=0;y<e.length;y++)if(!f.has(e[y])){g=!0;break}g||(g=f.size!==e.length),g&&(h.classes=o,i.push(c))}return i.length>0&&this.spawn(i).updateStyle().emit("class"),this},addClass:function(e){return this.toggleClass(e,!0)},hasClass:function(e){var n=this[0];return null!=n&&n._private.classes.has(e)},toggleClass:function(e,n){yn(e)||(e=e.match(/\S+/g)||[]);for(var i=void 0===n,o=[],l=0,c=this.length;l<c;l++)for(var h=this[l],f=h._private.classes,g=!1,y=0;y<e.length;y++){var x=e[y],_=f.has(x),S=!1;n||i&&!_?(f.add(x),S=!0):(!n||i&&_)&&(f.delete(x),S=!0),!g&&S&&(o.push(h),g=!0)}return o.length>0&&this.spawn(o).updateStyle().emit("class"),this},removeClass:function(e){return this.toggleClass(e,!1)},flashClass:function(e,n){var i=this;if(null==n)n=250;else if(0===n)return i;return i.addClass(e),setTimeout(function(){i.removeClass(e)},n),i}};Rc.className=Rc.classNames=Rc.classes;var tn={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:"\"(?:\\\\\"|[^\"])*\"|'(?:\\\\'|[^'])*'",number:_h,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};tn.variable="(?:[\\w-.]|(?:\\\\"+tn.metaChar+"))+",tn.className="(?:[\\w-]|(?:\\\\"+tn.metaChar+"))+",tn.value=tn.string+"|"+tn.number,tn.id=tn.variable,function(){var e,n,i;for(e=tn.comparatorOp.split("|"),i=0;i<e.length;i++)tn.comparatorOp+="|@"+(n=e[i]);for(e=tn.comparatorOp.split("|"),i=0;i<e.length;i++)(n=e[i]).indexOf("!")>=0||"="!==n&&(tn.comparatorOp+="|\\!"+n)}();var Yh=0,Xg=1,Yg=2,Hh=3,Wh=4,$h=5,Kh=6,Gh=7,Fc=8,Uh=9,Zh=10,Qh=11,Hg=12,Wg=13,Jh=14,ep=15,tp=16,Vc=17,jc=18,qc=19,xs=20,np=[{selector:":selected",matches:function(e){return e.selected()}},{selector:":unselected",matches:function(e){return!e.selected()}},{selector:":selectable",matches:function(e){return e.selectable()}},{selector:":unselectable",matches:function(e){return!e.selectable()}},{selector:":locked",matches:function(e){return e.locked()}},{selector:":unlocked",matches:function(e){return!e.locked()}},{selector:":visible",matches:function(e){return e.visible()}},{selector:":hidden",matches:function(e){return!e.visible()}},{selector:":transparent",matches:function(e){return e.transparent()}},{selector:":grabbed",matches:function(e){return e.grabbed()}},{selector:":free",matches:function(e){return!e.grabbed()}},{selector:":removed",matches:function(e){return e.removed()}},{selector:":inside",matches:function(e){return!e.removed()}},{selector:":grabbable",matches:function(e){return e.grabbable()}},{selector:":ungrabbable",matches:function(e){return!e.grabbable()}},{selector:":animated",matches:function(e){return e.animated()}},{selector:":unanimated",matches:function(e){return!e.animated()}},{selector:":parent",matches:function(e){return e.isParent()}},{selector:":childless",matches:function(e){return e.isChildless()}},{selector:":child",matches:function(e){return e.isChild()}},{selector:":orphan",matches:function(e){return e.isOrphan()}},{selector:":nonorphan",matches:function(e){return e.isChild()}},{selector:":compound",matches:function(e){return e.isNode()?e.isParent():e.source().isParent()||e.target().isParent()}},{selector:":loop",matches:function(e){return e.isLoop()}},{selector:":simple",matches:function(e){return e.isSimple()}},{selector:":active",matches:function(e){return e.active()}},{selector:":inactive",matches:function(e){return!e.active()}},{selector:":backgrounding",matches:function(e){return e.backgrounding()}},{selector:":nonbackgrounding",matches:function(e){return!e.backgrounding()}}].sort(function(e,n){return-1*Ff(e.selector,n.selector)}),rb=function(){for(var e,n={},i=0;i<np.length;i++)n[(e=np[i]).selector]=e.matches;return n}(),ib="("+np.map(function(e){return e.selector}).join("|")+")",ws=function(e){return e.replace(new RegExp("\\\\("+tn.metaChar+")","g"),function(n,i){return i})},Na=function(e,n,i){e[e.length-1]=i},rp=[{name:"group",query:!0,regex:"("+tn.group+")",populate:function(e,n,i){var o=ki(i,1)[0];n.checks.push({type:Yh,value:"*"===o?o:o+"s"})}},{name:"state",query:!0,regex:ib,populate:function(e,n,i){var o=ki(i,1)[0];n.checks.push({type:Gh,value:o})}},{name:"id",query:!0,regex:"\\#("+tn.id+")",populate:function(e,n,i){var o=ki(i,1)[0];n.checks.push({type:Fc,value:ws(o)})}},{name:"className",query:!0,regex:"\\.("+tn.className+")",populate:function(e,n,i){var o=ki(i,1)[0];n.checks.push({type:Uh,value:ws(o)})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+tn.variable+")\\s*\\]",populate:function(e,n,i){var o=ki(i,1)[0];n.checks.push({type:Wh,field:ws(o)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+tn.variable+")\\s*("+tn.comparatorOp+")\\s*("+tn.value+")\\s*\\]",populate:function(e,n,i){var o=ki(i,3),l=o[0],c=o[1],h=o[2];h=null!=new RegExp("^"+tn.string+"$").exec(h)?h.substring(1,h.length-1):parseFloat(h),n.checks.push({type:Hh,field:ws(l),operator:c,value:h})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+tn.boolOp+")\\s*("+tn.variable+")\\s*\\]",populate:function(e,n,i){var o=ki(i,2),l=o[0];n.checks.push({type:$h,field:ws(o[1]),operator:l})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+tn.meta+")\\s*("+tn.comparatorOp+")\\s*("+tn.number+")\\s*\\]\\]",populate:function(e,n,i){var o=ki(i,3),c=o[1],h=o[2];n.checks.push({type:Kh,field:ws(o[0]),operator:c,value:parseFloat(h)})}},{name:"nextQuery",separator:!0,regex:tn.separator,populate:function(e,n){var i=e.currentSubject,o=e.edgeCount,l=e.compoundCount,c=e[e.length-1];return null!=i&&(c.subject=i,e.currentSubject=null),c.edgeCount=o,c.compoundCount=l,e.edgeCount=0,e.compoundCount=0,e[e.length++]={checks:[]}}},{name:"directedEdge",separator:!0,regex:tn.directedEdge,populate:function(e,n){if(null==e.currentSubject){var i={checks:[]},l={checks:[]};return i.checks.push({type:Qh,source:n,target:l}),Na(e,0,i),e.edgeCount++,l}var c={checks:[]},f={checks:[]};return c.checks.push({type:Hg,source:n,target:f}),Na(e,0,c),e.edgeCount++,f}},{name:"undirectedEdge",separator:!0,regex:tn.undirectedEdge,populate:function(e,n){if(null==e.currentSubject){var i={checks:[]},l={checks:[]};return i.checks.push({type:Zh,nodes:[n,l]}),Na(e,0,i),e.edgeCount++,l}var c={checks:[]},f={checks:[]};return c.checks.push({type:Jh,node:n,neighbor:f}),Na(e,0,c),f}},{name:"child",separator:!0,regex:tn.child,populate:function(e,n){if(null==e.currentSubject){var i={checks:[]},o={checks:[]};return i.checks.push({type:ep,parent:e[e.length-1],child:o}),Na(e,0,i),e.compoundCount++,o}if(e.currentSubject===n){var c={checks:[]},f={checks:[]},g={checks:[]},y={checks:[]},x={checks:[]};return c.checks.push({type:qc,left:e[e.length-1],right:f,subject:g}),g.checks=n.checks,n.checks=[{type:xs}],x.checks.push({type:xs}),f.checks.push({type:Vc,parent:x,child:y}),Na(e,0,c),e.currentSubject=g,e.compoundCount++,y}var _={checks:[]},S={checks:[]},A=[{type:Vc,parent:_,child:S}];return _.checks=n.checks,n.checks=A,e.compoundCount++,S}},{name:"descendant",separator:!0,regex:tn.descendant,populate:function(e,n){if(null==e.currentSubject){var i={checks:[]},o={checks:[]};return i.checks.push({type:tp,ancestor:e[e.length-1],descendant:o}),Na(e,0,i),e.compoundCount++,o}if(e.currentSubject===n){var c={checks:[]},f={checks:[]},g={checks:[]},y={checks:[]},x={checks:[]};return c.checks.push({type:qc,left:e[e.length-1],right:f,subject:g}),g.checks=n.checks,n.checks=[{type:xs}],x.checks.push({type:xs}),f.checks.push({type:jc,ancestor:x,descendant:y}),Na(e,0,c),e.currentSubject=g,e.compoundCount++,y}var _={checks:[]},S={checks:[]},A=[{type:jc,ancestor:_,descendant:S}];return _.checks=n.checks,n.checks=A,e.compoundCount++,S}},{name:"subject",modifier:!0,regex:tn.subject,populate:function(e,n){if(null!=e.currentSubject&&e.currentSubject!==n)return gn("Redefinition of subject in selector `"+e.toString()+"`"),!1;e.currentSubject=n;var i=e[e.length-1].checks[0],o=null==i?null:i.type;o===Qh?i.type=Wg:o===Zh&&(i.type=Jh,i.node=i.nodes[1],i.neighbor=i.nodes[0],i.nodes=null)}}];rp.forEach(function(e){return e.regexObj=new RegExp("^"+e.regex)});var ab=function(e){for(var n,i,o,l=0;l<rp.length;l++){var c=rp[l],h=c.name,f=e.match(c.regexObj);if(null!=f){i=f,n=c,o=h,e=e.substring(f[0].length);break}}return{expr:n,match:i,name:o,remaining:e}},ob={parse:function(e){var y,x,n=this.inputText=e,i=this[0]={checks:[]};for(this.length=1,x=void 0,(x=(y=n).match(/^\s+/))&&(y=y.substring(x[0].length)),n=y;;){var o=ab(n);if(null==o.expr)return gn("The selector `"+e+"`is invalid"),!1;var l=o.match.slice(1),c=o.expr.populate(this,i,l);if(!1===c)return!1;if(null!=c&&(i=c),(n=o.remaining).match(/^\s*$/))break}var h=this[this.length-1];null!=this.currentSubject&&(h.subject=this.currentSubject),h.edgeCount=this.edgeCount,h.compoundCount=this.compoundCount;for(var f=0;f<this.length;f++){var g=this[f];if(g.compoundCount>0&&g.edgeCount>0)return gn("The selector `"+e+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(g.edgeCount>1)return gn("The selector `"+e+"` is invalid because it uses multiple edge selectors"),!1;1===g.edgeCount&&gn("The selector `"+e+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},toString:function(){if(null!=this.toStringCache)return this.toStringCache;for(var e=function(g){return g??""},n=function(g){return Ot(g)?'"'+g+'"':e(g)},i=function(g){return" "+g+" "},l=function(g,y){return g.checks.reduce(function(x,_,S){return x+(y===g&&0===S?"$":"")+function(g,y){var _=g.value;switch(g.type){case Yh:var S=e(_);return S.substring(0,S.length-1);case Hh:return"["+g.field+i(e(g.operator))+n(_)+"]";case $h:var I=g.field;return"["+e(g.operator)+I+"]";case Wh:return"["+g.field+"]";case Kh:return"[["+g.field+i(e(g.operator))+n(_)+"]]";case Gh:return _;case Fc:return"#"+_;case Uh:return"."+_;case Vc:case ep:return l(g.parent,y)+i(">")+l(g.child,y);case jc:case tp:return l(g.ancestor,y)+" "+l(g.descendant,y);case qc:var B=l(g.left,y),F=l(g.subject,y),G=l(g.right,y);return B+(B.length>0?" ":"")+F+G;case xs:return""}}(_,y)},"")},c="",h=0;h<this.length;h++){var f=this[h];c+=l(f,f.subject),this.length>1&&h<this.length-1&&(c+=", ")}return this.toStringCache=c,c}},$g=function(e,n,i){var o,l,c,h=Ot(e),f=gt(e),g=Ot(i),y=!1,x=!1,_=!1;switch(n.indexOf("!")>=0&&(n=n.replace("!",""),x=!0),n.indexOf("@")>=0&&(n=n.replace("@",""),y=!0),(h||g||y)&&(l=h||f?""+e:"",c=""+i),y&&(e=l=l.toLowerCase(),i=c=c.toLowerCase()),n){case"*=":o=l.indexOf(c)>=0;break;case"$=":o=l.indexOf(c,l.length-c.length)>=0;break;case"^=":o=0===l.indexOf(c);break;case"=":o=e===i;break;case">":_=!0,o=e>i;break;case">=":_=!0,o=e>=i;break;case"<":_=!0,o=e<i;break;case"<=":_=!0,o=e<=i;break;default:o=!1}return!x||null==e&&_||(o=!o),o},ip=function(e,n){return e.data(n)},In=[],Pn=function(e,n){return e.checks.every(function(i){return In[i.type](i,n)})};In[Yh]=function(e,n){var i=e.value;return"*"===i||i===n.group()},In[Gh]=function(e,n){return rb[e.value](n)},In[Fc]=function(e,n){var i=e.value;return n.id()===i},In[Uh]=function(e,n){return n.hasClass(e.value)},In[Kh]=function(e,n){var o=e.operator,l=e.value;return $g(n[e.field](),o,l)},In[Hh]=function(e,n){var o=e.operator,l=e.value;return $g(ip(n,e.field),o,l)},In[$h]=function(e,n){var o=e.operator;return function(l,c){switch(c){case"?":return!!l;case"!":return!l;case"^":return void 0===l}}(ip(n,e.field),o)},In[Wh]=function(e,n){return void 0!==ip(n,e.field)},In[Zh]=function(e,n){var i=e.nodes[0],o=e.nodes[1],l=n.source(),c=n.target();return Pn(i,l)&&Pn(o,c)||Pn(o,l)&&Pn(i,c)},In[Jh]=function(e,n){return Pn(e.node,n)&&n.neighborhood().some(function(i){return i.isNode()&&Pn(e.neighbor,i)})},In[Qh]=function(e,n){return Pn(e.source,n.source())&&Pn(e.target,n.target())},In[Hg]=function(e,n){return Pn(e.source,n)&&n.outgoers().some(function(i){return i.isNode()&&Pn(e.target,i)})},In[Wg]=function(e,n){return Pn(e.target,n)&&n.incomers().some(function(i){return i.isNode()&&Pn(e.source,i)})},In[ep]=function(e,n){return Pn(e.child,n)&&Pn(e.parent,n.parent())},In[Vc]=function(e,n){return Pn(e.parent,n)&&n.children().some(function(i){return Pn(e.child,i)})},In[tp]=function(e,n){return Pn(e.descendant,n)&&n.ancestors().some(function(i){return Pn(e.ancestor,i)})},In[jc]=function(e,n){return Pn(e.ancestor,n)&&n.descendants().some(function(i){return Pn(e.descendant,i)})},In[qc]=function(e,n){return Pn(e.subject,n)&&Pn(e.left,n)&&Pn(e.right,n)},In[xs]=function(){return!0},In[Xg]=function(e,n){return e.value.has(n)},In[Yg]=function(e,n){return(0,e.value)(n)};var za=function(e){this.inputText=e,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,null==e||Ot(e)&&e.match(/^\s*$/)||(Gr(e)?this.addQuery({checks:[{type:Xg,value:e.collection()}]}):Nn(e)?this.addQuery({checks:[{type:Yg,value:e}]}):Ot(e)?this.parse(e)||(this.invalid=!0):zn("A selector must be created from a string; found "))},Ia=za.prototype;[ob,{matches:function(e){for(var n=0;n<this.length;n++)if(Pn(this[n],e))return!0;return!1},filter:function(e){var n=this;if(1===n.length&&1===n[0].checks.length&&n[0].checks[0].type===Fc)return e.getElementById(n[0].checks[0].value).collection();var i=function(o){for(var l=0;l<n.length;l++)if(Pn(n[l],o))return!0;return!1};return null==n.text()&&(i=function(){return!0}),e.filter(i)}}].forEach(function(e){return It(Ia,e)}),Ia.text=function(){return this.inputText},Ia.size=function(){return this.length},Ia.eq=function(e){return this[e]},Ia.sameText=function(e){return!this.invalid&&!e.invalid&&this.text()===e.text()},Ia.addQuery=function(e){this[this.length++]=e},Ia.selector=Ia.toString;var Ra={allAre:function(e){var n=new za(e);return this.every(function(i){return n.matches(i)})},is:function(e){var n=new za(e);return this.some(function(i){return n.matches(i)})},some:function(e,n){for(var i=0;i<this.length;i++)if(n?e.apply(n,[this[i],i,this]):e(this[i],i,this))return!0;return!1},every:function(e,n){for(var i=0;i<this.length;i++)if(!(n?e.apply(n,[this[i],i,this]):e(this[i],i,this)))return!1;return!0},same:function(e){if(this===e)return!0;e=this.cy().collection(e);var n=this.length;return n===e.length&&(1===n?this[0]===e[0]:this.every(function(i){return e.hasElementWithId(i.id())}))},anySame:function(e){return e=this.cy().collection(e),this.some(function(n){return e.hasElementWithId(n.id())})},allAreNeighbors:function(e){e=this.cy().collection(e);var n=this.neighborhood();return e.every(function(i){return n.hasElementWithId(i.id())})},contains:function(e){e=this.cy().collection(e);var n=this;return e.every(function(i){return n.hasElementWithId(i.id())})}};Ra.allAreNeighbours=Ra.allAreNeighbors,Ra.has=Ra.contains,Ra.equal=Ra.equals=Ra.same;var Xc,Kg,ci=function(e,n){return function(i,o,l,c){var h,f=i;if(null==f?h="":Gr(f)&&1===f.length&&(h=f.id()),1===this.length&&h){var g=this[0]._private,y=g.traversalCache=g.traversalCache||{},x=y[n]=y[n]||[],_=wo(h);return x[_]||(x[_]=e.call(this,i,o,l,c))}return e.call(this,i,o,l,c)}},Es={parent:function(e){var n=[];if(1===this.length){var i=this[0]._private.parent;if(i)return i}for(var o=0;o<this.length;o++){var l=this[o]._private.parent;l&&n.push(l)}return this.spawn(n,!0).filter(e)},parents:function(e){for(var n=[],i=this.parent();i.nonempty();){for(var o=0;o<i.length;o++)n.push(i[o]);i=i.parent()}return this.spawn(n,!0).filter(e)},commonAncestors:function(e){for(var n,i=0;i<this.length;i++){var o=this[i].parents();n=(n=n||o).intersect(o)}return n.filter(e)},orphans:function(e){return this.stdFilter(function(n){return n.isOrphan()}).filter(e)},nonorphans:function(e){return this.stdFilter(function(n){return n.isChild()}).filter(e)},children:ci(function(e){for(var n=[],i=0;i<this.length;i++)for(var o=this[i]._private.children,l=0;l<o.length;l++)n.push(o[l]);return this.spawn(n,!0).filter(e)},"children"),siblings:function(e){return this.parent().children().not(this).filter(e)},isParent:function(){var e=this[0];if(e)return e.isNode()&&0!==e._private.children.length},isChildless:function(){var e=this[0];if(e)return e.isNode()&&0===e._private.children.length},isChild:function(){var e=this[0];if(e)return e.isNode()&&null!=e._private.parent},isOrphan:function(){var e=this[0];if(e)return e.isNode()&&null==e._private.parent},descendants:function(e){var n=[];return function i(o){for(var l=0;l<o.length;l++){var c=o[l];n.push(c),c.children().nonempty()&&i(c.children())}}(this.children()),this.spawn(n,!0).filter(e)}};function ap(e,n,i,o){for(var l=[],c=new us,h=e.cy().hasCompoundNodes(),f=0;f<e.length;f++){var g=e[f];i?l.push(g):h&&o(l,c,g)}for(;l.length>0;){var y=l.shift();n(y),c.add(y.id()),h&&o(l,c,y)}return e}function Gg(e,n,i){if(i.isParent())for(var o=i._private.children,l=0;l<o.length;l++){var c=o[l];n.has(c.id())||e.push(c)}}function Ug(e,n,i){if(i.isChild()){var o=i._private.parent;n.has(o.id())||e.push(o)}}function sb(e,n,i){Ug(e,n,i),Gg(e,n,i)}Es.forEachDown=function(e){return ap(this,e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],Gg)},Es.forEachUp=function(e){return ap(this,e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],Ug)},Es.forEachUpAndDown=function(e){return ap(this,e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],sb)},Es.ancestors=Es.parents,(Xc=Kg={data:vn.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:vn.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:vn.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:vn.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:vn.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:vn.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var e=this[0];if(e)return e._private.data.id}}).attr=Xc.data,Xc.removeAttr=Xc.removeData;var Vi,Zg,lb=Kg,Yc={};function op(e){return function(n){if(void 0===n&&(n=!0),0!==this.length&&this.isNode()&&!this.removed()){for(var i=0,o=this[0],l=o._private.edges,c=0;c<l.length;c++){var h=l[c];!n&&h.isLoop()||(i+=e(o,h))}return i}}}function _s(e,n){return function(i){for(var o,l=this.nodes(),c=0;c<l.length;c++){var h=l[c][e](i);void 0===h||void 0!==o&&!n(h,o)||(o=h)}return o}}It(Yc,{degree:op(function(e,n){return n.source().same(n.target())?2:1}),indegree:op(function(e,n){return n.target().same(e)?1:0}),outdegree:op(function(e,n){return n.source().same(e)?1:0})}),It(Yc,{minDegree:_s("degree",function(e,n){return e<n}),maxDegree:_s("degree",function(e,n){return e>n}),minIndegree:_s("indegree",function(e,n){return e<n}),maxIndegree:_s("indegree",function(e,n){return e>n}),minOutdegree:_s("outdegree",function(e,n){return e<n}),maxOutdegree:_s("outdegree",function(e,n){return e>n})}),It(Yc,{totalDegree:function(e){for(var n=0,i=this.nodes(),o=0;o<i.length;o++)n+=i[o].degree(e);return n}});var Qg=function(e,n,i){for(var o=0;o<e.length;o++){var l=e[o];if(!l.locked()){var c=l._private.position,h={x:null!=n.x?n.x-c.x:0,y:null!=n.y?n.y-c.y:0};!l.isParent()||0===h.x&&0===h.y||l.children().shift(h,i),l.dirtyBoundingBoxCache()}}},Jg={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(e){e.updateCompoundBounds()},beforeSet:function(e,n){Qg(e,n,!1)},onSet:function(e){e.dirtyCompoundBoundsCache()},canSet:function(e){return!e.locked()}};(Vi=Zg={position:vn.data(Jg),silentPosition:vn.data(It({},Jg,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(e,n){Qg(e,n,!0)},onSet:function(e){e.dirtyCompoundBoundsCache()}})),positions:function(e,n){if(en(e))n?this.silentPosition(e):this.position(e);else if(Nn(e)){var i=e,o=this.cy();o.startBatch();for(var l=0;l<this.length;l++){var c,h=this[l];(c=i(h,l))&&(n?h.silentPosition(c):h.position(c))}o.endBatch()}return this},silentPositions:function(e){return this.positions(e,!0)},shift:function(e,n,i){var o;if(en(e)?(o={x:gt(e.x)?e.x:0,y:gt(e.y)?e.y:0},i=n):Ot(e)&&gt(n)&&((o={x:0,y:0})[e]=n),null!=o){var l=this.cy();l.startBatch();for(var c=0;c<this.length;c++){var h=this[c];if(!(l.hasCompoundNodes()&&h.isChild()&&h.ancestors().anySame(this))){var f=h.position(),g={x:f.x+o.x,y:f.y+o.y};i?h.silentPosition(g):h.position(g)}}l.endBatch()}return this},silentShift:function(e,n){return en(e)?this.shift(e,!0):Ot(e)&&gt(n)&&this.shift(e,n,!0),this},renderedPosition:function(e,n){var i=this[0],o=this.cy(),l=o.zoom(),c=o.pan(),h=en(e)?e:void 0,f=void 0!==h||void 0!==n&&Ot(e);if(i&&i.isNode()){if(!f){var g=i.position();return h=_c(g,l,c),void 0===e?h:h[e]}for(var y=0;y<this.length;y++){var x=this[y];void 0!==n?x.position(e,(n-c[e])/l):void 0!==h&&x.position(rg(h,l,c))}}else if(!f)return;return this},relativePosition:function(e,n){var i=this[0],o=this.cy(),l=en(e)?e:void 0,c=void 0!==l||void 0!==n&&Ot(e),h=o.hasCompoundNodes();if(i&&i.isNode()){if(!c){var f=i.position(),g=h?i.parent():null,y=g&&g.length>0;y&&(g=g[0]);var _=y?g.position():{x:0,y:0};return l={x:f.x-_.x,y:f.y-_.y},void 0===e?l:l[e]}for(var S=0;S<this.length;S++){var A=this[S],C=h?A.parent():null,L=C&&C.length>0;L&&(C=C[0]);var P=L?C.position():{x:0,y:0};void 0!==n?A.position(e,n+P[e]):void 0!==l&&A.position({x:l.x+P.x,y:l.y+P.y})}}else if(!c)return;return this}}).modelPosition=Vi.point=Vi.position,Vi.modelPositions=Vi.points=Vi.positions,Vi.renderedPoint=Vi.renderedPosition,Vi.relativePoint=Vi.relativePosition;var ks,Fa,ub=Zg;ks=Fa={},Fa.renderedBoundingBox=function(e){var n=this.boundingBox(e),i=this.cy(),o=i.zoom(),l=i.pan(),c=n.x1*o+l.x,h=n.x2*o+l.x,f=n.y1*o+l.y,g=n.y2*o+l.y;return{x1:c,x2:h,y1:f,y2:g,w:h-c,h:g-f}},Fa.dirtyCompoundBoundsCache=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.cy();return n.styleEnabled()&&n.hasCompoundNodes()?(this.forEachUp(function(i){if(i.isParent()){var o=i._private;o.compoundBoundsClean=!1,o.bbCache=null,e||i.emitAndNotify("bounds")}}),this):this},Fa.updateCompoundBounds=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.cy();if(!n.styleEnabled()||!n.hasCompoundNodes())return this;if(!e&&n.batching())return this;function i(h){if(h.isParent()){var f=h._private,g=h.children(),y="include"===h.pstyle("compound-sizing-wrt-labels").value,x={width:{val:h.pstyle("min-width").pfValue,left:h.pstyle("min-width-bias-left"),right:h.pstyle("min-width-bias-right")},height:{val:h.pstyle("min-height").pfValue,top:h.pstyle("min-height-bias-top"),bottom:h.pstyle("min-height-bias-bottom")}},_=g.boundingBox({includeLabels:y,includeOverlays:!1,useCache:!1}),S=f.position;0!==_.w&&0!==_.h||((_={w:h.pstyle("width").pfValue,h:h.pstyle("height").pfValue}).x1=S.x-_.w/2,_.x2=S.x+_.w/2,_.y1=S.y-_.h/2,_.y2=S.y+_.h/2);var A=x.width.left.value;"px"===x.width.left.units&&x.width.val>0&&(A=100*A/x.width.val);var C=x.width.right.value;"px"===x.width.right.units&&x.width.val>0&&(C=100*C/x.width.val);var L=x.height.top.value;"px"===x.height.top.units&&x.height.val>0&&(L=100*L/x.height.val);var I=x.height.bottom.value;"px"===x.height.bottom.units&&x.height.val>0&&(I=100*I/x.height.val);var P=H(x.width.val-_.w,A,C),B=P.biasDiff,F=P.biasComplementDiff,G=H(x.height.val-_.h,L,I),$=G.biasDiff,X=G.biasComplementDiff;f.autoPadding=function(te,re,ae,le){if("%"!==ae.units)return"px"===ae.units?ae.pfValue:0;switch(le){case"width":return te>0?ae.pfValue*te:0;case"height":return re>0?ae.pfValue*re:0;case"average":return te>0&&re>0?ae.pfValue*(te+re)/2:0;case"min":return te>0&&re>0?te>re?ae.pfValue*re:ae.pfValue*te:0;case"max":return te>0&&re>0?te>re?ae.pfValue*te:ae.pfValue*re:0;default:return 0}}(_.w,_.h,h.pstyle("padding"),h.pstyle("padding-relative-to").value),f.autoWidth=Math.max(_.w,x.width.val),S.x=(-B+_.x1+_.x2+F)/2,f.autoHeight=Math.max(_.h,x.height.val),S.y=(-$+_.y1+_.y2+X)/2}function H(te,re,ae){var le=0,se=0,de=re+ae;return te>0&&de>0&&(le=re/de*te,se=ae/de*te),{biasDiff:le,biasComplementDiff:se}}}for(var o=0;o<this.length;o++){var l=this[o],c=l._private;c.compoundBoundsClean&&!e||(i(l),n.batching()||(c.compoundBoundsClean=!0))}return this};var di=function(e){return e===1/0||e===-1/0?0:e},Si=function(e,n,i,o,l){o-n!=0&&l-i!=0&&null!=n&&null!=i&&null!=o&&null!=l&&(e.x1=n<e.x1?n:e.x1,e.x2=o>e.x2?o:e.x2,e.y1=i<e.y1?i:e.y1,e.y2=l>e.y2?l:e.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1)},So=function(e,n){return null==n?e:Si(e,n.x1,n.y1,n.x2,n.y2)},Vl=function(e,n,i){return Ci(e,n,i)},Hc=function(e,n,i){if(!n.cy().headless()){var o,l,c=n._private,h=c.rstyle,f=h.arrowWidth/2;if("none"!==n.pstyle(i+"-arrow-shape").value){"source"===i?(o=h.srcX,l=h.srcY):"target"===i?(o=h.tgtX,l=h.tgtY):(o=h.midX,l=h.midY);var g=c.arrowBounds=c.arrowBounds||{},y=g[i]=g[i]||{};y.x1=o-f,y.y1=l-f,y.x2=o+f,y.y2=l+f,y.w=y.x2-y.x1,y.h=y.y2-y.y1,Cc(y,1),Si(e,y.x1,y.y1,y.x2,y.y2)}}},sp=function(e,n,i){if(!n.cy().headless()){var o,l=n._private,c=l.rstyle;if(n.pstyle((o=i?i+"-":"")+"label").strValue){var h,f,g,y,x=n.pstyle("text-halign"),_=n.pstyle("text-valign"),S=Vl(c,"labelWidth",i),A=Vl(c,"labelHeight",i),C=Vl(c,"labelX",i),L=Vl(c,"labelY",i),I=n.pstyle(o+"text-margin-x").pfValue,P=n.pstyle(o+"text-margin-y").pfValue,B=n.isEdge(),F=n.pstyle(o+"text-rotation"),G=n.pstyle("text-outline-width").pfValue,$=n.pstyle("text-border-width").pfValue/2,X=n.pstyle("text-background-padding").pfValue,H=A,te=S,re=te/2,ae=H/2;if(B)h=C-re,f=C+re,g=L-ae,y=L+ae;else{switch(x.value){case"left":h=C-te,f=C;break;case"center":h=C-re,f=C+re;break;case"right":h=C,f=C+te}switch(_.value){case"top":g=L-H,y=L;break;case"center":g=L-ae,y=L+ae;break;case"bottom":g=L,y=L+H}}h+=I-Math.max(G,$)-X-2,f+=I+Math.max(G,$)+X+2,g+=P-Math.max(G,$)-X-2,y+=P+Math.max(G,$)+X+2;var le=i||"main",se=l.labelBounds,de=se[le]=se[le]||{};de.x1=h,de.y1=g,de.x2=f,de.y2=y,de.w=f-h,de.h=y-g;var we=B&&"autorotate"===F.strValue;if(we||null!=F.pfValue&&0!==F.pfValue){var fe=we?Vl(l.rstyle,"labelAngle",i):F.pfValue,ge=Math.cos(fe),ee=Math.sin(fe),Se=(h+f)/2,Ie=(g+y)/2;if(!B){switch(x.value){case"left":Se=f;break;case"right":Se=h}switch(_.value){case"top":Ie=y;break;case"bottom":Ie=g}}var _e=function(st,pt){return{x:(st-=Se)*ge-(pt-=Ie)*ee+Se,y:st*ee+pt*ge+Ie}},je=_e(h,g),Fe=_e(h,y),ze=_e(f,g),Je=_e(f,y);h=Math.min(je.x,Fe.x,ze.x,Je.x),f=Math.max(je.x,Fe.x,ze.x,Je.x),g=Math.min(je.y,Fe.y,ze.y,Je.y),y=Math.max(je.y,Fe.y,ze.y,Je.y)}var Re=le+"Rot",Ge=se[Re]=se[Re]||{};Ge.x1=h,Ge.y1=g,Ge.x2=f,Ge.y2=y,Ge.w=f-h,Ge.h=y-g,Si(e,h,g,f,y),Si(l.labelBounds.all,h,g,f,y)}return e}},cb=function(e,n){var i,o,l,c,h,f,g,y=e._private.cy,x=y.styleEnabled(),_=y.headless(),S=jr(),A=e._private,C=e.isNode(),L=e.isEdge(),I=A.rstyle,P=C&&x?e.pstyle("bounds-expansion").pfValue:[0],B=function(Ge){return"none"!==Ge.pstyle("display").value},F=!x||B(e)&&(!L||B(e.source())&&B(e.target()));if(F){var G=0;x&&n.includeOverlays&&0!==e.pstyle("overlay-opacity").value&&(G=e.pstyle("overlay-padding").value);var $=0;x&&n.includeUnderlays&&0!==e.pstyle("underlay-opacity").value&&($=e.pstyle("underlay-padding").value);var X=Math.max(G,$),H=0;if(x&&(H=e.pstyle("width").pfValue/2),C&&n.includeNodes){var te=e.position();h=te.x,f=te.y;var re=e.outerWidth()/2,ae=e.outerHeight()/2;Si(S,i=h-re,l=f-ae,o=h+re,c=f+ae),x&&n.includeOutlines&&function(Ge,st){if(!st.cy().headless()){var pt,We,ft=st.pstyle("outline-opacity").value,vt=st.pstyle("outline-width").value;if(ft>0&&vt>0){var ot=st.pstyle("outline-offset").value,U=st.pstyle("shape").value,pe=vt+ot,Ce=(Ge.w+2*pe)/Ge.w,Oe=(Ge.h+2*pe)/Ge.h,Ae=0;["diamond","pentagon","round-triangle"].includes(U)?(Ce=(Ge.w+2.4*pe)/Ge.w,Ae=-pe/3.6):["concave-hexagon","rhomboid","right-rhomboid"].includes(U)?Ce=(Ge.w+2.4*pe)/Ge.w:"star"===U?(Ce=(Ge.w+2.8*pe)/Ge.w,Oe=(Ge.h+2.6*pe)/Ge.h,Ae=-pe/3.8):"triangle"===U?(Ce=(Ge.w+2.8*pe)/Ge.w,Oe=(Ge.h+2.4*pe)/Ge.h,Ae=-pe/1.4):"vee"===U&&(Ce=(Ge.w+4.4*pe)/Ge.w,Oe=(Ge.h+3.8*pe)/Ge.h,Ae=.5*-pe);var Ue=Ge.w*Ce-Ge.w;if(Sc(Ge,[Math.ceil((Ge.h*Oe-Ge.h)/2),Math.ceil(Ue/2)]),0!==Ae){var Ct={x1:(pt=Ge).x1+0,x2:pt.x2+0,y1:pt.y1+(We=Ae),y2:pt.y2+We,w:pt.w,h:pt.h};ag(Ge,Ct)}}}}(S,e)}else if(L&&n.includeEdges)if(x&&!_){var le=e.pstyle("curve-style").strValue;if(i=Math.min(I.srcX,I.midX,I.tgtX),o=Math.max(I.srcX,I.midX,I.tgtX),l=Math.min(I.srcY,I.midY,I.tgtY),c=Math.max(I.srcY,I.midY,I.tgtY),Si(S,i-=H,l-=H,o+=H,c+=H),"haystack"===le){var se=I.haystackPts;if(se&&2===se.length){if((i=se[0].x)>(o=se[1].x)){var de=i;i=o,o=de}if((l=se[0].y)>(c=se[1].y)){var we=l;l=c,c=we}Si(S,i-H,l-H,o+H,c+H)}}else if("bezier"===le||"unbundled-bezier"===le||"segments"===le||"taxi"===le){var be;switch(le){case"bezier":case"unbundled-bezier":be=I.bezierPts;break;case"segments":case"taxi":be=I.linePts}if(null!=be)for(var fe=0;fe<be.length;fe++){var ge=be[fe];Si(S,i=ge.x-H,l=ge.y-H,o=ge.x+H,c=ge.y+H)}}}else{var ee=e.source().position(),Se=e.target().position();if((i=ee.x)>(o=Se.x)){var Ie=i;i=o,o=Ie}if((l=ee.y)>(c=Se.y)){var _e=l;l=c,c=_e}Si(S,i-=H,l-=H,o+=H,c+=H)}if(x&&n.includeEdges&&L&&(Hc(S,e,"mid-source"),Hc(S,e,"mid-target"),Hc(S,e,"source"),Hc(S,e,"target")),x&&"yes"===e.pstyle("ghost").value){var je=e.pstyle("ghost-offset-x").pfValue,Fe=e.pstyle("ghost-offset-y").pfValue;Si(S,S.x1+je,S.y1+Fe,S.x2+je,S.y2+Fe)}var ze=A.bodyBounds=A.bodyBounds||{};og(ze,S),Sc(ze,P),Cc(ze,1),x&&Si(S,(i=S.x1)-X,(l=S.y1)-X,(o=S.x2)+X,(c=S.y2)+X);var Je=A.overlayBounds=A.overlayBounds||{};og(Je,S),Sc(Je,P),Cc(Je,1);var Re=A.labelBounds=A.labelBounds||{};null!=Re.all?((g=Re.all).x1=1/0,g.y1=1/0,g.x2=-1/0,g.y2=-1/0,g.w=0,g.h=0):Re.all=jr(),x&&n.includeLabels&&(n.includeMainLabels&&sp(S,e,null),L&&(n.includeSourceLabels&&sp(S,e,"source"),n.includeTargetLabels&&sp(S,e,"target")))}return S.x1=di(S.x1),S.y1=di(S.y1),S.x2=di(S.x2),S.y2=di(S.y2),S.w=di(S.x2-S.x1),S.h=di(S.y2-S.y1),S.w>0&&S.h>0&&F&&(Sc(S,P),Cc(S,1)),S},ev=function(e){var n=0,i=function(l){return(l?1:0)<<n++},o=0;return o+=i(e.incudeNodes),o+=i(e.includeEdges),o+=i(e.includeLabels),o+=i(e.includeMainLabels),o+=i(e.includeSourceLabels),o+=i(e.includeTargetLabels),(o+=i(e.includeOverlays))+i(e.includeOutlines)},tv=function(e){if(e.isEdge()){var n=e.source().position(),i=e.target().position(),o=function(l){return Math.round(l)};return l=[o(n.x),o(n.y),o(i.x),o(i.y)],h={value:0,done:!1},f=0,g=l.length,Kf({next:function(){return f<g?h.value=l[f++]:h.done=!0,h}},void 0)}var l,h,f,g;return 0},nv=function(e,n){var i,o=e._private,l=e.isEdge(),c=(null==n?rv:ev(n))===rv,h=tv(e),f=o.bbCachePosKey===h,g=n.useCache&&f,y=function(_){return null==_._private.bbCache||_._private.styleDirty};if(!g||y(e)||l&&y(e.source())||y(e.target())?(f||e.recalculateRenderedStyle(g),i=cb(e,jl),o.bbCache=i,o.bbCachePosKey=h):i=o.bbCache,!c){var x=e.isNode();i=jr(),(n.includeNodes&&x||n.includeEdges&&!x)&&So(i,n.includeOverlays?o.overlayBounds:o.bodyBounds),n.includeLabels&&(n.includeMainLabels&&(!l||n.includeSourceLabels&&n.includeTargetLabels)?So(i,o.labelBounds.all):(n.includeMainLabels&&So(i,o.labelBounds.mainRot),n.includeSourceLabels&&So(i,o.labelBounds.sourceRot),n.includeTargetLabels&&So(i,o.labelBounds.targetRot))),i.w=i.x2-i.x1,i.h=i.y2-i.y1}return i},jl={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,includeOutlines:!0,useCache:!0},rv=ev(jl),iv=ur(jl);Fa.boundingBox=function(e){var n;if(1!==this.length||null==this[0]._private.bbCache||this[0]._private.styleDirty||void 0!==e&&void 0!==e.useCache&&!0!==e.useCache){n=jr();var i=iv(e=e||jl);if(this.cy().styleEnabled())for(var o=0;o<this.length;o++){var l=this[o],c=l._private,h=tv(l);l.recalculateRenderedStyle(i.useCache&&c.bbCachePosKey===h&&!c.styleDirty)}this.updateCompoundBounds(!e.useCache);for(var y=0;y<this.length;y++)So(n,nv(this[y],i))}else e=void 0===e?jl:iv(e),n=nv(this[0],e);return n.x1=di(n.x1),n.y1=di(n.y1),n.x2=di(n.x2),n.y2=di(n.y2),n.w=di(n.x2-n.x1),n.h=di(n.y2-n.y1),n},Fa.dirtyBoundingBoxCache=function(){for(var e=0;e<this.length;e++){var n=this[e]._private;n.bbCache=null,n.bbCachePosKey=null,n.bodyBounds=null,n.overlayBounds=null,n.labelBounds.all=null,n.labelBounds.source=null,n.labelBounds.target=null,n.labelBounds.main=null,n.labelBounds.sourceRot=null,n.labelBounds.targetRot=null,n.labelBounds.mainRot=null,n.arrowBounds.source=null,n.arrowBounds.target=null,n.arrowBounds["mid-source"]=null,n.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this},Fa.boundingBoxAt=function(e){var n=this.nodes(),i=this.cy(),o=i.hasCompoundNodes(),l=i.collection();if(o&&(l=n.filter(function(f){return f.isParent()}),n=n.not(l)),en(e)){var c=e;e=function(){return c}}i.startBatch(),n.forEach(function(f,g){return f._private.bbAtOldPos=e(f,g)}).silentPositions(e),o&&(l.dirtyCompoundBoundsCache(),l.dirtyBoundingBoxCache(),l.updateCompoundBounds(!0));var f,h={x1:(f=this.boundingBox({useCache:!1})).x1,x2:f.x2,w:f.w,y1:f.y1,y2:f.y2,h:f.h};return n.silentPositions(function(f){return f._private.bbAtOldPos}),o&&(l.dirtyCompoundBoundsCache(),l.dirtyBoundingBoxCache(),l.updateCompoundBounds(!0)),i.endBatch(),h},ks.boundingbox=ks.bb=ks.boundingBox,ks.renderedBoundingbox=ks.renderedBoundingBox;var ql,Xl,db=Fa;ql=Xl={};var av=function(e){e.uppercaseName=Rf(e.name),e.autoName="auto"+e.uppercaseName,e.labelName="label"+e.uppercaseName,e.outerName="outer"+e.uppercaseName,e.uppercaseOuterName=Rf(e.outerName),ql[e.name]=function(){var n=this[0],i=n._private;if(n){if(!i.cy._private.styleEnabled)return 1;if(n.isParent())return n.updateCompoundBounds(),i[e.autoName]||0;var l=n.pstyle(e.name);return"label"===l.strValue?(n.recalculateRenderedStyle(),i.rstyle[e.labelName]||0):l.pfValue}},ql["outer"+e.uppercaseName]=function(){var n=this[0];if(n)return n._private.cy._private.styleEnabled?n[e.name]()+n.pstyle("border-width").pfValue+2*n.padding():1},ql["rendered"+e.uppercaseName]=function(){var n=this[0];if(n)return n[e.name]()*this.cy().zoom()},ql["rendered"+e.uppercaseOuterName]=function(){var n=this[0];if(n)return n[e.outerName]()*this.cy().zoom()}};av({name:"width"}),av({name:"height"}),Xl.padding=function(){var e=this[0],n=e._private;return e.isParent()?(e.updateCompoundBounds(),void 0!==n.autoPadding?n.autoPadding:e.pstyle("padding").pfValue):e.pstyle("padding").pfValue},Xl.paddedHeight=function(){var e=this[0];return e.height()+2*e.padding()},Xl.paddedWidth=function(){var e=this[0];return e.width()+2*e.padding()};var hb=Xl,ov={controlPoints:{get:function(e){return e.renderer().getControlPoints(e)},mult:!0},segmentPoints:{get:function(e){return e.renderer().getSegmentPoints(e)},mult:!0},sourceEndpoint:{get:function(e){return e.renderer().getSourceEndpoint(e)}},targetEndpoint:{get:function(e){return e.renderer().getTargetEndpoint(e)}},midpoint:{get:function(e){return e.renderer().getEdgeMidpoint(e)}}},pb=Object.keys(ov).reduce(function(e,n){var l,i=ov[n],o="rendered"+(l=n)[0].toUpperCase()+l.substr(1);return e[n]=function(){return function(l,c){if(l.isEdge())return c(l)}(this,i.get)},e[o]=i.mult?function(){return function(l,c){if(l.isEdge()){var h=l.cy(),f=h.pan(),g=h.zoom();return c(l).map(function(y){return _c(y,g,f)})}}(this,i.get)}:function(){return function(l,c){if(l.isEdge()){var h=l.cy();return _c(c(l),h.zoom(),h.pan())}}(this,i.get)},e},{}),fb=It({},ub,db,hb,pb),sv=function(e,n){this.recycle(e,n)};function Yl(){return!1}function Wc(){return!0}sv.prototype={instanceString:function(){return"event"},recycle:function(e,n){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=Yl,null!=e&&e.preventDefault?(this.type=e.type,this.isDefaultPrevented=e.defaultPrevented?Wc:Yl):null!=e&&e.type?n=e:this.type=e,null!=n&&(this.originalEvent=n.originalEvent,this.type=null!=n.type?n.type:this.type,this.cy=n.cy,this.target=n.target,this.position=n.position,this.renderedPosition=n.renderedPosition,this.namespace=n.namespace,this.layout=n.layout),null!=this.cy&&null!=this.position&&null==this.renderedPosition){var i=this.position,o=this.cy.zoom(),l=this.cy.pan();this.renderedPosition={x:i.x*o+l.x,y:i.y*o+l.y}}this.timeStamp=e&&e.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=Wc;var e=this.originalEvent;e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){this.isPropagationStopped=Wc;var e=this.originalEvent;e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=Wc,this.stopPropagation()},isDefaultPrevented:Yl,isPropagationStopped:Yl,isImmediatePropagationStopped:Yl};var lv=/^([^.]+)(\.(?:[^.]+))?$/,uv={qualifierCompare:function(e,n){return e===n},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(e){return e},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},cv=Object.keys(uv),gb={};function $c(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gb,n=arguments.length>1?arguments[1]:void 0,i=0;i<cv.length;i++){var o=cv[i];this[o]=e[o]||uv[o]}this.context=n||this.context,this.listeners=[],this.emitting=0}var Va=$c.prototype,dv=function(e,n,i,o,l,c,h){Nn(o)&&(l=o,o=null),h&&(c=null==c?h:It({},c,h));for(var f=yn(i)?i:i.split(/\s+/),g=0;g<f.length;g++){var y=f[g];if(!Ma(y)){var x=y.match(lv);if(x&&!1===n(e,y,x[1],x[2]?x[2]:null,o,l,c))break}}},hv=function(e,n){return e.addEventFields(e.context,n),new sv(n.type,n)},vb=function(e,n,i){if("event"!==kl(i))if(en(i))n(e,hv(e,i));else for(var o=yn(i)?i:i.split(/\s+/),l=0;l<o.length;l++){var c=o[l];if(!Ma(c)){var h=c.match(lv);h&&n(e,hv(e,{type:h[1],namespace:h[2]?h[2]:null,target:e.context}))}}else n(e,i)};Va.on=Va.addListener=function(e,n,i,o,l){return dv(this,function(c,h,f,g,y,x,_){Nn(x)&&c.listeners.push({event:h,callback:x,type:f,namespace:g,qualifier:y,conf:_})},e,n,i,o,l),this},Va.one=function(e,n,i,o){return this.on(e,n,i,o,{one:!0})},Va.removeListener=Va.off=function(e,n,i,o){var l=this;0!==this.emitting&&(this.listeners=this.listeners.slice());for(var c=this.listeners,h=function(g){var y=c[g];dv(l,function(x,_,S,A,C,L){if((y.type===S||"*"===e)&&(!A&&".*"!==y.namespace||y.namespace===A)&&(!C||x.qualifierCompare(y.qualifier,C))&&(!L||y.callback===L))return c.splice(g,1),!1},e,n,i,o)},f=c.length-1;f>=0;f--)h(f);return this},Va.removeAllListeners=function(){return this.removeListener("*")},Va.emit=Va.trigger=function(e,n,i){var o=this.listeners,l=o.length;return this.emitting++,yn(n)||(n=[n]),vb(this,function(c,h){null!=i&&(l=(o=[{event:h.event,type:h.type,namespace:h.namespace,callback:i}]).length);for(var f=function(y){var x=o[y];if(x.type===h.type&&(!x.namespace||x.namespace===h.namespace||".*"===x.namespace)&&c.eventMatches(c.context,x,h)){var _=[h];null!=n&&function(C,L){for(var I=0;I<L.length;I++)C.push(L[I])}(_,n),c.beforeEmit(c.context,x,h),x.conf&&x.conf.one&&(c.listeners=c.listeners.filter(function(C){return C!==x}));var S=c.callbackContext(c.context,x,h),A=x.callback.apply(S,_);c.afterEmit(c.context,x,h),!1===A&&(h.stopPropagation(),h.preventDefault())}},g=0;g<l;g++)f(g);c.bubble(c.context)&&!h.isPropagationStopped()&&c.parent(c.context).emit(h,n)},e),this.emitting--,this};var mb={qualifierCompare:function(e,n){return null==e||null==n?null==e&&null==n:e.sameText(n)},eventMatches:function(e,n,i){var o=n.qualifier;return null==o||e!==i.target&&Cl(i.target)&&o.matches(i.target)},addEventFields:function(e,n){n.cy=e.cy(),n.target=e},callbackContext:function(e,n,i){return null!=n.qualifier?i.target:e},beforeEmit:function(e,n){n.conf&&n.conf.once&&n.conf.onceCollection.removeListener(n.event,n.qualifier,n.callback)},bubble:function(){return!0},parent:function(e){return e.isChild()?e.parent():e.cy()}},Kc=function(e){return Ot(e)?new za(e):e},pv={createEmitter:function(){for(var e=0;e<this.length;e++){var n=this[e],i=n._private;i.emitter||(i.emitter=new $c(mb,n))}return this},emitter:function(){return this._private.emitter},on:function(e,n,i){for(var o=Kc(n),l=0;l<this.length;l++)this[l].emitter().on(e,o,i);return this},removeListener:function(e,n,i){for(var o=Kc(n),l=0;l<this.length;l++)this[l].emitter().removeListener(e,o,i);return this},removeAllListeners:function(){for(var e=0;e<this.length;e++)this[e].emitter().removeAllListeners();return this},one:function(e,n,i){for(var o=Kc(n),l=0;l<this.length;l++)this[l].emitter().one(e,o,i);return this},once:function(e,n,i){for(var o=Kc(n),l=0;l<this.length;l++)this[l].emitter().on(e,o,i,{once:!0,onceCollection:this})},emit:function(e,n){for(var i=0;i<this.length;i++)this[i].emitter().emit(e,n);return this},emitAndNotify:function(e,n){if(0!==this.length)return this.cy().notify(e,this),this.emit(e,n),this}};vn.eventAliasesOn(pv);var fv={nodes:function(e){return this.filter(function(n){return n.isNode()}).filter(e)},edges:function(e){return this.filter(function(n){return n.isEdge()}).filter(e)},byGroup:function(){for(var e=this.spawn(),n=this.spawn(),i=0;i<this.length;i++){var o=this[i];o.isNode()?e.push(o):n.push(o)}return{nodes:e,edges:n}},filter:function(e,n){if(void 0===e)return this;if(Ot(e)||Gr(e))return new za(e).filter(this);if(Nn(e)){for(var i=this.spawn(),o=0;o<this.length;o++){var l=this[o];(n?e.apply(n,[l,o,this]):e(l,o,this))&&i.push(l)}return i}return this.spawn()},not:function(e){if(e){Ot(e)&&(e=this.filter(e));for(var n=this.spawn(),i=0;i<this.length;i++){var o=this[i];e.has(o)||n.push(o)}return n}return this},absoluteComplement:function(){return this.cy().mutableElements().not(this)},intersect:function(e){if(Ot(e))return this.filter(e);for(var i=this.spawn(),l=this.length<e.length,c=l?this:e,h=l?e:this,f=0;f<c.length;f++){var g=c[f];h.has(g)&&i.push(g)}return i},xor:function(e){var n=this._private.cy;Ot(e)&&(e=n.$(e));var i=this.spawn(),o=e,l=function(c,h){for(var f=0;f<c.length;f++){var g=c[f];h.hasElementWithId(g._private.data.id)||i.push(g)}};return l(this,o),l(o,this),i},diff:function(e){var n=this._private.cy;Ot(e)&&(e=n.$(e));var i=this.spawn(),o=this.spawn(),l=this.spawn(),c=e,h=function(f,g,y){for(var x=0;x<f.length;x++){var _=f[x];g.hasElementWithId(_._private.data.id)?l.merge(_):y.push(_)}};return h(this,c,i),h(c,this,o),{left:i,right:o,both:l}},add:function(e){var n=this._private.cy;if(!e)return this;if(Ot(e)){var i=e;e=n.mutableElements().filter(i)}for(var o=this.spawnSelf(),l=0;l<e.length;l++){var c=e[l];!this.has(c)&&o.push(c)}return o},merge:function(e){var n=this._private,i=n.cy;if(!e)return this;if(e&&Ot(e)){var o=e;e=i.mutableElements().filter(o)}for(var l=n.map,c=0;c<e.length;c++){var h=e[c],f=h._private.data.id;if(!l.has(f)){var g=this.length++;this[g]=h,l.set(f,{ele:h,index:g})}}return this},unmergeAt:function(e){var n=this[e].id(),i=this._private.map;if(this[e]=void 0,i.delete(n),this.length>1&&e!==this.length-1){var l=this.length-1,c=this[l],h=c._private.data.id;this[l]=void 0,this[e]=c,i.set(h,{ele:c,index:e})}return this.length--,this},unmergeOne:function(e){var o=this._private.map.get((e=e[0])._private.data.id);return o?(this.unmergeAt(o.index),this):this},unmerge:function(e){var n=this._private.cy;if(!e)return this;if(e&&Ot(e)){var i=e;e=n.mutableElements().filter(i)}for(var o=0;o<e.length;o++)this.unmergeOne(e[o]);return this},unmergeBy:function(e){for(var n=this.length-1;n>=0;n--)e(this[n])&&this.unmergeAt(n);return this},map:function(e,n){for(var i=[],o=0;o<this.length;o++){var l=this[o],c=n?e.apply(n,[l,o,this]):e(l,o,this);i.push(c)}return i},reduce:function(e,n){for(var i=n,o=0;o<this.length;o++)i=e(i,this[o],o,this);return i},max:function(e,n){for(var i,o=-1/0,l=0;l<this.length;l++){var c=this[l],h=n?e.apply(n,[c,l,this]):e(c,l,this);h>o&&(o=h,i=c)}return{value:o,ele:i}},min:function(e,n){for(var i,o=1/0,l=0;l<this.length;l++){var c=this[l],h=n?e.apply(n,[c,l,this]):e(c,l,this);h<o&&(o=h,i=c)}return{value:o,ele:i}}},on=fv;on.u=on["|"]=on["+"]=on.union=on.or=on.add,on["\\"]=on["!"]=on["-"]=on.difference=on.relativeComplement=on.subtract=on.not,on.n=on["&"]=on["."]=on.and=on.intersection=on.intersect,on["^"]=on["(+)"]=on["(-)"]=on.symmetricDifference=on.symdiff=on.xor,on.fnFilter=on.filterFn=on.stdFilter=on.filter,on.complement=on.abscomp=on.absoluteComplement;var gv=function(e,n){var i=e.cy().hasCompoundNodes();function o(g){var y=g.pstyle("z-compound-depth");return"auto"===y.value?i?g.zDepth():0:"bottom"===y.value?-1:"top"===y.value?Sh:0}var l=o(e)-o(n);if(0!==l)return l;function c(g){return"auto"===g.pstyle("z-index-compare").value&&g.isNode()?1:0}var h=c(e)-c(n);if(0!==h)return h;var f=e.pstyle("z-index").value-n.pstyle("z-index").value;return 0!==f?f:e.poolIndex()-n.poolIndex()},Gc={forEach:function(e,n){if(Nn(e))for(var i=this.length,o=0;o<i;o++){var l=this[o];if(!1===(n?e.apply(n,[l,o,this]):e(l,o,this)))break}return this},toArray:function(){for(var e=[],n=0;n<this.length;n++)e.push(this[n]);return e},slice:function(e,n){var i=[],o=this.length;null==n&&(n=o),null==e&&(e=0),e<0&&(e=o+e),n<0&&(n=o+n);for(var l=e;l>=0&&l<n&&l<o;l++)i.push(this[l]);return this.spawn(i)},size:function(){return this.length},eq:function(e){return this[e]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return 0===this.length},nonempty:function(){return!this.empty()},sort:function(e){if(!Nn(e))return this;var n=this.toArray().sort(e);return this.spawn(n)},sortByZIndex:function(){return this.sort(gv)},zDepth:function(){var e=this[0];if(e){var n=e._private;if("nodes"===n.group){var i=n.data.parent?e.parents().size():0;return e.isParent()?i:Sh-1}var l=n.target,c=n.source.zDepth(),h=l.zDepth();return Math.max(c,h,0)}}};Gc.each=Gc.forEach,"undefined"!=(typeof Symbol>"u"?"undefined":Zn(Symbol))&&"undefined"!=Zn(Symbol.iterator)&&(Gc[Symbol.iterator]=function(){var e=this,n={value:void 0,done:!1},i=0,o=this.length;return Af({next:function(){return i<o?n.value=e[i++]:(n.value=void 0,n.done=!0),n}},Symbol.iterator,function(){return this})});var yb=ur({nodeDimensionsIncludeLabels:!1}),Uc={layoutDimensions:function(e){var n;if(e=yb(e),this.takesUpSpace())if(e.nodeDimensionsIncludeLabels){var i=this.boundingBox();n={w:i.w,h:i.h}}else n={w:this.outerWidth(),h:this.outerHeight()};else n={w:0,h:0};return 0!==n.w&&0!==n.h||(n.w=n.h=1),n},layoutPositions:function(e,n,i){var o=this.nodes().filter(function(P){return!P.isParent()}),l=this.cy(),c=n.eles,h=function(P){return P.id()},f=Sl(i,h);e.emit({type:"layoutstart",layout:e}),e.animations=[];var g=n.spacingFactor&&1!==n.spacingFactor,y=function(){if(!g)return null;for(var P=jr(),B=0;B<o.length;B++){var G=f(o[B],B);ky(P,G.x,G.y)}return P}(),x=Sl(function(P,B){var G,$,X,H,te,F=f(P,B);return g&&(G=Math.abs(n.spacingFactor),F={x:(H=($=y).x1+$.w/2)+((X=F).x-H)*G,y:(te=$.y1+$.h/2)+(X.y-te)*G}),null!=n.transform&&(F=n.transform(P,F)),F},h);if(n.animate){for(var _=0;_<o.length;_++){var S=o[_],A=x(S,_);if(null==n.animateFilter||n.animateFilter(S,_)){var C=S.animation({position:A,duration:n.animationDuration,easing:n.animationEasing});e.animations.push(C)}else S.position(A)}if(n.fit){var L=l.animation({fit:{boundingBox:c.boundingBoxAt(x),padding:n.padding},duration:n.animationDuration,easing:n.animationEasing});e.animations.push(L)}else if(void 0!==n.zoom&&void 0!==n.pan){var I=l.animation({zoom:n.zoom,pan:n.pan,duration:n.animationDuration,easing:n.animationEasing});e.animations.push(I)}e.animations.forEach(function(P){return P.play()}),e.one("layoutready",n.ready),e.emit({type:"layoutready",layout:e}),vs.all(e.animations.map(function(P){return P.promise()})).then(function(){e.one("layoutstop",n.stop),e.emit({type:"layoutstop",layout:e})})}else o.positions(x),n.fit&&l.fit(n.eles,n.padding),null!=n.zoom&&l.zoom(n.zoom),n.pan&&l.pan(n.pan),e.one("layoutready",n.ready),e.emit({type:"layoutready",layout:e}),e.one("layoutstop",n.stop),e.emit({type:"layoutstop",layout:e});return this},layout:function(e){return this.cy().makeLayout(It({},e,{eles:this}))}};function vv(e,n,i){var o,l=i._private,c=l.styleCache=l.styleCache||[];return null!=(o=c[e])?o:o=c[e]=n(i)}function Zc(e,n){return e=wo(e),function(i){return vv(e,n,i)}}function Qc(e,n){e=wo(e);var i=function(o){return n.call(o)};return function(){var o=this[0];if(o)return vv(e,i,o)}}Uc.createLayout=Uc.makeLayout=Uc.layout;var cr={recalculateRenderedStyle:function(e){var n=this.cy(),i=n.renderer(),o=n.styleEnabled();return i&&o&&i.recalculateRenderedStyle(this,e),this},dirtyStyleCache:function(){var e,n=this.cy(),i=function(o){return o._private.styleCache=null};return n.hasCompoundNodes()?((e=this.spawnSelf().merge(this.descendants()).merge(this.parents())).merge(e.connectedEdges()),e.forEach(i)):this.forEach(function(o){i(o),o.connectedEdges().forEach(i)}),this},updateStyle:function(e){var n=this._private.cy;if(!n.styleEnabled())return this;if(n.batching())return n._private.batchStyleEles.merge(this),this;var i=this;e=!(!e&&void 0!==e),n.hasCompoundNodes()&&(i=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var o=i;return e?o.emitAndNotify("style"):o.emit("style"),i.forEach(function(l){return l._private.styleDirty=!0}),this},cleanStyle:function(){var e=this.cy();if(e.styleEnabled())for(var n=0;n<this.length;n++){var i=this[n];i._private.styleDirty&&(i._private.styleDirty=!1,e.style().apply(i))}},parsedStyle:function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this[0],o=i.cy();if(o.styleEnabled()&&i)return this.cleanStyle(),i._private.style[e]??(n?o.style().getDefaultProperty(e):null)},numericStyle:function(e){var n=this[0];if(n.cy().styleEnabled()&&n){var i=n.pstyle(e);return void 0!==i.pfValue?i.pfValue:i.value}},numericStyleUnits:function(e){var n=this[0];if(n.cy().styleEnabled())return n?n.pstyle(e).units:void 0},renderedStyle:function(e){var n=this.cy();if(!n.styleEnabled())return this;var i=this[0];return i?n.style().getRenderedStyle(i,e):void 0},style:function(e,n){var i=this.cy();if(!i.styleEnabled())return this;var o=i.style();if(en(e))o.applyBypass(this,e,!1),this.emitAndNotify("style");else if(Ot(e)){if(void 0===n){var c=this[0];return c?o.getStylePropertyValue(c,e):void 0}o.applyBypass(this,e,n,!1),this.emitAndNotify("style")}else if(void 0===e){var h=this[0];return h?o.getRawStyle(h):void 0}return this},removeStyle:function(e){var n=this.cy();if(!n.styleEnabled())return this;var i=n.style();if(void 0===e)for(var o=0;o<this.length;o++)i.removeAllBypasses(this[o],!1);else{e=e.split(/\s+/);for(var c=0;c<this.length;c++)i.removeBypasses(this[c],e,!1)}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var e=this.cy();if(!e.styleEnabled())return 1;var n=e.hasCompoundNodes(),i=this[0];if(i){var o=i._private,l=i.pstyle("opacity").value;if(!n)return l;var c=o.data.parent?i.parents():null;if(c)for(var h=0;h<c.length;h++)l*=c[h].pstyle("opacity").value;return l}},transparent:function(){if(!this.cy().styleEnabled())return!1;var e=this[0],n=e.cy().hasCompoundNodes();return e?n?0===e.effectiveOpacity():0===e.pstyle("opacity").value:void 0},backgrounding:function(){return!!this.cy().styleEnabled()&&!!this[0]._private.backgrounding}};function lp(e,n){var i=e._private.data.parent?e.parents():null;if(i)for(var o=0;o<i.length;o++)if(!n(i[o]))return!1;return!0}function up(e){var n=e.ok,i=e.edgeOkViaNode||e.ok,o=e.parentOk||e.ok;return function(){var l=this.cy();if(!l.styleEnabled())return!0;var c=this[0],h=l.hasCompoundNodes();if(c){var f=c._private;if(!n(c))return!1;if(c.isNode())return!h||lp(c,o);var g=f.source,y=f.target;return i(g)&&(!h||lp(g,i))&&(g===y||i(y)&&(!h||lp(y,i)))}}}var Cs=Zc("eleTakesUpSpace",function(e){return"element"===e.pstyle("display").value&&0!==e.width()&&(!e.isNode()||0!==e.height())});cr.takesUpSpace=Qc("takesUpSpace",up({ok:Cs}));var bb=Zc("eleInteractive",function(e){return"yes"===e.pstyle("events").value&&"visible"===e.pstyle("visibility").value&&Cs(e)}),xb=Zc("parentInteractive",function(e){return"visible"===e.pstyle("visibility").value&&Cs(e)});cr.interactive=Qc("interactive",up({ok:bb,parentOk:xb,edgeOkViaNode:Cs})),cr.noninteractive=function(){var e=this[0];if(e)return!e.interactive()};var wb=Zc("eleVisible",function(e){return"visible"===e.pstyle("visibility").value&&0!==e.pstyle("opacity").pfValue&&Cs(e)}),Eb=Cs;cr.visible=Qc("visible",up({ok:wb,edgeOkViaNode:Eb})),cr.hidden=function(){var e=this[0];if(e)return!e.visible()},cr.isBundledBezier=Qc("isBundledBezier",function(){return!!this.cy().styleEnabled()&&!this.removed()&&"bezier"===this.pstyle("curve-style").value&&this.takesUpSpace()}),cr.bypass=cr.css=cr.style,cr.renderedCss=cr.renderedStyle,cr.removeBypass=cr.removeCss=cr.removeStyle,cr.pstyle=cr.parsedStyle;var ja={};function mv(e){return function(){var n=arguments,i=[];if(2===n.length)this.on(e.event,n[0],n[1]);else if(1===n.length&&Nn(n[0]))this.on(e.event,n[0]);else if(0===n.length||1===n.length&&yn(n[0])){for(var h=1===n.length?n[0]:null,f=0;f<this.length;f++){var g=this[f],y=!e.ableField||g._private[e.ableField],x=g._private[e.field]!=e.value;if(e.overrideAble){var _=e.overrideAble(g);if(void 0!==_&&(y=_,!_))return this}y&&(g._private[e.field]=e.value,x&&i.push(g))}var S=this.spawn(i);S.updateStyle(),S.emit(e.event),h&&S.emit(h)}return this}}function Ss(e){ja[e.field]=function(){var n=this[0];if(n){if(e.overrideField){var i=e.overrideField(n);if(void 0!==i)return i}return n._private[e.field]}},ja[e.on]=mv({event:e.on,field:e.field,ableField:e.ableField,overrideAble:e.overrideAble,value:!0}),ja[e.off]=mv({event:e.off,field:e.field,ableField:e.ableField,overrideAble:e.overrideAble,value:!1})}Ss({field:"locked",overrideField:function(e){return!!e.cy().autolock()||void 0},on:"lock",off:"unlock"}),Ss({field:"grabbable",overrideField:function(e){return!e.cy().autoungrabify()&&!e.pannable()&&void 0},on:"grabify",off:"ungrabify"}),Ss({field:"selected",ableField:"selectable",overrideAble:function(e){return!e.cy().autounselectify()&&void 0},on:"select",off:"unselect"}),Ss({field:"selectable",overrideField:function(e){return!e.cy().autounselectify()&&void 0},on:"selectify",off:"unselectify"}),ja.deselect=ja.unselect,ja.grabbed=function(){var e=this[0];if(e)return e._private.grabbed},Ss({field:"active",on:"activate",off:"unactivate"}),Ss({field:"pannable",on:"panify",off:"unpanify"}),ja.inactive=function(){var e=this[0];if(e)return!e._private.active};var kr={},yv=function(e){return function(n){for(var i=[],o=0;o<this.length;o++){var l=this[o];if(l.isNode()){for(var c=!1,h=l.connectedEdges(),f=0;f<h.length;f++){var g=h[f],y=g.source(),x=g.target();if(e.noIncomingEdges&&x===l&&y!==l||e.noOutgoingEdges&&y===l&&x!==l){c=!0;break}}c||i.push(l)}}return this.spawn(i,!0).filter(n)}},bv=function(e){return function(n){for(var i=[],o=0;o<this.length;o++){var l=this[o];if(l.isNode())for(var c=l.connectedEdges(),h=0;h<c.length;h++){var f=c[h],g=f.source(),y=f.target();e.outgoing&&g===l?(i.push(f),i.push(y)):e.incoming&&y===l&&(i.push(f),i.push(g))}}return this.spawn(i,!0).filter(n)}},xv=function(e){return function(n){for(var i=this,o=[],l={};;){var c=e.outgoing?i.outgoers():i.incomers();if(0===c.length)break;for(var h=!1,f=0;f<c.length;f++){var g=c[f],y=g.id();l[y]||(l[y]=!0,o.push(g),h=!0)}if(!h)break;i=c}return this.spawn(o,!0).filter(n)}};function wv(e){return function(n){for(var i=[],o=0;o<this.length;o++){var l=this[o]._private[e.attr];l&&i.push(l)}return this.spawn(i,!0).filter(n)}}function Ev(e){return function(n){var i=[],o=this._private.cy,l=e||{};Ot(n)&&(n=o.$(n));for(var c=0;c<n.length;c++)for(var h=n[c]._private.edges,f=0;f<h.length;f++){var g=h[f],y=g._private.data,x=this.hasElementWithId(y.source)&&n.hasElementWithId(y.target),_=n.hasElementWithId(y.source)&&this.hasElementWithId(y.target);if(x||_){if((l.thisIsSrc||l.thisIsTgt)&&(l.thisIsSrc&&!x||l.thisIsTgt&&!_))continue;i.push(g)}}return this.spawn(i,!0)}}function _v(e){return e=It({},{codirected:!1},e),function(n){for(var i=[],o=this.edges(),l=e,c=0;c<o.length;c++)for(var h=o[c]._private,f=h.source,g=f._private.data.id,y=h.data.target,x=f._private.edges,_=0;_<x.length;_++){var S=x[_],A=S._private.data,C=A.target,L=A.source,I=C===y&&L===g;(l.codirected&&I||!l.codirected&&(I||g===C&&y===L))&&i.push(S)}return this.spawn(i,!0).filter(n)}}kr.clearTraversalCache=function(){for(var e=0;e<this.length;e++)this[e]._private.traversalCache=null},It(kr,{roots:yv({noIncomingEdges:!0}),leaves:yv({noOutgoingEdges:!0}),outgoers:ci(bv({outgoing:!0}),"outgoers"),successors:xv({outgoing:!0}),incomers:ci(bv({incoming:!0}),"incomers"),predecessors:xv({incoming:!0})}),It(kr,{neighborhood:ci(function(e){for(var n=[],i=this.nodes(),o=0;o<i.length;o++)for(var l=i[o],c=l.connectedEdges(),h=0;h<c.length;h++){var f=c[h],g=f.source(),y=f.target(),x=l===g?y:g;x.length>0&&n.push(x[0]),n.push(f[0])}return this.spawn(n,!0).filter(e)},"neighborhood"),closedNeighborhood:function(e){return this.neighborhood().add(this).filter(e)},openNeighborhood:function(e){return this.neighborhood(e)}}),kr.neighbourhood=kr.neighborhood,kr.closedNeighbourhood=kr.closedNeighborhood,kr.openNeighbourhood=kr.openNeighborhood,It(kr,{source:ci(function(e){var n,i=this[0];return i&&(n=i._private.source||i.cy().collection()),n&&e?n.filter(e):n},"source"),target:ci(function(e){var n,i=this[0];return i&&(n=i._private.target||i.cy().collection()),n&&e?n.filter(e):n},"target"),sources:wv({attr:"source"}),targets:wv({attr:"target"})}),It(kr,{edgesWith:ci(Ev(),"edgesWith"),edgesTo:ci(Ev({thisIsSrc:!0}),"edgesTo")}),It(kr,{connectedEdges:ci(function(e){for(var n=[],i=0;i<this.length;i++){var o=this[i];if(o.isNode())for(var l=o._private.edges,c=0;c<l.length;c++)n.push(l[c])}return this.spawn(n,!0).filter(e)},"connectedEdges"),connectedNodes:ci(function(e){for(var n=[],i=0;i<this.length;i++){var o=this[i];o.isEdge()&&(n.push(o.source()[0]),n.push(o.target()[0]))}return this.spawn(n,!0).filter(e)},"connectedNodes"),parallelEdges:ci(_v(),"parallelEdges"),codirectedEdges:ci(_v({codirected:!0}),"codirectedEdges")}),It(kr,{components:function(e){var n=this,i=n.cy(),o=i.collection(),l=null==e?n.nodes():e.nodes(),c=[];null!=e&&l.empty()&&(l=e.sources());var h=function(g,y){o.merge(g),l.unmerge(g),y.merge(g)};if(l.empty())return n.spawn();var f=function(){var g=i.collection();c.push(g);var y=l[0];h(y,g),n.bfs({directed:!1,roots:y,visit:function(x){return h(x,g)}}),g.forEach(function(x){x.connectedEdges().forEach(function(_){n.has(_)&&g.has(_.source())&&g.has(_.target())&&g.merge(_)})})};do{f()}while(l.length>0);return c},component:function(){var e=this[0];return e.cy().mutableElements().components(e)[0]}}),kr.componentsOf=kr.components;var dr=function(e,n){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(void 0!==e){var l=new Fi,c=!1;if(n){if(n.length>0&&en(n[0])&&!Cl(n[0])){c=!0;for(var h=[],f=new us,g=0,y=n.length;g<y;g++){var x=n[g];null==x.data&&(x.data={});var _=x.data;if(null==_.id)_.id=eg();else if(e.hasElementWithId(_.id)||f.has(_.id))continue;var S=new Ec(e,x,!1);h.push(S),f.add(_.id)}n=h}}else n=[];this.length=0;for(var A=0,C=n.length;A<C;A++){var L=n[A][0];if(null!=L){var I=L._private.data.id;i&&l.has(I)||(i&&l.set(I,{index:this.length,ele:L}),this[this.length]=L,this.length++)}}this._private={eles:this,cy:e,get map(){return null==this.lazyMap&&this.rebuildMap(),this.lazyMap},set map(P){this.lazyMap=P},rebuildMap:function(){for(var P=this.lazyMap=new Fi,B=this.eles,F=0;F<B.length;F++){var G=B[F];P.set(G.id(),{index:F,ele:G})}}},i&&(this._private.map=l),c&&!o&&this.restore()}else zn("A collection must have a reference to the core")},kn=Ec.prototype=dr.prototype=Object.create(Array.prototype);kn.instanceString=function(){return"collection"},kn.spawn=function(e,n){return new dr(this.cy(),e,n)},kn.spawnSelf=function(){return this.spawn(this)},kn.cy=function(){return this._private.cy},kn.renderer=function(){return this._private.cy.renderer()},kn.element=function(){return this[0]},kn.collection=function(){return Nf(this)?this:new dr(this._private.cy,[this])},kn.unique=function(){return new dr(this._private.cy,this,!0)},kn.hasElementWithId=function(e){return this._private.map.has(e=""+e)},kn.getElementById=function(e){var n=this._private.cy,i=this._private.map.get(e=""+e);return i?i.ele:new dr(n)},kn.$id=kn.getElementById,kn.poolIndex=function(){return this._private.cy._private.elements._private.map.get(this[0]._private.data.id).index},kn.indexOf=function(e){return this._private.map.get(e[0]._private.data.id).index},kn.indexOfId=function(e){return this._private.map.get(e=""+e).index},kn.json=function(e){var n=this.element(),i=this.cy();if(null==n&&e)return this;if(null!=n){var o=n._private;if(en(e)){if(i.startBatch(),e.data){n.data(e.data);var l=o.data;if(n.isEdge()){var c=!1,h={},f=e.data.source,g=e.data.target;null!=f&&f!=l.source&&(h.source=""+f,c=!0),null!=g&&g!=l.target&&(h.target=""+g,c=!0),c&&(n=n.move(h))}else{var x=e.data.parent;!("parent"in e.data)||null==x&&null==l.parent||x==l.parent||(void 0===x&&(x=null),null!=x&&(x=""+x),n=n.move({parent:x}))}}e.position&&n.position(e.position);var _=function(C,L,I){var P=e[C];null!=P&&P!==o[C]&&(P?n[L]():n[I]())};return _("removed","remove","restore"),_("selected","select","unselect"),_("selectable","selectify","unselectify"),_("locked","lock","unlock"),_("grabbable","grabify","ungrabify"),_("pannable","panify","unpanify"),null!=e.classes&&n.classes(e.classes),i.endBatch(),this}if(void 0===e){var S={data:Ri(o.data),position:Ri(o.position),group:o.group,removed:o.removed,selected:o.selected,selectable:o.selectable,locked:o.locked,grabbable:o.grabbable,pannable:o.pannable,classes:""},A=0;return o.classes.forEach(function(C){return S.classes+=0==A++?C:" "+C}),S}}},kn.jsons=function(){for(var e=[],n=0;n<this.length;n++){var i=this[n].json();e.push(i)}return e},kn.clone=function(){for(var e=this.cy(),n=[],i=0;i<this.length;i++){var o=this[i].json(),l=new Ec(e,o,!1);n.push(l)}return new dr(e,n)},kn.copy=kn.clone,kn.restore=function(){for(var e,n,i=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],l=this,c=l.cy(),h=c._private,f=[],g=[],y=0,x=l.length;y<x;y++){var _=l[y];o&&!_.removed()||(_.isNode()?f.push(_):g.push(_))}e=f.concat(g);var S=function(){e.splice(n,1),n--};for(n=0;n<e.length;n++){var A=e[n],C=A._private,L=C.data;if(A.clearTraversalCache(),o||C.removed)if(void 0===L.id)L.id=eg();else if(gt(L.id))L.id=""+L.id;else{if(Ma(L.id)||!Ot(L.id)){zn("Can not create element with invalid string ID `"+L.id+"`"),S();continue}if(c.hasElementWithId(L.id)){zn("Can not create second element with ID `"+L.id+"`"),S();continue}}var I=L.id;if(A.isNode()){var P=C.position;null==P.x&&(P.x=0),null==P.y&&(P.y=0)}if(A.isEdge()){for(var B=A,F=["source","target"],G=F.length,$=!1,X=0;X<G;X++){var H=F[X],te=L[H];gt(te)&&(te=L[H]=""+L[H]),null==te||""===te?(zn("Can not create edge `"+I+"` with unspecified "+H),$=!0):c.hasElementWithId(te)||(zn("Can not create edge `"+I+"` with nonexistant "+H+" `"+te+"`"),$=!0)}if($){S();continue}var re=c.getElementById(L.source),ae=c.getElementById(L.target);re.same(ae)?re._private.edges.push(B):(re._private.edges.push(B),ae._private.edges.push(B)),B._private.source=re,B._private.target=ae}C.map=new Fi,C.map.set(I,{ele:A,index:0}),C.removed=!1,o&&c.addToPool(A)}for(var le=0;le<f.length;le++){var se=f[le],de=se._private.data;gt(de.parent)&&(de.parent=""+de.parent);var we=de.parent;if(null!=we||se._private.parent){var fe=se._private.parent?c.collection().merge(se._private.parent):c.getElementById(we);if(fe.empty())de.parent=void 0;else if(fe[0].removed())gn("Node added with missing parent, reference to parent removed"),de.parent=void 0,se._private.parent=null;else{for(var ge=!1,ee=fe;!ee.empty();){if(se.same(ee)){ge=!0,de.parent=void 0;break}ee=ee.parent()}ge||(fe[0]._private.children.push(se),se._private.parent=fe[0],h.hasCompoundNodes=!0)}}}if(e.length>0){for(var Se=e.length===l.length?l:new dr(c,e),Ie=0;Ie<Se.length;Ie++){var _e=Se[Ie];_e.isNode()||(_e.parallelEdges().clearTraversalCache(),_e.source().clearTraversalCache(),_e.target().clearTraversalCache())}(h.hasCompoundNodes?c.collection().merge(Se).merge(Se.connectedNodes()).merge(Se.parent()):Se).dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(i),i?Se.emitAndNotify("add"):o&&Se.emit("add")}return l},kn.removed=function(){var e=this[0];return e&&e._private.removed},kn.inside=function(){var e=this[0];return e&&!e._private.removed},kn.remove=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this,o=[],l={},c=i._private.cy;function g(we){var be=l[we.id()];n&&we.removed()||be||(l[we.id()]=!0,we.isNode()?(o.push(we),function h(we){for(var be=we._private.edges,fe=0;fe<be.length;fe++)g(be[fe])}(we),function f(we){for(var be=we._private.children,fe=0;fe<be.length;fe++)g(be[fe])}(we)):o.unshift(we))}for(var y=0,x=i.length;y<x;y++)g(i[y]);function S(we,be){Ba(we._private.edges,be),we.clearTraversalCache()}var C=[];function L(we,be){be=be[0];var fe=(we=we[0])._private.children,ge=we.id();Ba(fe,be),be._private.parent=null,C.ids[ge]||(C.ids[ge]=!0,C.push(we))}C.ids={},i.dirtyCompoundBoundsCache(),n&&c.removeFromPool(o);for(var I=0;I<o.length;I++){var P=o[I];if(P.isEdge()){var B=P.source()[0],F=P.target()[0];S(B,P),S(F,P);for(var G=P.parallelEdges(),$=0;$<G.length;$++){var X=G[$];X.clearTraversalCache(),X.isBundledBezier()&&X.dirtyBoundingBoxCache()}}else{var H=P.parent();0!==H.length&&L(H,P)}n&&(P._private.removed=!0)}var te=c._private.elements;c._private.hasCompoundNodes=!1;for(var re=0;re<te.length;re++)if(te[re].isParent()){c._private.hasCompoundNodes=!0;break}var le=new dr(this.cy(),o);le.size()>0&&(e?le.emitAndNotify("remove"):n&&le.emit("remove"));for(var se=0;se<C.length;se++){var de=C[se];n&&de.removed()||de.updateStyle()}return le},kn.move=function(e){var n=this._private.cy,i=this,o=function(x){return null==x?x:""+x};if(void 0!==e.source||void 0!==e.target){var l=o(e.source),c=o(e.target),h=null!=l&&n.hasElementWithId(l),f=null!=c&&n.hasElementWithId(c);(h||f)&&(n.batch(function(){i.remove(!1,!1),i.emitAndNotify("moveout");for(var x=0;x<i.length;x++){var _=i[x],S=_._private.data;_.isEdge()&&(h&&(S.source=l),f&&(S.target=c))}i.restore(!1,!1)}),i.emitAndNotify("move"))}else if(void 0!==e.parent){var g=o(e.parent);if(null===g||n.hasElementWithId(g)){var y=null===g?void 0:g;n.batch(function(){var x=i.remove(!1,!1);x.emitAndNotify("moveout");for(var _=0;_<i.length;_++){var S=i[_],A=S._private.data;S.isNode()&&(A.parent=y)}x.restore(!1,!1)}),i.emitAndNotify("move")}}return this},[Sg,nb,Rc,Ra,Es,lb,Yc,fb,pv,fv,{isNode:function(){return"nodes"===this.group()},isEdge:function(){return"edges"===this.group()},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var e=this[0];if(e)return e._private.group}},Gc,Uc,cr,ja,kr].forEach(function(e){It(kn,e)});var _b={add:function(e){var n,i=this;if(Gr(e)){var o=e;if(o._private.cy===i)n=o.restore();else{for(var l=[],c=0;c<o.length;c++)l.push(o[c].json());n=new dr(i,l)}}else if(yn(e))n=new dr(i,e);else if(en(e)&&(yn(e.nodes)||yn(e.edges))){for(var f=e,g=[],y=["nodes","edges"],x=0,_=y.length;x<_;x++){var S=y[x],A=f[S];if(yn(A))for(var C=0,L=A.length;C<L;C++){var I=It({group:S},A[C]);g.push(I)}}n=new dr(i,g)}else n=new Ec(i,e).collection();return n},remove:function(e){return Gr(e)||Ot(e)&&(e=this.$(e)),e.remove()}},kb=function(){function e(o){return-o.tension*o.x-o.friction*o.v}function n(o,l,c){var h={x:o.x+c.dx*l,v:o.v+c.dv*l,tension:o.tension,friction:o.friction};return{dx:h.v,dv:e(h)}}function i(o,l){var c={dx:o.v,dv:e(o)},h=n(o,.5*l,c),f=n(o,.5*l,h),g=n(o,l,f),x=1/6*(c.dv+2*(h.dv+f.dv)+g.dv);return o.x=o.x+1/6*(c.dx+2*(h.dx+f.dx)+g.dx)*l,o.v=o.v+x*l,o}return function o(l,c,h){var f,g,y,x={x:-1,v:0,tension:null,friction:null},_=[0],S=0;for(l=parseFloat(l)||500,c=parseFloat(c)||20,h=h||null,x.tension=l,x.friction=c,g=(f=null!==h)?(S=o(l,c))/h*.016:.016;y=i(y||x,g),_.push(1+y.x),S+=16,Math.abs(y.x)>1e-4&&Math.abs(y.v)>1e-4;);return f?function(A){return _[A*(_.length-1)|0]}:S}}(),Cn=function(e,n,i,o){var l=function(c,h,f,g){var C=.1,L=typeof Float32Array<"u";if(4!==arguments.length)return!1;for(var I=0;I<4;++I)if("number"!=typeof arguments[I]||isNaN(arguments[I])||!isFinite(arguments[I]))return!1;c=Math.min(c,1),f=Math.min(f,1),c=Math.max(c,0),f=Math.max(f,0);var P=L?new Float32Array(11):new Array(11);function B(be,fe){return 1-3*fe+3*be}function F(be,fe){return 3*fe-6*be}function G(be){return 3*be}function $(be,fe,ge){return((B(fe,ge)*be+F(fe,ge))*be+G(fe))*be}function X(be,fe,ge){return 3*B(fe,ge)*be*be+2*F(fe,ge)*be+G(fe)}var le=!1;var de=function(be){return le||function se(){le=!0,c===h&&f===g||function te(){for(var be=0;be<11;++be)P[be]=$(be*C,c,f)}()}(),c===h&&f===g?be:0===be?0:1===be?1:$(function ae(be){for(var fe=0,ge=1;10!==ge&&P[ge]<=be;++ge)fe+=C;--ge;var Se=fe+(be-P[ge])/(P[ge+1]-P[ge])*C,Ie=X(Se,c,f);return Ie>=.001?function H(be,fe){for(var ge=0;ge<4;++ge){var ee=X(fe,c,f);if(0===ee)return fe;fe-=($(fe,c,f)-be)/ee}return fe}(be,Se):0===Ie?Se:function re(be,fe,ge){var ee,Se,Ie=0;do{(ee=$(Se=fe+(ge-fe)/2,c,f)-be)>0?ge=Se:fe=Se}while(Math.abs(ee)>1e-7&&++Ie<10);return Se}(be,fe,fe+C)}(be),h,g)};de.getControlPoints=function(){return[{x:c,y:h},{x:f,y:g}]};var we="generateBezier("+[c,h,f,g]+")";return de.toString=function(){return we},de}(e,n,i,o);return function(c,h,f){return c+(h-c)*l(f)}},Jc={linear:function(e,n,i){return e+(n-e)*i},ease:Cn(.25,.1,.25,1),"ease-in":Cn(.42,0,1,1),"ease-out":Cn(0,0,.58,1),"ease-in-out":Cn(.42,0,.58,1),"ease-in-sine":Cn(.47,0,.745,.715),"ease-out-sine":Cn(.39,.575,.565,1),"ease-in-out-sine":Cn(.445,.05,.55,.95),"ease-in-quad":Cn(.55,.085,.68,.53),"ease-out-quad":Cn(.25,.46,.45,.94),"ease-in-out-quad":Cn(.455,.03,.515,.955),"ease-in-cubic":Cn(.55,.055,.675,.19),"ease-out-cubic":Cn(.215,.61,.355,1),"ease-in-out-cubic":Cn(.645,.045,.355,1),"ease-in-quart":Cn(.895,.03,.685,.22),"ease-out-quart":Cn(.165,.84,.44,1),"ease-in-out-quart":Cn(.77,0,.175,1),"ease-in-quint":Cn(.755,.05,.855,.06),"ease-out-quint":Cn(.23,1,.32,1),"ease-in-out-quint":Cn(.86,0,.07,1),"ease-in-expo":Cn(.95,.05,.795,.035),"ease-out-expo":Cn(.19,1,.22,1),"ease-in-out-expo":Cn(1,0,0,1),"ease-in-circ":Cn(.6,.04,.98,.335),"ease-out-circ":Cn(.075,.82,.165,1),"ease-in-out-circ":Cn(.785,.135,.15,.86),spring:function(e,n,i){if(0===i)return Jc.linear;var o=kb(e,n,i);return function(l,c,h){return l+(c-l)*o(h)}},"cubic-bezier":Cn};function kv(e,n,i,o,l){if(1===o||n===i)return i;var c=l(n,i,o);return null==e||((e.roundValue||e.color)&&(c=Math.round(c)),void 0!==e.min&&(c=Math.max(c,e.min)),void 0!==e.max&&(c=Math.min(c,e.max))),c}function Cv(e,n){return null!=e.pfValue||null!=e.value?null==e.pfValue||null!=n&&"%"===n.type.units?e.value:e.pfValue:e}function Ts(e,n,i,o,l){var c=null!=l?l.type:null;i<0?i=0:i>1&&(i=1);var h=Cv(e,l),f=Cv(n,l);if(gt(h)&&gt(f))return kv(c,h,f,i,o);if(yn(h)&&yn(f)){for(var g=[],y=0;y<f.length;y++){var x=h[y],_=f[y];if(null!=x&&null!=_){var S=kv(c,x,_,i,o);g.push(S)}else g.push(_)}return g}}function Cb(e,n,i,o){var l=!o,c=e._private,h=n._private,f=h.easing,g=h.startTime,y=(o?e:e.cy()).style();if(!h.easingImpl)if(null==f)h.easingImpl=Jc.linear;else{var x,_,S;x=Ot(f)?y.parse("transition-timing-function",f).value:f,Ot(x)?(_=x,S=[]):(_=x[1],S=x.slice(2).map(function(fe){return+fe})),S.length>0?("spring"===_&&S.push(h.duration),h.easingImpl=Jc[_].apply(null,S)):h.easingImpl=Jc[_]}var A,C=h.easingImpl;if(A=0===h.duration?1:(i-g)/h.duration,h.applying&&(A=h.progress),A<0?A=0:A>1&&(A=1),null==h.delay){var L=h.startPosition,I=h.position;if(I&&l&&!e.locked()){var P={};Hl(L.x,I.x)&&(P.x=Ts(L.x,I.x,A,C)),Hl(L.y,I.y)&&(P.y=Ts(L.y,I.y,A,C)),e.position(P)}var B=h.startPan,F=h.pan,G=c.pan,$=null!=F&&o;$&&(Hl(B.x,F.x)&&(G.x=Ts(B.x,F.x,A,C)),Hl(B.y,F.y)&&(G.y=Ts(B.y,F.y,A,C)),e.emit("pan"));var X=h.startZoom,H=h.zoom,te=null!=H&&o;te&&(Hl(X,H)&&(c.zoom=Ol(c.minZoom,Ts(X,H,A,C),c.maxZoom)),e.emit("zoom")),($||te)&&e.emit("viewport");var re=h.style;if(re&&re.length>0&&l){for(var ae=0;ae<re.length;ae++){var le=re[ae],se=le.name,we=h.startStyle[se],be=Ts(we,le,A,C,y.properties[we.name]);y.overrideBypass(e,se,be)}e.emit("style")}}return h.progress=A,A}function Hl(e,n){return!(null==e||null==n||!(gt(e)&&gt(n)||e&&n))}function Sb(e,n,i,o){var l=n._private;l.started=!0,l.startTime=i-l.progress*l.duration}function Sv(e,n){var i=n._private.aniEles,o=[];function l(y,x){var _=y._private,S=_.animation.current,A=_.animation.queue,C=!1;if(0===S.length){var L=A.shift();L&&S.push(L)}for(var I=function(G){for(var $=G.length-1;$>=0;$--)(0,G[$])();G.splice(0,G.length)},P=S.length-1;P>=0;P--){var B=S[P],F=B._private;F.stopped?(S.splice(P,1),F.hooked=!1,F.playing=!1,F.started=!1,I(F.frames)):(F.playing||F.applying)&&(F.playing&&F.applying&&(F.applying=!1),F.started||Sb(0,B,e),Cb(y,B,e,x),F.applying&&(F.applying=!1),I(F.frames),null!=F.step&&F.step(e),B.completed()&&(S.splice(P,1),F.hooked=!1,F.playing=!1,F.started=!1,I(F.completes)),C=!0)}return x||0!==S.length||0!==A.length||o.push(y),C}for(var c=!1,h=0;h<i.length;h++){var f=l(i[h]);c=c||f}var g=l(n,!0);(c||g)&&(i.length>0?n.notify("draw",i):n.notify("draw")),i.unmerge(o),n.emit("step")}var Tb={animate:vn.animate(),animation:vn.animation(),animated:vn.animated(),clearQueue:vn.clearQueue(),delay:vn.delay(),delayAnimation:vn.delayAnimation(),stop:vn.stop(),addToAnimationPool:function(e){this.styleEnabled()&&this._private.aniEles.merge(e)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var e=this;if(e._private.animationsRunning=!0,e.styleEnabled()){var n=e.renderer();n&&n.beforeRender?n.beforeRender(function(i,o){Sv(o,e)},n.beforeRenderPriorities.animations):function i(){e._private.animationsRunning&&bc(function(o){Sv(o,e),i()})}()}}},Pb={qualifierCompare:function(e,n){return null==e||null==n?null==e&&null==n:e.sameText(n)},eventMatches:function(e,n,i){var o=n.qualifier;return null==o||e!==i.target&&Cl(i.target)&&o.matches(i.target)},addEventFields:function(e,n){n.cy=e,n.target=e},callbackContext:function(e,n,i){return null!=n.qualifier?i.target:e}},ed=function(e){return Ot(e)?new za(e):e},Tv={createEmitter:function(){var e=this._private;return e.emitter||(e.emitter=new $c(Pb,this)),this},emitter:function(){return this._private.emitter},on:function(e,n,i){return this.emitter().on(e,ed(n),i),this},removeListener:function(e,n,i){return this.emitter().removeListener(e,ed(n),i),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(e,n,i){return this.emitter().one(e,ed(n),i),this},once:function(e,n,i){return this.emitter().one(e,ed(n),i),this},emit:function(e,n){return this.emitter().emit(e,n),this},emitAndNotify:function(e,n){return this.emit(e),this.notify(e,n),this}};vn.eventAliasesOn(Tv);var cp={png:function(e){return this._private.renderer.png(e=e||{})},jpg:function(e){var n=this._private.renderer;return(e=e||{}).bg=e.bg||"#fff",n.jpg(e)}};cp.jpeg=cp.jpg;var td={layout:function(e){if(null!=e)if(null!=e.name){var o,n=e.name,i=this.extension("layout",n);if(null!=i)return o=Ot(e.eles)?this.$(e.eles):null!=e.eles?e.eles:this.$(),new i(It({},e,{cy:this,eles:o}));zn("No such layout `"+n+"` found.  Did you forget to import it and `cytoscape.use()` it?")}else zn("A `name` must be specified to make a layout");else zn("Layout options must be specified to make a layout")}};td.createLayout=td.makeLayout=td.layout;var Db={notify:function(e,n){var i=this._private;if(this.batching()){i.batchNotifications=i.batchNotifications||{};var o=i.batchNotifications[e]=i.batchNotifications[e]||this.collection();null!=n&&o.merge(n)}else if(i.notificationsEnabled){var l=this.renderer();!this.destroyed()&&l&&l.notify(e,n)}},notifications:function(e){var n=this._private;return void 0===e?n.notificationsEnabled:(n.notificationsEnabled=!!e,this)},noNotifications:function(e){this.notifications(!1),e(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var e=this._private;return null==e.batchCount&&(e.batchCount=0),0===e.batchCount&&(e.batchStyleEles=this.collection(),e.batchNotifications={}),e.batchCount++,this},endBatch:function(){var e=this._private;if(0===e.batchCount)return this;if(e.batchCount--,0===e.batchCount){e.batchStyleEles.updateStyle();var n=this.renderer();Object.keys(e.batchNotifications).forEach(function(i){var o=e.batchNotifications[i];o.empty()?n.notify(i):n.notify(i,o)})}return this},batch:function(e){return this.startBatch(),e(),this.endBatch(),this},batchData:function(e){var n=this;return this.batch(function(){for(var i=Object.keys(e),o=0;o<i.length;o++){var l=i[o],c=e[l];n.getElementById(l).data(c)}})}},Mb=ur({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1}),dp={renderTo:function(e,n,i,o){return this._private.renderer.renderTo(e,n,i,o),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(e){var n=this.extension("renderer",e.name);if(null!=n){void 0!==e.wheelSensitivity&&gn("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var i=Mb(e);i.cy=this,this._private.renderer=new n(i),this.notify("init")}else zn("Can not initialise: No such renderer `".concat(e.name,"` found. Did you forget to import it and `cytoscape.use()` it?"))},destroyRenderer:function(){this.notify("destroy");var e=this.container();if(e)for(e._cyreg=null;e.childNodes.length>0;)e.removeChild(e.childNodes[0]);this._private.renderer=null,this.mutableElements().forEach(function(n){var i=n._private;i.rscratch={},i.rstyle={},i.animation.current=[],i.animation.queue=[]})},onRender:function(e){return this.on("render",e)},offRender:function(e){return this.off("render",e)}};dp.invalidateDimensions=dp.resize;var nd={collection:function(e,n){return Ot(e)?this.$(e):Gr(e)?e.collection():yn(e)?(n||(n={}),new dr(this,e,n.unique,n.removed)):new dr(this)},nodes:function(e){var n=this.$(function(i){return i.isNode()});return e?n.filter(e):n},edges:function(e){var n=this.$(function(i){return i.isEdge()});return e?n.filter(e):n},$:function(e){var n=this._private.elements;return e?n.filter(e):n.spawnSelf()},mutableElements:function(){return this._private.elements}};nd.elements=nd.filter=nd.$;var Cr={apply:function(e){for(var n=this._private.cy.collection(),i=0;i<e.length;i++){var o=e[i],l=this.getContextMeta(o);if(!l.empty){var c=this.getContextStyle(l),h=this.applyContextStyle(l,c,o);o._private.appliedInitStyle?this.updateTransitions(o,h.diffProps):o._private.appliedInitStyle=!0,this.updateStyleHints(o)&&n.push(o)}}return n},getPropertiesDiff:function(e,n){var i=this._private.propDiffs=this._private.propDiffs||{},o=e+"-"+n,l=i[o];if(l)return l;for(var c=[],h={},f=0;f<this.length;f++){var g=this[f],x="t"===n[f],_="t"===e[f]!==x,S=g.mappedProperties.length>0;if(_||x&&S){var A=void 0;_&&S||_?A=g.properties:S&&(A=g.mappedProperties);for(var C=0;C<A.length;C++){for(var L=A[C],I=L.name,P=!1,B=f+1;B<this.length&&("t"!==n[B]||!(P=null!=this[B].properties[L.name]));B++);h[I]||P||(h[I]=!0,c.push(I))}}}return i[o]=c,c},getContextMeta:function(e){for(var n,i="",o=e._private.styleCxtKey||"",l=0;l<this.length;l++){var c=this[l];i+=c.selector&&c.selector.matches(e)?"t":"f"}return n=this.getPropertiesDiff(o,i),e._private.styleCxtKey=i,{key:i,diffPropNames:n,empty:0===n.length}},getContextStyle:function(e){var n=e.key,i=this._private.contextStyles=this._private.contextStyles||{};if(i[n])return i[n];for(var o={_private:{key:n}},l=0;l<this.length;l++){var c=this[l];if("t"===n[l])for(var h=0;h<c.properties.length;h++){var f=c.properties[h];o[f.name]=f}}return i[n]=o,o},applyContextStyle:function(e,n,i){for(var o=e.diffPropNames,l={},c=this.types,h=0;h<o.length;h++){var f=o[h],g=n[f],y=i.pstyle(f);if(!g){if(!y)continue;g=y.bypass?{name:f,deleteBypassed:!0}:{name:f,delete:!0}}if(y!==g){if(g.mapped===c.fn&&null!=y&&null!=y.mapping&&y.mapping.value===g.value){var x=y.mapping;if((x.fnValue=g.value(i))===x.prevFnValue)continue}var _=l[f]={prev:y};this.applyParsedProperty(i,g),_.next=i.pstyle(f),_.next&&_.next.bypass&&(_.next=_.next.bypassed)}}return{diffProps:l}},updateStyleHints:function(e){var o,n=e._private,i=this,l=i.propertyGroupKeys,c=function(pt,_t,We){return i.getPropertiesHash(pt,_t,We)},h=n.styleKey;if(e.removed())return!1;var pt,_t,f="nodes"===n.group,g=e._private.style;o=Object.keys(g);for(var y=0;y<l.length;y++)n.styleKeys[l[y]]=[9261,5381];for(var _,S=function(pt,_t){return n.styleKeys[_t][0]=Ml(pt,n.styleKeys[_t][0])},A=function(pt,_t){return n.styleKeys[_t][1]=Al(pt,n.styleKeys[_t][1])},L=function(pt,_t){for(var We=0;We<pt.length;We++){var ft=pt.charCodeAt(We);S(ft,_t),A(ft,_t)}},I=0;I<o.length;I++){var P=o[I],B=g[P];if(null!=B){var F=this.properties[P],G=F.type,$=F.groupKey,X=void 0;null!=F.hashOverride?X=F.hashOverride(e,B):null!=B.pfValue&&(X=B.pfValue);var H=null==F.enums?B.value:null,te=null!=X,ae=B.units;!G.number||!te&&null==H||G.multiple?L(B.strValue,$):(pt=-128<(_=te?X:H)&&_<128&&Math.floor(_)!==_?2e9-(1024*_|0):_,S(pt,_t=$),A(pt,_t),te||null==ae||L(ae,$))}}for(var de=[9261,5381],we=0;we<l.length;we++){var fe=n.styleKeys[l[we]];de[0]=Ml(fe[0],de[0]),de[1]=Al(fe[1],de[1])}n.styleKey=2097152*de[0]+de[1];var ge=n.styleKeys;n.labelDimsKey=Aa(ge.labelDimensions);var ee=c(e,["label"],ge.labelDimensions);if(n.labelKey=Aa(ee),n.labelStyleKey=Aa(xc(ge.commonLabel,ee)),!f){var Se=c(e,["source-label"],ge.labelDimensions);n.sourceLabelKey=Aa(Se),n.sourceLabelStyleKey=Aa(xc(ge.commonLabel,Se));var Ie=c(e,["target-label"],ge.labelDimensions);n.targetLabelKey=Aa(Ie),n.targetLabelStyleKey=Aa(xc(ge.commonLabel,Ie))}if(f){var _e=n.styleKeys,Ge=_e.pie,st=[_e.nodeBody,_e.nodeBorder,_e.nodeOutline,_e.backgroundImage,_e.compound,Ge].filter(function(pt){return null!=pt}).reduce(xc,[9261,5381]);n.nodeKey=Aa(st),n.hasPie=null!=Ge&&9261!==Ge[0]&&5381!==Ge[1]}return h!==n.styleKey},clearStyleHints:function(e){var n=e._private;n.styleCxtKey="",n.styleKeys={},n.styleKey=null,n.labelKey=null,n.labelStyleKey=null,n.sourceLabelKey=null,n.sourceLabelStyleKey=null,n.targetLabelKey=null,n.targetLabelStyleKey=null,n.nodeKey=null,n.hasPie=null},applyParsedProperty:function(e,n){var i,o=this,l=n,c=e._private.style,h=o.types,f=o.properties[l.name].type,g=l.bypass,y=c[l.name],x=y&&y.bypass,_=e._private,S=function(Se){return null==Se?null:null!=Se.pfValue?Se.pfValue:Se.value},A=function(){var Se=S(y),Ie=S(l);o.checkTriggers(e,l.name,Se,Ie)};if("curve-style"===n.name&&e.isEdge()&&("bezier"!==n.value&&e.isLoop()||"haystack"===n.value&&(e.source().isParent()||e.target().isParent()))&&(l=n=this.parse(n.name,"bezier",g)),l.delete)return c[l.name]=void 0,A(),!0;if(l.deleteBypassed)return y?!!y.bypass&&(y.bypassed=void 0,A(),!0):(A(),!0);if(l.deleteBypass)return y?!!y.bypass&&(c[l.name]=y.bypassed,A(),!0):(A(),!0);var C=function(){gn("Do not assign mappings to elements without corresponding data (i.e. ele `"+e.id()+"` has no mapping for property `"+l.name+"` with data field `"+l.field+"`); try a `["+l.field+"]` selector to limit scope to elements with `"+l.field+"` defined")};switch(l.mapped){case h.mapData:for(var L,I=l.field.split("."),P=_.data,B=0;B<I.length&&P;B++)P=P[I[B]];if(null==P)return C(),!1;if(!gt(P))return gn("Do not use continuous mappers without specifying numeric data (i.e. `"+l.field+": "+P+"` for `"+e.id()+"` is non-numeric)"),!1;var F=l.fieldMax-l.fieldMin;if((L=0===F?0:(P-l.fieldMin)/F)<0?L=0:L>1&&(L=1),f.color){var G=l.valueMin[0],X=l.valueMin[1],H=l.valueMax[1],te=l.valueMin[2],re=l.valueMax[2],ae=null==l.valueMin[3]?1:l.valueMin[3],le=null==l.valueMax[3]?1:l.valueMax[3],se=[Math.round(G+(l.valueMax[0]-G)*L),Math.round(X+(H-X)*L),Math.round(te+(re-te)*L),Math.round(ae+(le-ae)*L)];i={bypass:l.bypass,name:l.name,value:se,strValue:"rgb("+se[0]+", "+se[1]+", "+se[2]+")"}}else{if(!f.number)return!1;i=this.parse(l.name,l.valueMin+(l.valueMax-l.valueMin)*L,l.bypass,"mapping")}if(!i)return C(),!1;i.mapping=l,l=i;break;case h.data:for(var we=l.field.split("."),be=_.data,fe=0;fe<we.length&&be;fe++)be=be[we[fe]];if(null!=be&&(i=this.parse(l.name,be,l.bypass,"mapping")),!i)return C(),!1;i.mapping=l,l=i;break;case h.fn:var ee=null!=l.fnValue?l.fnValue:(0,l.value)(e);if(l.prevFnValue=ee,null==ee)return gn("Custom function mappers may not return null (i.e. `"+l.name+"` for ele `"+e.id()+"` is null)"),!1;if(!(i=this.parse(l.name,ee,l.bypass,"mapping")))return gn("Custom function mappers may not return invalid values for the property type (i.e. `"+l.name+"` for ele `"+e.id()+"` is invalid)"),!1;i.mapping=Ri(l),l=i;break;case void 0:break;default:return!1}return g?(l.bypassed=x?y.bypassed:y,c[l.name]=l):x?y.bypassed=l:c[l.name]=l,A(),!0},cleanElements:function(e,n){for(var i=0;i<e.length;i++){var o=e[i];if(this.clearStyleHints(o),o.dirtyCompoundBoundsCache(),o.dirtyBoundingBoxCache(),n)for(var l=o._private.style,c=Object.keys(l),h=0;h<c.length;h++){var f=c[h],g=l[f];null!=g&&(g.bypass?g.bypassed=null:l[f]=null)}else o._private.style={}}},update:function(){this._private.cy.mutableElements().updateStyle()},updateTransitions:function(e,n){var i=this,o=e._private,l=e.pstyle("transition-property").value,c=e.pstyle("transition-duration").pfValue,h=e.pstyle("transition-delay").pfValue;if(l.length>0&&c>0){for(var f={},g=!1,y=0;y<l.length;y++){var x=l[y],_=e.pstyle(x),S=n[x];if(S){var A=S.prev,C=null!=S.next?S.next:_,L=!1,I=void 0;A&&(gt(A.pfValue)&&gt(C.pfValue)?I=A.pfValue+1e-6*(L=C.pfValue-A.pfValue):gt(A.value)&&gt(C.value)?I=A.value+1e-6*(L=C.value-A.value):yn(A.value)&&yn(C.value)&&(L=A.value[0]!==C.value[0]||A.value[1]!==C.value[1]||A.value[2]!==C.value[2],I=A.strValue),L&&(f[x]=C.strValue,this.applyBypass(e,x,I),g=!0))}}if(!g)return;o.transitioning=!0,new vs(function(P){h>0?e.delayAnimation(h).play().promise().then(P):P()}).then(function(){return e.animation({style:f,duration:c,easing:e.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){i.removeBypasses(e,l),e.emitAndNotify("style"),o.transitioning=!1})}else o.transitioning&&(this.removeBypasses(e,l),e.emitAndNotify("style"),o.transitioning=!1)},checkTrigger:function(e,n,i,o,l,c){var h=this.properties[n],f=l(h);null!=f&&f(i,o)&&c(h)},checkZOrderTrigger:function(e,n,i,o){var l=this;this.checkTrigger(e,n,i,o,function(c){return c.triggersZOrder},function(){l._private.cy.notify("zorder",e)})},checkBoundsTrigger:function(e,n,i,o){this.checkTrigger(e,n,i,o,function(l){return l.triggersBounds},function(l){e.dirtyCompoundBoundsCache(),e.dirtyBoundingBoxCache(),!l.triggersBoundsOfParallelBeziers||"curve-style"!==n||"bezier"!==i&&"bezier"!==o||e.parallelEdges().forEach(function(c){c.isBundledBezier()&&c.dirtyBoundingBoxCache()}),!l.triggersBoundsOfConnectedEdges||"display"!==n||"none"!==i&&"none"!==o||e.connectedEdges().forEach(function(c){c.dirtyBoundingBoxCache()})})},checkTriggers:function(e,n,i,o){e.dirtyStyleCache(),this.checkZOrderTrigger(e,n,i,o),this.checkBoundsTrigger(e,n,i,o)}},Ab={applyBypass:function(e,n,i,o){var l=[];if("*"===n||"**"===n){if(void 0!==i)for(var c=0;c<this.properties.length;c++){var f=this.parse(this.properties[c].name,i,!0);f&&l.push(f)}}else if(Ot(n)){var g=this.parse(n,i,!0);g&&l.push(g)}else{if(!en(n))return!1;var y=n;o=i;for(var x=Object.keys(y),_=0;_<x.length;_++){var S=x[_],A=y[S];if(void 0===A&&(A=y[vc(S)]),void 0!==A){var C=this.parse(S,A,!0);C&&l.push(C)}}}if(0===l.length)return!1;for(var L=!1,I=0;I<e.length;I++){for(var P=e[I],B={},F=void 0,G=0;G<l.length;G++){var $=l[G];if(o){var X=P.pstyle($.name);F=B[$.name]={prev:X}}L=this.applyParsedProperty(P,Ri($))||L,o&&(F.next=P.pstyle($.name))}L&&this.updateStyleHints(P),o&&this.updateTransitions(P,B,!0)}return L},overrideBypass:function(e,n,i){n=Eh(n);for(var o=0;o<e.length;o++){var l=e[o],c=l._private.style[n],h=this.properties[n].type,f=h.color,g=h.mutiple,y=c?null!=c.pfValue?c.pfValue:c.value:null;c&&c.bypass?(c.value=i,null!=c.pfValue&&(c.pfValue=i),c.strValue=f?"rgb("+i.join(",")+")":g?i.join(" "):""+i,this.updateStyleHints(l)):this.applyBypass(l,n,i),this.checkTriggers(l,n,y,i)}},removeAllBypasses:function(e,n){return this.removeBypasses(e,this.propertyNames,n)},removeBypasses:function(e,n,i){for(var o=0;o<e.length;o++){for(var l=e[o],c={},h=0;h<n.length;h++){var f=n[h],g=this.properties[f],y=l.pstyle(g.name);if(y&&y.bypass){var x=this.parse(f,"",!0),_=c[g.name]={prev:y};this.applyParsedProperty(l,x),_.next=l.pstyle(g.name)}}this.updateStyleHints(l),i&&this.updateTransitions(l,c,!0)}}},Bb={getEmSizeInPixels:function(){var e=this.containerCss("font-size");return null!=e?parseFloat(e):1},containerCss:function(e){var n=this._private.cy,i=n.container(),o=n.window();if(o&&i&&o.getComputedStyle)return o.getComputedStyle(i).getPropertyValue(e)}},hp={getRenderedStyle:function(e,n){return n?this.getStylePropertyValue(e,n,!0):this.getRawStyle(e,!0)},getRawStyle:function(e,n){if(e=e[0]){for(var i={},o=0;o<this.properties.length;o++){var l=this.properties[o],c=this.getStylePropertyValue(e,l.name,n);null!=c&&(i[l.name]=c,i[vc(l.name)]=c)}return i}},getIndexedStyle:function(e,n,i,o){return e.pstyle(n)[i][o]??e.cy().style().getDefaultProperty(n)[i][0]},getStylePropertyValue:function(e,n,i){if(e=e[0]){var o=this.properties[n];o.alias&&(o=o.pointsTo);var l=o.type,c=e.pstyle(o.name);if(c){var h=c.value,f=c.units,g=c.strValue;if(i&&l.number&&null!=h&&gt(h)){var y=e.cy().zoom(),x=function(A){return A*y},_=function(A,C){return x(A)+C},S=yn(h);return(S?f.every(function(A){return null!=A}):null!=f)?S?h.map(function(A,C){return _(A,f[C])}).join(" "):_(h,f):S?h.map(function(A){return Ot(A)?A:""+x(A)}).join(" "):""+x(h)}if(null!=g)return g}return null}},getAnimationStartStyle:function(e,n){for(var i={},o=0;o<n.length;o++){var l=n[o].name,c=e.pstyle(l);void 0!==c&&(c=en(c)?this.parse(l,c.strValue):this.parse(l,c)),c&&(i[l]=c)}return i},getPropsList:function(e){var n=[],i=e,o=this.properties;if(i)for(var l=Object.keys(i),c=0;c<l.length;c++){var h=l[c],f=i[h],g=o[h]||o[Eh(h)],y=this.parse(g.name,f);y&&n.push(y)}return n},getNonDefaultPropertiesHash:function(e,n,i){var l,c,h,f,g,y=i.slice();for(f=0;f<n.length;f++)if(null!=(l=e.pstyle(n[f],!1)))if(null!=l.pfValue)y[0]=Ml(h,y[0]),y[1]=Al(h,y[1]);else for(c=l.strValue,g=0;g<c.length;g++)h=c.charCodeAt(g),y[0]=Ml(h,y[0]),y[1]=Al(h,y[1]);return y}};hp.getPropertiesHash=hp.getNonDefaultPropertiesHash;var Lb={appendFromJson:function(e){for(var n=0;n<e.length;n++){var i=e[n],o=i.selector,l=i.style||i.css,c=Object.keys(l);this.selector(o);for(var h=0;h<c.length;h++){var f=c[h];this.css(f,l[f])}}return this},fromJson:function(e){return this.resetToDefault(),this.appendFromJson(e),this},json:function(){for(var e=[],n=this.defaultLength;n<this.length;n++){for(var i=this[n],o=i.selector,l=i.properties,c={},h=0;h<l.length;h++){var f=l[h];c[f.name]=f.strValue}e.push({selector:o?o.toString():"core",style:c})}return e}},Ob={appendFromString:function(e){var n,i,o,l=""+e;function c(){l=l.length>n.length?l.substr(n.length):""}function h(){i=i.length>o.length?i.substr(o.length):""}for(l=l.replace(/[/][*](\s|.)+?[*][/]/g,"");!l.match(/^\s*$/);){var f=l.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!f){gn("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+l);break}n=f[0];var g=f[1];if("core"!==g&&new za(g).invalid)gn("Skipping parsing of block: Invalid selector found in string stylesheet: "+g),c();else{var y=f[2],x=!1;i=y;for(var _=[];!i.match(/^\s*$/);){var S=i.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!S){gn("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+y),x=!0;break}o=S[0];var A=S[1],C=S[2];this.properties[A]?this.parse(A,C)?(_.push({name:A,val:C}),h()):(gn("Skipping property: Invalid property definition in: "+o),h()):(gn("Skipping property: Invalid property name in: "+o),h())}if(x){c();break}this.selector(g);for(var L=0;L<_.length;L++){var I=_[L];this.css(I.name,I.val)}c()}}return this},fromString:function(e){return this.resetToDefault(),this.appendFromString(e),this}},hr={};(function(){var e=_h,n=function(Fe){return"^"+Fe+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},i=function(Fe){var ze=e+"|\\w+|rgb[a]?\\((?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)(?:\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)|hsl[a]?\\((?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?)))\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])(?:\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)|\\#[0-9a-fA-F]{3}|\\#[0-9a-fA-F]{6}";return"^"+Fe+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+e+")\\s*\\,\\s*("+e+")\\s*,\\s*("+ze+")\\s*\\,\\s*("+ze+")\\)$"},o=["^url\\s*\\(\\s*['\"]?(.+?)['\"]?\\s*\\)$","^(none)$","^(.+)$"];hr.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},nonNegativeNumber:{number:!0,min:0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials","null"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi"]},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","right-rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},arrowWidth:{number:!0,units:"%|px|em",implicitUnits:"px",enums:["match-line"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:n("data")},layoutData:{mapping:!0,regex:n("layoutData")},scratch:{mapping:!0,regex:n("scratch")},mapData:{mapping:!0,regex:i("mapData")},mapLayoutData:{mapping:!0,regex:i("mapLayoutData")},mapScratch:{mapping:!0,regex:i("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:o,singleRegexMatchValue:!0},urls:{regexes:o,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position","endpoints"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(Fe,ze){switch(Fe.length){case 2:return"deg"!==ze[0]&&"rad"!==ze[0]&&"deg"!==ze[1]&&"rad"!==ze[1];case 1:return Ot(Fe[0])||"deg"===ze[0]||"rad"===ze[0];default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+e+")\\s*,\\s*("+e+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+e+")\\s*,\\s*("+e+")\\s*,\\s*("+e+")\\s*,\\s*("+e+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(Fe){var ze=Fe.length;return 1===ze||2===ze||4===ze}}};var l={zeroNonZero:function(Fe,ze){return(null==Fe||null==ze)&&Fe!==ze||0==Fe&&0!=ze||0!=Fe&&0==ze},any:function(Fe,ze){return Fe!=ze},emptyNonEmpty:function(Fe,ze){var Je=Ma(Fe),Re=Ma(ze);return Je&&!Re||!Je&&Re}},c=hr.types,h=[{name:"label",type:c.text,triggersBounds:l.any,triggersZOrder:l.emptyNonEmpty},{name:"text-rotation",type:c.textRotation,triggersBounds:l.any},{name:"text-margin-x",type:c.bidirectionalSize,triggersBounds:l.any},{name:"text-margin-y",type:c.bidirectionalSize,triggersBounds:l.any}],f=[{name:"source-label",type:c.text,triggersBounds:l.any},{name:"source-text-rotation",type:c.textRotation,triggersBounds:l.any},{name:"source-text-margin-x",type:c.bidirectionalSize,triggersBounds:l.any},{name:"source-text-margin-y",type:c.bidirectionalSize,triggersBounds:l.any},{name:"source-text-offset",type:c.size,triggersBounds:l.any}],g=[{name:"target-label",type:c.text,triggersBounds:l.any},{name:"target-text-rotation",type:c.textRotation,triggersBounds:l.any},{name:"target-text-margin-x",type:c.bidirectionalSize,triggersBounds:l.any},{name:"target-text-margin-y",type:c.bidirectionalSize,triggersBounds:l.any},{name:"target-text-offset",type:c.size,triggersBounds:l.any}],y=[{name:"font-family",type:c.fontFamily,triggersBounds:l.any},{name:"font-style",type:c.fontStyle,triggersBounds:l.any},{name:"font-weight",type:c.fontWeight,triggersBounds:l.any},{name:"font-size",type:c.size,triggersBounds:l.any},{name:"text-transform",type:c.textTransform,triggersBounds:l.any},{name:"text-wrap",type:c.textWrap,triggersBounds:l.any},{name:"text-overflow-wrap",type:c.textOverflowWrap,triggersBounds:l.any},{name:"text-max-width",type:c.size,triggersBounds:l.any},{name:"text-outline-width",type:c.size,triggersBounds:l.any},{name:"line-height",type:c.positiveNumber,triggersBounds:l.any}],x=[{name:"text-valign",type:c.valign,triggersBounds:l.any},{name:"text-halign",type:c.halign,triggersBounds:l.any},{name:"color",type:c.color},{name:"text-outline-color",type:c.color},{name:"text-outline-opacity",type:c.zeroOneNumber},{name:"text-background-color",type:c.color},{name:"text-background-opacity",type:c.zeroOneNumber},{name:"text-background-padding",type:c.size,triggersBounds:l.any},{name:"text-border-opacity",type:c.zeroOneNumber},{name:"text-border-color",type:c.color},{name:"text-border-width",type:c.size,triggersBounds:l.any},{name:"text-border-style",type:c.borderStyle,triggersBounds:l.any},{name:"text-background-shape",type:c.textBackgroundShape,triggersBounds:l.any},{name:"text-justification",type:c.justification}],_=[{name:"events",type:c.bool,triggersZOrder:l.any},{name:"text-events",type:c.bool,triggersZOrder:l.any}],S=[{name:"display",type:c.display,triggersZOrder:l.any,triggersBounds:l.any,triggersBoundsOfConnectedEdges:!0},{name:"visibility",type:c.visibility,triggersZOrder:l.any},{name:"opacity",type:c.zeroOneNumber,triggersZOrder:l.zeroNonZero},{name:"text-opacity",type:c.zeroOneNumber},{name:"min-zoomed-font-size",type:c.size},{name:"z-compound-depth",type:c.zCompoundDepth,triggersZOrder:l.any},{name:"z-index-compare",type:c.zIndexCompare,triggersZOrder:l.any},{name:"z-index",type:c.number,triggersZOrder:l.any}],A=[{name:"overlay-padding",type:c.size,triggersBounds:l.any},{name:"overlay-color",type:c.color},{name:"overlay-opacity",type:c.zeroOneNumber,triggersBounds:l.zeroNonZero},{name:"overlay-shape",type:c.overlayShape,triggersBounds:l.any}],C=[{name:"underlay-padding",type:c.size,triggersBounds:l.any},{name:"underlay-color",type:c.color},{name:"underlay-opacity",type:c.zeroOneNumber,triggersBounds:l.zeroNonZero},{name:"underlay-shape",type:c.overlayShape,triggersBounds:l.any}],L=[{name:"transition-property",type:c.propList},{name:"transition-duration",type:c.time},{name:"transition-delay",type:c.time},{name:"transition-timing-function",type:c.easing}],I=function(Fe,ze){return"label"===ze.value?-Fe.poolIndex():ze.pfValue},P=[{name:"height",type:c.nodeSize,triggersBounds:l.any,hashOverride:I},{name:"width",type:c.nodeSize,triggersBounds:l.any,hashOverride:I},{name:"shape",type:c.nodeShape,triggersBounds:l.any},{name:"shape-polygon-points",type:c.polygonPointList,triggersBounds:l.any},{name:"background-color",type:c.color},{name:"background-fill",type:c.fill},{name:"background-opacity",type:c.zeroOneNumber},{name:"background-blacken",type:c.nOneOneNumber},{name:"background-gradient-stop-colors",type:c.colors},{name:"background-gradient-stop-positions",type:c.percentages},{name:"background-gradient-direction",type:c.gradientDirection},{name:"padding",type:c.sizeMaybePercent,triggersBounds:l.any},{name:"padding-relative-to",type:c.paddingRelativeTo,triggersBounds:l.any},{name:"bounds-expansion",type:c.boundsExpansion,triggersBounds:l.any}],B=[{name:"border-color",type:c.color},{name:"border-opacity",type:c.zeroOneNumber},{name:"border-width",type:c.size,triggersBounds:l.any},{name:"border-style",type:c.borderStyle}],F=[{name:"outline-color",type:c.color},{name:"outline-opacity",type:c.zeroOneNumber},{name:"outline-width",type:c.size,triggersBounds:l.any},{name:"outline-style",type:c.borderStyle},{name:"outline-offset",type:c.size,triggersBounds:l.any}],G=[{name:"background-image",type:c.urls},{name:"background-image-crossorigin",type:c.bgCrossOrigin},{name:"background-image-opacity",type:c.zeroOneNumbers},{name:"background-image-containment",type:c.bgContainment},{name:"background-image-smoothing",type:c.bools},{name:"background-position-x",type:c.bgPos},{name:"background-position-y",type:c.bgPos},{name:"background-width-relative-to",type:c.bgRelativeTo},{name:"background-height-relative-to",type:c.bgRelativeTo},{name:"background-repeat",type:c.bgRepeat},{name:"background-fit",type:c.bgFit},{name:"background-clip",type:c.bgClip},{name:"background-width",type:c.bgWH},{name:"background-height",type:c.bgWH},{name:"background-offset-x",type:c.bgPos},{name:"background-offset-y",type:c.bgPos}],$=[{name:"position",type:c.position,triggersBounds:l.any},{name:"compound-sizing-wrt-labels",type:c.compoundIncludeLabels,triggersBounds:l.any},{name:"min-width",type:c.size,triggersBounds:l.any},{name:"min-width-bias-left",type:c.sizeMaybePercent,triggersBounds:l.any},{name:"min-width-bias-right",type:c.sizeMaybePercent,triggersBounds:l.any},{name:"min-height",type:c.size,triggersBounds:l.any},{name:"min-height-bias-top",type:c.sizeMaybePercent,triggersBounds:l.any},{name:"min-height-bias-bottom",type:c.sizeMaybePercent,triggersBounds:l.any}],X=[{name:"line-style",type:c.lineStyle},{name:"line-color",type:c.color},{name:"line-fill",type:c.fill},{name:"line-cap",type:c.lineCap},{name:"line-opacity",type:c.zeroOneNumber},{name:"line-dash-pattern",type:c.numbers},{name:"line-dash-offset",type:c.number},{name:"line-gradient-stop-colors",type:c.colors},{name:"line-gradient-stop-positions",type:c.percentages},{name:"curve-style",type:c.curveStyle,triggersBounds:l.any,triggersBoundsOfParallelBeziers:!0},{name:"haystack-radius",type:c.zeroOneNumber,triggersBounds:l.any},{name:"source-endpoint",type:c.edgeEndpoint,triggersBounds:l.any},{name:"target-endpoint",type:c.edgeEndpoint,triggersBounds:l.any},{name:"control-point-step-size",type:c.size,triggersBounds:l.any},{name:"control-point-distances",type:c.bidirectionalSizes,triggersBounds:l.any},{name:"control-point-weights",type:c.numbers,triggersBounds:l.any},{name:"segment-distances",type:c.bidirectionalSizes,triggersBounds:l.any},{name:"segment-weights",type:c.numbers,triggersBounds:l.any},{name:"taxi-turn",type:c.bidirectionalSizeMaybePercent,triggersBounds:l.any},{name:"taxi-turn-min-distance",type:c.size,triggersBounds:l.any},{name:"taxi-direction",type:c.axisDirection,triggersBounds:l.any},{name:"edge-distances",type:c.edgeDistances,triggersBounds:l.any},{name:"arrow-scale",type:c.positiveNumber,triggersBounds:l.any},{name:"loop-direction",type:c.angle,triggersBounds:l.any},{name:"loop-sweep",type:c.angle,triggersBounds:l.any},{name:"source-distance-from-node",type:c.size,triggersBounds:l.any},{name:"target-distance-from-node",type:c.size,triggersBounds:l.any}],H=[{name:"ghost",type:c.bool,triggersBounds:l.any},{name:"ghost-offset-x",type:c.bidirectionalSize,triggersBounds:l.any},{name:"ghost-offset-y",type:c.bidirectionalSize,triggersBounds:l.any},{name:"ghost-opacity",type:c.zeroOneNumber}],te=[{name:"selection-box-color",type:c.color},{name:"selection-box-opacity",type:c.zeroOneNumber},{name:"selection-box-border-color",type:c.color},{name:"selection-box-border-width",type:c.size},{name:"active-bg-color",type:c.color},{name:"active-bg-opacity",type:c.zeroOneNumber},{name:"active-bg-size",type:c.size},{name:"outside-texture-bg-color",type:c.color},{name:"outside-texture-bg-opacity",type:c.zeroOneNumber}],re=[];hr.pieBackgroundN=16,re.push({name:"pie-size",type:c.sizeMaybePercent});for(var ae=1;ae<=hr.pieBackgroundN;ae++)re.push({name:"pie-"+ae+"-background-color",type:c.color}),re.push({name:"pie-"+ae+"-background-size",type:c.percent}),re.push({name:"pie-"+ae+"-background-opacity",type:c.zeroOneNumber});var le=[],se=hr.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:c.arrowShape,triggersBounds:l.any},{name:"arrow-color",type:c.color},{name:"arrow-fill",type:c.arrowFill},{name:"arrow-width",type:c.arrowWidth}].forEach(function(Fe){se.forEach(function(ze){le.push({name:ze+"-"+Fe.name,type:Fe.type,triggersBounds:Fe.triggersBounds})})},{});var de=hr.properties=[].concat(_,L,S,A,C,H,x,y,h,f,g,P,B,F,G,re,$,X,le,te),we=hr.propertyGroups={behavior:_,transition:L,visibility:S,overlay:A,underlay:C,ghost:H,commonLabel:x,labelDimensions:y,mainLabel:h,sourceLabel:f,targetLabel:g,nodeBody:P,nodeBorder:B,nodeOutline:F,backgroundImage:G,pie:re,compound:$,edgeLine:X,edgeArrow:le,core:te},be=hr.propertyGroupNames={};(hr.propertyGroupKeys=Object.keys(we)).forEach(function(Fe){be[Fe]=we[Fe].map(function(ze){return ze.name}),we[Fe].forEach(function(ze){return ze.groupKey=Fe})});var fe=hr.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];hr.propertyNames=de.map(function(Fe){return Fe.name});for(var ge=0;ge<de.length;ge++){var ee=de[ge];de[ee.name]=ee}for(var Se=0;Se<fe.length;Se++){var Ie=fe[Se],je={name:Ie.name,alias:!0,pointsTo:de[Ie.pointsTo]};de.push(je),de[Ie.name]=je}})(),hr.getDefaultProperty=function(e){return this.getDefaultProperties()[e]},hr.getDefaultProperties=function(){var e=this._private;if(null!=e.defaultProperties)return e.defaultProperties;for(var n=It({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid","outline-color":"#999","outline-opacity":1,"outline-width":0,"outline-offset":0,"outline-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(g,y){for(var x=1;x<=hr.pieBackgroundN;x++)g[y.name.replace("{{i}}",x)]=y.value;return g},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"taxi-turn":"50%","taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"},{name:"arrow-width",value:1}].reduce(function(g,y){return hr.arrowPrefixes.forEach(function(x){g[x+"-"+y.name]=y.value}),g},{})),i={},o=0;o<this.properties.length;o++){var l=this.properties[o];if(!l.pointsTo){var c=l.name,f=this.parse(c,n[c]);i[c]=f}}return e.defaultProperties=i,e.defaultProperties},hr.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var Pv={parse:function(e,n,i,o){if(Nn(n))return this.parseImplWarn(e,n,i,o);var l,c=Gf(e,""+n,i?"t":"f","mapping"===o||!0===o||!1===o||null==o?"dontcare":o),h=this.propCache=this.propCache||[];return(l=h[c])||(l=h[c]=this.parseImplWarn(e,n,i,o)),(i||"mapping"===o)&&(l=Ri(l))&&(l.value=Ri(l.value)),l},parseImplWarn:function(e,n,i,o){var l=this.parseImpl(e,n,i,o);return l||null==n||gn("The style property `".concat(e,": ").concat(n,"` is invalid")),!l||"width"!==l.name&&"height"!==l.name||"label"!==n||gn("The style value of `label` is deprecated for `"+l.name+"`"),l},parseImpl:function(e,n,i,o){e=Eh(e);var l=this.properties[e],c=n,h=this.types;if(!l||void 0===n)return null;l.alias&&(e=(l=l.pointsTo).name);var f=Ot(n);f&&(n=n.trim());var g,y,x=l.type;if(!x)return null;if(i&&(""===n||null===n))return{name:e,value:n,bypass:!0,deleteBypass:!0};if(Nn(n))return{name:e,value:n,strValue:"fn",mapped:h.fn,bypass:i};if(!(!f||o||n.length<7||"a"!==n[1])){if(n.length>=7&&"d"===n[0]&&(g=new RegExp(h.data.regex).exec(n)))return!i&&{name:e,value:g,strValue:""+n,mapped:h.data,field:g[1],bypass:i};if(n.length>=10&&"m"===n[0]&&(y=new RegExp(h.mapData.regex).exec(n))){if(i||x.multiple)return!1;var S=h.mapData;if(!x.color&&!x.number)return!1;var A=this.parse(e,y[4]);if(!A||A.mapped)return!1;var C=this.parse(e,y[5]);if(!C||C.mapped)return!1;if(A.pfValue===C.pfValue||A.strValue===C.strValue)return gn("`"+e+": "+n+"` is not a valid mapper because the output range is zero; converting to `"+e+": "+A.strValue+"`"),this.parse(e,A.strValue);if(x.color){var L=A.value,I=C.value;if(!(L[0]!==I[0]||L[1]!==I[1]||L[2]!==I[2]||L[3]!==I[3]&&(null!=L[3]&&1!==L[3]||null!=I[3]&&1!==I[3])))return!1}return{name:e,value:y,strValue:""+n,mapped:S,field:y[1],fieldMin:parseFloat(y[2]),fieldMax:parseFloat(y[3]),valueMin:A.value,valueMax:C.value,bypass:i}}}if(x.multiple&&"multiple"!==o){var P;if(P=f?n.split(/\s+/):yn(n)?n:[n],x.evenMultiple&&P.length%2!=0)return null;for(var B=[],F=[],G=[],$="",X=!1,H=0;H<P.length;H++){var te=this.parse(e,P[H],i,"multiple");X=X||Ot(te.value),B.push(te.value),G.push(null!=te.pfValue?te.pfValue:te.value),F.push(te.units),$+=(H>0?" ":"")+te.strValue}return x.validate&&!x.validate(B,F)?null:x.singleEnum&&X?1===B.length&&Ot(B[0])?{name:e,value:B[0],strValue:B[0],bypass:i}:null:{name:e,value:B,pfValue:G,strValue:$,bypass:i,units:F}}var ae,le=function(){for(var Ge=0;Ge<x.enums.length;Ge++)if(x.enums[Ge]===n)return{name:e,value:n,strValue:""+n,bypass:i};return null};if(x.number){var se,de="px";if(x.units&&(se=x.units),x.implicitUnits&&(de=x.implicitUnits),!x.unitless)if(f){var we="px|em"+(x.allowPercent?"|\\%":"");se&&(we=se);var be=n.match("^("+_h+")("+we+")?$");be&&(n=be[1],se=be[2]||de)}else se&&!x.implicitUnits||(se=de);if(n=parseFloat(n),isNaN(n)&&void 0===x.enums)return null;if(isNaN(n)&&void 0!==x.enums)return n=c,le();if(x.integer&&(!gt(ae=n)||Math.floor(ae)!==ae)||void 0!==x.min&&(n<x.min||x.strictMin&&n===x.min)||void 0!==x.max&&(n>x.max||x.strictMax&&n===x.max))return null;var fe={name:e,value:n,strValue:""+n+(se||""),units:se,bypass:i};return fe.pfValue=x.unitless||"px"!==se&&"em"!==se?n:"px"!==se&&se?this.getEmSizeInPixels()*n:n,"ms"!==se&&"s"!==se||(fe.pfValue="ms"===se?n:1e3*n),"deg"!==se&&"rad"!==se||(fe.pfValue="rad"===se?n:Math.PI*n/180),"%"===se&&(fe.pfValue=n/100),fe}if(x.propList){var ge=[],ee=""+n;if("none"!==ee){for(var Se=ee.split(/\s*,\s*|\s+/),Ie=0;Ie<Se.length;Ie++){var _e=Se[Ie].trim();this.properties[_e]?ge.push(_e):gn("`"+_e+"` is not a valid property name")}if(0===ge.length)return null}return{name:e,value:ge,strValue:0===ge.length?"none":ge.join(" "),bypass:i}}if(x.color){var je=F0(n);return je?{name:e,value:je,pfValue:je,strValue:"rgb("+je[0]+","+je[1]+","+je[2]+")",bypass:i}:null}if(x.regex||x.regexes){if(x.enums){var Fe=le();if(Fe)return Fe}for(var ze=x.regexes?x.regexes:[x.regex],Je=0;Je<ze.length;Je++){var Re=new RegExp(ze[Je]).exec(n);if(Re)return{name:e,value:x.singleRegexMatchValue?Re[1]:Re,strValue:""+n,bypass:i}}return null}return x.string?{name:e,value:""+n,strValue:""+n,bypass:i}:x.enums?le():null}},Sr=function e(n){if(!(this instanceof e))return new e(n);wh(n)?(this._private={cy:n,coreStyle:{}},this.length=0,this.resetToDefault()):zn("A style must have a core reference")},Tr=Sr.prototype;Tr.instanceString=function(){return"style"},Tr.clear=function(){for(var e=this._private,n=e.cy.elements(),i=0;i<this.length;i++)this[i]=void 0;return this.length=0,e.contextStyles={},e.propDiffs={},this.cleanElements(n,!0),n.forEach(function(o){var l=o[0]._private;l.styleDirty=!0,l.appliedInitStyle=!1}),this},Tr.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this},Tr.core=function(e){return this._private.coreStyle[e]||this.getDefaultProperty(e)},Tr.selector=function(e){var n="core"===e?null:new za(e),i=this.length++;return this[i]={selector:n,properties:[],mappedProperties:[],index:i},this},Tr.css=function(){var n=arguments;if(1===n.length)for(var i=n[0],o=0;o<this.properties.length;o++){var l=this.properties[o],c=i[l.name];void 0===c&&(c=i[vc(l.name)]),void 0!==c&&this.cssRule(l.name,c)}else 2===n.length&&this.cssRule(n[0],n[1]);return this},Tr.style=Tr.css,Tr.cssRule=function(e,n){var i=this.parse(e,n);if(i){var o=this.length-1;this[o].properties.push(i),this[o].properties[i.name]=i,i.name.match(/pie-(\d+)-background-size/)&&i.value&&(this._private.hasPie=!0),i.mapped&&this[o].mappedProperties.push(i),!this[o].selector&&(this._private.coreStyle[i.name]=i)}return this},Tr.append=function(e){return zf(e)?e.appendToStyle(this):yn(e)?this.appendFromJson(e):Ot(e)&&this.appendFromString(e),this},Sr.fromJson=function(e,n){var i=new Sr(e);return i.fromJson(n),i},Sr.fromString=function(e,n){return new Sr(e).fromString(n)},[Cr,Ab,Bb,hp,Lb,Ob,hr,Pv].forEach(function(e){It(Tr,e)}),Sr.types=Tr.types,Sr.properties=Tr.properties,Sr.propertyGroups=Tr.propertyGroups,Sr.propertyGroupNames=Tr.propertyGroupNames,Sr.propertyGroupKeys=Tr.propertyGroupKeys;var Nb={style:function(e){return e&&this.setStyle(e).update(),this._private.style},setStyle:function(e){var n=this._private;return n.style=zf(e)?e.generateStyle(this):yn(e)?Sr.fromJson(this,e):Ot(e)?Sr.fromString(this,e):Sr(this),n.style},updateStyle:function(){this.mutableElements().updateStyle()}},To={autolock:function(e){return void 0===e?this._private.autolock:(this._private.autolock=!!e,this)},autoungrabify:function(e){return void 0===e?this._private.autoungrabify:(this._private.autoungrabify=!!e,this)},autounselectify:function(e){return void 0===e?this._private.autounselectify:(this._private.autounselectify=!!e,this)},selectionType:function(e){var n=this._private;return null==n.selectionType&&(n.selectionType="single"),void 0===e?n.selectionType:("additive"!==e&&"single"!==e||(n.selectionType=e),this)},panningEnabled:function(e){return void 0===e?this._private.panningEnabled:(this._private.panningEnabled=!!e,this)},userPanningEnabled:function(e){return void 0===e?this._private.userPanningEnabled:(this._private.userPanningEnabled=!!e,this)},zoomingEnabled:function(e){return void 0===e?this._private.zoomingEnabled:(this._private.zoomingEnabled=!!e,this)},userZoomingEnabled:function(e){return void 0===e?this._private.userZoomingEnabled:(this._private.userZoomingEnabled=!!e,this)},boxSelectionEnabled:function(e){return void 0===e?this._private.boxSelectionEnabled:(this._private.boxSelectionEnabled=!!e,this)},pan:function(){var e,n,i,o,l,c=arguments,h=this._private.pan;switch(c.length){case 0:return h;case 1:if(Ot(c[0]))return h[e=c[0]];if(en(c[0])){if(!this._private.panningEnabled)return this;o=(i=c[0]).x,l=i.y,gt(o)&&(h.x=o),gt(l)&&(h.y=l),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;n=c[1],"x"!==(e=c[0])&&"y"!==e||!gt(n)||(h[e]=n),this.emit("pan viewport")}return this.notify("viewport"),this},panBy:function(e,n){var i,o,l,c,h,f=arguments,g=this._private.pan;if(!this._private.panningEnabled)return this;switch(f.length){case 1:en(e)&&(c=(l=f[0]).x,h=l.y,gt(c)&&(g.x+=c),gt(h)&&(g.y+=h),this.emit("pan viewport"));break;case 2:o=n,"x"!==(i=e)&&"y"!==i||!gt(o)||(g[i]+=o),this.emit("pan viewport")}return this.notify("viewport"),this},fit:function(e,n){var i=this.getFitViewport(e,n);if(i){var o=this._private;o.zoom=i.zoom,o.pan=i.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(e,n){var i,o;if((gt(e)&&void 0===n&&(n=e,e=void 0),this._private.panningEnabled&&this._private.zoomingEnabled)&&(Ot(e)?e=this.$(e):en(o=e)&&gt(o.x1)&&gt(o.x2)&&gt(o.y1)&&gt(o.y2)?((i={x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2}).w=i.x2-i.x1,i.h=i.y2-i.y1):Gr(e)||(e=this.mutableElements()),!Gr(e)||!e.empty())){i=i||e.boundingBox();var h,f=this.width(),g=this.height();if(n=gt(n)?n:0,!isNaN(f)&&!isNaN(g)&&f>0&&g>0&&!isNaN(i.w)&&!isNaN(i.h)&&i.w>0&&i.h>0)return{zoom:h=(h=(h=Math.min((f-2*n)/i.w,(g-2*n)/i.h))>this._private.maxZoom?this._private.maxZoom:h)<this._private.minZoom?this._private.minZoom:h,pan:{x:(f-h*(i.x1+i.x2))/2,y:(g-h*(i.y1+i.y2))/2}}}},zoomRange:function(e,n){var i=this._private;if(null==n){var o=e;e=o.min,n=o.max}return gt(e)&&gt(n)&&e<=n?(i.minZoom=e,i.maxZoom=n):gt(e)&&void 0===n&&e<=i.maxZoom?i.minZoom=e:gt(n)&&void 0===e&&n>=i.minZoom&&(i.maxZoom=n),this},minZoom:function(e){return void 0===e?this._private.minZoom:this.zoomRange({min:e})},maxZoom:function(e){return void 0===e?this._private.maxZoom:this.zoomRange({max:e})},getZoomedViewport:function(e){var n,i,o=this._private,l=o.pan,c=o.zoom,h=!1;return o.zoomingEnabled||(h=!0),gt(e)?i=e:en(e)&&(i=e.level,null!=e.position?n=_c(e.position,c,l):null!=e.renderedPosition&&(n=e.renderedPosition),null==n||o.panningEnabled||(h=!0)),i=(i=i>o.maxZoom?o.maxZoom:i)<o.minZoom?o.minZoom:i,!h&&gt(i)&&i!==c&&(null==n||gt(n.x)&&gt(n.y))?null!=n?{zoomed:!0,panned:!0,zoom:i,pan:{x:-i/c*(n.x-l.x)+n.x,y:-i/c*(n.y-l.y)+n.y}}:{zoomed:!0,panned:!1,zoom:i,pan:l}:null},zoom:function(e){if(void 0===e)return this._private.zoom;var n=this.getZoomedViewport(e),i=this._private;return null!=n&&n.zoomed?(i.zoom=n.zoom,n.panned&&(i.pan.x=n.pan.x,i.pan.y=n.pan.y),this.emit("zoom"+(n.panned?" pan":"")+" viewport"),this.notify("viewport"),this):this},viewport:function(e){var n=this._private,i=!0,o=!0,l=[],c=!1,h=!1;if(!e)return this;if(gt(e.zoom)||(i=!1),en(e.pan)||(o=!1),!i&&!o)return this;if(i){var f=e.zoom;f<n.minZoom||f>n.maxZoom||!n.zoomingEnabled?c=!0:(n.zoom=f,l.push("zoom"))}if(o&&(!c||!e.cancelOnFailedZoom)&&n.panningEnabled){var g=e.pan;gt(g.x)&&(n.pan.x=g.x,h=!1),gt(g.y)&&(n.pan.y=g.y,h=!1),h||l.push("pan")}return l.length>0&&(l.push("viewport"),this.emit(l.join(" ")),this.notify("viewport")),this},center:function(e){var n=this.getCenterPan(e);return n&&(this._private.pan=n,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(e,n){if(this._private.panningEnabled){if(Ot(e)){var i=e;e=this.mutableElements().filter(i)}else Gr(e)||(e=this.mutableElements());if(0!==e.length){var o=e.boundingBox(),l=this.width(),c=this.height();return{x:(l-(n=void 0===n?this._private.zoom:n)*(o.x1+o.x2))/2,y:(c-n*(o.y1+o.y2))/2}}}},reset:function(){return this._private.panningEnabled&&this._private.zoomingEnabled?(this.viewport({pan:{x:0,y:0},zoom:1}),this):this},invalidateSize:function(){this._private.sizeCache=null},size:function(){var e,n,i=this._private,o=i.container;return i.sizeCache=i.sizeCache||(o?(e=this.window().getComputedStyle(o),{width:o.clientWidth-(n=function(c){return parseFloat(e.getPropertyValue(c))})("padding-left")-n("padding-right"),height:o.clientHeight-n("padding-top")-n("padding-bottom")}):{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var e=this._private.pan,n=this._private.zoom,i=this.renderedExtent(),o={x1:(i.x1-e.x)/n,x2:(i.x2-e.x)/n,y1:(i.y1-e.y)/n,y2:(i.y2-e.y)/n};return o.w=o.x2-o.x1,o.h=o.y2-o.y1,o},renderedExtent:function(){var e=this.width(),n=this.height();return{x1:0,y1:0,x2:e,y2:n,w:e,h:n}},multiClickDebounceTime:function(e){return e?(this._private.multiClickDebounceTime=e,this):this._private.multiClickDebounceTime}};To.centre=To.center,To.autolockNodes=To.autolock,To.autoungrabifyNodes=To.autoungrabify;var Wl={data:vn.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:vn.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:vn.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:vn.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};Wl.attr=Wl.data,Wl.removeAttr=Wl.removeData;var $l=function(e){var n=this,i=(e=It({},e)).container;i&&!gc(i)&&gc(i[0])&&(i=i[0]);var o=i?i._cyreg:null;(o=o||{})&&o.cy&&(o.cy.destroy(),o={});var l=o.readies=o.readies||[];i&&(i._cyreg=o),o.cy=n;var c=void 0!==qn&&void 0!==i&&!e.headless,h=e;h.layout=It({name:c?"grid":"null"},h.layout),h.renderer=It({name:c?"canvas":"null"},h.renderer);var f=function(x,_,S){return void 0!==_?_:void 0!==S?S:x},g=this._private={container:i,ready:!1,options:h,elements:new dr(this),listeners:[],aniEles:new dr(this),data:h.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:f(!0,h.zoomingEnabled),userZoomingEnabled:f(!0,h.userZoomingEnabled),panningEnabled:f(!0,h.panningEnabled),userPanningEnabled:f(!0,h.userPanningEnabled),boxSelectionEnabled:f(!0,h.boxSelectionEnabled),autolock:f(!1,h.autolock,h.autolockNodes),autoungrabify:f(!1,h.autoungrabify,h.autoungrabifyNodes),autounselectify:f(!1,h.autounselectify),styleEnabled:void 0===h.styleEnabled?c:h.styleEnabled,zoom:gt(h.zoom)?h.zoom:1,pan:{x:en(h.pan)&&gt(h.pan.x)?h.pan.x:0,y:en(h.pan)&&gt(h.pan.y)?h.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:f(250,h.multiClickDebounceTime)};this.createEmitter(),this.selectionType(h.selectionType),this.zoomRange({min:h.minZoom,max:h.maxZoom}),g.styleEnabled&&n.setStyle([]);var y=It({},h,h.renderer);n.initRenderer(y),function(x,_){if(x.some(R0))return vs.all(x).then(_);_(x)}([h.style,h.elements],function(x){var _=x[0],S=x[1];g.styleEnabled&&n.style().append(_),function(A,C,L){n.notifications(!1);var I=n.mutableElements();I.length>0&&I.remove(),null!=A&&(en(A)||yn(A))&&n.add(A),n.one("layoutready",function(B){n.notifications(!0),n.emit(B),n.one("load",C),n.emitAndNotify("load")}).one("layoutstop",function(){n.one("done",L),n.emit("done")});var P=It({},n._private.options.layout);P.eles=n.elements(),n.layout(P).run()}(S,function(){n.startAnimationLoop(),g.ready=!0,Nn(h.ready)&&n.on("ready",h.ready);for(var A=0;A<l.length;A++)n.on("ready",l[A]);o&&(o.readies=[]),n.emit("ready")},h.done)})},rd=$l.prototype;It(rd,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(e){return this.isReady()?this.emitter().emit("ready",[],e):this.on("ready",e),this},destroy:function(){var e=this;if(!e.destroyed())return e.stopAnimationLoop(),e.destroyRenderer(),this.emit("destroy"),e._private.destroyed=!0,e},hasElementWithId:function(e){return this._private.elements.hasElementWithId(e)},getElementById:function(e){return this._private.elements.getElementById(e)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(e){return this._private.elements.merge(e),this},removeFromPool:function(e){return this._private.elements.unmerge(e),this},container:function(){return this._private.container||null},window:function(){if(null==this._private.container)return qn;var e=this._private.container.ownerDocument;return void 0===e||null==e?qn:e.defaultView||qn},mount:function(e){if(null!=e){var n=this,i=n._private,o=i.options;return!gc(e)&&gc(e[0])&&(e=e[0]),n.stopAnimationLoop(),n.destroyRenderer(),i.container=e,i.styleEnabled=!0,n.invalidateSize(),n.initRenderer(It({},o,o.renderer,{name:"null"===o.renderer.name?"canvas":o.renderer.name})),n.startAnimationLoop(),n.style(o.style),n.emit("mount"),n}},unmount:function(){var e=this;return e.stopAnimationLoop(),e.destroyRenderer(),e.initRenderer({name:"null"}),e.emit("unmount"),e},options:function(){return Ri(this._private.options)},json:function(e){var n=this,i=n._private,o=n.mutableElements();if(en(e)){if(n.startBatch(),e.elements){var l={},c=function(I,P){for(var B=[],F=[],G=0;G<I.length;G++){var $=I[G];if($.data.id){var X=""+$.data.id,H=n.getElementById(X);l[X]=!0,0!==H.length?F.push({ele:H,json:$}):(P&&($.group=P),B.push($))}else gn("cy.json() cannot handle elements without an ID attribute")}n.add(B);for(var te=0;te<F.length;te++){var re=F[te];re.ele.json(re.json)}};if(yn(e.elements))c(e.elements);else for(var h=["nodes","edges"],f=0;f<h.length;f++){var g=h[f],y=e.elements[g];yn(y)&&c(y,g)}var x=n.collection();o.filter(function(I){return!l[I.id()]}).forEach(function(I){I.isParent()?x.merge(I):I.remove()}),x.forEach(function(I){return I.children().move({parent:null})}),x.forEach(function(I){return(P=I,n.getElementById(P.id())).remove();var P})}e.style&&n.style(e.style),null!=e.zoom&&e.zoom!==i.zoom&&n.zoom(e.zoom),e.pan&&(e.pan.x===i.pan.x&&e.pan.y===i.pan.y||n.pan(e.pan)),e.data&&n.data(e.data);for(var _=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],S=0;S<_.length;S++){var A=_[S];null!=e[A]&&n[A](e[A])}return n.endBatch(),this}var C={};e?C.elements=this.elements().map(function(I){return I.json()}):(C.elements={},o.forEach(function(I){var P=I.group();C.elements[P]||(C.elements[P]=[]),C.elements[P].push(I.json())})),this._private.styleEnabled&&(C.style=n.style().json()),C.data=Ri(n.data());var L=i.options;return C.zoomingEnabled=i.zoomingEnabled,C.userZoomingEnabled=i.userZoomingEnabled,C.zoom=i.zoom,C.minZoom=i.minZoom,C.maxZoom=i.maxZoom,C.panningEnabled=i.panningEnabled,C.userPanningEnabled=i.userPanningEnabled,C.pan=Ri(i.pan),C.boxSelectionEnabled=i.boxSelectionEnabled,C.renderer=Ri(L.renderer),C.hideEdgesOnViewport=L.hideEdgesOnViewport,C.textureOnViewport=L.textureOnViewport,C.wheelSensitivity=L.wheelSensitivity,C.motionBlur=L.motionBlur,C.multiClickDebounceTime=L.multiClickDebounceTime,C}}),rd.$id=rd.getElementById,[_b,Tb,Tv,cp,td,Db,dp,nd,Nb,To,Wl].forEach(function(e){It(rd,e)});var zb={fit:!0,directed:!1,padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,n){return!0},ready:void 0,stop:void 0,transform:function(e,n){return n}},Ib={maximal:!1,acyclic:!1},Ps=function(e){return e.scratch("breadthfirst")},Dv=function(e,n){return e.scratch("breadthfirst",n)};function Mv(e){this.options=It({},zb,Ib,e)}Mv.prototype.run=function(){var e,n=this.options,i=n,o=n.cy,l=i.eles,c=l.nodes().filter(function(We){return!We.isParent()}),h=l,f=i.directed,g=i.acyclic||i.maximal||i.maximalAdjustments>0,y=jr(i.boundingBox?i.boundingBox:{x1:0,y1:0,w:o.width(),h:o.height()});if(Gr(i.roots))e=i.roots;else if(yn(i.roots)){for(var x=[],_=0;_<i.roots.length;_++){var A=o.getElementById(i.roots[_]);x.push(A)}e=o.collection(x)}else if(Ot(i.roots))e=o.$(i.roots);else if(f)e=c.roots();else{var C=l.components();e=o.collection();for(var L=function(We){var ft=C[We],vt=ft.maxDegree(!1),ot=ft.filter(function(U){return U.degree(!1)===vt});e=e.add(ot)},I=0;I<C.length;I++)L(I)}var P=[],B={},F=function(We,ft){null==P[ft]&&(P[ft]=[]);var vt=P[ft].length;P[ft].push(We),Dv(We,{index:vt,depth:ft})};h.bfs({roots:e,directed:i.directed,visit:function(We,ft,vt,ot,U){var pe=We[0],Ce=pe.id();F(pe,U),B[Ce]=!0}});for(var G=[],$=0;$<c.length;$++){var X=c[$];B[X.id()]||G.push(X)}var H=function(We){for(var ft=P[We],vt=0;vt<ft.length;vt++){var ot=ft[vt];null!=ot?Dv(ot,{depth:We,index:vt}):(ft.splice(vt,1),vt--)}},te=function(){for(var We=0;We<P.length;We++)H(We)},re=function(We,ft){for(var vt=Ps(We),ot=We.incomers().filter(function(Ue){return Ue.isNode()&&l.has(Ue)}),U=-1,pe=We.id(),Ce=0;Ce<ot.length;Ce++){var Ae=Ps(ot[Ce]);U=Math.max(U,Ae.depth)}if(vt.depth<=U){if(!i.acyclic&&ft[pe])return null;var Ze=U+1;return Ct=Ze,rt=Ps(Ue=We),P[rt.depth][rt.index]=null,F(Ue,Ct),ft[pe]=Ze,!0}var Ue,Ct,rt;return!1};if(f&&g){var ae=[],le={},se=function(We){return ae.push(We)};for(c.forEach(function(We){return ae.push(We)});ae.length>0;){var de=ae.shift(),we=re(de,le);if(we)de.outgoers().filter(function(We){return We.isNode()&&l.has(We)}).forEach(se);else if(null===we){gn("Detected double maximal shift for node `"+de.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}te();var be=0;if(i.avoidOverlap)for(var fe=0;fe<c.length;fe++){var ge=c[fe].layoutDimensions(i);be=Math.max(be,ge.w,ge.h)}var Ie={},_e=function(We){if(Ie[We.id()])return Ie[We.id()];for(var ft=Ps(We).depth,vt=We.neighborhood(),ot=0,U=0,pe=0;pe<vt.length;pe++){var Ce=vt[pe];if(!Ce.isEdge()&&!Ce.isParent()&&c.has(Ce)){var Oe=Ps(Ce);if(null!=Oe){var Ae=Oe.index,Ze=Oe.depth;null!=Ae&&null!=Ze&&Ze<ft&&(ot+=Ae/P[Ze].length,U++)}}}return ot/=U=Math.max(1,U),0===U&&(ot=0),Ie[We.id()]=ot,ot},je=function(We,ft){var vt=_e(We)-_e(ft);return 0===vt?Ff(We.id(),ft.id()):vt};void 0!==i.depthSort&&(je=i.depthSort);for(var Fe=0;Fe<P.length;Fe++)P[Fe].sort(je),H(Fe);for(var ze=[],Je=0;Je<G.length;Je++)ze.push(G[Je]);P.unshift(ze),te();for(var Re=0,Ge=0;Ge<P.length;Ge++)Re=Math.max(P[Ge].length,Re);var st=y.x1+y.w/2,pt=y.x1+y.h/2,_t=P.reduce(function(We,ft){return Math.max(We,ft.length)},0);return l.nodes().layoutPositions(this,i,function(We){var ft=Ps(We),vt=ft.depth,ot=ft.index,U=P[vt].length,pe=Math.max(y.w/((i.grid?_t:U)+1),be),Ce=Math.max(y.h/(P.length+1),be),Oe=Math.min(y.w/2/P.length,y.h/2/P.length);if(Oe=Math.max(Oe,be),i.circle){var Ae=Oe*vt+Oe-(P.length>0&&P[0].length<=3?Oe/2:0),Ze=2*Math.PI/P[vt].length*ot;return 0===vt&&1===P[0].length&&(Ae=1),{x:st+Ae*Math.cos(Ze),y:pt+Ae*Math.sin(Ze)}}return{x:st+(ot+1-(U+1)/2)*pe,y:(vt+1)*Ce}}),this};var Rb={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,n){return!0},ready:void 0,stop:void 0,transform:function(e,n){return n}};function Av(e){this.options=It({},Rb,e)}Av.prototype.run=function(){var e=this.options,n=e,i=e.cy,o=n.eles,l=void 0!==n.counterclockwise?!n.counterclockwise:n.clockwise,c=o.nodes().not(":parent");n.sort&&(c=c.sort(n.sort));for(var h,f=jr(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:i.width(),h:i.height()}),g=f.x1+f.w/2,y=f.y1+f.h/2,x=(void 0===n.sweep?2*Math.PI-2*Math.PI/c.length:n.sweep)/Math.max(1,c.length-1),_=0,S=0;S<c.length;S++){var A=c[S].layoutDimensions(n);_=Math.max(_,A.w,A.h)}if(h=gt(n.radius)?n.radius:c.length<=1?0:Math.min(f.h,f.w)/2-_,c.length>1&&n.avoidOverlap){_*=1.75;var I=Math.cos(x)-Math.cos(0),P=Math.sin(x)-Math.sin(0),B=Math.sqrt(_*_/(I*I+P*P));h=Math.max(B,h)}return o.nodes().layoutPositions(this,n,function(F,G){var $=n.startAngle+G*x*(l?1:-1),X=h*Math.cos($),H=h*Math.sin($);return{x:g+X,y:y+H}}),this};var Bv,Fb={fit:!0,padding:30,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(e){return e.degree()},levelWidth:function(e){return e.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,n){return!0},ready:void 0,stop:void 0,transform:function(e,n){return n}};function Lv(e){this.options=It({},Fb,e)}Lv.prototype.run=function(){for(var e=this.options,n=e,i=void 0!==n.counterclockwise?!n.counterclockwise:n.clockwise,o=e.cy,l=n.eles,c=l.nodes().not(":parent"),h=jr(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:o.width(),h:o.height()}),f=h.x1+h.w/2,g=h.y1+h.h/2,y=[],x=0,_=0;_<c.length;_++){var S,A=c[_];S=n.concentric(A),y.push({value:S,node:A}),A._private.scratch.concentric=S}c.updateStyle();for(var C=0;C<c.length;C++){var L=c[C].layoutDimensions(n);x=Math.max(x,L.w,L.h)}y.sort(function(We,ft){return ft.value-We.value});for(var I=n.levelWidth(c),P=[[]],B=P[0],F=0;F<y.length;F++){var G=y[F];B.length>0&&Math.abs(B[0].value-G.value)>=I&&P.push(B=[]),B.push(G)}var $=x+n.minNodeSpacing;if(!n.avoidOverlap){var X=P.length>0&&P[0].length>1,H=(Math.min(h.w,h.h)/2-$)/(P.length+X?1:0);$=Math.min($,H)}for(var te=0,re=0;re<P.length;re++){var ae=P[re],le=void 0===n.sweep?2*Math.PI-2*Math.PI/ae.length:n.sweep,se=ae.dTheta=le/Math.max(1,ae.length-1);if(ae.length>1&&n.avoidOverlap){var de=Math.cos(se)-Math.cos(0),we=Math.sin(se)-Math.sin(0),be=Math.sqrt($*$/(de*de+we*we));te=Math.max(be,te)}ae.r=te,te+=$}if(n.equidistant){for(var fe=0,ge=0,ee=0;ee<P.length;ee++)fe=Math.max(fe,P[ee].r-ge);ge=0;for(var Ie=0;Ie<P.length;Ie++){var _e=P[Ie];0===Ie&&(ge=_e.r),_e.r=ge,ge+=fe}}for(var je={},Fe=0;Fe<P.length;Fe++)for(var ze=P[Fe],Je=ze.dTheta,Re=ze.r,Ge=0;Ge<ze.length;Ge++){var st=ze[Ge],pt=n.startAngle+(i?1:-1)*Je*Ge,_t={x:f+Re*Math.cos(pt),y:g+Re*Math.sin(pt)};je[st.node.id()]=_t}return l.nodes().layoutPositions(this,n,function(We){var ft=We.id();return je[ft]}),this};var Vb={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(e,n){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(e){return 2048},nodeOverlap:4,idealEdgeLength:function(e){return 32},edgeElasticity:function(e){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function id(e){this.options=It({},Vb,e),this.options.layout=this;var n=this.options.eles.nodes(),i=this.options.eles.edges().filter(function(o){var l=o.source().data("id"),c=o.target().data("id"),h=n.some(function(g){return g.data("id")===l}),f=n.some(function(g){return g.data("id")===c});return!h||!f});this.options.eles=this.options.eles.not(i)}id.prototype.run=function(){var e=this.options,n=e.cy,i=this;i.stopped=!1,!0!==e.animate&&!1!==e.animate||i.emit({type:"layoutstart",layout:i}),Bv=!0===e.debug;var o=jb(n,i,e);Bv&&(void 0)(o),e.randomize&&Yb(o);var l=sa(),c=function(){Hb(o,n,e),!0===e.fit&&n.fit(e.padding)},h=function(x){return!(i.stopped||x>=e.numIter||(Wb(o,e),o.temperature=o.temperature*e.coolingFactor,o.temperature<e.minTemp))},f=function(){if(!0===e.animate||!1===e.animate)c(),i.one("layoutstop",e.stop),i.emit({type:"layoutstop",layout:i});else{var x=e.eles.nodes(),_=Ov(o,e,x);x.layoutPositions(i,e,_)}},g=0,y=!0;if(!0===e.animate)!function x(){for(var _=0;y&&_<e.refresh;)y=h(g),g++,_++;y?(sa()-l>=e.animationThreshold&&c(),bc(x)):(zv(o,e),f())}();else{for(;y;)y=h(g),g++;zv(o,e),f()}return this},id.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this},id.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var jb=function(e,n,i){for(var o=i.eles.edges(),l=i.eles.nodes(),c=jr(i.boundingBox?i.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),h={isCompound:e.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:l.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:o.size(),temperature:i.initialTemp,clientWidth:c.w,clientHeight:c.h,boundingBox:c},f=i.eles.components(),g={},y=0;y<f.length;y++)for(var x=f[y],_=0;_<x.length;_++)g[x[_].id()]=y;for(y=0;y<h.nodeSize;y++){var S=(P=l[y]).layoutDimensions(i);(ge={}).isLocked=P.locked(),ge.id=P.data("id"),ge.parentId=P.data("parent"),ge.cmptId=g[P.id()],ge.children=[],ge.positionX=P.position("x"),ge.positionY=P.position("y"),ge.offsetX=0,ge.offsetY=0,ge.height=S.w,ge.width=S.h,ge.maxX=ge.positionX+ge.width/2,ge.minX=ge.positionX-ge.width/2,ge.maxY=ge.positionY+ge.height/2,ge.minY=ge.positionY-ge.height/2,ge.padLeft=parseFloat(P.style("padding")),ge.padRight=parseFloat(P.style("padding")),ge.padTop=parseFloat(P.style("padding")),ge.padBottom=parseFloat(P.style("padding")),ge.nodeRepulsion=Nn(i.nodeRepulsion)?i.nodeRepulsion(P):i.nodeRepulsion,h.layoutNodes.push(ge),h.idToIndex[ge.id]=y}var A=[],C=0,L=-1,I=[];for(y=0;y<h.nodeSize;y++){var P,B=(P=h.layoutNodes[y]).parentId;null!=B?h.layoutNodes[h.idToIndex[B]].children.push(P.id):(A[++L]=P.id,I.push(P.id))}for(h.graphSet.push(I);C<=L;){var F=A[C++],$=h.layoutNodes[h.idToIndex[F]].children;if($.length>0)for(h.graphSet.push($),y=0;y<$.length;y++)A[++L]=$[y]}for(y=0;y<h.graphSet.length;y++){var X=h.graphSet[y];for(_=0;_<X.length;_++)h.indexToGraph[h.idToIndex[X[_]]]=y}for(y=0;y<h.edgeSize;y++){var te=o[y],re={};re.id=te.data("id"),re.sourceId=te.data("source"),re.targetId=te.data("target");var ae=Nn(i.idealEdgeLength)?i.idealEdgeLength(te):i.idealEdgeLength,le=Nn(i.edgeElasticity)?i.edgeElasticity(te):i.edgeElasticity,se=h.idToIndex[re.sourceId],de=h.idToIndex[re.targetId];if(h.indexToGraph[se]!=h.indexToGraph[de]){for(var we=qb(re.sourceId,re.targetId,h),be=h.graphSet[we],fe=0,ge=h.layoutNodes[se];-1===be.indexOf(ge.id);)ge=h.layoutNodes[h.idToIndex[ge.parentId]],fe++;for(ge=h.layoutNodes[de];-1===be.indexOf(ge.id);)ge=h.layoutNodes[h.idToIndex[ge.parentId]],fe++;ae*=fe*i.nestingFactor}re.idealLength=ae,re.elasticity=le,h.layoutEdges.push(re)}return h},qb=function(e,n,i){var o=Xb(e,n,0,i);return 2>o.count?0:o.graph},Xb=function e(n,i,o,l){var c=l.graphSet[o];if(-1<c.indexOf(n)&&-1<c.indexOf(i))return{count:2,graph:o};for(var h=0,f=0;f<c.length;f++){var x=l.layoutNodes[l.idToIndex[c[f]]].children;if(0!==x.length){var _=e(n,i,l.indexToGraph[l.idToIndex[x[0]]],l);if(0!==_.count){if(1!==_.count)return _;if(2==++h)break}}}return{count:h,graph:o}},Yb=function(e,n){for(var i=e.clientWidth,o=e.clientHeight,l=0;l<e.nodeSize;l++){var c=e.layoutNodes[l];0!==c.children.length||c.isLocked||(c.positionX=Math.random()*i,c.positionY=Math.random()*o)}},Ov=function(e,n,i){var o=e.boundingBox,l={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return n.boundingBox&&(i.forEach(function(c){var h=e.layoutNodes[e.idToIndex[c.data("id")]];l.x1=Math.min(l.x1,h.positionX),l.x2=Math.max(l.x2,h.positionX),l.y1=Math.min(l.y1,h.positionY),l.y2=Math.max(l.y2,h.positionY)}),l.w=l.x2-l.x1,l.h=l.y2-l.y1),function(c,h){var f=e.layoutNodes[e.idToIndex[c.data("id")]];return n.boundingBox?{x:o.x1+(f.positionX-l.x1)/l.w*o.w,y:o.y1+(f.positionY-l.y1)/l.h*o.h}:{x:f.positionX,y:f.positionY}}},Hb=function(e,n,i){var o=i.layout,l=i.eles.nodes(),c=Ov(e,i,l);l.positions(c),!0!==e.ready&&(e.ready=!0,o.one("layoutready",i.ready),o.emit({type:"layoutready",layout:this}))},Wb=function(e,n,i){$b(e,n),Ub(e),Zb(e,n),Qb(e),Jb(e)},$b=function(e,n){for(var i=0;i<e.graphSet.length;i++)for(var o=e.graphSet[i],l=o.length,c=0;c<l;c++)for(var h=e.layoutNodes[e.idToIndex[o[c]]],f=c+1;f<l;f++)Kb(h,e.layoutNodes[e.idToIndex[o[f]]],e,n)},Nv=function(e){return-e+2*e*Math.random()},Kb=function(e,n,i,o){if(e.cmptId===n.cmptId||i.isCompound){var l=n.positionX-e.positionX,c=n.positionY-e.positionY;0===l&&0===c&&(l=Nv(1),c=Nv(1));var h=Gb(e,n,l,c);if(h>0)var f=(y=o.nodeOverlap*h)*l/(L=Math.sqrt(l*l+c*c)),g=y*c/L;else{var y,x=ad(e,l,c),_=ad(n,-1*l,-1*c),S=_.x-x.x,A=_.y-x.y,C=S*S+A*A,L=Math.sqrt(C);f=(y=(e.nodeRepulsion+n.nodeRepulsion)/C)*S/L,g=y*A/L}e.isLocked||(e.offsetX-=f,e.offsetY-=g),n.isLocked||(n.offsetX+=f,n.offsetY+=g)}},Gb=function(e,n,i,o){if(i>0)var l=e.maxX-n.minX;else l=n.maxX-e.minX;if(o>0)var c=e.maxY-n.minY;else c=n.maxY-e.minY;return l>=0&&c>=0?Math.sqrt(l*l+c*c):0},ad=function(e,n,i){var o=e.positionX,l=e.positionY,c=e.height||1,h=e.width||1,f=i/n,g=c/h,y={};return 0===n&&0<i||0===n&&0>i?(y.x=o,y.y=l+c/2,y):0<n&&-1*g<=f&&f<=g?(y.x=o+h/2,y.y=l+h*i/2/n,y):0>n&&-1*g<=f&&f<=g?(y.x=o-h/2,y.y=l-h*i/2/n,y):0<i&&(f<=-1*g||f>=g)?(y.x=o+c*n/2/i,y.y=l+c/2,y):(0>i&&(f<=-1*g||f>=g)&&(y.x=o-c*n/2/i,y.y=l-c/2),y)},Ub=function(e,n){for(var i=0;i<e.edgeSize;i++){var o=e.layoutEdges[i],c=e.layoutNodes[e.idToIndex[o.sourceId]],f=e.layoutNodes[e.idToIndex[o.targetId]],g=f.positionX-c.positionX,y=f.positionY-c.positionY;if(0!==g||0!==y){var x=ad(c,g,y),_=ad(f,-1*g,-1*y),S=_.x-x.x,A=_.y-x.y,C=Math.sqrt(S*S+A*A),L=Math.pow(o.idealLength-C,2)/o.elasticity;if(0!==C)var I=L*S/C,P=L*A/C;else I=0,P=0;c.isLocked||(c.offsetX+=I,c.offsetY+=P),f.isLocked||(f.offsetX-=I,f.offsetY-=P)}}},Zb=function(e,n){if(0!==n.gravity)for(var i=0;i<e.graphSet.length;i++){var o=e.graphSet[i],l=o.length;if(0===i)var c=e.clientHeight/2,h=e.clientWidth/2;else{var g=e.layoutNodes[e.idToIndex[e.layoutNodes[e.idToIndex[o[0]]].parentId]];c=g.positionX,h=g.positionY}for(var y=0;y<l;y++){var x=e.layoutNodes[e.idToIndex[o[y]]];if(!x.isLocked){var _=c-x.positionX,S=h-x.positionY,A=Math.sqrt(_*_+S*S);if(A>1){var L=n.gravity*S/A;x.offsetX+=n.gravity*_/A,x.offsetY+=L}}}}},Qb=function(e,n){var i=[],o=0,l=-1;for(i.push.apply(i,e.graphSet[0]),l+=e.graphSet[0].length;o<=l;){var c=i[o++],f=e.layoutNodes[e.idToIndex[c]],g=f.children;if(0<g.length&&!f.isLocked){for(var y=f.offsetX,x=f.offsetY,_=0;_<g.length;_++){var S=e.layoutNodes[e.idToIndex[g[_]]];S.offsetX+=y,S.offsetY+=x,i[++l]=g[_]}f.offsetX=0,f.offsetY=0}}},Jb=function(e,n){for(var i=0;i<e.nodeSize;i++)0<(l=e.layoutNodes[i]).children.length&&(l.maxX=void 0,l.minX=void 0,l.maxY=void 0,l.minY=void 0);for(i=0;i<e.nodeSize;i++)if(!(0<(l=e.layoutNodes[i]).children.length||l.isLocked)){var o=ex(l.offsetX,l.offsetY,e.temperature);l.positionX+=o.x,l.positionY+=o.y,l.offsetX=0,l.offsetY=0,l.minX=l.positionX-l.width,l.maxX=l.positionX+l.width,l.minY=l.positionY-l.height,l.maxY=l.positionY+l.height,tx(l,e)}for(i=0;i<e.nodeSize;i++){var l;0<(l=e.layoutNodes[i]).children.length&&!l.isLocked&&(l.positionX=(l.maxX+l.minX)/2,l.positionY=(l.maxY+l.minY)/2,l.width=l.maxX-l.minX,l.height=l.maxY-l.minY)}},ex=function(e,n,i){var o=Math.sqrt(e*e+n*n);if(o>i)var l={x:i*e/o,y:i*n/o};else l={x:e,y:n};return l},tx=function e(n,i){var o=n.parentId;if(null!=o){var l=i.layoutNodes[i.idToIndex[o]],c=!1;return(null==l.maxX||n.maxX+l.padRight>l.maxX)&&(l.maxX=n.maxX+l.padRight,c=!0),(null==l.minX||n.minX-l.padLeft<l.minX)&&(l.minX=n.minX-l.padLeft,c=!0),(null==l.maxY||n.maxY+l.padBottom>l.maxY)&&(l.maxY=n.maxY+l.padBottom,c=!0),(null==l.minY||n.minY-l.padTop<l.minY)&&(l.minY=n.minY-l.padTop,c=!0),c?e(l,i):void 0}},zv=function(e,n){for(var i=e.layoutNodes,o=[],l=0;l<i.length;l++){var c=i[l],h=c.cmptId;(o[h]=o[h]||[]).push(c)}var f=0;for(l=0;l<o.length;l++)if(L=o[l]){L.x1=1/0,L.x2=-1/0,L.y1=1/0,L.y2=-1/0;for(var g=0;g<L.length;g++){var y=L[g];L.x1=Math.min(L.x1,y.positionX-y.width/2),L.x2=Math.max(L.x2,y.positionX+y.width/2),L.y1=Math.min(L.y1,y.positionY-y.height/2),L.y2=Math.max(L.y2,y.positionY+y.height/2)}L.w=L.x2-L.x1,L.h=L.y2-L.y1,f+=L.w*L.h}o.sort(function(I,P){return P.w*P.h-I.w*I.h});var x=0,_=0,S=0,A=0,C=Math.sqrt(f)*e.clientWidth/e.clientHeight;for(l=0;l<o.length;l++){var L;if(L=o[l]){for(g=0;g<L.length;g++)(y=L[g]).isLocked||(y.positionX+=x-L.x1,y.positionY+=_-L.y1);x+=L.w+n.componentSpacing,S+=L.w+n.componentSpacing,A=Math.max(A,L.h),S>C&&(_+=A+n.componentSpacing,x=0,S=0,A=0)}}},nx={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(e){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,n){return!0},ready:void 0,stop:void 0,transform:function(e,n){return n}};function Iv(e){this.options=It({},nx,e)}Iv.prototype.run=function(){var e=this.options,n=e,i=e.cy,o=n.eles,l=o.nodes().not(":parent");n.sort&&(l=l.sort(n.sort));var c=jr(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:i.width(),h:i.height()});if(0===c.h||0===c.w)o.nodes().layoutPositions(this,n,function(je){return{x:c.x1,y:c.y1}});else{var h=l.size(),f=Math.sqrt(h*c.h/c.w),g=Math.round(f),y=Math.round(c.w/c.h*f),x=function(je){if(null==je)return Math.min(g,y);Math.min(g,y)==g?g=je:y=je},_=function(je){if(null==je)return Math.max(g,y);Math.max(g,y)==g?g=je:y=je},S=n.rows,A=null!=n.cols?n.cols:n.columns;if(null!=S&&null!=A)g=S,y=A;else if(null!=S&&null==A)g=S,y=Math.ceil(h/g);else if(null==S&&null!=A)y=A,g=Math.ceil(h/y);else if(y*g>h){var C=x(),L=_();(C-1)*L>=h?x(C-1):(L-1)*C>=h&&_(L-1)}else for(;y*g<h;){var I=x(),P=_();(P+1)*I>=h?_(P+1):x(I+1)}var B=c.w/y,F=c.h/g;if(n.condense&&(B=0,F=0),n.avoidOverlap)for(var G=0;G<l.length;G++){var $=l[G],X=$._private.position;null!=X.x&&null!=X.y||(X.x=0,X.y=0);var H=$.layoutDimensions(n),te=n.avoidOverlapPadding,ae=H.h+te;B=Math.max(B,H.w+te),F=Math.max(F,ae)}for(var le={},se=function(je,Fe){return!!le["c-"+je+"-"+Fe]},de=function(je,Fe){le["c-"+je+"-"+Fe]=!0},we=0,be=0,fe=function(){++be>=y&&(be=0,we++)},ge={},ee=0;ee<l.length;ee++){var Se=l[ee],Ie=n.position(Se);if(Ie&&(void 0!==Ie.row||void 0!==Ie.col)){var _e={row:Ie.row,col:Ie.col};if(void 0===_e.col)for(_e.col=0;se(_e.row,_e.col);)_e.col++;else if(void 0===_e.row)for(_e.row=0;se(_e.row,_e.col);)_e.row++;ge[Se.id()]=_e,de(_e.row,_e.col)}}l.layoutPositions(this,n,function(je,Fe){var ze,Je;if(je.locked()||je.isParent())return!1;var Re=ge[je.id()];if(Re)ze=Re.col*B+B/2+c.x1,Je=Re.row*F+F/2+c.y1;else{for(;se(we,be);)fe();ze=be*B+B/2+c.x1,Je=we*F+F/2+c.y1,de(we,be),fe()}return{x:ze,y:Je}})}return this};var rx={ready:function(){},stop:function(){}};function pp(e){this.options=It({},rx,e)}pp.prototype.run=function(){var e=this.options,n=e.eles;return this.emit("layoutstart"),n.nodes().positions(function(){return{x:0,y:0}}),this.one("layoutready",e.ready),this.emit("layoutready"),this.one("layoutstop",e.stop),this.emit("layoutstop"),this},pp.prototype.stop=function(){return this};var ix={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,spacingFactor:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,n){return!0},ready:void 0,stop:void 0,transform:function(e,n){return n}};function Rv(e){this.options=It({},ix,e)}Rv.prototype.run=function(){var e=this.options,n=e.eles.nodes(),i=Nn(e.positions);return n.layoutPositions(this,e,function(o,l){var h,g,c=(h=o,null==e.positions?{x:(g=h.position()).x,y:g.y}:i?e.positions(h):e.positions[h._private.data.id]??null);return!o.locked()&&null!=c&&c}),this};var ax={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,n){return!0},ready:void 0,stop:void 0,transform:function(e,n){return n}};function Fv(e){this.options=It({},ax,e)}Fv.prototype.run=function(){var e=this.options,n=e.cy,i=e.eles,o=jr(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()});return i.nodes().layoutPositions(this,e,function(l,c){return{x:o.x1+Math.round(Math.random()*o.w),y:o.y1+Math.round(Math.random()*o.h)}}),this};var ox=[{name:"breadthfirst",impl:Mv},{name:"circle",impl:Av},{name:"concentric",impl:Lv},{name:"cose",impl:id},{name:"grid",impl:Iv},{name:"null",impl:pp},{name:"preset",impl:Rv},{name:"random",impl:Fv}];function Vv(e){this.options=e,this.notifications=0}var jv=function(){},qv=function(){throw new Error("A headless instance can not render images")};Vv.prototype={recalculateRenderedStyle:jv,notify:function(){this.notifications++},init:jv,isHeadless:function(){return!0},png:qv,jpg:qv};var sx={arrowShapeWidth:.3,registerArrowShapes:function(){var e=this.arrowShapes={},n=this,i=function(g,y,x,_,S,A,C){return S.x-x/2-C<=g&&g<=S.x+x/2+C&&S.y-x/2-C<=y&&y<=S.y+x/2+C},o=function(g,y,x,_,S){var A=g*Math.cos(_)-y*Math.sin(_),C=(g*Math.sin(_)+y*Math.cos(_))*x;return{x:A*x+S.x,y:C+S.y}},l=function(g,y,x,_){for(var S=[],A=0;A<g.length;A+=2)S.push(o(g[A],g[A+1],y,x,_));return S},c=function(g){for(var y=[],x=0;x<g.length;x++){var _=g[x];y.push(_.x,_.y)}return y},h=function(g){return g.pstyle("width").pfValue*g.pstyle("arrow-scale").pfValue*2},f=function(g,y){Ot(y)&&(y=e[y]),e[g]=It({name:g,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(x,_,S,A,C,L){var I=c(l(this.points,S+2*L,A,C));return qr(x,_,I)},roughCollide:i,draw:function(x,_,S,A){var C=l(this.points,_,S,A);n.arrowShapeImpl("polygon")(x,C)},spacing:function(x){return 0},gap:h},y)};f("none",{collide:wc,roughCollide:wc,draw:Th,spacing:Qf,gap:Qf}),f("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),f("arrow","triangle"),f("triangle-backcurve",{points:e.triangle.points,controlPoint:[0,-.15],roughCollide:i,draw:function(g,y,x,_,S){var A=l(this.points,y,x,_),C=this.controlPoint,L=o(C[0],C[1],y,x,_);n.arrowShapeImpl(this.name)(g,A,L)},gap:function(g){return.8*h(g)}}),f("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(g,y,x,_,S,A,C){var L=c(l(this.points,x+2*C,_,S)),I=c(l(this.pointsTee,x+2*C,_,S));return qr(g,y,L)||qr(g,y,I)},draw:function(g,y,x,_,S){var A=l(this.points,y,x,_),C=l(this.pointsTee,y,x,_);n.arrowShapeImpl(this.name)(g,A,C)}}),f("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(g,y,x,_,S,A,C){var L=S,I=Math.pow(L.x-g,2)+Math.pow(L.y-y,2)<=Math.pow((x+2*C)*this.radius,2),P=c(l(this.points,x+2*C,_,S));return qr(g,y,P)||I},draw:function(g,y,x,_,S){var A=l(this.pointsTr,y,x,_);n.arrowShapeImpl(this.name)(g,A,_.x,_.y,this.radius*y)},spacing:function(g){return n.getArrowWidth(g.pstyle("width").pfValue,g.pstyle("arrow-scale").value)*this.radius}}),f("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(g,y){var x=this.baseCrossLinePts.slice(),_=y/g;return x[3]=x[3]-_,x[5]=x[5]-_,x},collide:function(g,y,x,_,S,A,C){var L=c(l(this.points,x+2*C,_,S)),I=c(l(this.crossLinePts(x,A),x+2*C,_,S));return qr(g,y,L)||qr(g,y,I)},draw:function(g,y,x,_,S){var A=l(this.points,y,x,_),C=l(this.crossLinePts(y,S),y,x,_);n.arrowShapeImpl(this.name)(g,A,C)}}),f("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(g){return.525*h(g)}}),f("circle",{radius:.15,collide:function(g,y,x,_,S,A,C){var L=S;return Math.pow(L.x-g,2)+Math.pow(L.y-y,2)<=Math.pow((x+2*C)*this.radius,2)},draw:function(g,y,x,_,S){n.arrowShapeImpl(this.name)(g,_.x,_.y,this.radius*y)},spacing:function(g){return n.getArrowWidth(g.pstyle("width").pfValue,g.pstyle("arrow-scale").value)*this.radius}}),f("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(g){return 1},gap:function(g){return 1}}),f("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),f("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(g){return g.pstyle("width").pfValue*g.pstyle("arrow-scale").value}}),f("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(g){return.95*g.pstyle("width").pfValue*g.pstyle("arrow-scale").value}})}},lx={projectIntoViewport:function(e,n){var i=this.cy,o=this.findContainerClientCoords(),l=o[0],c=o[1],h=o[4],f=i.pan(),g=i.zoom();return[((e-l)/h-f.x)/g,((n-c)/h-f.y)/g]},findContainerClientCoords:function(){if(this.containerBB)return this.containerBB;var e=this.container,n=e.getBoundingClientRect(),i=this.cy.window().getComputedStyle(e),o=function($){return parseFloat(i.getPropertyValue($))},l=o("padding-left"),c=o("padding-right"),h=o("padding-top"),f=o("padding-bottom"),g=o("border-left-width"),y=o("border-right-width"),x=o("border-top-width"),_=(o("border-bottom-width"),e.clientWidth);return this.containerBB=[n.left+l+g,n.top+h+x,_-(l+c),e.clientHeight-(h+f),n.width/(_+(g+y))]},invalidateContainerClientCoordsCache:function(){this.containerBB=null},findNearestElement:function(e,n,i,o){return this.findNearestElements(e,n,i,o)[0]},findNearestElements:function(e,n,i,o){var l,c,h=this,f=this,g=f.getCachedZSortedEles(),y=[],x=f.cy.zoom(),_=f.cy.hasCompoundNodes(),S=(o?24:8)/x,A=(o?8:2)/x,C=(o?8:2)/x,L=1/0;function I(H,te){if(H.isNode()){if(c)return;c=H,y.push(H)}if(H.isEdge()&&(null==te||te<L))if(l){if(l.pstyle("z-compound-depth").value===H.pstyle("z-compound-depth").value&&l.pstyle("z-compound-depth").value===H.pstyle("z-compound-depth").value)for(var re=0;re<y.length;re++)if(y[re].isEdge()){y[re]=H,l=H,L=te??L;break}}else y.push(H),l=H,L=te??L}function P(H){var te=H.outerWidth()+2*A,re=H.outerHeight()+2*A,ae=te/2,le=re/2,se=H.position();if(se.x-ae<=e&&e<=se.x+ae&&se.y-le<=n&&n<=se.y+le&&f.nodeShapes[h.getNodeShape(H)].checkPoint(e,n,0,te,re,se.x,se.y))return I(H,0),!0}function B(H){var te,re=H._private,ae=re.rscratch,le=H.pstyle("width").pfValue,se=H.pstyle("arrow-scale").value,de=le/2+S,we=de*de,be=2*de,fe=re.source,ge=re.target;if("segments"===ae.edgeType||"straight"===ae.edgeType||"haystack"===ae.edgeType){for(var ee=ae.allpts,Se=0;Se+3<ee.length;Se+=2)if(Cy(e,n,ee[Se],ee[Se+1],ee[Se+2],ee[Se+3],be)&&we>(te=Py(e,n,ee[Se],ee[Se+1],ee[Se+2],ee[Se+3])))return I(H,te),!0}else if("bezier"===ae.edgeType||"multibezier"===ae.edgeType||"self"===ae.edgeType||"compound"===ae.edgeType)for(ee=ae.allpts,Se=0;Se+5<ae.allpts.length;Se+=4)if(Sy(e,n,ee[Se],ee[Se+1],ee[Se+2],ee[Se+3],ee[Se+4],ee[Se+5],be)&&we>(te=Ty(e,n,ee[Se],ee[Se+1],ee[Se+2],ee[Se+3],ee[Se+4],ee[Se+5])))return I(H,te),!0;fe=fe||re.source,ge=ge||re.target;var Ie=h.getArrowWidth(le,se),_e=[{name:"source",x:ae.arrowStartX,y:ae.arrowStartY,angle:ae.srcArrowAngle},{name:"target",x:ae.arrowEndX,y:ae.arrowEndY,angle:ae.tgtArrowAngle},{name:"mid-source",x:ae.midX,y:ae.midY,angle:ae.midsrcArrowAngle},{name:"mid-target",x:ae.midX,y:ae.midY,angle:ae.midtgtArrowAngle}];for(Se=0;Se<_e.length;Se++){var je=_e[Se],Fe=f.arrowShapes[H.pstyle(je.name+"-arrow-shape").value],ze=H.pstyle("width").pfValue;if(Fe.roughCollide(e,n,Ie,je.angle,{x:je.x,y:je.y},ze,S)&&Fe.collide(e,n,Ie,je.angle,{x:je.x,y:je.y},ze,S))return I(H),!0}_&&y.length>0&&(P(fe),P(ge))}function F(H,te,re){return Ci(H,te,re)}function G(H,te){var re,ae=H._private,le=C;re=te?te+"-":"",H.boundingBox();var se=ae.labelBounds[te||"main"],de=H.pstyle(re+"label").value;if("yes"===H.pstyle("text-events").strValue&&de){var we=F(ae.rscratch,"labelX",te),be=F(ae.rscratch,"labelY",te),fe=F(ae.rscratch,"labelAngle",te),ge=H.pstyle(re+"text-margin-x").pfValue,ee=H.pstyle(re+"text-margin-y").pfValue,Se=se.x1-le-ge,Ie=se.x2+le-ge,_e=se.y1-le-ee,je=se.y2+le-ee;if(fe){var Fe=Math.cos(fe),ze=Math.sin(fe),Je=function(We,ft){return{x:(We-=we)*Fe-(ft-=be)*ze+we,y:We*ze+ft*Fe+be}},Re=Je(Se,_e),Ge=Je(Se,je),st=Je(Ie,_e),pt=Je(Ie,je);if(qr(e,n,[Re.x+ge,Re.y+ee,st.x+ge,st.y+ee,pt.x+ge,pt.y+ee,Ge.x+ge,Ge.y+ee]))return I(H),!0}else if(hs(se,e,n))return I(H),!0}}i&&(g=g.interactive);for(var $=g.length-1;$>=0;$--){var X=g[$];X.isNode()?P(X)||G(X):B(X)||G(X)||G(X,"source")||G(X,"target")}return y},getAllInBox:function(e,n,i,o){for(var c,h=this.getCachedZSortedEles().interactive,f=[],g=Math.min(e,i),y=Math.max(e,i),x=Math.min(n,o),_=Math.max(n,o),S=jr({x1:e=g,y1:n=x,x2:i=y,y2:o=_}),A=0;A<h.length;A++){var C=h[A];if(C.isNode()){var L=C,I=L.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:!1});Ah(S,I)&&!sg(I,S)&&f.push(L)}else{var P=C,B=P._private,F=B.rscratch;if(null!=F.startX&&null!=F.startY&&!hs(S,F.startX,F.startY)||null!=F.endX&&null!=F.endY&&!hs(S,F.endX,F.endY))continue;if("bezier"===F.edgeType||"multibezier"===F.edgeType||"self"===F.edgeType||"compound"===F.edgeType||"segments"===F.edgeType||"haystack"===F.edgeType){for(var G=B.rstyle.bezierPts||B.rstyle.linePts||B.rstyle.haystackPts,$=!0,X=0;X<G.length;X++)if(!hs(S,(c=G[X]).x,c.y)){$=!1;break}$&&f.push(P)}else"haystack"!==F.edgeType&&"straight"!==F.edgeType||f.push(P)}}return f}},fp={calculateArrowAngles:function(e){var n,i,o,l,c,h,f=e._private.rscratch,g="haystack"===f.edgeType,y="bezier"===f.edgeType,x="multibezier"===f.edgeType,_="segments"===f.edgeType,S="compound"===f.edgeType,A="self"===f.edgeType;g?(o=f.haystackPts[0],l=f.haystackPts[1],c=f.haystackPts[2],h=f.haystackPts[3]):(o=f.arrowStartX,l=f.arrowStartY,c=f.arrowEndX,h=f.arrowEndY),L=f.midX,I=f.midY,_?(n=o-f.segpts[0],i=l-f.segpts[1]):x||S||A||y?(n=o-Qn((C=f.allpts)[0],C[2],C[4],.1),i=l-Qn(C[1],C[3],C[5],.1)):(n=o-L,i=l-I),f.srcArrowAngle=kc(n,i);var L=f.midX,I=f.midY;if(g&&(L=(o+c)/2,I=(l+h)/2),n=c-o,i=h-l,_)if((C=f.allpts).length/2%2==0){var P=(B=C.length/2)-2;n=C[B]-C[P],i=C[B+1]-C[P+1]}else{P=(B=C.length/2-1)-2;var B,F=B+2;n=C[B]-C[P],i=C[B+1]-C[P+1]}else if(x||S||A){var G,$,X,H,C=f.allpts;if(f.ctrlpts.length/2%2==0){var te=2+(re=2+(ae=C.length/2-1));G=Qn(C[ae],C[re],C[te],0),$=Qn(C[ae+1],C[re+1],C[te+1],0),X=Qn(C[ae],C[re],C[te],1e-4),H=Qn(C[ae+1],C[re+1],C[te+1],1e-4)}else{var re,ae;te=2+(re=C.length/2-1),G=Qn(C[ae=re-2],C[re],C[te],.4999),$=Qn(C[ae+1],C[re+1],C[te+1],.4999),X=Qn(C[ae],C[re],C[te],.5),H=Qn(C[ae+1],C[re+1],C[te+1],.5)}n=X-G,i=H-$}if(f.midtgtArrowAngle=kc(n,i),f.midDispX=n,f.midDispY=i,n*=-1,i*=-1,_&&((C=f.allpts).length/2%2==0||(n=-(C[F=2+(B=C.length/2-1)]-C[B]),i=-(C[F+1]-C[B+1]))),f.midsrcArrowAngle=kc(n,i),_)n=c-f.segpts[f.segpts.length-2],i=h-f.segpts[f.segpts.length-1];else if(x||S||A||y){var le=(C=f.allpts).length;n=c-Qn(C[le-6],C[le-4],C[le-2],.9),i=h-Qn(C[le-5],C[le-3],C[le-1],.9)}else n=c-L,i=h-I;f.tgtArrowAngle=kc(n,i)}};fp.getArrowWidth=fp.getArrowHeight=function(e,n){var i=this.arrowWidthCache=this.arrowWidthCache||{},o=i[e+", "+n];return o||(o=Math.max(Math.pow(13.37*e,.9),29)*n,i[e+", "+n]=o,o)};var Pr={};function Xv(e){var n=[];if(null!=e){for(var i=0;i<e.length;i+=2)n.push({x:e[i],y:e[i+1]});return n}}Pr.findMidptPtsEtc=function(e,n){var i,G,$,X,o=n.posPts,l=n.intersectionPts,c=n.vectorNormInverse,h=e.pstyle("source-endpoint"),f=e.pstyle("target-endpoint"),g=null!=h.units&&null!=f.units;switch(e.pstyle("edge-distances").value){case"node-position":i=o;break;case"intersection":i=l;break;case"endpoints":if(g){var y=ki(this.manualEndptToPx(e.source()[0],h),2),x=y[0],_=y[1],S=ki(this.manualEndptToPx(e.target()[0],f),2),A=S[0],C=S[1],L={x1:x,y1:_,x2:A,y2:C};$=A-x,c={x:-(G=C-_)/(X=Math.sqrt($*$+G*G)),y:$/X},i=L}else gn("Edge ".concat(e.id()," has edge-distances:endpoints specified without manual endpoints specified via source-endpoint and target-endpoint.  Falling back on edge-distances:intersection (default).")),i=l}return{midptPts:i,vectorNormInverse:c}},Pr.findHaystackPoints=function(e){for(var n=0;n<e.length;n++){var i=e[n],o=i._private,l=o.rscratch;if(!l.haystack){var c=2*Math.random()*Math.PI;l.source={x:Math.cos(c),y:Math.sin(c)},c=2*Math.random()*Math.PI,l.target={x:Math.cos(c),y:Math.sin(c)}}var h=o.source,f=o.target,g=h.position(),y=f.position(),x=h.width(),_=f.width(),S=h.height(),A=f.height(),C=i.pstyle("haystack-radius").value/2;l.haystackPts=l.allpts=[l.source.x*x*C+g.x,l.source.y*S*C+g.y,l.target.x*_*C+y.x,l.target.y*A*C+y.y],l.midX=(l.allpts[0]+l.allpts[2])/2,l.midY=(l.allpts[1]+l.allpts[3])/2,l.edgeType="haystack",l.haystack=!0,this.storeEdgeProjections(i),this.calculateArrowAngles(i),this.recalculateEdgeLabelProjections(i),this.calculateLabelAngles(i)}},Pr.findSegmentsPoints=function(e,n){var i=e._private.rscratch,o=e.pstyle("segment-weights"),l=e.pstyle("segment-distances"),c=Math.min(o.pfValue.length,l.pfValue.length);i.edgeType="segments",i.segpts=[];for(var h=0;h<c;h++){var f=o.pfValue[h],g=l.pfValue[h],y=1-f,x=f,_=this.findMidptPtsEtc(e,n),S=_.midptPts,A=_.vectorNormInverse,C={x:S.x1*y+S.x2*x,y:S.y1*y+S.y2*x};i.segpts.push(C.x+A.x*g,C.y+A.y*g)}},Pr.findLoopPoints=function(e,n,i,o){var l=e._private.rscratch,c=n.dirCounts,h=n.srcPos,f=e.pstyle("control-point-distances"),g=f?f.pfValue[0]:void 0,y=e.pstyle("loop-direction").pfValue,x=e.pstyle("loop-sweep").pfValue,_=e.pstyle("control-point-step-size").pfValue;l.edgeType="self";var S=i,A=_;o&&(S=0,A=g);var C=y-Math.PI/2,L=C-x/2,I=C+x/2,P=y+"_"+x;S=void 0===c[P]?c[P]=0:++c[P],l.ctrlpts=[h.x+1.4*Math.cos(L)*A*(S/3+1),h.y+1.4*Math.sin(L)*A*(S/3+1),h.x+1.4*Math.cos(I)*A*(S/3+1),h.y+1.4*Math.sin(I)*A*(S/3+1)]},Pr.findCompoundLoopPoints=function(e,n,i,o){var l=e._private.rscratch;l.edgeType="compound";var c=n.srcPos,h=n.tgtPos,f=n.srcW,g=n.srcH,y=n.tgtW,x=n.tgtH,_=e.pstyle("control-point-step-size").pfValue,S=e.pstyle("control-point-distances"),C=i,L=_;o&&(C=0,L=S?S.pfValue[0]:void 0);var I={x:c.x-f/2,y:c.y-g/2},P={x:h.x-y/2,y:h.y-x/2},B={x:Math.min(I.x,P.x),y:Math.min(I.y,P.y)},F=Math.max(.5,Math.log(.01*f)),G=Math.max(.5,Math.log(.01*y));l.ctrlpts=[B.x,B.y-(1+Math.pow(50,1.12)/100)*L*(C/3+1)*F,B.x-(1+Math.pow(50,1.12)/100)*L*(C/3+1)*G,B.y]},Pr.findStraightEdgePoints=function(e){e._private.rscratch.edgeType="straight"},Pr.findBezierPoints=function(e,n,i,o,l){var c=e._private.rscratch,h=e.pstyle("control-point-step-size").pfValue,f=e.pstyle("control-point-distances"),g=e.pstyle("control-point-weights"),y=f&&g?Math.min(f.value.length,g.value.length):1,x=f?f.pfValue[0]:void 0,_=g.value[0],S=o;c.edgeType=S?"multibezier":"bezier",c.ctrlpts=[];for(var A=0;A<y;A++){var L,C=(.5-n.eles.length/2+i)*h*(l?-1:1),I=ig(C);S&&(x=f?f.pfValue[A]:h,_=g.value[A]);var P=void 0!==(L=o?x:void 0!==x?I*x:void 0)?L:C,B=1-_,F=_,G=this.findMidptPtsEtc(e,n),$=G.midptPts,X=G.vectorNormInverse,H={x:$.x1*B+$.x2*F,y:$.y1*B+$.y2*F};c.ctrlpts.push(H.x+X.x*P,H.y+X.y*P)}},Pr.findTaxiPoints=function(e,n){var i=e._private.rscratch;i.edgeType="segments";var o=n.posPts,l=n.srcW,c=n.srcH,h=n.tgtW,f=n.tgtH,g="node-position"!==e.pstyle("edge-distances").value,y=e.pstyle("taxi-direction").value,x=y,_=e.pstyle("taxi-turn"),S="%"===_.units,A=_.pfValue,C=A<0,L=e.pstyle("taxi-turn-min-distance").pfValue,P=g?(c+f)/2:0,B=o.x2-o.x1,F=o.y2-o.y1,G=function(Ae,Ze){return Ae>0?Math.max(Ae-Ze,0):Math.min(Ae+Ze,0)},$=G(B,g?(l+h)/2:0),X=G(F,P),H=!1;"auto"===x?y=Math.abs($)>Math.abs(X)?"horizontal":"vertical":"upward"===x||"downward"===x?(y="vertical",H=!0):"leftward"!==x&&"rightward"!==x||(y="horizontal",H=!0);var te,re="vertical"===y,ae=re?X:$,le=re?F:B,se=ig(le),de=!1;H&&(S||C)||!("downward"===x&&le<0||"upward"===x&&le>0||"leftward"===x&&le>0||"rightward"===x&&le<0)||(ae=(se*=-1)*Math.abs(ae),de=!0);var we=function(Ae){return Math.abs(Ae)<L||Math.abs(Ae)>=Math.abs(ae)},be=we(te=S?(A<0?1+A:A)*ae:(A<0?ae:0)+A*se),fe=we(Math.abs(ae)-Math.abs(te));if(!be&&!fe||de)if(re){var vt=o.y1+te+(g?c/2*se:0);i.segpts=[o.x1,vt,o.x2,vt]}else{var pe=o.x1+te+(g?l/2*se:0);i.segpts=[pe,o.y1,pe,o.y2]}else if(re){var ge=Math.abs(le)<=c/2,ee=Math.abs(B)<=h/2;if(ge){var Se=(o.x1+o.x2)/2;i.segpts=[Se,o.y1,Se,o.y2]}else if(ee){var je=(o.y1+o.y2)/2;i.segpts=[o.x1,je,o.x2,je]}else i.segpts=[o.x1,o.y2]}else{var Je=Math.abs(le)<=l/2,Re=Math.abs(F)<=f/2;if(Je){var Ge=(o.y1+o.y2)/2;i.segpts=[o.x1,Ge,o.x2,Ge]}else if(Re){var _t=(o.x1+o.x2)/2;i.segpts=[_t,o.y1,_t,o.y2]}else i.segpts=[o.x2,o.y1]}},Pr.tryToCorrectInvalidPoints=function(e,n){var i=e._private.rscratch;if("bezier"===i.edgeType){var o=n.srcPos,l=n.tgtPos,c=n.srcW,h=n.srcH,f=n.tgtW,g=n.tgtH,y=n.srcShape,x=n.tgtShape,_=!gt(i.startX)||!gt(i.startY),S=!gt(i.arrowStartX)||!gt(i.arrowStartY),A=!gt(i.endX)||!gt(i.endY),C=!gt(i.arrowEndX)||!gt(i.arrowEndY),L=this.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.arrowShapeWidth*3,I=Eo({x:i.ctrlpts[0],y:i.ctrlpts[1]},{x:i.startX,y:i.startY}),P=I<L,B=Eo({x:i.ctrlpts[0],y:i.ctrlpts[1]},{x:i.endX,y:i.endY}),F=B<L,G=!1;if(_||S||P){G=!0;var $={x:i.ctrlpts[0]-o.x,y:i.ctrlpts[1]-o.y},X=Math.sqrt($.x*$.x+$.y*$.y),H={x:$.x/X,y:$.y/X},te=Math.max(c,h),re={x:i.ctrlpts[0]+2*H.x*te,y:i.ctrlpts[1]+2*H.y*te},ae=y.intersectLine(o.x,o.y,c,h,re.x,re.y,0);P?(i.ctrlpts[0]=i.ctrlpts[0]+H.x*(L-I),i.ctrlpts[1]=i.ctrlpts[1]+H.y*(L-I)):(i.ctrlpts[0]=ae[0]+H.x*L,i.ctrlpts[1]=ae[1]+H.y*L)}if(A||C||F){G=!0;var le={x:i.ctrlpts[0]-l.x,y:i.ctrlpts[1]-l.y},se=Math.sqrt(le.x*le.x+le.y*le.y),de={x:le.x/se,y:le.y/se},we=Math.max(c,h),be={x:i.ctrlpts[0]+2*de.x*we,y:i.ctrlpts[1]+2*de.y*we},fe=x.intersectLine(l.x,l.y,f,g,be.x,be.y,0);F?(i.ctrlpts[0]=i.ctrlpts[0]+de.x*(L-B),i.ctrlpts[1]=i.ctrlpts[1]+de.y*(L-B)):(i.ctrlpts[0]=fe[0]+de.x*L,i.ctrlpts[1]=fe[1]+de.y*L)}G&&this.findEndpoints(e)}},Pr.storeAllpts=function(e){var n=e._private.rscratch;if("multibezier"===n.edgeType||"bezier"===n.edgeType||"self"===n.edgeType||"compound"===n.edgeType){n.allpts=[],n.allpts.push(n.startX,n.startY);for(var i=0;i+1<n.ctrlpts.length;i+=2)n.allpts.push(n.ctrlpts[i],n.ctrlpts[i+1]),i+3<n.ctrlpts.length&&n.allpts.push((n.ctrlpts[i]+n.ctrlpts[i+2])/2,(n.ctrlpts[i+1]+n.ctrlpts[i+3])/2);var o;n.allpts.push(n.endX,n.endY),n.ctrlpts.length/2%2==0?(n.midX=n.allpts[o=n.allpts.length/2-1],n.midY=n.allpts[o+1]):(n.midX=Qn(n.allpts[o=n.allpts.length/2-3],n.allpts[o+2],n.allpts[o+4],.5),n.midY=Qn(n.allpts[o+1],n.allpts[o+3],n.allpts[o+5],.5))}else if("straight"===n.edgeType)n.allpts=[n.startX,n.startY,n.endX,n.endY],n.midX=(n.startX+n.endX+n.arrowStartX+n.arrowEndX)/4,n.midY=(n.startY+n.endY+n.arrowStartY+n.arrowEndY)/4;else if("segments"===n.edgeType)if(n.allpts=[],n.allpts.push(n.startX,n.startY),n.allpts.push.apply(n.allpts,n.segpts),n.allpts.push(n.endX,n.endY),n.segpts.length%4==0){var l=n.segpts.length/2,c=l-2;n.midX=(n.segpts[c]+n.segpts[l])/2,n.midY=(n.segpts[c+1]+n.segpts[l+1])/2}else{var h=n.segpts.length/2-1;n.midX=n.segpts[h],n.midY=n.segpts[h+1]}},Pr.checkForInvalidEdgeWarning=function(e){var n=e[0]._private.rscratch;n.nodesOverlap||gt(n.startX)&&gt(n.startY)&&gt(n.endX)&&gt(n.endY)?n.loggedErr=!1:n.loggedErr||(n.loggedErr=!0,gn("Edge `"+e.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))},Pr.findEdgeControlPoints=function(e){var n=this;if(e&&0!==e.length){for(var i=this,o=i.cy.hasCompoundNodes(),l={map:new Fi,get:function(F){var G=this.map.get(F[0]);return null!=G?G.get(F[1]):null},set:function(F,G){var $=this.map.get(F[0]);null==$&&($=new Fi,this.map.set(F[0],$)),$.set(F[1],G)}},c=[],h=[],f=0;f<e.length;f++){var g=e[f],y=g._private,x=g.pstyle("curve-style").value;if(!g.removed()&&g.takesUpSpace())if("haystack"!==x){var _="unbundled-bezier"===x||"segments"===x||"straight"===x||"straight-triangle"===x||"taxi"===x,S="unbundled-bezier"===x||"bezier"===x,C=y.target,L=[y.source.poolIndex(),C.poolIndex()].sort(),I=l.get(L);null==I&&(l.set(L,I={eles:[]}),c.push(L)),I.eles.push(g),_&&(I.hasUnbundled=!0),S&&(I.hasBezier=!0)}else h.push(g)}for(var P=function(F){var $=l.get(c[F]),X=void 0;if(!$.hasUnbundled){var H=$.eles[0].parallelEdges().filter(function(Ae){return Ae.isBundledBezier()});Ph($.eles),H.forEach(function(Ae){return $.eles.push(Ae)}),$.eles.sort(function(Ae,Ze){return Ae.poolIndex()-Ze.poolIndex()})}var te=$.eles[0],re=te.source(),ae=te.target();if(re.poolIndex()>ae.poolIndex()){var le=re;re=ae,ae=le}var se=$.srcPos=re.position(),de=$.tgtPos=ae.position(),we=$.srcW=re.outerWidth(),be=$.srcH=re.outerHeight(),fe=$.tgtW=ae.outerWidth(),ge=$.tgtH=ae.outerHeight(),ee=$.srcShape=i.nodeShapes[n.getNodeShape(re)],Se=$.tgtShape=i.nodeShapes[n.getNodeShape(ae)];$.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var Ie=0;Ie<$.eles.length;Ie++){var _e=$.eles[Ie],je=_e[0]._private.rscratch,Fe=_e.pstyle("curve-style").value,ze="unbundled-bezier"===Fe||"segments"===Fe||"taxi"===Fe,Je=!re.same(_e.source());if(!$.calculatedIntersection&&re!==ae&&($.hasBezier||$.hasUnbundled)){$.calculatedIntersection=!0;var Re=ee.intersectLine(se.x,se.y,we,be,de.x,de.y,0),Ge=$.srcIntn=Re,st=Se.intersectLine(de.x,de.y,fe,ge,se.x,se.y,0),pt=$.tgtIntn=st,_t=$.intersectionPts={x1:Re[0],x2:st[0],y1:Re[1],y2:st[1]},We=$.posPts={x1:se.x,x2:de.x,y1:se.y,y2:de.y},ft=st[1]-Re[1],vt=st[0]-Re[0],ot=Math.sqrt(vt*vt+ft*ft),U=$.vector={x:vt,y:ft},pe=$.vectorNorm={x:U.x/ot,y:U.y/ot},Ce={x:-pe.y,y:pe.x};$.nodesOverlap=!gt(ot)||Se.checkPoint(Re[0],Re[1],0,fe,ge,de.x,de.y)||ee.checkPoint(st[0],st[1],0,we,be,se.x,se.y),$.vectorNormInverse=Ce,X={nodesOverlap:$.nodesOverlap,dirCounts:$.dirCounts,calculatedIntersection:!0,hasBezier:$.hasBezier,hasUnbundled:$.hasUnbundled,eles:$.eles,srcPos:de,tgtPos:se,srcW:fe,srcH:ge,tgtW:we,tgtH:be,srcIntn:pt,tgtIntn:Ge,srcShape:Se,tgtShape:ee,posPts:{x1:We.x2,y1:We.y2,x2:We.x1,y2:We.y1},intersectionPts:{x1:_t.x2,y1:_t.y2,x2:_t.x1,y2:_t.y1},vector:{x:-U.x,y:-U.y},vectorNorm:{x:-pe.x,y:-pe.y},vectorNormInverse:{x:-Ce.x,y:-Ce.y}}}var Oe=Je?X:$;je.nodesOverlap=Oe.nodesOverlap,je.srcIntn=Oe.srcIntn,je.tgtIntn=Oe.tgtIntn,o&&(re.isParent()||re.isChild()||ae.isParent()||ae.isChild())&&(re.parents().anySame(ae)||ae.parents().anySame(re)||re.same(ae)&&re.isParent())?n.findCompoundLoopPoints(_e,Oe,Ie,ze):re===ae?n.findLoopPoints(_e,Oe,Ie,ze):"segments"===Fe?n.findSegmentsPoints(_e,Oe):"taxi"===Fe?n.findTaxiPoints(_e,Oe):"straight"===Fe||!ze&&$.eles.length%2==1&&Ie===Math.floor($.eles.length/2)?n.findStraightEdgePoints(_e):n.findBezierPoints(_e,Oe,Ie,ze,Je),n.findEndpoints(_e),n.tryToCorrectInvalidPoints(_e,Oe),n.checkForInvalidEdgeWarning(_e),n.storeAllpts(_e),n.storeEdgeProjections(_e),n.calculateArrowAngles(_e),n.recalculateEdgeLabelProjections(_e),n.calculateLabelAngles(_e)}},B=0;B<c.length;B++)P(B);this.findHaystackPoints(h)}},Pr.getSegmentPoints=function(e){var n=e[0]._private.rscratch;if("segments"===n.edgeType)return this.recalculateRenderedStyle(e),Xv(n.segpts)},Pr.getControlPoints=function(e){var n=e[0]._private.rscratch,i=n.edgeType;if("bezier"===i||"multibezier"===i||"self"===i||"compound"===i)return this.recalculateRenderedStyle(e),Xv(n.ctrlpts)},Pr.getEdgeMidpoint=function(e){var n=e[0]._private.rscratch;return this.recalculateRenderedStyle(e),{x:n.midX,y:n.midY}};var ux={manualEndptToPx:function(e,n){var i=e.position(),o=e.outerWidth(),l=e.outerHeight();if(2===n.value.length){var c=[n.pfValue[0],n.pfValue[1]];return"%"===n.units[0]&&(c[0]=c[0]*o),"%"===n.units[1]&&(c[1]=c[1]*l),c[0]+=i.x,c[1]+=i.y,c}var h=n.pfValue[0];h=-Math.PI/2+h;var f=2*Math.max(o,l),g=[i.x+Math.cos(h)*f,i.y+Math.sin(h)*f];return this.nodeShapes[this.getNodeShape(e)].intersectLine(i.x,i.y,o,l,g[0],g[1],0)},findEndpoints:function(e){var n,i,o,l,c,h=this,f=e.source()[0],g=e.target()[0],y=f.position(),x=g.position(),_=e.pstyle("target-arrow-shape").value,S=e.pstyle("source-arrow-shape").value,A=e.pstyle("target-distance-from-node").pfValue,C=e.pstyle("source-distance-from-node").pfValue,L=e.pstyle("curve-style").value,I=e._private.rscratch,P=I.edgeType,B="self"===P||"compound"===P,F="bezier"===P||"multibezier"===P||B,G="bezier"!==P,$="straight"===P||"segments"===P,X="segments"===P,H=F||G||$,te=B||"taxi"===L,re=e.pstyle("source-endpoint"),ae=te?"outside-to-node":re.value,le=e.pstyle("target-endpoint"),se=te?"outside-to-node":le.value;if(I.srcManEndpt=re,I.tgtManEndpt=le,F){var de=[I.ctrlpts[0],I.ctrlpts[1]];i=G?[I.ctrlpts[I.ctrlpts.length-2],I.ctrlpts[I.ctrlpts.length-1]]:de,o=de}else if($){var we=X?I.segpts.slice(0,2):[x.x,x.y];i=X?I.segpts.slice(I.segpts.length-2):[y.x,y.y],o=we}if("inside-to-node"===se)n=[x.x,x.y];else if(le.units)n=this.manualEndptToPx(g,le);else if("outside-to-line"===se)n=I.tgtIntn;else if("outside-to-node"===se||"outside-to-node-or-label"===se?l=i:"outside-to-line"!==se&&"outside-to-line-or-label"!==se||(l=[y.x,y.y]),n=h.nodeShapes[this.getNodeShape(g)].intersectLine(x.x,x.y,g.outerWidth(),g.outerHeight(),l[0],l[1],0),"outside-to-node-or-label"===se||"outside-to-line-or-label"===se){var be=g._private.rscratch,ee=be.labelX,Se=be.labelY,Ie=be.labelWidth/2,_e=be.labelHeight/2,je=g.pstyle("text-valign").value;"top"===je?Se-=_e:"bottom"===je&&(Se+=_e);var Fe=g.pstyle("text-halign").value;"left"===Fe?ee-=Ie:"right"===Fe&&(ee+=Ie);var ze=zl(l[0],l[1],[ee-Ie,Se-_e,ee+Ie,Se-_e,ee+Ie,Se+_e,ee-Ie,Se+_e],x.x,x.y);if(ze.length>0){var Je=y,Re=_o(Je,cs(n)),Ge=_o(Je,cs(ze)),st=Re;Ge<Re&&(n=ze,st=Ge),ze.length>2&&_o(Je,{x:ze[2],y:ze[3]})<st&&(n=[ze[2],ze[3]])}}var pt=Dc(n,i,h.arrowShapes[_].spacing(e)+A),_t=Dc(n,i,h.arrowShapes[_].gap(e)+A);if(I.endX=_t[0],I.endY=_t[1],I.arrowEndX=pt[0],I.arrowEndY=pt[1],"inside-to-node"===ae)n=[y.x,y.y];else if(re.units)n=this.manualEndptToPx(f,re);else if("outside-to-line"===ae)n=I.srcIntn;else if("outside-to-node"===ae||"outside-to-node-or-label"===ae?c=o:"outside-to-line"!==ae&&"outside-to-line-or-label"!==ae||(c=[x.x,x.y]),n=h.nodeShapes[this.getNodeShape(f)].intersectLine(y.x,y.y,f.outerWidth(),f.outerHeight(),c[0],c[1],0),"outside-to-node-or-label"===ae||"outside-to-line-or-label"===ae){var We=f._private.rscratch,ot=We.labelX,U=We.labelY,pe=We.labelWidth/2,Ce=We.labelHeight/2,Oe=f.pstyle("text-valign").value;"top"===Oe?U-=Ce:"bottom"===Oe&&(U+=Ce);var Ae=f.pstyle("text-halign").value;"left"===Ae?ot-=pe:"right"===Ae&&(ot+=pe);var Ze=zl(c[0],c[1],[ot-pe,U-Ce,ot+pe,U-Ce,ot+pe,U+Ce,ot-pe,U+Ce],y.x,y.y);if(Ze.length>0){var Ue=x,Ct=_o(Ue,cs(n)),rt=_o(Ue,cs(Ze)),bt=Ct;rt<Ct&&(n=[Ze[0],Ze[1]],bt=rt),Ze.length>2&&_o(Ue,{x:Ze[2],y:Ze[3]})<bt&&(n=[Ze[2],Ze[3]])}}var mt=Dc(n,o,h.arrowShapes[S].spacing(e)+C),wt=Dc(n,o,h.arrowShapes[S].gap(e)+C);I.startX=wt[0],I.startY=wt[1],I.arrowStartX=mt[0],I.arrowStartY=mt[1],H&&(I.badLine=!(gt(I.startX)&&gt(I.startY)&&gt(I.endX)&&gt(I.endY)))},getSourceEndpoint:function(e){var n=e[0]._private.rscratch;return"haystack"===(this.recalculateRenderedStyle(e),n.edgeType)?{x:n.haystackPts[0],y:n.haystackPts[1]}:{x:n.arrowStartX,y:n.arrowStartY}},getTargetEndpoint:function(e){var n=e[0]._private.rscratch;return"haystack"===(this.recalculateRenderedStyle(e),n.edgeType)?{x:n.haystackPts[2],y:n.haystackPts[3]}:{x:n.arrowEndX,y:n.arrowEndY}}},gp={};function cx(e,n,i){for(var o=function(f,g,y,x){return Qn(f,g,y,x)},l=n._private.rstyle.bezierPts,c=0;c<e.bezierProjPcts.length;c++){var h=e.bezierProjPcts[c];l.push({x:o(i[0],i[2],i[4],h),y:o(i[1],i[3],i[5],h)})}}gp.storeEdgeProjections=function(e){var n=e._private,i=n.rscratch,o=i.edgeType;if(n.rstyle.bezierPts=null,n.rstyle.linePts=null,n.rstyle.haystackPts=null,"multibezier"===o||"bezier"===o||"self"===o||"compound"===o){n.rstyle.bezierPts=[];for(var l=0;l+5<i.allpts.length;l+=4)cx(this,e,i.allpts.slice(l,l+6))}else if("segments"===o){var c=n.rstyle.linePts=[];for(l=0;l+1<i.allpts.length;l+=2)c.push({x:i.allpts[l],y:i.allpts[l+1]})}else if("haystack"===o){var h=i.haystackPts;n.rstyle.haystackPts=[{x:h[0],y:h[1]},{x:h[2],y:h[3]}]}n.rstyle.arrowWidth=this.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.arrowShapeWidth},gp.recalculateEdgeProjections=function(e){this.findEdgeControlPoints(e)};var ca={recalculateNodeLabelProjection:function(e){var n=e.pstyle("label").strValue;if(!Ma(n)){var i,o,l=e._private,c=e.width(),h=e.height(),f=e.padding(),g=e.position(),y=e.pstyle("text-halign").strValue,x=e.pstyle("text-valign").strValue,_=l.rscratch,S=l.rstyle;switch(y){case"left":i=g.x-c/2-f;break;case"right":i=g.x+c/2+f;break;default:i=g.x}switch(x){case"top":o=g.y-h/2-f;break;case"bottom":o=g.y+h/2+f;break;default:o=g.y}_.labelX=i,_.labelY=o,S.labelX=i,S.labelY=o,this.calculateLabelAngles(e),this.applyLabelDimensions(e)}}},Yv=function(e,n){var i=Math.atan(n/e);return 0===e&&i<0&&(i*=-1),i},Hv=function(e,n){return Yv(n.x-e.x,n.y-e.y)};ca.recalculateEdgeLabelProjections=function(e){var n,i=e._private,o=i.rscratch,l=this,c={mid:e.pstyle("label").strValue,source:e.pstyle("source-label").strValue,target:e.pstyle("target-label").strValue};if(c.mid||c.source||c.target){var h=function(y,x,_){La(i.rscratch,y,x,_),La(i.rstyle,y,x,_)};h("labelX",null,(n={x:o.midX,y:o.midY}).x),h("labelY",null,n.y);var f=Yv(o.midDispX,o.midDispY);h("labelAutoAngle",null,f);var g=function(y){var x,Se,Ie,_e,je,Fe,ze,Je,Re,_="source"===y;if(c[y]){var S=e.pstyle(y+"-text-offset").pfValue;switch(o.edgeType){case"self":case"compound":case"bezier":case"multibezier":for(var A,C=function Se(){if(Se.cache)return Se.cache;for(var Ie=[],_e=0;_e+5<o.allpts.length;_e+=4)Ie.push({p0:{x:o.allpts[_e],y:o.allpts[_e+1]},p1:{x:o.allpts[_e+2],y:o.allpts[_e+3]},p2:{x:o.allpts[_e+4],y:o.allpts[_e+5]},startDist:0,length:0,segments:[]});var Je=i.rstyle.bezierPts,Re=l.bezierProjPcts.length;function Ge(ft,vt,ot,U,pe){var Ce=Eo(vt,ot),Oe=ft.segments[ft.segments.length-1];ft.segments.push({p0:vt,p1:ot,t0:U,t1:pe,startDist:Oe?Oe.startDist+Oe.length:0,length:Ce}),ft.length+=Ce}for(var st=0;st<Ie.length;st++){var pt=Ie[st],_t=Ie[st-1];_t&&(pt.startDist=_t.startDist+_t.length),Ge(pt,pt.p0,Je[st*Re],0,l.bezierProjPcts[0]);for(var We=0;We<Re-1;We++)Ge(pt,Je[st*Re+We],Je[st*Re+We+1],l.bezierProjPcts[We],l.bezierProjPcts[We+1]);Ge(pt,Je[st*Re+Re-1],pt.p2,l.bezierProjPcts[Re-1],1)}return Se.cache=Ie}(),L=0,I=0,P=0;P<C.length;P++){for(var B=C[_?P:C.length-1-P],F=0;F<B.segments.length;F++){var G=B.segments[_?F:B.segments.length-1-F];if(L=I,(I+=G.length)>=S||P===C.length-1&&F===B.segments.length-1){A={cp:B,segment:G};break}}if(A)break}var X=A.cp,H=A.segment,te=(S-L)/H.length,re=H.t1-H.t0,ae=_?H.t0+re*te:H.t1-re*te;ae=Ol(0,ae,1),n=ds(X.p0,X.p1,X.p2,ae),Se=X.p0,Ie=X.p1,_e=X.p2,Fe=Ol(0,(je=ae)-.001,1),ze=Ol(0,je+.001,1),Je=ds(Se,Ie,_e,Fe),Re=ds(Se,Ie,_e,ze),x=Hv(Je,Re);break;case"straight":case"segments":case"haystack":for(var le,se,de,we,be=0,fe=o.allpts.length,ge=0;ge+3<fe&&(_?(de={x:o.allpts[ge],y:o.allpts[ge+1]},we={x:o.allpts[ge+2],y:o.allpts[ge+3]}):(de={x:o.allpts[fe-2-ge],y:o.allpts[fe-1-ge]},we={x:o.allpts[fe-4-ge],y:o.allpts[fe-3-ge]}),se=be,!((be+=le=Eo(de,we))>=S));ge+=2);var ee=(S-se)/le;ee=Ol(0,ee,1),n=function(Se,Ie,_e,je){var Fe=Ie.x-Se.x,ze=Ie.y-Se.y,Je=Eo(Se,Ie);return _e=_e??0,{x:Se.x+Fe/Je*(je=je??_e*Je),y:Se.y+ze/Je*je}}(de,we,ee),x=Hv(de,we)}h("labelX",y,n.x),h("labelY",y,n.y),h("labelAutoAngle",y,x)}};g("source"),g("target"),this.applyLabelDimensions(e)}},ca.applyLabelDimensions=function(e){this.applyPrefixedLabelDimensions(e),e.isEdge()&&(this.applyPrefixedLabelDimensions(e,"source"),this.applyPrefixedLabelDimensions(e,"target"))},ca.applyPrefixedLabelDimensions=function(e,n){var i=e._private,o=this.getLabelText(e,n),l=this.calculateLabelDimensions(e,o),c=e.pstyle("line-height").pfValue,h=e.pstyle("text-wrap").strValue,f=Ci(i.rscratch,"labelWrapCachedLines",n)||[],g="wrap"!==h?1:Math.max(f.length,1),y=l.height/g,x=y*c,_=l.width,S=l.height+(g-1)*(c-1)*y;La(i.rstyle,"labelWidth",n,_),La(i.rscratch,"labelWidth",n,_),La(i.rstyle,"labelHeight",n,S),La(i.rscratch,"labelHeight",n,S),La(i.rscratch,"labelLineHeight",n,x)},ca.getLabelText=function(e,n){var i=e._private,l=e.pstyle((n?n+"-":"")+"label").strValue,c=e.pstyle("text-transform").value,h=function(se,de){return de?(La(i.rscratch,se,n,de),de):Ci(i.rscratch,se,n)};if(!l)return"";"none"==c||("uppercase"==c?l=l.toUpperCase():"lowercase"==c&&(l=l.toLowerCase()));var f=e.pstyle("text-wrap").value;if("wrap"===f){var g=h("labelKey");if(null!=g&&h("labelWrapKey")===g)return h("labelWrapCachedText");for(var y=l.split("\n"),x=e.pstyle("text-max-width").pfValue,_="anywhere"===e.pstyle("text-overflow-wrap").value,S=[],A=/[\s\u200b]+/,C=_?"":" ",L=0;L<y.length;L++){var I=y[L],P=this.calculateLabelDimensions(e,I).width;if(_){var B=I.split("").join("\u200b");I=B}if(P>x){for(var F=I.split(A),G="",$=0;$<F.length;$++){var X=F[$];this.calculateLabelDimensions(e,0===G.length?X:G+C+X).width<=x?G+=X+C:(G&&S.push(G),G=X+C)}G.match(/^[\s\u200b]+$/)||S.push(G)}else S.push(I)}h("labelWrapCachedLines",S),l=h("labelWrapCachedText",S.join("\n")),h("labelWrapKey",g)}else if("ellipsis"===f){var te=e.pstyle("text-max-width").pfValue,re="",ae=!1;if(this.calculateLabelDimensions(e,l).width<te)return l;for(var le=0;le<l.length&&!(this.calculateLabelDimensions(e,re+l[le]+"\u2026").width>te);le++)re+=l[le],le===l.length-1&&(ae=!0);return ae||(re+="\u2026"),re}return l},ca.getLabelJustification=function(e){var n=e.pstyle("text-justification").strValue,i=e.pstyle("text-halign").strValue;if("auto"!==n)return n;if(!e.isNode())return"center";switch(i){case"left":return"right";case"right":return"left";default:return"center"}},ca.calculateLabelDimensions=function(e,n){var i=wo(n,e._private.labelDimsKey),o=this.labelDimCache||(this.labelDimCache=[]),l=o[i];if(null!=l)return l;var c=e.pstyle("font-style").strValue,h=e.pstyle("font-size").pfValue,f=e.pstyle("font-family").strValue,g=e.pstyle("font-weight").strValue,y=this.labelCalcCanvas,x=this.labelCalcCanvasContext;if(!y){y=this.labelCalcCanvas=document.createElement("canvas"),x=this.labelCalcCanvasContext=y.getContext("2d");var _=y.style;_.position="absolute",_.left="-9999px",_.top="-9999px",_.zIndex="-1",_.visibility="hidden",_.pointerEvents="none"}x.font="".concat(c," ").concat(g," ").concat(h,"px ").concat(f);for(var S=0,A=0,C=n.split("\n"),L=0;L<C.length;L++){var P=x.measureText(C[L]),B=Math.ceil(P.width),F=h;S=Math.max(B,S),A+=F}return o[i]={width:S+=0,height:A+=0}},ca.calculateLabelAngle=function(e,n){var i=e._private.rscratch,o=e.isEdge(),c=e.pstyle((n?n+"-":"")+"text-rotation"),h=c.strValue;return"none"===h?0:o&&"autorotate"===h?i.labelAutoAngle:"autorotate"===h?0:c.pfValue},ca.calculateLabelAngles=function(e){var n=this,i=e.isEdge(),o=e._private.rscratch;o.labelAngle=n.calculateLabelAngle(e),i&&(o.sourceLabelAngle=n.calculateLabelAngle(e,"source"),o.targetLabelAngle=n.calculateLabelAngle(e,"target"))};var Wv={},$v=!1;Wv.getNodeShape=function(e){var n=e.pstyle("shape").value;if("cutrectangle"===n&&(e.width()<28||e.height()<28))return $v||(gn("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),$v=!0),"rectangle";if(e.isParent())return"rectangle"===n||"roundrectangle"===n||"round-rectangle"===n||"cutrectangle"===n||"cut-rectangle"===n||"barrel"===n?n:"rectangle";if("polygon"===n){var i=e.pstyle("shape-polygon-points").value;return this.nodeShapes.makePolygon(i).name}return n};var dx={registerCalculationListeners:function(){var e=this.cy,n=e.collection(),i=this,o=function(c){var h=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(n.merge(c),h)for(var f=0;f<c.length;f++){var x=c[f]._private.rstyle;x.clean=!1,x.cleanConnected=!1}};i.binder(e).on("bounds.* dirty.*",function(c){o(c.target)}).on("style.* background.*",function(c){o(c.target,!1)});var l=function(c){if(c){var h=i.onUpdateEleCalcsFns;n.cleanStyle();for(var f=0;f<n.length;f++){var g=n[f],y=g._private.rstyle;g.isNode()&&!y.cleanConnected&&(o(g.connectedEdges()),y.cleanConnected=!0)}if(h)for(var x=0;x<h.length;x++)(0,h[x])(c,n);i.recalculateRenderedStyle(n),n=e.collection()}};i.flushRenderedStyleQueue=function(){l(!0)},i.beforeRender(l,i.beforeRenderPriorities.eleCalcs)},onUpdateEleCalcs:function(e){(this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[]).push(e)},recalculateRenderedStyle:function(e,n){var i=function(P){return P._private.rstyle.cleanConnected},o=[],l=[];if(!this.destroyed){void 0===n&&(n=!0);for(var c=0;c<e.length;c++){var h=e[c],f=h._private,g=f.rstyle;!h.isEdge()||i(h.source())&&i(h.target())||(g.clean=!1),n&&g.clean||h.removed()||"none"!==h.pstyle("display").value&&("nodes"===f.group?l.push(h):o.push(h),g.clean=!0)}for(var y=0;y<l.length;y++){var x=l[y],_=x._private.rstyle,S=x.position();this.recalculateNodeLabelProjection(x),_.nodeX=S.x,_.nodeY=S.y,_.nodeW=x.pstyle("width").pfValue,_.nodeH=x.pstyle("height").pfValue}this.recalculateEdgeProjections(o);for(var A=0;A<o.length;A++){var C=o[A]._private,L=C.rstyle,I=C.rscratch;L.srcX=I.arrowStartX,L.srcY=I.arrowStartY,L.tgtX=I.arrowEndX,L.tgtY=I.arrowEndY,L.midX=I.midX,L.midY=I.midY,L.labelAngle=I.labelAngle,L.sourceLabelAngle=I.sourceLabelAngle,L.targetLabelAngle=I.targetLabelAngle}}}},hx={updateCachedGrabbedEles:function(){var e=this.cachedZSortedEles;if(e){e.drag=[],e.nondrag=[];for(var n=[],i=0;i<e.length;i++){var o=(l=e[i])._private.rscratch;l.grabbed()&&!l.isParent()?n.push(l):o.inDragLayer?e.drag.push(l):e.nondrag.push(l)}for(i=0;i<n.length;i++){var l=n[i];e.drag.push(l)}}},invalidateCachedZSortedEles:function(){this.cachedZSortedEles=null},getCachedZSortedEles:function(e){if(e||!this.cachedZSortedEles){var n=this.cy.mutableElements().toArray();n.sort(gv),n.interactive=n.filter(function(i){return i.interactive()}),this.cachedZSortedEles=n,this.updateCachedGrabbedEles()}else n=this.cachedZSortedEles;return n}},Kv={};[lx,fp,Pr,ux,gp,ca,Wv,dx,hx].forEach(function(e){It(Kv,e)});var px={getCachedImage:function(e,n,i){var o=this.imageCache=this.imageCache||{},l=o[e];if(l)return l.image.complete||l.image.addEventListener("load",i),l.image;var c=(l=o[e]=o[e]||{}).image=new Image;return c.addEventListener("load",i),c.addEventListener("error",function(){c.error=!0}),"data:"===e.substring(0,5).toLowerCase()||(c.crossOrigin=n="null"===n?null:n),c.src=e,c}},Kl={registerBinding:function(e,n,i,o){var l=Array.prototype.slice.apply(arguments,[1]),c=this.binder(e);return c.on.apply(c,l)},binder:function(e){var i=this,o=i.cy.window(),l=e===o||e===o.document||e===o.document.body||typeof HTMLElement<"u"&&e instanceof HTMLElement;if(null==i.supportsPassiveEvents){var c=!1;try{var h=Object.defineProperty({},"passive",{get:function(){return c=!0,!0}});o.addEventListener("test",null,h)}catch{}i.supportsPassiveEvents=c}var f=function(g,y,x){var _=Array.prototype.slice.call(arguments);return l&&i.supportsPassiveEvents&&(_[2]={capture:null!=x&&x,passive:!1,once:!1}),i.bindings.push({target:e,args:_}),(e.addEventListener||e.on).apply(e,_),this};return{on:f,addEventListener:f,addListener:f,bind:f}},nodeIsDraggable:function(e){return e&&e.isNode()&&!e.locked()&&e.grabbable()},nodeIsGrabbable:function(e){return this.nodeIsDraggable(e)&&e.interactive()},load:function(){var e=this,n=e.cy.window(),i=function(U){return U.selected()},o=function(U,pe,Ce,Oe){null==U&&(U=e.cy);for(var Ae=0;Ae<pe.length;Ae++)U.emit({originalEvent:Ce,type:pe[Ae],position:Oe})},l=function(U){return U.shiftKey||U.metaKey||U.ctrlKey},c=function(U,pe){var Ce=!0;if(e.cy.hasCompoundNodes()&&U&&U.pannable()){for(var Oe=0;pe&&Oe<pe.length;Oe++)if((U=pe[Oe]).isNode()&&U.isParent()&&!U.pannable()){Ce=!1;break}}else Ce=!0;return Ce},h=function(U){U[0]._private.rscratch.inDragLayer=!0},f=function(U){U[0]._private.rscratch.isGrabTarget=!0},g=function(U,pe){var Ce=pe.addToList;Ce.has(U)||!U.grabbable()||U.locked()||(Ce.merge(U),U[0]._private.grabbed=!0)},y=function(U,pe){pe=pe||{};var Ce=U.cy().hasCompoundNodes();pe.inDragLayer&&(U.forEach(h),U.neighborhood().stdFilter(function(Oe){return!Ce||Oe.isEdge()}).forEach(h)),pe.addToList&&U.forEach(function(Oe){g(Oe,pe)}),function(Oe,Ae){if(Oe.cy().hasCompoundNodes()&&(null!=Ae.inDragLayer||null!=Ae.addToList)){var Ze=Oe.descendants();Ae.inDragLayer&&(Ze.forEach(h),Ze.connectedEdges().forEach(h)),Ae.addToList&&g(Ze,Ae)}}(U,pe),S(U,{inDragLayer:pe.inDragLayer}),e.updateCachedGrabbedEles()},x=y,_=function(U){U&&(e.getCachedZSortedEles().forEach(function(pe){pe[0]._private.grabbed=!1,pe[0]._private.rscratch.inDragLayer=!1,function(Ce){Ce[0]._private.rscratch.isGrabTarget=!1}(pe)}),e.updateCachedGrabbedEles())},S=function(U,pe){if((null!=pe.inDragLayer||null!=pe.addToList)&&U.cy().hasCompoundNodes()){var Ce=U.ancestors().orphans();if(!Ce.same(U)){var Oe=Ce.descendants().spawnSelf().merge(Ce).unmerge(U).unmerge(U.descendants()),Ae=Oe.connectedEdges();pe.inDragLayer&&(Ae.forEach(h),Oe.forEach(h)),pe.addToList&&Oe.forEach(function(Ze){g(Ze,pe)})}}},A=function(){null!=document.activeElement&&null!=document.activeElement.blur&&document.activeElement.blur()},C=typeof MutationObserver<"u",L=typeof ResizeObserver<"u";C?(e.removeObserver=new MutationObserver(function(U){for(var pe=0;pe<U.length;pe++){var Ce=U[pe].removedNodes;if(Ce)for(var Oe=0;Oe<Ce.length;Oe++)if(Ce[Oe]===e.container){e.destroy();break}}}),e.container.parentNode&&e.removeObserver.observe(e.container.parentNode,{childList:!0})):e.registerBinding(e.container,"DOMNodeRemoved",function(U){e.destroy()});var I=yc(function(){e.cy.resize()},100);C&&(e.styleObserver=new MutationObserver(I),e.styleObserver.observe(e.container,{attributes:!0})),e.registerBinding(n,"resize",I),L&&(e.resizeObserver=new ResizeObserver(I),e.resizeObserver.observe(e.container));var P=function(){e.invalidateContainerClientCoordsCache()};(function(U,pe){for(;null!=U;)pe(U),U=U.parentNode})(e.container,function(U){e.registerBinding(U,"transitionend",P),e.registerBinding(U,"animationend",P),e.registerBinding(U,"scroll",P)}),e.registerBinding(e.container,"contextmenu",function(U){U.preventDefault()});var B,F,G,$=function(U){for(var pe=e.findContainerClientCoords(),Ce=pe[0],Oe=pe[1],Ae=pe[2],Ze=pe[3],Ue=U.touches?U.touches:[U],Ct=!1,rt=0;rt<Ue.length;rt++){var bt=Ue[rt];if(Ce<=bt.clientX&&bt.clientX<=Ce+Ae&&Oe<=bt.clientY&&bt.clientY<=Oe+Ze){Ct=!0;break}}if(!Ct)return!1;for(var mt=e.container,wt=U.target.parentNode,St=!1;wt;){if(wt===mt){St=!0;break}wt=wt.parentNode}return!!St};e.registerBinding(e.container,"mousedown",function(U){if($(U)){U.preventDefault(),A(),e.hoverData.capture=!0,e.hoverData.which=U.which;var pe=e.cy,Ce=[U.clientX,U.clientY],Oe=e.projectIntoViewport(Ce[0],Ce[1]),Ae=e.selection,Ze=e.findNearestElements(Oe[0],Oe[1],!0,!1),Ue=Ze[0],Ct=e.dragData.possibleDragElements;if(e.hoverData.mdownPos=Oe,e.hoverData.mdownGPos=Ce,3==U.which){e.hoverData.cxtStarted=!0;var rt={originalEvent:U,type:"cxttapstart",position:{x:Oe[0],y:Oe[1]}};Ue?(Ue.activate(),Ue.emit(rt),e.hoverData.down=Ue):pe.emit(rt),e.hoverData.downTime=(new Date).getTime(),e.hoverData.cxtDragged=!1}else if(1==U.which){if(Ue&&Ue.activate(),null!=Ue&&e.nodeIsGrabbable(Ue)){var bt=function(wt){return{originalEvent:U,type:wt,position:{x:Oe[0],y:Oe[1]}}};if(f(Ue),Ue.selected()){Ct=e.dragData.possibleDragElements=pe.collection();var mt=pe.$(function(wt){return wt.isNode()&&wt.selected()&&e.nodeIsGrabbable(wt)});y(mt,{addToList:Ct}),Ue.emit(bt("grabon")),mt.forEach(function(wt){wt.emit(bt("grab"))})}else Ct=e.dragData.possibleDragElements=pe.collection(),x(Ue,{addToList:Ct}),Ue.emit(bt("grabon")).emit(bt("grab"));e.redrawHint("eles",!0),e.redrawHint("drag",!0)}e.hoverData.down=Ue,e.hoverData.downs=Ze,e.hoverData.downTime=(new Date).getTime(),o(Ue,["mousedown","tapstart","vmousedown"],U,{x:Oe[0],y:Oe[1]}),null==Ue?(Ae[4]=1,e.data.bgActivePosistion={x:Oe[0],y:Oe[1]},e.redrawHint("select",!0),e.redraw()):Ue.pannable()&&(Ae[4]=1),e.hoverData.tapholdCancelled=!1,clearTimeout(e.hoverData.tapholdTimeout),e.hoverData.tapholdTimeout=setTimeout(function(){if(!e.hoverData.tapholdCancelled){var wt=e.hoverData.down;wt?wt.emit({originalEvent:U,type:"taphold",position:{x:Oe[0],y:Oe[1]}}):pe.emit({originalEvent:U,type:"taphold",position:{x:Oe[0],y:Oe[1]}})}},e.tapholdDuration)}Ae[0]=Ae[2]=Oe[0],Ae[1]=Ae[3]=Oe[1]}},!1),e.registerBinding(n,"mousemove",function(U){if(e.hoverData.capture||$(U)){var pe=!1,Ce=e.cy,Oe=Ce.zoom(),Ae=[U.clientX,U.clientY],Ze=e.projectIntoViewport(Ae[0],Ae[1]),Ue=e.hoverData.mdownPos,Ct=e.hoverData.mdownGPos,rt=e.selection,bt=null;e.hoverData.draggingEles||e.hoverData.dragging||e.hoverData.selecting||(bt=e.findNearestElement(Ze[0],Ze[1],!0,!1));var mt,wt=e.hoverData.last,St=e.hoverData.down,jt=[Ze[0]-rt[2],Ze[1]-rt[3]],ln=e.dragData.possibleDragElements;if(Ct){var pn=Ae[0]-Ct[0],Ln=Ae[1]-Ct[1];e.hoverData.isOverThresholdDrag=mt=pn*pn+Ln*Ln>=e.desktopTapThreshold2}var Dr=l(U);mt&&(e.hoverData.tapholdCancelled=!0),pe=!0,o(bt,["mousemove","vmousemove","tapdrag"],U,{x:Ze[0],y:Ze[1]});var Zr=function(){e.data.bgActivePosistion=void 0,e.hoverData.selecting||Ce.emit({originalEvent:U,type:"boxstart",position:{x:Ze[0],y:Ze[1]}}),rt[4]=1,e.hoverData.selecting=!0,e.redrawHint("select",!0),e.redraw()};if(3===e.hoverData.which){if(mt){var Rn={originalEvent:U,type:"cxtdrag",position:{x:Ze[0],y:Ze[1]}};St?St.emit(Rn):Ce.emit(Rn),e.hoverData.cxtDragged=!0,e.hoverData.cxtOver&&bt===e.hoverData.cxtOver||(e.hoverData.cxtOver&&e.hoverData.cxtOver.emit({originalEvent:U,type:"cxtdragout",position:{x:Ze[0],y:Ze[1]}}),e.hoverData.cxtOver=bt,bt&&bt.emit({originalEvent:U,type:"cxtdragover",position:{x:Ze[0],y:Ze[1]}}))}}else if(e.hoverData.dragging){if(pe=!0,Ce.panningEnabled()&&Ce.userPanningEnabled()){var Sn;if(e.hoverData.justStartedPan){var Xr=e.hoverData.mdownPos;Sn={x:(Ze[0]-Xr[0])*Oe,y:(Ze[1]-Xr[1])*Oe},e.hoverData.justStartedPan=!1}else Sn={x:jt[0]*Oe,y:jt[1]*Oe};Ce.panBy(Sn),Ce.emit("dragpan"),e.hoverData.dragged=!0}Ze=e.projectIntoViewport(U.clientX,U.clientY)}else if(1!=rt[4]||null!=St&&!St.pannable()){if(St&&St.pannable()&&St.active()&&St.unactivate(),St&&St.grabbed()||bt==wt||(wt&&o(wt,["mouseout","tapdragout"],U,{x:Ze[0],y:Ze[1]}),bt&&o(bt,["mouseover","tapdragover"],U,{x:Ze[0],y:Ze[1]}),e.hoverData.last=bt),St)if(mt){if(Ce.boxSelectionEnabled()&&Dr)St&&St.grabbed()&&(_(ln),St.emit("freeon"),ln.emit("free"),e.dragData.didDrag&&(St.emit("dragfreeon"),ln.emit("dragfree"))),Zr();else if(St&&St.grabbed()&&e.nodeIsDraggable(St)){var Yr=!e.dragData.didDrag;Yr&&e.redrawHint("eles",!0),e.dragData.didDrag=!0,e.hoverData.draggingEles||y(ln,{inDragLayer:!0});var Jn={x:0,y:0};if(gt(jt[0])&&gt(jt[1])&&(Jn.x+=jt[0],Jn.y+=jt[1],Yr)){var Mr=e.hoverData.dragDelta;Mr&&gt(Mr[0])&&gt(Mr[1])&&(Jn.x+=Mr[0],Jn.y+=Mr[1])}e.hoverData.draggingEles=!0,ln.silentShift(Jn).emit("position drag"),e.redrawHint("drag",!0),e.redraw()}}else 0===(Yn=e.hoverData.dragDelta=e.hoverData.dragDelta||[]).length?(Yn.push(jt[0]),Yn.push(jt[1])):(Yn[0]+=jt[0],Yn[1]+=jt[1]);pe=!0}else mt&&(e.hoverData.dragging||!Ce.boxSelectionEnabled()||!Dr&&Ce.panningEnabled()&&Ce.userPanningEnabled()?!e.hoverData.selecting&&Ce.panningEnabled()&&Ce.userPanningEnabled()&&c(St,e.hoverData.downs)&&(e.hoverData.dragging=!0,e.hoverData.justStartedPan=!0,rt[4]=0,e.data.bgActivePosistion=cs(Ue),e.redrawHint("select",!0),e.redraw()):Zr(),St&&St.pannable()&&St.active()&&St.unactivate());return rt[2]=Ze[0],rt[3]=Ze[1],pe?(U.stopPropagation&&U.stopPropagation(),U.preventDefault&&U.preventDefault(),!1):void 0}var Yn},!1),e.registerBinding(n,"mouseup",function(U){if(e.hoverData.capture){e.hoverData.capture=!1;var pe=e.cy,Ce=e.projectIntoViewport(U.clientX,U.clientY),Oe=e.selection,Ae=e.findNearestElement(Ce[0],Ce[1],!0,!1),Ze=e.dragData.possibleDragElements,Ue=e.hoverData.down,Ct=l(U);if(e.data.bgActivePosistion&&(e.redrawHint("select",!0),e.redraw()),e.hoverData.tapholdCancelled=!0,e.data.bgActivePosistion=void 0,Ue&&Ue.unactivate(),3===e.hoverData.which){var rt={originalEvent:U,type:"cxttapend",position:{x:Ce[0],y:Ce[1]}};if(Ue?Ue.emit(rt):pe.emit(rt),!e.hoverData.cxtDragged){var bt={originalEvent:U,type:"cxttap",position:{x:Ce[0],y:Ce[1]}};Ue?Ue.emit(bt):pe.emit(bt)}e.hoverData.cxtDragged=!1,e.hoverData.which=null}else if(1===e.hoverData.which){if(o(Ae,["mouseup","tapend","vmouseup"],U,{x:Ce[0],y:Ce[1]}),e.dragData.didDrag||e.hoverData.dragged||e.hoverData.selecting||e.hoverData.isOverThresholdDrag||(o(Ue,["click","tap","vclick"],U,{x:Ce[0],y:Ce[1]}),F=!1,U.timeStamp-G<=pe.multiClickDebounceTime()?(B&&clearTimeout(B),F=!0,G=null,o(Ue,["dblclick","dbltap","vdblclick"],U,{x:Ce[0],y:Ce[1]})):(B=setTimeout(function(){F||o(Ue,["oneclick","onetap","voneclick"],U,{x:Ce[0],y:Ce[1]})},pe.multiClickDebounceTime()),G=U.timeStamp)),null!=Ue||e.dragData.didDrag||e.hoverData.selecting||e.hoverData.dragged||l(U)||(pe.$(i).unselect(["tapunselect"]),Ze.length>0&&e.redrawHint("eles",!0),e.dragData.possibleDragElements=Ze=pe.collection()),Ae!=Ue||e.dragData.didDrag||e.hoverData.selecting||null!=Ae&&Ae._private.selectable&&(e.hoverData.dragging||("additive"===pe.selectionType()||Ct?Ae.selected()?Ae.unselect(["tapunselect"]):Ae.select(["tapselect"]):Ct||(pe.$(i).unmerge(Ae).unselect(["tapunselect"]),Ae.select(["tapselect"]))),e.redrawHint("eles",!0)),e.hoverData.selecting){var mt=pe.collection(e.getAllInBox(Oe[0],Oe[1],Oe[2],Oe[3]));e.redrawHint("select",!0),mt.length>0&&e.redrawHint("eles",!0),pe.emit({type:"boxend",originalEvent:U,position:{x:Ce[0],y:Ce[1]}}),"additive"===pe.selectionType()||Ct||pe.$(i).unmerge(mt).unselect(),mt.emit("box").stdFilter(function(jt){return jt.selectable()&&!jt.selected()}).select().emit("boxselect"),e.redraw()}if(e.hoverData.dragging&&(e.hoverData.dragging=!1,e.redrawHint("select",!0),e.redrawHint("eles",!0),e.redraw()),!Oe[4]){e.redrawHint("drag",!0),e.redrawHint("eles",!0);var St=Ue&&Ue.grabbed();_(Ze),St&&(Ue.emit("freeon"),Ze.emit("free"),e.dragData.didDrag&&(Ue.emit("dragfreeon"),Ze.emit("dragfree")))}}Oe[4]=0,e.hoverData.down=null,e.hoverData.cxtStarted=!1,e.hoverData.draggingEles=!1,e.hoverData.selecting=!1,e.hoverData.isOverThresholdDrag=!1,e.dragData.didDrag=!1,e.hoverData.dragged=!1,e.hoverData.dragDelta=[],e.hoverData.mdownPos=null,e.hoverData.mdownGPos=null}},!1);var X,H,te,re,ae,le,se,de,we,be,fe,ge,ee,Se=function(U){if(!e.scrollingPage){var pe=e.cy,Ce=pe.zoom(),Oe=pe.pan(),Ae=e.projectIntoViewport(U.clientX,U.clientY),Ze=[Ae[0]*Ce+Oe.x,Ae[1]*Ce+Oe.y];if(e.hoverData.draggingEles||e.hoverData.dragging||e.hoverData.cxtStarted||0!==e.selection[4])U.preventDefault();else if(pe.panningEnabled()&&pe.userPanningEnabled()&&pe.zoomingEnabled()&&pe.userZoomingEnabled()){var Ue;U.preventDefault(),e.data.wheelZooming=!0,clearTimeout(e.data.wheelTimeout),e.data.wheelTimeout=setTimeout(function(){e.data.wheelZooming=!1,e.redrawHint("eles",!0),e.redraw()},150),Ue=null!=U.deltaY?U.deltaY/-250:null!=U.wheelDeltaY?U.wheelDeltaY/1e3:U.wheelDelta/1e3,Ue*=e.wheelSensitivity,1===U.deltaMode&&(Ue*=33);var Ct=pe.zoom()*Math.pow(10,Ue);"gesturechange"===U.type&&(Ct=e.gestureStartZoom*U.scale),pe.zoom({level:Ct,renderedPosition:{x:Ze[0],y:Ze[1]}}),pe.emit("gesturechange"===U.type?"pinchzoom":"scrollzoom")}}};e.registerBinding(e.container,"wheel",Se,!0),e.registerBinding(n,"scroll",function(U){e.scrollingPage=!0,clearTimeout(e.scrollingPageTimeout),e.scrollingPageTimeout=setTimeout(function(){e.scrollingPage=!1},250)},!0),e.registerBinding(e.container,"gesturestart",function(U){e.gestureStartZoom=e.cy.zoom(),e.hasTouchStarted||U.preventDefault()},!0),e.registerBinding(e.container,"gesturechange",function(U){e.hasTouchStarted||Se(U)},!0),e.registerBinding(e.container,"mouseout",function(U){var pe=e.projectIntoViewport(U.clientX,U.clientY);e.cy.emit({originalEvent:U,type:"mouseout",position:{x:pe[0],y:pe[1]}})},!1),e.registerBinding(e.container,"mouseover",function(U){var pe=e.projectIntoViewport(U.clientX,U.clientY);e.cy.emit({originalEvent:U,type:"mouseover",position:{x:pe[0],y:pe[1]}})},!1);var Ie,_e,je,Fe,ze,Je,Re,Ge=function(U,pe,Ce,Oe){return Math.sqrt((Ce-U)*(Ce-U)+(Oe-pe)*(Oe-pe))},st=function(U,pe,Ce,Oe){return(Ce-U)*(Ce-U)+(Oe-pe)*(Oe-pe)};if(e.registerBinding(e.container,"touchstart",Ie=function(U){if(e.hasTouchStarted=!0,$(U)){A(),e.touchData.capture=!0,e.data.bgActivePosistion=void 0;var pe=e.cy,Ce=e.touchData.now,Oe=e.touchData.earlier;if(U.touches[0]){var Ae=e.projectIntoViewport(U.touches[0].clientX,U.touches[0].clientY);Ce[0]=Ae[0],Ce[1]=Ae[1]}if(U.touches[1]&&(Ae=e.projectIntoViewport(U.touches[1].clientX,U.touches[1].clientY),Ce[2]=Ae[0],Ce[3]=Ae[1]),U.touches[2]&&(Ae=e.projectIntoViewport(U.touches[2].clientX,U.touches[2].clientY),Ce[4]=Ae[0],Ce[5]=Ae[1]),U.touches[1]){e.touchData.singleTouchMoved=!0,_(e.dragData.touchDragEles);var Ze=e.findContainerClientCoords();fe=Ze[2],ge=Ze[3],H=U.touches[0].clientY-(be=Ze[1]),te=U.touches[1].clientX-(we=Ze[0]),re=U.touches[1].clientY-be,ee=0<=(X=U.touches[0].clientX-we)&&X<=fe&&0<=te&&te<=fe&&0<=H&&H<=ge&&0<=re&&re<=ge;var Ue=pe.pan(),Ct=pe.zoom();if(ae=Ge(X,H,te,re),le=st(X,H,te,re),de=[((se=[(X+te)/2,(H+re)/2])[0]-Ue.x)/Ct,(se[1]-Ue.y)/Ct],le<4e4&&!U.touches[2]){var rt=e.findNearestElement(Ce[0],Ce[1],!0,!0),bt=e.findNearestElement(Ce[2],Ce[3],!0,!0);return rt&&rt.isNode()?(rt.activate().emit({originalEvent:U,type:"cxttapstart",position:{x:Ce[0],y:Ce[1]}}),e.touchData.start=rt):bt&&bt.isNode()?(bt.activate().emit({originalEvent:U,type:"cxttapstart",position:{x:Ce[0],y:Ce[1]}}),e.touchData.start=bt):pe.emit({originalEvent:U,type:"cxttapstart",position:{x:Ce[0],y:Ce[1]}}),e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxt=!0,e.touchData.cxtDragged=!1,e.data.bgActivePosistion=void 0,void e.redraw()}}if(U.touches[2])pe.boxSelectionEnabled()&&U.preventDefault();else if(!U.touches[1]&&U.touches[0]){var mt=e.findNearestElements(Ce[0],Ce[1],!0,!0),wt=mt[0];if(null!=wt&&(wt.activate(),e.touchData.start=wt,e.touchData.starts=mt,e.nodeIsGrabbable(wt))){var St=e.dragData.touchDragEles=pe.collection(),jt=null;e.redrawHint("eles",!0),e.redrawHint("drag",!0),wt.selected()?(jt=pe.$(function(fn){return fn.selected()&&e.nodeIsGrabbable(fn)}),y(jt,{addToList:St})):x(wt,{addToList:St}),f(wt);var ln=function(fn){return{originalEvent:U,type:fn,position:{x:Ce[0],y:Ce[1]}}};wt.emit(ln("grabon")),jt?jt.forEach(function(fn){fn.emit(ln("grab"))}):wt.emit(ln("grab"))}o(wt,["touchstart","tapstart","vmousedown"],U,{x:Ce[0],y:Ce[1]}),null==wt&&(e.data.bgActivePosistion={x:Ae[0],y:Ae[1]},e.redrawHint("select",!0),e.redraw()),e.touchData.singleTouchMoved=!1,e.touchData.singleTouchStartTime=+new Date,clearTimeout(e.touchData.tapholdTimeout),e.touchData.tapholdTimeout=setTimeout(function(){!1!==e.touchData.singleTouchMoved||e.pinching||e.touchData.selecting||o(e.touchData.start,["taphold"],U,{x:Ce[0],y:Ce[1]})},e.tapholdDuration)}if(U.touches.length>=1){for(var pn=e.touchData.startPosition=[null,null,null,null,null,null],Ut=0;Ut<Ce.length;Ut++)pn[Ut]=Oe[Ut]=Ce[Ut];var Ln=U.touches[0];e.touchData.startGPosition=[Ln.clientX,Ln.clientY]}}},!1),e.registerBinding(window,"touchmove",_e=function(U){var pe=e.touchData.capture;if(pe||$(U)){var Ce=e.selection,Oe=e.cy,Ae=e.touchData.now,Ze=e.touchData.earlier,Ue=Oe.zoom();if(U.touches[0]){var Ct=e.projectIntoViewport(U.touches[0].clientX,U.touches[0].clientY);Ae[0]=Ct[0],Ae[1]=Ct[1]}U.touches[1]&&(Ct=e.projectIntoViewport(U.touches[1].clientX,U.touches[1].clientY),Ae[2]=Ct[0],Ae[3]=Ct[1]),U.touches[2]&&(Ct=e.projectIntoViewport(U.touches[2].clientX,U.touches[2].clientY),Ae[4]=Ct[0],Ae[5]=Ct[1]);var rt,bt=e.touchData.startGPosition;if(pe&&U.touches[0]&&bt){for(var mt=[],wt=0;wt<Ae.length;wt++)mt[wt]=Ae[wt]-Ze[wt];var St=U.touches[0].clientX-bt[0],ln=U.touches[0].clientY-bt[1];rt=St*St+ln*ln>=e.touchTapThreshold2}if(pe&&e.touchData.cxt){U.preventDefault();var pn=U.touches[0].clientX-we,Ut=U.touches[0].clientY-be,Ln=U.touches[1].clientX-we,fn=U.touches[1].clientY-be,Dr=st(pn,Ut,Ln,fn);if(Dr/le>=2.25||Dr>=22500){e.touchData.cxt=!1,e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);var Zr={originalEvent:U,type:"cxttapend",position:{x:Ae[0],y:Ae[1]}};e.touchData.start?(e.touchData.start.unactivate().emit(Zr),e.touchData.start=null):Oe.emit(Zr)}}if(pe&&e.touchData.cxt){Zr={originalEvent:U,type:"cxtdrag",position:{x:Ae[0],y:Ae[1]}},e.data.bgActivePosistion=void 0,e.redrawHint("select",!0),e.touchData.start?e.touchData.start.emit(Zr):Oe.emit(Zr),e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxtDragged=!0;var Rn=e.findNearestElement(Ae[0],Ae[1],!0,!0);e.touchData.cxtOver&&Rn===e.touchData.cxtOver||(e.touchData.cxtOver&&e.touchData.cxtOver.emit({originalEvent:U,type:"cxtdragout",position:{x:Ae[0],y:Ae[1]}}),e.touchData.cxtOver=Rn,Rn&&Rn.emit({originalEvent:U,type:"cxtdragover",position:{x:Ae[0],y:Ae[1]}}))}else if(pe&&U.touches[2]&&Oe.boxSelectionEnabled())U.preventDefault(),e.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,e.touchData.selecting||Oe.emit({originalEvent:U,type:"boxstart",position:{x:Ae[0],y:Ae[1]}}),e.touchData.selecting=!0,e.touchData.didSelect=!0,Ce[4]=1,Ce&&0!==Ce.length&&void 0!==Ce[0]?(Ce[2]=(Ae[0]+Ae[2]+Ae[4])/3,Ce[3]=(Ae[1]+Ae[3]+Ae[5])/3):(Ce[0]=(Ae[0]+Ae[2]+Ae[4])/3,Ce[1]=(Ae[1]+Ae[3]+Ae[5])/3,Ce[2]=(Ae[0]+Ae[2]+Ae[4])/3+1,Ce[3]=(Ae[1]+Ae[3]+Ae[5])/3+1),e.redrawHint("select",!0),e.redraw();else if(pe&&U.touches[1]&&!e.touchData.didSelect&&Oe.zoomingEnabled()&&Oe.panningEnabled()&&Oe.userZoomingEnabled()&&Oe.userPanningEnabled()){if(U.preventDefault(),e.data.bgActivePosistion=void 0,e.redrawHint("select",!0),Br=e.dragData.touchDragEles){e.redrawHint("drag",!0);for(var Sn=0;Sn<Br.length;Sn++){var Xr=Br[Sn]._private;Xr.grabbed=!1,Xr.rscratch.inDragLayer=!1}}var Yr=e.touchData.start,Jn=Ge(pn=U.touches[0].clientX-we,Ut=U.touches[0].clientY-be,Ln=U.touches[1].clientX-we,fn=U.touches[1].clientY-be),Mr=Jn/ae;if(ee){var Yn=(pn-X+(Ln-te))/2,da=(Ut-H+(fn-re))/2,Ar=Oe.zoom(),Hr=Ar*Mr,Qr=Oe.pan(),Ya=de[0]*Ar+Qr.x,Ao=de[1]*Ar+Qr.y,Ls={x:-Hr/Ar*(Ya-Qr.x-Yn)+Ya,y:-Hr/Ar*(Ao-Qr.y-da)+Ao};if(Yr&&Yr.active()){var Br=e.dragData.touchDragEles;_(Br),e.redrawHint("drag",!0),e.redrawHint("eles",!0),Yr.unactivate().emit("freeon"),Br.emit("free"),e.dragData.didDrag&&(Yr.emit("dragfreeon"),Br.emit("dragfree"))}Oe.viewport({zoom:Hr,pan:Ls,cancelOnFailedZoom:!0}),Oe.emit("pinchzoom"),ae=Jn,X=pn,H=Ut,te=Ln,re=fn,e.pinching=!0}U.touches[0]&&(Ct=e.projectIntoViewport(U.touches[0].clientX,U.touches[0].clientY),Ae[0]=Ct[0],Ae[1]=Ct[1]),U.touches[1]&&(Ct=e.projectIntoViewport(U.touches[1].clientX,U.touches[1].clientY),Ae[2]=Ct[0],Ae[3]=Ct[1]),U.touches[2]&&(Ct=e.projectIntoViewport(U.touches[2].clientX,U.touches[2].clientY),Ae[4]=Ct[0],Ae[5]=Ct[1])}else if(U.touches[0]&&!e.touchData.didSelect){var fr=e.touchData.start,Jr=e.touchData.last;if(e.hoverData.draggingEles||e.swipePanning||(Rn=e.findNearestElement(Ae[0],Ae[1],!0,!0)),pe&&null!=fr&&U.preventDefault(),pe&&null!=fr&&e.nodeIsDraggable(fr))if(rt){Br=e.dragData.touchDragEles;var ei=!e.dragData.didDrag;ei&&y(Br,{inDragLayer:!0}),e.dragData.didDrag=!0;var Ir={x:0,y:0};gt(mt[0])&&gt(mt[1])&&(Ir.x+=mt[0],Ir.y+=mt[1],ei&&(e.redrawHint("eles",!0),($t=e.touchData.dragDelta)&&gt($t[0])&&gt($t[1])&&(Ir.x+=$t[0],Ir.y+=$t[1]))),e.hoverData.draggingEles=!0,Br.silentShift(Ir).emit("position drag"),e.redrawHint("drag",!0),e.touchData.startPosition[0]==Ze[0]&&e.touchData.startPosition[1]==Ze[1]&&e.redrawHint("eles",!0),e.redraw()}else{var $t;0===($t=e.touchData.dragDelta=e.touchData.dragDelta||[]).length?($t.push(mt[0]),$t.push(mt[1])):($t[0]+=mt[0],$t[1]+=mt[1])}if(o(fr||Rn,["touchmove","tapdrag","vmousemove"],U,{x:Ae[0],y:Ae[1]}),fr&&fr.grabbed()||Rn==Jr||(Jr&&Jr.emit({originalEvent:U,type:"tapdragout",position:{x:Ae[0],y:Ae[1]}}),Rn&&Rn.emit({originalEvent:U,type:"tapdragover",position:{x:Ae[0],y:Ae[1]}})),e.touchData.last=Rn,pe)for(Sn=0;Sn<Ae.length;Sn++)Ae[Sn]&&e.touchData.startPosition[Sn]&&rt&&(e.touchData.singleTouchMoved=!0);pe&&(null==fr||fr.pannable())&&Oe.panningEnabled()&&Oe.userPanningEnabled()&&(c(fr,e.touchData.starts)&&(U.preventDefault(),e.data.bgActivePosistion||(e.data.bgActivePosistion=cs(e.touchData.startPosition)),e.swipePanning?(Oe.panBy({x:mt[0]*Ue,y:mt[1]*Ue}),Oe.emit("dragpan")):rt&&(e.swipePanning=!0,Oe.panBy({x:St*Ue,y:ln*Ue}),Oe.emit("dragpan"),fr&&(fr.unactivate(),e.redrawHint("select",!0),e.touchData.start=null))),Ct=e.projectIntoViewport(U.touches[0].clientX,U.touches[0].clientY),Ae[0]=Ct[0],Ae[1]=Ct[1])}for(wt=0;wt<Ae.length;wt++)Ze[wt]=Ae[wt];pe&&U.touches.length>0&&!e.hoverData.draggingEles&&!e.swipePanning&&null!=e.data.bgActivePosistion&&(e.data.bgActivePosistion=void 0,e.redrawHint("select",!0),e.redraw())}},!1),e.registerBinding(n,"touchcancel",je=function(U){var pe=e.touchData.start;e.touchData.capture=!1,pe&&pe.unactivate()}),e.registerBinding(n,"touchend",Fe=function(U){var pe=e.touchData.start;if(e.touchData.capture){0===U.touches.length&&(e.touchData.capture=!1),U.preventDefault();var Ce=e.selection;e.swipePanning=!1,e.hoverData.draggingEles=!1;var Oe,Ae=e.cy,Ze=Ae.zoom(),Ue=e.touchData.now,Ct=e.touchData.earlier;if(U.touches[0]){var rt=e.projectIntoViewport(U.touches[0].clientX,U.touches[0].clientY);Ue[0]=rt[0],Ue[1]=rt[1]}if(U.touches[1]&&(rt=e.projectIntoViewport(U.touches[1].clientX,U.touches[1].clientY),Ue[2]=rt[0],Ue[3]=rt[1]),U.touches[2]&&(rt=e.projectIntoViewport(U.touches[2].clientX,U.touches[2].clientY),Ue[4]=rt[0],Ue[5]=rt[1]),pe&&pe.unactivate(),e.touchData.cxt){if(Oe={originalEvent:U,type:"cxttapend",position:{x:Ue[0],y:Ue[1]}},pe?pe.emit(Oe):Ae.emit(Oe),!e.touchData.cxtDragged){var bt={originalEvent:U,type:"cxttap",position:{x:Ue[0],y:Ue[1]}};pe?pe.emit(bt):Ae.emit(bt)}return e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxt=!1,e.touchData.start=null,void e.redraw()}if(!U.touches[2]&&Ae.boxSelectionEnabled()&&e.touchData.selecting){e.touchData.selecting=!1;var mt=Ae.collection(e.getAllInBox(Ce[0],Ce[1],Ce[2],Ce[3]));Ce[0]=void 0,Ce[1]=void 0,Ce[2]=void 0,Ce[3]=void 0,Ce[4]=0,e.redrawHint("select",!0),Ae.emit({type:"boxend",originalEvent:U,position:{x:Ue[0],y:Ue[1]}}),mt.emit("box").stdFilter(function(Dr){return Dr.selectable()&&!Dr.selected()}).select().emit("boxselect"),mt.nonempty()&&e.redrawHint("eles",!0),e.redraw()}if(pe?.unactivate(),U.touches[2])e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);else if(!U.touches[1]&&!U.touches[0]&&!U.touches[0]){e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);var wt=e.dragData.touchDragEles;if(null!=pe){var St=pe._private.grabbed;_(wt),e.redrawHint("drag",!0),e.redrawHint("eles",!0),St&&(pe.emit("freeon"),wt.emit("free"),e.dragData.didDrag&&(pe.emit("dragfreeon"),wt.emit("dragfree"))),o(pe,["touchend","tapend","vmouseup","tapdragout"],U,{x:Ue[0],y:Ue[1]}),pe.unactivate(),e.touchData.start=null}else{var jt=e.findNearestElement(Ue[0],Ue[1],!0,!0);o(jt,["touchend","tapend","vmouseup","tapdragout"],U,{x:Ue[0],y:Ue[1]})}var ln=e.touchData.startPosition[0]-Ue[0],Ut=e.touchData.startPosition[1]-Ue[1],Ln=(ln*ln+Ut*Ut)*Ze*Ze;e.touchData.singleTouchMoved||(pe||Ae.$(":selected").unselect(["tapunselect"]),o(pe,["tap","vclick"],U,{x:Ue[0],y:Ue[1]}),ze=!1,U.timeStamp-Re<=Ae.multiClickDebounceTime()?(Je&&clearTimeout(Je),ze=!0,Re=null,o(pe,["dbltap","vdblclick"],U,{x:Ue[0],y:Ue[1]})):(Je=setTimeout(function(){ze||o(pe,["onetap","voneclick"],U,{x:Ue[0],y:Ue[1]})},Ae.multiClickDebounceTime()),Re=U.timeStamp)),null!=pe&&!e.dragData.didDrag&&pe._private.selectable&&Ln<e.touchTapThreshold2&&!e.pinching&&("single"===Ae.selectionType()?(Ae.$(i).unmerge(pe).unselect(["tapunselect"]),pe.select(["tapselect"])):pe.selected()?pe.unselect(["tapunselect"]):pe.select(["tapselect"]),e.redrawHint("eles",!0)),e.touchData.singleTouchMoved=!0}for(var fn=0;fn<Ue.length;fn++)Ct[fn]=Ue[fn];e.dragData.didDrag=!1,0===U.touches.length&&(e.touchData.dragDelta=[],e.touchData.startPosition=[null,null,null,null,null,null],e.touchData.startGPosition=null,e.touchData.didSelect=!1),U.touches.length<2&&(1===U.touches.length&&(e.touchData.startGPosition=[U.touches[0].clientX,U.touches[0].clientY]),e.pinching=!1,e.redrawHint("eles",!0),e.redraw())}},!1),typeof TouchEvent>"u"){var pt=[],_t=function(U){return{clientX:U.clientX,clientY:U.clientY,force:1,identifier:U.pointerId,pageX:U.pageX,pageY:U.pageY,radiusX:U.width/2,radiusY:U.height/2,screenX:U.screenX,screenY:U.screenY,target:U.target}},ft=function(U){for(var pe=0;pe<pt.length;pe++)if(pt[pe].event.pointerId===U.pointerId)return void pt.splice(pe,1)},vt=function(U){U.touches=pt.map(function(pe){return pe.touch})},ot=function(U){return"mouse"===U.pointerType||4===U.pointerType};e.registerBinding(e.container,"pointerdown",function(U){ot(U)||(U.preventDefault(),function(U){var pe;pt.push({event:pe=U,touch:_t(pe)})}(U),vt(U),Ie(U))}),e.registerBinding(e.container,"pointerup",function(U){ot(U)||(ft(U),vt(U),Fe(U))}),e.registerBinding(e.container,"pointercancel",function(U){ot(U)||(ft(U),vt(U),je())}),e.registerBinding(e.container,"pointermove",function(U){var pe,Ce;ot(U)||(U.preventDefault(),pe=U,(Ce=pt.filter(function(Oe){return Oe.event.pointerId===pe.pointerId})[0]).event=pe,Ce.touch=_t(pe),vt(U),_e(U))})}}},qa={generatePolygon:function(e,n){return this.nodeShapes[e]={renderer:this,name:e,points:n,draw:function(i,o,l,c,h){this.renderer.nodeShapeImpl("polygon",i,o,l,c,h,this.points)},intersectLine:function(i,o,l,c,h,f,g){return zl(h,f,this.points,i,o,l/2,c/2,g)},checkPoint:function(i,o,l,c,h,f,g){return la(i,o,this.points,f,g,c,h,[0,-1],l)}}},generateEllipse:function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(e,n,i,o,l){this.renderer.nodeShapeImpl(this.name,e,n,i,o,l)},intersectLine:function(e,n,i,o,l,c,h){return function(f,g,y,x,_,S){var A=y-f,C=x-g;A/=_,C/=S;var L=Math.sqrt(A*A+C*C),I=L-1;if(I<0)return[];var P=I/L;return[(y-f)*P+f,(x-g)*P+g]}(l,c,e,n,i/2+h,o/2+h)},checkPoint:function(e,n,i,o,l,c,h){return ko(e,n,o,l,c,h,i)}}},generateRoundPolygon:function(e,n){for(var i=new Array(2*n.length),o=0;o<n.length/2;o++){var c,l=2*o;c=o<n.length/2-1?2*(o+1):0,i[4*o]=n[l],i[4*o+1]=n[l+1];var h=n[c]-n[l],f=n[c+1]-n[l+1],g=Math.sqrt(h*h+f*f);i[4*o+2]=h/g,i[4*o+3]=f/g}return this.nodeShapes[e]={renderer:this,name:e,points:i,draw:function(y,x,_,S,A){this.renderer.nodeShapeImpl("round-polygon",y,x,_,S,A,this.points)},intersectLine:function(y,x,_,S,A,C,L){return function(I,P,B,F,G,$,X,H){for(var te,re=[],ae=new Array(B.length),le=$/2,se=X/2,de=Oh($,X),we=0;we<B.length/4;we++){var be,fe;fe=0===we?B.length-2:4*we-2,be=4*we+2;var ge=F+le*B[4*we],ee=G+se*B[4*we+1],Ie=de/Math.tan(Math.acos(-B[fe]*B[be]-B[fe+1]*B[be+1])/2),_e=ge-Ie*B[fe],je=ee-Ie*B[fe+1],Fe=ge+Ie*B[be],ze=ee+Ie*B[be+1];0===we?(ae[B.length-2]=_e,ae[B.length-1]=je):(ae[4*we-2]=_e,ae[4*we-1]=je),ae[4*we]=Fe,ae[4*we+1]=ze;var Je=B[fe+1],Re=-B[fe];Je*B[be]+Re*B[be+1]<0&&(Je*=-1,Re*=-1),0!==(te=Nl(I,P,F,G,_e+Je*de,je+Re*de,de)).length&&re.push(te[0],te[1])}for(var Ge=0;Ge<ae.length/4;Ge++)0!==(te=Oa(I,P,F,G,ae[4*Ge],ae[4*Ge+1],ae[4*Ge+2],ae[4*Ge+3],!1)).length&&re.push(te[0],te[1]);if(re.length>2){for(var st=[re[0],re[1]],pt=Math.pow(st[0]-I,2)+Math.pow(st[1]-P,2),_t=1;_t<re.length/2;_t++){var We=Math.pow(re[2*_t]-I,2)+Math.pow(re[2*_t+1]-P,2);We<=pt&&(st[0]=re[2*_t],st[1]=re[2*_t+1],pt=We)}return st}return re}(A,C,this.points,y,x,_,S)},checkPoint:function(y,x,_,S,A,C,L){return function(I,P,B,F,G,$,X){for(var H=new Array(B.length),te=$/2,re=X/2,ae=Oh($,X),le=ae*ae,se=0;se<B.length/4;se++){var de,we;we=0===se?B.length-2:4*se-2,de=4*se+2;var be=F+te*B[4*se],fe=G+re*B[4*se+1],ee=ae/Math.tan(Math.acos(-B[we]*B[de]-B[we+1]*B[de+1])/2),Se=be-ee*B[we],Ie=fe-ee*B[we+1],_e=be+ee*B[de],je=fe+ee*B[de+1];H[4*se]=Se,H[4*se+1]=Ie,H[4*se+2]=_e,H[4*se+3]=je;var Fe=B[we+1],ze=-B[we];Fe*B[de]+ze*B[de+1]<0&&(Fe*=-1,ze*=-1);var Re=Ie+ze*ae;if(Math.pow(Se+Fe*ae-I,2)+Math.pow(Re-P,2)<=le)return!0}return qr(I,P,H)}(y,x,this.points,C,L,S,A)}}},generateRoundRectangle:function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:zr(4,0),draw:function(e,n,i,o,l){this.renderer.nodeShapeImpl(this.name,e,n,i,o,l)},intersectLine:function(e,n,i,o,l,c,h){return lg(l,c,e,n,i,o,h)},checkPoint:function(e,n,i,o,l,c,h){var f=Il(o,l),g=2*f;return!!(la(e,n,this.points,c,h,o,l-g,[0,-1],i)||la(e,n,this.points,c,h,o-g,l,[0,-1],i)||ko(e,n,g,g,c-o/2+f,h-l/2+f,i)||ko(e,n,g,g,c+o/2-f,h-l/2+f,i)||ko(e,n,g,g,c+o/2-f,h+l/2-f,i)||ko(e,n,g,g,c-o/2+f,h+l/2-f,i))}}},generateCutRectangle:function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:8,points:zr(4,0),draw:function(e,n,i,o,l){this.renderer.nodeShapeImpl(this.name,e,n,i,o,l)},generateCutTrianglePts:function(e,n,i,o){var l=this.cornerLength,c=n/2,h=e/2,f=i-h,g=i+h,y=o-c,x=o+c;return{topLeft:[f,y+l,f+l,y,f+l,y+l],topRight:[g-l,y,g,y+l,g-l,y+l],bottomRight:[g,x-l,g-l,x,g-l,x-l],bottomLeft:[f+l,x,f,x-l,f+l,x-l]}},intersectLine:function(e,n,i,o,l,c,h){var f=this.generateCutTrianglePts(i+2*h,o+2*h,e,n),g=[].concat.apply([],[f.topLeft.splice(0,4),f.topRight.splice(0,4),f.bottomRight.splice(0,4),f.bottomLeft.splice(0,4)]);return zl(l,c,g,e,n)},checkPoint:function(e,n,i,o,l,c,h){if(la(e,n,this.points,c,h,o,l-2*this.cornerLength,[0,-1],i)||la(e,n,this.points,c,h,o-2*this.cornerLength,l,[0,-1],i))return!0;var f=this.generateCutTrianglePts(o,l,c,h);return qr(e,n,f.topLeft)||qr(e,n,f.topRight)||qr(e,n,f.bottomRight)||qr(e,n,f.bottomLeft)}}},generateBarrel:function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:zr(4,0),draw:function(e,n,i,o,l){this.renderer.nodeShapeImpl(this.name,e,n,i,o,l)},intersectLine:function(e,n,i,o,l,c,h){var f=this.generateBarrelBezierPts(i+2*h,o+2*h,e,n),g=function(x){var _=ds({x:x[0],y:x[1]},{x:x[2],y:x[3]},{x:x[4],y:x[5]},.15),S=ds({x:x[0],y:x[1]},{x:x[2],y:x[3]},{x:x[4],y:x[5]},.5),A=ds({x:x[0],y:x[1]},{x:x[2],y:x[3]},{x:x[4],y:x[5]},.85);return[x[0],x[1],_.x,_.y,S.x,S.y,A.x,A.y,x[4],x[5]]},y=[].concat(g(f.topLeft),g(f.topRight),g(f.bottomRight),g(f.bottomLeft));return zl(l,c,y,e,n)},generateBarrelBezierPts:function(e,n,i,o){var l=n/2,c=e/2,h=i-c,f=i+c,g=o-l,y=o+l,x=Nh(e,n),_=x.heightOffset,S=x.widthOffset,A=x.ctrlPtOffsetPct*e,C={topLeft:[h,g+_,h+A,g,h+S,g],topRight:[f-S,g,f-A,g,f,g+_],bottomRight:[f,y-_,f-A,y,f-S,y],bottomLeft:[h+S,y,h+A,y,h,y-_]};return C.topLeft.isTop=!0,C.topRight.isTop=!0,C.bottomLeft.isBottom=!0,C.bottomRight.isBottom=!0,C},checkPoint:function(e,n,i,o,l,c,h){var f=Nh(o,l),y=f.widthOffset;if(la(e,n,this.points,c,h,o,l-2*f.heightOffset,[0,-1],i)||la(e,n,this.points,c,h,o-2*y,l,[0,-1],i))return!0;for(var x=this.generateBarrelBezierPts(o,l,c,h),_=function(G,$,X){var H,te,re=X[4],ae=X[2],le=X[0],se=X[5],de=X[1],we=Math.min(re,le),be=Math.max(re,le),fe=Math.min(se,de),ge=Math.max(se,de);if(we<=G&&G<=be&&fe<=$&&$<=ge){var ee=[(H=re)-2*(te=ae)+le,2*(te-H),H],Se=function(Ie,_e,je,Fe){var ze=_e*_e-4*Ie*(je-=Fe);if(ze<0)return[];var Je=Math.sqrt(ze),Re=2*Ie;return[(-_e+Je)/Re,(-_e-Je)/Re]}(ee[0],ee[1],ee[2],G).filter(function(Ie){return 0<=Ie&&Ie<=1});if(Se.length>0)return Se[0]}return null},S=Object.keys(x),A=0;A<S.length;A++){var C=x[S[A]],L=_(e,n,C);if(null!=L){var F=Qn(C[5],C[3],C[1],L);if(C.isTop&&F<=n||C.isBottom&&n<=F)return!0}}return!1}}},generateBottomRoundrectangle:function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:zr(4,0),draw:function(e,n,i,o,l){this.renderer.nodeShapeImpl(this.name,e,n,i,o,l)},intersectLine:function(e,n,i,o,l,c,h){var f=n-(o/2+h),g=Oa(l,c,e,n,e-(i/2+h),f,e+(i/2+h),f,!1);return g.length>0?g:lg(l,c,e,n,i,o,h)},checkPoint:function(e,n,i,o,l,c,h){var f=Il(o,l),g=2*f;if(la(e,n,this.points,c,h,o,l-g,[0,-1],i)||la(e,n,this.points,c,h,o-g,l,[0,-1],i))return!0;var y=o/2+2*i,x=l/2+2*i;return!!qr(e,n,[c-y,h-x,c-y,h,c+y,h,c+y,h-x])||!!ko(e,n,g,g,c+o/2-f,h+l/2-f,i)||!!ko(e,n,g,g,c-o/2+f,h+l/2-f,i)}}},registerNodeShapes:function(){var e=this.nodeShapes={},n=this;this.generateEllipse(),this.generatePolygon("triangle",zr(3,0)),this.generateRoundPolygon("round-triangle",zr(3,0)),this.generatePolygon("rectangle",zr(4,0)),e.square=e.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();var i=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",i),this.generateRoundPolygon("round-diamond",i),this.generatePolygon("pentagon",zr(5,0)),this.generateRoundPolygon("round-pentagon",zr(5,0)),this.generatePolygon("hexagon",zr(6,0)),this.generateRoundPolygon("round-hexagon",zr(6,0)),this.generatePolygon("heptagon",zr(7,0)),this.generateRoundPolygon("round-heptagon",zr(7,0)),this.generatePolygon("octagon",zr(8,0)),this.generateRoundPolygon("round-octagon",zr(8,0));var o=new Array(20),l=Lh(5,0),c=Lh(5,Math.PI/5),h=.5*(3-Math.sqrt(5));h*=1.57;for(var f=0;f<c.length/2;f++)c[2*f]*=h,c[2*f+1]*=h;for(f=0;f<5;f++)o[4*f]=l[2*f],o[4*f+1]=l[2*f+1],o[4*f+2]=c[2*f],o[4*f+3]=c[2*f+1];o=ug(o),this.generatePolygon("star",o),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.generatePolygon("right-rhomboid",[-.333,-1,1,-1,.333,1,-1,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);var g=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",g),this.generateRoundPolygon("round-tag",g),e.makePolygon=function(y){var x,_="polygon-"+y.join("$");return(x=this[_])?x:n.generatePolygon(_,y)}}},Gv={timeToRender:function(){return this.redrawTotalTime/this.redrawCount},redraw:function(e){e=e||tg();var n=this;void 0===n.averageRedrawTime&&(n.averageRedrawTime=0),void 0===n.lastRedrawTime&&(n.lastRedrawTime=0),void 0===n.lastDrawTime&&(n.lastDrawTime=0),n.requestedFrame=!0,n.renderOptions=e},beforeRender:function(e,n){if(!this.destroyed){null==n&&zn("Priority is not optional for beforeRender");var i=this.beforeRenderCallbacks;i.push({fn:e,priority:n}),i.sort(function(o,l){return l.priority-o.priority})}}},Uv=function(e,n,i){for(var o=e.beforeRenderCallbacks,l=0;l<o.length;l++)o[l].fn(n,i)};Gv.startRenderLoop=function(){var e=this,n=e.cy;e.renderLoopStarted||(e.renderLoopStarted=!0,bc(function i(o){if(!e.destroyed){if(!n.batching())if(e.requestedFrame&&!e.skipFrame){Uv(e,!0,o);var l=sa();e.render(e.renderOptions);var c=e.lastDrawTime=sa();void 0===e.averageRedrawTime&&(e.averageRedrawTime=c-l),void 0===e.redrawCount&&(e.redrawCount=0),e.redrawCount++,void 0===e.redrawTotalTime&&(e.redrawTotalTime=0);var h=c-l;e.redrawTotalTime+=h,e.lastRedrawTime=h,e.averageRedrawTime=e.averageRedrawTime/2+h/2,e.requestedFrame=!1}else Uv(e,!1,o);e.skipFrame=!1,bc(i)}}))};var Zv=function(e){this.init(e)},Ds=Zv.prototype;Ds.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"],Ds.init=function(e){var n=this;n.options=e,n.cy=e.cy;var i=n.container=e.cy.container(),o=n.cy.window();if(o){var l=o.document,c=l.head,h="__________cytoscape_container",f=null!=l.getElementById("__________cytoscape_stylesheet");if(i.className.indexOf(h)<0&&(i.className=(i.className||"")+" "+h),!f){var g=l.createElement("style");g.id="__________cytoscape_stylesheet",g.textContent="."+h+" { position: relative; }",c.insertBefore(g,c.children[0])}"static"===o.getComputedStyle(i).getPropertyValue("position")&&gn("A Cytoscape container has style position:static and so can not use UI extensions properly")}n.selection=[void 0,void 0,void 0,void 0,0],n.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],n.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},n.dragData={possibleDragElements:[]},n.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},n.redraws=0,n.showFps=e.showFps,n.debug=e.debug,n.hideEdgesOnViewport=e.hideEdgesOnViewport,n.textureOnViewport=e.textureOnViewport,n.wheelSensitivity=e.wheelSensitivity,n.motionBlurEnabled=e.motionBlur,n.forcedPixelRatio=gt(e.pixelRatio)?e.pixelRatio:null,n.motionBlur=e.motionBlur,n.motionBlurOpacity=e.motionBlurOpacity,n.motionBlurTransparency=1-n.motionBlurOpacity,n.motionBlurPxRatio=1,n.mbPxRBlurry=1,n.minMbLowQualFrames=4,n.fullQualityMb=!1,n.clearedForMotionBlur=[],n.desktopTapThreshold=e.desktopTapThreshold,n.desktopTapThreshold2=e.desktopTapThreshold*e.desktopTapThreshold,n.touchTapThreshold=e.touchTapThreshold,n.touchTapThreshold2=e.touchTapThreshold*e.touchTapThreshold,n.tapholdDuration=500,n.bindings=[],n.beforeRenderCallbacks=[],n.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},n.registerNodeShapes(),n.registerArrowShapes(),n.registerCalculationListeners()},Ds.notify=function(e,n){var i=this;this.destroyed||("init"!==e?"destroy"!==e?(("add"===e||"remove"===e||"move"===e&&i.cy.hasCompoundNodes()||"load"===e||"zorder"===e||"mount"===e)&&i.invalidateCachedZSortedEles(),"viewport"===e&&i.redrawHint("select",!0),"load"!==e&&"resize"!==e&&"mount"!==e||(i.invalidateContainerClientCoordsCache(),i.matchCanvasSize(i.container)),i.redrawHint("eles",!0),i.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()):i.destroy():i.load())},Ds.destroy=function(){var e=this;e.destroyed=!0,e.cy.stopAnimationLoop();for(var n=0;n<e.bindings.length;n++){var i=e.bindings[n],o=i.target;(o.off||o.removeEventListener).apply(o,i.args)}if(e.bindings=[],e.beforeRenderCallbacks=[],e.onUpdateEleCalcsFns=[],e.removeObserver&&e.removeObserver.disconnect(),e.styleObserver&&e.styleObserver.disconnect(),e.resizeObserver&&e.resizeObserver.disconnect(),e.labelCalcDiv)try{document.body.removeChild(e.labelCalcDiv)}catch{}},Ds.isHeadless=function(){return!1},[sx,Kv,px,Kl,qa,Gv].forEach(function(e){It(Ds,e)});var Qv=function(e){return function(){var n=this,i=this.renderer;if(!n.dequeueingSetup){n.dequeueingSetup=!0;var o=yc(function(){i.redrawHint("eles",!0),i.redrawHint("drag",!0),i.redraw()},e.deqRedrawThreshold);i.beforeRender(function(c,h){var f=sa(),g=i.averageRedrawTime,y=i.lastRedrawTime,x=[],_=i.cy.extent(),S=i.getPixelRatio();for(c||i.flushRenderedStyleQueue();;){var A=sa(),C=A-f,L=A-h;if(y<1e3/60){if(L>=e.deqFastCost*(16.666666666666668-(c?g:0)))break}else if(c){if(C>=e.deqCost*y||C>=e.deqAvgCost*g)break}else if(L>=e.deqNoDrawCost*(1e3/60))break;var P=e.deq(n,S,_);if(!(P.length>0))break;for(var B=0;B<P.length;B++)x.push(P[B])}x.length>0&&(e.onDeqd(n,x),!c&&e.shouldRedraw(n,x,S,_)&&o())},(e.priority||Th)(n))}}},fx=function(){function e(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:wc;bh(this,e),this.idsByKey=new Fi,this.keyForId=new Fi,this.cachesByLvl=new Fi,this.lvls=[],this.getKey=n,this.doesEleInvalidateKey=i}return xh(e,[{key:"getIdsFor",value:function(n){null==n&&zn("Can not get id list for null key");var i=this.idsByKey,o=this.idsByKey.get(n);return o||(o=new us,i.set(n,o)),o}},{key:"addIdForKey",value:function(n,i){null!=n&&this.getIdsFor(n).add(i)}},{key:"deleteIdForKey",value:function(n,i){null!=n&&this.getIdsFor(n).delete(i)}},{key:"getNumberOfIdsForKey",value:function(n){return null==n?0:this.getIdsFor(n).size}},{key:"updateKeyMappingFor",value:function(n){var i=n.id(),o=this.keyForId.get(i),l=this.getKey(n);this.deleteIdForKey(o,i),this.addIdForKey(l,i),this.keyForId.set(i,l)}},{key:"deleteKeyMappingFor",value:function(n){var i=n.id(),o=this.keyForId.get(i);this.deleteIdForKey(o,i),this.keyForId.delete(i)}},{key:"keyHasChangedFor",value:function(n){var i=n.id();return this.keyForId.get(i)!==this.getKey(n)}},{key:"isInvalid",value:function(n){return this.keyHasChangedFor(n)||this.doesEleInvalidateKey(n)}},{key:"getCachesAt",value:function(n){var i=this.cachesByLvl,o=this.lvls,l=i.get(n);return l||(l=new Fi,i.set(n,l),o.push(n)),l}},{key:"getCache",value:function(n,i){return this.getCachesAt(i).get(n)}},{key:"get",value:function(n,i){var o=this.getKey(n),l=this.getCache(o,i);return null!=l&&this.updateKeyMappingFor(n),l}},{key:"getForCachedKey",value:function(n,i){var o=this.keyForId.get(n.id());return this.getCache(o,i)}},{key:"hasCache",value:function(n,i){return this.getCachesAt(i).has(n)}},{key:"has",value:function(n,i){var o=this.getKey(n);return this.hasCache(o,i)}},{key:"setCache",value:function(n,i,o){o.key=n,this.getCachesAt(i).set(n,o)}},{key:"set",value:function(n,i,o){var l=this.getKey(n);this.setCache(l,i,o),this.updateKeyMappingFor(n)}},{key:"deleteCache",value:function(n,i){this.getCachesAt(i).delete(n)}},{key:"delete",value:function(n,i){var o=this.getKey(n);this.deleteCache(o,i)}},{key:"invalidateKey",value:function(n){var i=this;this.lvls.forEach(function(o){return i.deleteCache(n,o)})}},{key:"invalidate",value:function(n){var i=n.id(),o=this.keyForId.get(i);this.deleteKeyMappingFor(n);var l=this.doesEleInvalidateKey(n);return l&&this.invalidateKey(o),l||0===this.getNumberOfIdsForKey(o)}}]),e}(),Ms={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},gx=ur({getKey:null,doesEleInvalidateKey:wc,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:Zf,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),Gl=function(e,n){this.renderer=e,this.onDequeues=[];var i=gx(n);It(this,i),this.lookup=new fx(i.getKey,i.doesEleInvalidateKey),this.setupDequeueing()},Xn=Gl.prototype;Xn.reasons=Ms,Xn.getTextureQueue=function(e){return this.eleImgCaches=this.eleImgCaches||{},this.eleImgCaches[e]=this.eleImgCaches[e]||[]},Xn.getRetiredTextureQueue=function(e){var n=this.eleImgCaches.retired=this.eleImgCaches.retired||{};return n[e]=n[e]||[]},Xn.getElementQueue=function(){return this.eleCacheQueue=this.eleCacheQueue||new Ll(function(e,n){return n.reqs-e.reqs})},Xn.getElementKeyToQueue=function(){return this.eleKeyToCacheQueue=this.eleKeyToCacheQueue||{}},Xn.getElement=function(e,n,i,o,l){var c=this,h=this.renderer,f=h.cy.zoom(),g=this.lookup;if(!n||0===n.w||0===n.h||isNaN(n.w)||isNaN(n.h)||!e.visible()||e.removed()||!c.allowEdgeTxrCaching&&e.isEdge()||!c.allowParentTxrCaching&&e.isParent())return null;if(null==o&&(o=Math.ceil(Mh(f*i))),o<-4)o=-4;else if(f>=7.99||o>3)return null;var y=Math.pow(2,o),x=n.h*y,_=n.w*y,S=h.eleTextBiggerThanMin(e,y);if(!this.isVisible(e,S))return null;var A,C=g.get(e,o);if(C&&C.invalidated&&(C.invalidated=!1,C.texture.invalidatedWidth-=C.width),C)return C;if(A=x<=25?25:x<=50?50:50*Math.ceil(x/50),x>1024||_>1024)return null;var L=c.getTextureQueue(A),I=L[L.length-2],P=function(){return c.recycleTexture(A,_)||c.addTexture(A,_)};I||(I=L[L.length-1]),I||(I=P()),I.width-I.usedWidth<_&&(I=P());for(var B,F=function(be){return be&&be.scaledLabelShown===S},G=l&&l===Ms.dequeue,$=l&&l===Ms.highQuality,X=l&&l===Ms.downscale,H=o+1;H<=3;H++){var te=g.get(e,H);if(te){B=te;break}}var re=B&&B.level===o+1?B:null,ae=function(){I.context.drawImage(re.texture.canvas,re.x,0,re.width,re.height,I.usedWidth,0,_,x)};if(I.context.setTransform(1,0,0,1,0,0),I.context.clearRect(I.usedWidth,0,_,A),F(re))ae();else if(F(B)){if(!$)return c.queueElement(e,B.level-1),B;for(var le=B.level;le>o;le--)re=c.getElement(e,n,i,le,Ms.downscale);ae()}else{var se;if(!G&&!$&&!X)for(var de=o-1;de>=-4;de--){var we=g.get(e,de);if(we){se=we;break}}if(F(se))return c.queueElement(e,o),se;I.context.translate(I.usedWidth,0),I.context.scale(y,y),this.drawElement(I.context,e,n,S,!1),I.context.scale(1/y,1/y),I.context.translate(-I.usedWidth,0)}return C={x:I.usedWidth,texture:I,level:o,scale:y,width:_,height:x,scaledLabelShown:S},I.usedWidth+=Math.ceil(_+8),I.eleCaches.push(C),g.set(e,o,C),c.checkTextureFullness(I),C},Xn.invalidateElements=function(e){for(var n=0;n<e.length;n++)this.invalidateElement(e[n])},Xn.invalidateElement=function(e){var n=this.lookup,i=[];if(n.isInvalid(e)){for(var o=-4;o<=3;o++){var l=n.getForCachedKey(e,o);l&&i.push(l)}if(n.invalidate(e))for(var c=0;c<i.length;c++){var h=i[c],f=h.texture;f.invalidatedWidth+=h.width,h.invalidated=!0,this.checkTextureUtility(f)}this.removeFromQueue(e)}},Xn.checkTextureUtility=function(e){e.invalidatedWidth>=.2*e.width&&this.retireTexture(e)},Xn.checkTextureFullness=function(e){var n=this.getTextureQueue(e.height);e.usedWidth/e.width>.8&&e.fullnessChecks>=10?Ba(n,e):e.fullnessChecks++},Xn.retireTexture=function(e){var n=e.height,i=this.getTextureQueue(n),o=this.lookup;Ba(i,e),e.retired=!0;for(var l=e.eleCaches,c=0;c<l.length;c++){var h=l[c];o.deleteCache(h.key,h.level)}Ph(l),this.getRetiredTextureQueue(n).push(e)},Xn.addTexture=function(e,n){var i={};return this.getTextureQueue(e).push(i),i.eleCaches=[],i.height=e,i.width=Math.max(1024,n),i.usedWidth=0,i.invalidatedWidth=0,i.fullnessChecks=0,i.canvas=this.renderer.makeOffscreenCanvas(i.width,i.height),i.context=i.canvas.getContext("2d"),i},Xn.recycleTexture=function(e,n){for(var i=this.getTextureQueue(e),o=this.getRetiredTextureQueue(e),l=0;l<o.length;l++){var c=o[l];if(c.width>=n)return c.retired=!1,c.usedWidth=0,c.invalidatedWidth=0,c.fullnessChecks=0,Ph(c.eleCaches),c.context.setTransform(1,0,0,1,0,0),c.context.clearRect(0,0,c.width,c.height),Ba(o,c),i.push(c),c}},Xn.queueElement=function(e,n){var i=this.getElementQueue(),o=this.getElementKeyToQueue(),l=this.getKey(e),c=o[l];if(c)c.level=Math.max(c.level,n),c.eles.merge(e),c.reqs++,i.updateItem(c);else{var h={eles:e.spawn().merge(e),level:n,reqs:1,key:l};i.push(h),o[l]=h}},Xn.dequeue=function(e){for(var n=this.getElementQueue(),i=this.getElementKeyToQueue(),o=[],l=this.lookup,c=0;c<1&&n.size()>0;c++){var h=n.pop(),f=h.key,g=h.eles[0],y=l.hasCache(g,h.level);if(i[f]=null,!y){o.push(h);var x=this.getBoundingBox(g);this.getElement(g,x,e,h.level,Ms.dequeue)}}return o},Xn.removeFromQueue=function(e){var n=this.getElementQueue(),i=this.getElementKeyToQueue(),o=this.getKey(e),l=i[o];null!=l&&(1===l.eles.length?(l.reqs=Sh,n.updateItem(l),n.pop(),i[o]=null):l.eles.unmerge(e))},Xn.onDequeue=function(e){this.onDequeues.push(e)},Xn.offDequeue=function(e){Ba(this.onDequeues,e)},Xn.setupDequeueing=Qv({deqRedrawThreshold:100,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(e,n,i){return e.dequeue(n,i)},onDeqd:function(e,n){for(var i=0;i<e.onDequeues.length;i++)(0,e.onDequeues[i])(n)},shouldRedraw:function(e,n,i,o){for(var l=0;l<n.length;l++)for(var c=n[l].eles,h=0;h<c.length;h++){var f=c[h].boundingBox();if(Ah(f,o))return!0}return!1},priority:function(e){return e.renderer.beforeRenderPriorities.eleTxrDeq}});var Jv=function(e){var n=this,i=n.renderer=e,o=i.cy;n.layersByLevel={},n.firstGet=!0,n.lastInvalidationTime=sa()-500,n.skipping=!1,n.eleTxrDeqs=o.collection(),n.scheduleElementRefinement=yc(function(){n.refineElementTextures(n.eleTxrDeqs),n.eleTxrDeqs.unmerge(n.eleTxrDeqs)},50),i.beforeRender(function(l,c){n.skipping=c-n.lastInvalidationTime<=250},i.beforeRenderPriorities.lyrTxrSkip),n.layersQueue=new Ll(function(l,c){return c.reqs-l.reqs}),n.setupDequeueing()},pr=Jv.prototype,em=0,vx=Math.pow(2,53)-1;pr.makeLayer=function(e,n){var i=Math.pow(2,n),o=Math.ceil(e.w*i),l=Math.ceil(e.h*i),c=this.renderer.makeOffscreenCanvas(o,l),h={id:em=++em%vx,bb:e,level:n,width:o,height:l,canvas:c,context:c.getContext("2d"),eles:[],elesQueue:[],reqs:0},f=h.context,g=-h.bb.x1,y=-h.bb.y1;return f.scale(i,i),f.translate(g,y),h},pr.getLayers=function(e,n,i){var o=this,l=o.renderer.cy.zoom(),c=o.firstGet;if(o.firstGet=!1,null==i)if((i=Math.ceil(Mh(l*n)))<-4)i=-4;else if(l>=3.99||i>2)return null;o.validateLayersElesOrdering(i,e);var h,f,g=o.layersByLevel,y=Math.pow(2,i),x=g[i]=g[i]||[];if(o.levelIsComplete(i,e))return x;!function(){var G=function(te){if(o.validateLayersElesOrdering(te,e),o.levelIsComplete(te,e))return f=g[te],!0},$=function(te){if(!f)for(var re=i+te;-4<=re&&re<=2&&!G(re);re+=te);};$(1),$(-1);for(var X=x.length-1;X>=0;X--){var H=x[X];H.invalid&&Ba(x,H)}}();var _=function(G){var $=(G=G||{}).after;if(function(){if(!h){h=jr();for(var te=0;te<e.length;te++)ag(h,e[te].boundingBox())}}(),h.w*y*(h.h*y)>16e6)return null;var X=o.makeLayer(h,i);if(null!=$){var H=x.indexOf($)+1;x.splice(H,0,X)}else(void 0===G.insert||G.insert)&&x.unshift(X);return X};if(o.skipping&&!c)return null;for(var S=null,A=e.length/1,C=!c,L=0;L<e.length;L++){var I=e[L],P=I._private.rscratch,B=P.imgLayerCaches=P.imgLayerCaches||{},F=B[i];if(F)S=F;else{if((!S||S.eles.length>=A||!sg(S.bb,I.boundingBox()))&&!(S=_({insert:!0,after:S})))return null;f||C?o.queueLayer(S,I):o.drawEleInLayer(S,I,i,n),S.eles.push(I),B[i]=S}}return f||(C?null:x)},pr.getEleLevelForLayerLevel=function(e,n){return e},pr.drawEleInLayer=function(e,n,i,o){var l=this.renderer,c=e.context,h=n.boundingBox();0!==h.w&&0!==h.h&&n.visible()&&(i=this.getEleLevelForLayerLevel(i,o),l.setImgSmoothing(c,!1),l.drawCachedElement(c,n,null,null,i,!0),l.setImgSmoothing(c,!0))},pr.levelIsComplete=function(e,n){var i=this.layersByLevel[e];if(!i||0===i.length)return!1;for(var o=0,l=0;l<i.length;l++){var c=i[l];if(c.reqs>0||c.invalid)return!1;o+=c.eles.length}return o===n.length},pr.validateLayersElesOrdering=function(e,n){var i=this.layersByLevel[e];if(i)for(var o=0;o<i.length;o++){for(var l=i[o],c=-1,h=0;h<n.length;h++)if(l.eles[0]===n[h]){c=h;break}if(c<0)this.invalidateLayer(l);else{var f=c;for(h=0;h<l.eles.length;h++)if(l.eles[h]!==n[f+h]){this.invalidateLayer(l);break}}}},pr.updateElementsInLayers=function(e,n){for(var i=Cl(e[0]),o=0;o<e.length;o++)for(var l=i?null:e[o],c=i?e[o]:e[o].ele,h=c._private.rscratch,f=h.imgLayerCaches=h.imgLayerCaches||{},g=-4;g<=2;g++){var y=f[g];y&&(l&&this.getEleLevelForLayerLevel(y.level)!==l.level||n(y,c,l))}},pr.haveLayers=function(){for(var e=!1,n=-4;n<=2;n++){var i=this.layersByLevel[n];if(i&&i.length>0){e=!0;break}}return e},pr.invalidateElements=function(e){var n=this;0!==e.length&&(n.lastInvalidationTime=sa(),0!==e.length&&n.haveLayers()&&n.updateElementsInLayers(e,function(i,o,l){n.invalidateLayer(i)}))},pr.invalidateLayer=function(e){if(this.lastInvalidationTime=sa(),!e.invalid){var n=e.level,i=e.eles;Ba(this.layersByLevel[n],e),e.elesQueue=[],e.invalid=!0,e.replacement&&(e.replacement.invalid=!0);for(var l=0;l<i.length;l++){var c=i[l]._private.rscratch.imgLayerCaches;c&&(c[n]=null)}}},pr.refineElementTextures=function(e){var n=this;n.updateElementsInLayers(e,function(i,o,l){var c=i.replacement;if(c||((c=i.replacement=n.makeLayer(i.bb,i.level)).replaces=i,c.eles=i.eles),!c.reqs)for(var h=0;h<c.eles.length;h++)n.queueLayer(c,c.eles[h])})},pr.enqueueElementRefinement=function(e){this.eleTxrDeqs.merge(e),this.scheduleElementRefinement()},pr.queueLayer=function(e,n){var i=this.layersQueue,o=e.elesQueue,l=o.hasId=o.hasId||{};if(!e.replacement){if(n){if(l[n.id()])return;o.push(n),l[n.id()]=!0}e.reqs?(e.reqs++,i.updateItem(e)):(e.reqs=1,i.push(e))}},pr.dequeue=function(e){for(var n=this.layersQueue,i=[],o=0;o<1&&0!==n.size();){var l=n.peek();if(l.replacement)n.pop();else if(l.replaces&&l!==l.replaces.replacement)n.pop();else if(l.invalid)n.pop();else{var c=l.elesQueue.shift();c&&(this.drawEleInLayer(l,c,l.level,e),o++),0===i.length&&i.push(!0),0===l.elesQueue.length&&(n.pop(),l.reqs=0,l.replaces&&this.applyLayerReplacement(l),this.requestRedraw())}}return i},pr.applyLayerReplacement=function(e){var n=this.layersByLevel[e.level],i=e.replaces,o=n.indexOf(i);if(!(o<0||i.invalid)){n[o]=e;for(var l=0;l<e.eles.length;l++){var c=e.eles[l]._private,h=c.imgLayerCaches=c.imgLayerCaches||{};h&&(h[e.level]=e)}this.requestRedraw()}},pr.requestRedraw=yc(function(){var e=this.renderer;e.redrawHint("eles",!0),e.redrawHint("drag",!0),e.redraw()},100),pr.setupDequeueing=Qv({deqRedrawThreshold:50,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(e,n){return e.dequeue(n)},onDeqd:Th,shouldRedraw:Zf,priority:function(e){return e.renderer.beforeRenderPriorities.lyrTxrDeq}});var tm,nm={};function mx(e,n){for(var i=0;i<n.length;i++){var o=n[i];e.lineTo(o.x,o.y)}}function yx(e,n,i){for(var o,l=0;l<n.length;l++){var c=n[l];0===l&&(o=c),e.lineTo(c.x,c.y)}e.quadraticCurveTo(i.x,i.y,o.x,o.y)}function rm(e,n,i){e.beginPath&&e.beginPath();for(var o=n,l=0;l<o.length;l++){var c=o[l];e.lineTo(c.x,c.y)}var h=i,f=i[0];for(e.moveTo(f.x,f.y),l=1;l<h.length;l++)e.lineTo((c=h[l]).x,c.y);e.closePath&&e.closePath()}function bx(e,n,i,o,l){e.beginPath&&e.beginPath(),e.arc(i,o,l,0,2*Math.PI,!1);var c=n,h=c[0];e.moveTo(h.x,h.y);for(var f=0;f<c.length;f++){var g=c[f];e.lineTo(g.x,g.y)}e.closePath&&e.closePath()}function xx(e,n,i,o){e.arc(n,i,o,0,2*Math.PI,!1)}nm.arrowShapeImpl=function(e){return(tm||(tm={polygon:mx,"triangle-backcurve":yx,"triangle-tee":rm,"circle-triangle":bx,"triangle-cross":rm,circle:xx}))[e]};var As={drawElement:function(e,n,i,o,l,c){n.isNode()?this.drawNode(e,n,i,o,l,c):this.drawEdge(e,n,i,o,l,c)},drawElementOverlay:function(e,n){n.isNode()?this.drawNodeOverlay(e,n):this.drawEdgeOverlay(e,n)},drawElementUnderlay:function(e,n){n.isNode()?this.drawNodeUnderlay(e,n):this.drawEdgeUnderlay(e,n)},drawCachedElementPortion:function(e,n,i,o,l,c,h,f){var g=this,y=i.getBoundingBox(n);if(0!==y.w&&0!==y.h){var x=i.getElement(n,y,o,l,c);if(null!=x){var _=f(g,n);if(0===_)return;var S,A,C,L,I,P,B=h(g,n),F=y.x1,G=y.y1,$=y.w,X=y.h;if(0!==B){var H=i.getRotationPoint(n);e.translate(C=H.x,L=H.y),e.rotate(B),(I=g.getImgSmoothing(e))||g.setImgSmoothing(e,!0);var te=i.getRotationOffset(n);S=te.x,A=te.y}else S=F,A=G;1!==_&&(e.globalAlpha=(P=e.globalAlpha)*_),e.drawImage(x.texture.canvas,x.x,0,x.width,x.height,S,A,$,X),1!==_&&(e.globalAlpha=P),0!==B&&(e.rotate(-B),e.translate(-C,-L),I||g.setImgSmoothing(e,!1))}else i.drawElement(e,n)}}},wx=function(){return 0},Ex=function(e,n){return e.getTextAngle(n,null)},_x=function(e,n){return e.getTextAngle(n,"source")},kx=function(e,n){return e.getTextAngle(n,"target")},Cx=function(e,n){return n.effectiveOpacity()},vp=function(e,n){return n.pstyle("text-opacity").pfValue*n.effectiveOpacity()};As.drawCachedElement=function(e,n,i,o,l,c){var h=this,f=h.data,g=f.eleTxrCache,y=f.lblTxrCache,x=f.slbTxrCache,_=f.tlbTxrCache,S=n.boundingBox(),A=!0===c?g.reasons.highQuality:null;if(0!==S.w&&0!==S.h&&n.visible()&&(!o||Ah(S,o))){var C=n.isEdge(),L=n.element()._private.rscratch.badLine;h.drawElementUnderlay(e,n),h.drawCachedElementPortion(e,n,g,i,l,A,wx,Cx),C&&L||h.drawCachedElementPortion(e,n,y,i,l,A,Ex,vp),C&&!L&&(h.drawCachedElementPortion(e,n,x,i,l,A,_x,vp),h.drawCachedElementPortion(e,n,_,i,l,A,kx,vp)),h.drawElementOverlay(e,n)}},As.drawElements=function(e,n){for(var i=0;i<n.length;i++)this.drawElement(e,n[i])},As.drawCachedElements=function(e,n,i,o){for(var l=0;l<n.length;l++)this.drawCachedElement(e,n[l],i,o)},As.drawCachedNodes=function(e,n,i,o){for(var l=0;l<n.length;l++){var c=n[l];c.isNode()&&this.drawCachedElement(e,c,i,o)}},As.drawLayeredElements=function(e,n,i,o){var l=this.data.lyrTxrCache.getLayers(n,i);if(l)for(var c=0;c<l.length;c++){var h=l[c],f=h.bb;0!==f.w&&0!==f.h&&e.drawImage(h.canvas,f.x1,f.y1,f.w,f.h)}else this.drawCachedElements(e,n,i,o)};var Xa={drawEdge:function(e,n,i){var o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],l=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],c=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],h=this,f=n._private.rscratch;if((!c||n.visible())&&!f.badLine&&null!=f.allpts&&!isNaN(f.allpts[0])){var g;i&&e.translate(-(g=i).x1,-g.y1);var y=c?n.pstyle("opacity").value:1,x=c?n.pstyle("line-opacity").value:1,_=n.pstyle("curve-style").value,S=n.pstyle("line-style").value,A=n.pstyle("width").pfValue,C=n.pstyle("line-cap").value,L=y*x,I=y*x,P=function(){var le=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L;"straight-triangle"===_?(h.eleStrokeStyle(e,n,le),h.drawEdgeTrianglePath(n,e,f.allpts)):(e.lineWidth=A,e.lineCap=C,h.eleStrokeStyle(e,n,le),h.drawEdgePath(n,e,f.allpts,S),e.lineCap="butt")},G=function(){h.drawArrowheads(e,n,arguments.length>0&&void 0!==arguments[0]?arguments[0]:I)};if(e.lineJoin="round","yes"===n.pstyle("ghost").value){var H=n.pstyle("ghost-offset-x").pfValue,te=n.pstyle("ghost-offset-y").pfValue,re=n.pstyle("ghost-opacity").value,ae=L*re;e.translate(H,te),P(ae),G(ae),e.translate(-H,-te)}l&&h.drawEdgeUnderlay(e,n),P(),G(),l&&h.drawEdgeOverlay(e,n),h.drawElementText(e,n,null,o),i&&e.translate(g.x1,g.y1)}}},im=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(n,i){if(i.visible()){var o=i.pstyle("".concat(e,"-opacity")).value;if(0!==o){var l=this,c=l.usePaths(),h=i._private.rscratch,f=2*i.pstyle("".concat(e,"-padding")).pfValue,g=i.pstyle("".concat(e,"-color")).value;n.lineWidth=f,n.lineCap="self"!==h.edgeType||c?"round":"butt",l.colorStrokeStyle(n,g[0],g[1],g[2],o),l.drawEdgePath(i,n,h.allpts,"solid")}}}};Xa.drawEdgeOverlay=im("overlay"),Xa.drawEdgeUnderlay=im("underlay"),Xa.drawEdgePath=function(e,n,i,o){var l,c=e._private.rscratch,h=n,f=!1,g=this.usePaths(),y=e.pstyle("line-dash-pattern").pfValue,x=e.pstyle("line-dash-offset").pfValue;if(g){var _=i.join("$");c.pathCacheKey&&c.pathCacheKey===_?(l=n=c.pathCache,f=!0):(l=n=new Path2D,c.pathCacheKey=_,c.pathCache=l)}if(h.setLineDash)switch(o){case"dotted":h.setLineDash([1,1]);break;case"dashed":h.setLineDash(y),h.lineDashOffset=x;break;case"solid":h.setLineDash([])}if(!f&&!c.badLine)switch(n.beginPath&&n.beginPath(),n.moveTo(i[0],i[1]),c.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var S=2;S+3<i.length;S+=4)n.quadraticCurveTo(i[S],i[S+1],i[S+2],i[S+3]);break;case"straight":case"segments":case"haystack":for(var A=2;A+1<i.length;A+=2)n.lineTo(i[A],i[A+1])}n=h,g?n.stroke(l):n.stroke(),n.setLineDash&&n.setLineDash([])},Xa.drawEdgeTrianglePath=function(e,n,i){n.fillStyle=n.strokeStyle;for(var o=e.pstyle("width").pfValue,l=0;l+1<i.length;l+=2){var c=[i[l+2]-i[l],i[l+3]-i[l+1]],h=Math.sqrt(c[0]*c[0]+c[1]*c[1]),f=[c[1]/h,-c[0]/h],g=[f[0]*o/2,f[1]*o/2];n.beginPath(),n.moveTo(i[l]-g[0],i[l+1]-g[1]),n.lineTo(i[l]+g[0],i[l+1]+g[1]),n.lineTo(i[l+2],i[l+3]),n.closePath(),n.fill()}},Xa.drawArrowheads=function(e,n,i){var o=n._private.rscratch,l="haystack"===o.edgeType;l||this.drawArrowhead(e,n,"source",o.arrowStartX,o.arrowStartY,o.srcArrowAngle,i),this.drawArrowhead(e,n,"mid-target",o.midX,o.midY,o.midtgtArrowAngle,i),this.drawArrowhead(e,n,"mid-source",o.midX,o.midY,o.midsrcArrowAngle,i),l||this.drawArrowhead(e,n,"target",o.arrowEndX,o.arrowEndY,o.tgtArrowAngle,i)},Xa.drawArrowhead=function(e,n,i,o,l,c,h){if(!(isNaN(o)||null==o||isNaN(l)||null==l||isNaN(c)||null==c)){var f=n.pstyle(i+"-arrow-shape").value;if("none"!==f){var g="hollow"===n.pstyle(i+"-arrow-fill").value?"both":"filled",y=n.pstyle(i+"-arrow-fill").value,x=n.pstyle("width").pfValue,_=n.pstyle(i+"-arrow-width"),S="match-line"===_.value?x:_.pfValue;"%"===_.units&&(S*=x);var A=n.pstyle("opacity").value;void 0===h&&(h=A);var C=e.globalCompositeOperation;1===h&&"hollow"!==y||(e.globalCompositeOperation="destination-out",this.colorFillStyle(e,255,255,255,1),this.colorStrokeStyle(e,255,255,255,1),this.drawArrowShape(n,e,g,x,f,S,o,l,c),e.globalCompositeOperation=C);var L=n.pstyle(i+"-arrow-color").value;this.colorFillStyle(e,L[0],L[1],L[2],h),this.colorStrokeStyle(e,L[0],L[1],L[2],h),this.drawArrowShape(n,e,y,x,f,S,o,l,c)}}},Xa.drawArrowShape=function(e,n,i,o,l,c,h,f,g){var y,x=this,_=this.usePaths()&&"triangle-cross"!==l,S=!1,A=n,C={x:h,y:f},L=e.pstyle("arrow-scale").value,I=this.getArrowWidth(o,L),P=x.arrowShapes[l];if(_){var B=x.arrowPathCache=x.arrowPathCache||[],F=wo(l),G=B[F];null!=G?(y=n=G,S=!0):(y=n=new Path2D,B[F]=y)}S||(n.beginPath&&n.beginPath(),_?P.draw(n,1,0,{x:0,y:0},1):P.draw(n,I,g,C,o),n.closePath&&n.closePath()),n=A,_&&(n.translate(h,f),n.rotate(g),n.scale(I,I)),"filled"!==i&&"both"!==i||(_?n.fill(y):n.fill()),"hollow"!==i&&"both"!==i||(n.lineWidth=c/(_?I:1),n.lineJoin="miter",_?n.stroke(y):n.stroke()),_&&(n.scale(1/I,1/I),n.rotate(-g),n.translate(-h,-f))};var Sx={safeDrawImage:function(e,n,i,o,l,c,h,f,g,y){if(!(l<=0||c<=0||g<=0||y<=0))try{e.drawImage(n,i,o,l,c,h,f,g,y)}catch(x){gn(x)}},drawInscribedImage:function(e,n,i,o,l){var c=this,h=i.position(),f=h.x,g=h.y,y=i.cy().style(),x=y.getIndexedStyle.bind(y),_=x(i,"background-fit","value",o),S=x(i,"background-repeat","value",o),A=i.width(),C=i.height(),L=2*i.padding(),I=A+("inner"===x(i,"background-width-relative-to","value",o)?0:L),P=C+("inner"===x(i,"background-height-relative-to","value",o)?0:L),B=i._private.rscratch,F="node"===x(i,"background-clip","value",o),G=x(i,"background-image-opacity","value",o)*l,$=x(i,"background-image-smoothing","value",o),X=n.width||n.cachedW,H=n.height||n.cachedH;null!=X&&null!=H||(document.body.appendChild(n),X=n.cachedW=n.width||n.offsetWidth,H=n.cachedH=n.height||n.offsetHeight,document.body.removeChild(n));var te=X,re=H;if("auto"!==x(i,"background-width","value",o)&&(te="%"===x(i,"background-width","units",o)?x(i,"background-width","pfValue",o)*I:x(i,"background-width","pfValue",o)),"auto"!==x(i,"background-height","value",o)&&(re="%"===x(i,"background-height","units",o)?x(i,"background-height","pfValue",o)*P:x(i,"background-height","pfValue",o)),0!==te&&0!==re){if("contain"===_)te*=ae=Math.min(I/te,P/re),re*=ae;else if("cover"===_){var ae;te*=ae=Math.max(I/te,P/re),re*=ae}var le=f-I/2,se=x(i,"background-position-x","units",o),de=x(i,"background-position-x","pfValue",o);le+="%"===se?(I-te)*de:de;var we=x(i,"background-offset-x","units",o),be=x(i,"background-offset-x","pfValue",o);le+="%"===we?(I-te)*be:be;var fe=g-P/2,ge=x(i,"background-position-y","units",o),ee=x(i,"background-position-y","pfValue",o);fe+="%"===ge?(P-re)*ee:ee;var Se=x(i,"background-offset-y","units",o),Ie=x(i,"background-offset-y","pfValue",o);fe+="%"===Se?(P-re)*Ie:Ie,B.pathCache&&(le-=f,fe-=g,f=0,g=0);var _e=e.globalAlpha;e.globalAlpha=G;var je=c.getImgSmoothing(e),Fe=!1;if("no"===$&&je?(c.setImgSmoothing(e,!1),Fe=!0):"yes"!==$||je||(c.setImgSmoothing(e,!0),Fe=!0),"no-repeat"===S)F&&(e.save(),B.pathCache?e.clip(B.pathCache):(c.nodeShapes[c.getNodeShape(i)].draw(e,f,g,I,P),e.clip())),c.safeDrawImage(e,n,0,0,X,H,le,fe,te,re),F&&e.restore();else{var ze=e.createPattern(n,S);e.fillStyle=ze,c.nodeShapes[c.getNodeShape(i)].draw(e,f,g,I,P),e.translate(le,fe),e.fill(),e.translate(-le,-fe)}e.globalAlpha=_e,Fe&&c.setImgSmoothing(e,je)}}},Po={};function mp(e,n,i,o,l){var c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:5,h=arguments.length>6?arguments[6]:void 0;e.beginPath(),e.moveTo(n+c,i),e.lineTo(n+o-c,i),e.quadraticCurveTo(n+o,i,n+o,i+c),e.lineTo(n+o,i+l-c),e.quadraticCurveTo(n+o,i+l,n+o-c,i+l),e.lineTo(n+c,i+l),e.quadraticCurveTo(n,i+l,n,i+l-c),e.lineTo(n,i+c),e.quadraticCurveTo(n,i,n+c,i),e.closePath(),h?e.stroke():e.fill()}Po.eleTextBiggerThanMin=function(e,n){if(!n){var i=e.cy().zoom(),o=this.getPixelRatio(),l=Math.ceil(Mh(i*o));n=Math.pow(2,l)}return!(e.pstyle("font-size").pfValue*n<e.pstyle("min-zoomed-font-size").pfValue)},Po.drawElementText=function(e,n,i,o,l){var c=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],h=this;if(null==o){if(c&&!h.eleTextBiggerThanMin(n))return}else if(!1===o)return;if(n.isNode()){var f=n.pstyle("label");if(!f||!f.value)return;var g=h.getLabelJustification(n);e.textAlign=g,e.textBaseline="bottom"}else{var y=n.element()._private.rscratch.badLine,x=n.pstyle("label"),_=n.pstyle("source-label"),S=n.pstyle("target-label");if(y||(!x||!x.value)&&(!_||!_.value)&&(!S||!S.value))return;e.textAlign="center",e.textBaseline="bottom"}var A,C=!i;i&&e.translate(-(A=i).x1,-A.y1),null==l?(h.drawText(e,n,null,C,c),n.isEdge()&&(h.drawText(e,n,"source",C,c),h.drawText(e,n,"target",C,c))):h.drawText(e,n,l,C,c),i&&e.translate(A.x1,A.y1)},Po.getFontCache=function(e){var n;this.fontCaches=this.fontCaches||[];for(var i=0;i<this.fontCaches.length;i++)if((n=this.fontCaches[i]).context===e)return n;return this.fontCaches.push(n={context:e}),n},Po.setupTextStyle=function(e,n){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=n.pstyle("font-style").strValue,l=n.pstyle("font-size").pfValue+"px",c=n.pstyle("font-family").strValue,h=n.pstyle("font-weight").strValue,f=i?n.effectiveOpacity()*n.pstyle("text-opacity").value:1,g=n.pstyle("text-outline-opacity").value*f,y=n.pstyle("color").value,x=n.pstyle("text-outline-color").value;e.font=o+" "+h+" "+l+" "+c,e.lineJoin="round",this.colorFillStyle(e,y[0],y[1],y[2],f),this.colorStrokeStyle(e,x[0],x[1],x[2],g)},Po.getTextAngle=function(e,n){var i=e._private.rscratch,l=e.pstyle((n?n+"-":"")+"text-rotation"),c=Ci(i,"labelAngle",n);return"autorotate"===l.strValue?e.isEdge()?c:0:"none"===l.strValue?0:l.pfValue},Po.drawText=function(e,n,i){var o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],l=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],h=n._private.rscratch,f=l?n.effectiveOpacity():1;if(!l||0!==f&&0!==n.pstyle("text-opacity").value){"main"===i&&(i=null);var g,y,x=Ci(h,"labelX",i),_=Ci(h,"labelY",i),S=this.getLabelText(n,i);if(null!=S&&""!==S&&!isNaN(x)&&!isNaN(_)){this.setupTextStyle(e,n,l);var A,C=i?i+"-":"",L=Ci(h,"labelWidth",i),I=Ci(h,"labelHeight",i),P=n.pstyle(C+"text-margin-x").pfValue,B=n.pstyle(C+"text-margin-y").pfValue,F=n.isEdge(),G=n.pstyle("text-halign").value,$=n.pstyle("text-valign").value;switch(F&&(G="center",$="center"),x+=P,_+=B,0!==(A=o?this.getTextAngle(n,i):0)&&(e.translate(g=x,y=_),e.rotate(A),x=0,_=0),$){case"top":break;case"center":_+=I/2;break;case"bottom":_+=I}var X=n.pstyle("text-background-opacity").value,H=n.pstyle("text-border-opacity").value,te=n.pstyle("text-border-width").pfValue,re=n.pstyle("text-background-padding").pfValue,le=0===n.pstyle("text-background-shape").strValue.indexOf("round");if(X>0||te>0&&H>0){var de=x-re;switch(G){case"left":de-=L;break;case"center":de-=L/2}var we=_-I-re,be=L+2*re,fe=I+2*re;if(X>0){var ge=e.fillStyle,ee=n.pstyle("text-background-color").value;e.fillStyle="rgba("+ee[0]+","+ee[1]+","+ee[2]+","+X*f+")",le?mp(e,de,we,be,fe,2):e.fillRect(de,we,be,fe),e.fillStyle=ge}if(te>0&&H>0){var Se=e.strokeStyle,Ie=e.lineWidth,_e=n.pstyle("text-border-color").value,je=n.pstyle("text-border-style").value;if(e.strokeStyle="rgba("+_e[0]+","+_e[1]+","+_e[2]+","+H*f+")",e.lineWidth=te,e.setLineDash)switch(je){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash([4,2]);break;case"double":e.lineWidth=te/4,e.setLineDash([]);break;case"solid":e.setLineDash([])}if(le?mp(e,de,we,be,fe,2,"stroke"):e.strokeRect(de,we,be,fe),"double"===je){var Fe=te/2;le?mp(e,de+Fe,we+Fe,be-2*Fe,fe-2*Fe,2,"stroke"):e.strokeRect(de+Fe,we+Fe,be-2*Fe,fe-2*Fe)}e.setLineDash&&e.setLineDash([]),e.lineWidth=Ie,e.strokeStyle=Se}}var ze=2*n.pstyle("text-outline-width").pfValue;if(ze>0&&(e.lineWidth=ze),"wrap"===n.pstyle("text-wrap").value){var Je=Ci(h,"labelWrapCachedLines",i),Re=Ci(h,"labelLineHeight",i),Ge=L/2,st=this.getLabelJustification(n);switch("auto"===st||("left"===G?"left"===st?x+=-L:"center"===st&&(x+=-Ge):"center"===G?"left"===st?x+=-Ge:"right"===st&&(x+=Ge):"right"===G&&("center"===st?x+=Ge:"right"===st&&(x+=L))),$){case"top":case"center":case"bottom":_-=(Je.length-1)*Re}for(var pt=0;pt<Je.length;pt++)ze>0&&e.strokeText(Je[pt],x,_),e.fillText(Je[pt],x,_),_+=Re}else ze>0&&e.strokeText(S,x,_),e.fillText(S,x,_);0!==A&&(e.rotate(-A),e.translate(-g,-y))}}};var Ul={drawNode:function(e,n,i){var o,l,c=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],h=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],f=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],g=this,y=n._private,x=y.rscratch,_=n.position();if(gt(_.x)&&gt(_.y)&&(!f||n.visible())){var S,A,C=f?n.effectiveOpacity():1,L=g.usePaths(),I=!1,P=n.padding();o=n.width()+2*P,l=n.height()+2*P,i&&e.translate(-(A=i).x1,-A.y1);for(var F=n.pstyle("background-image").value,G=new Array(F.length),$=new Array(F.length),X=0,H=0;H<F.length;H++){var te=F[H];if(G[H]=null!=te&&"none"!==te){var ae=n.cy().style().getIndexedStyle(n,"background-image-crossorigin","value",H);X++,$[H]=g.getCachedImage(te,ae,function(){y.backgroundTimestamp=Date.now(),n.emitAndNotify("background")})}}var le=n.pstyle("background-blacken").value,se=n.pstyle("border-width").pfValue,de=n.pstyle("background-opacity").value*C,we=n.pstyle("border-color").value,be=n.pstyle("border-style").value,fe=n.pstyle("border-opacity").value*C,ge=n.pstyle("outline-width").pfValue,ee=n.pstyle("outline-color").value,Se=n.pstyle("outline-style").value,Ie=n.pstyle("outline-opacity").value*C,_e=n.pstyle("outline-offset").value;e.lineJoin="miter";var je=function(){g.eleFillStyle(e,n,arguments.length>0&&void 0!==arguments[0]?arguments[0]:de)},Fe=function(){g.colorStrokeStyle(e,we[0],we[1],we[2],arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe)},ze=function(){g.colorStrokeStyle(e,ee[0],ee[1],ee[2],arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie)},Je=function(rt,bt,mt,wt){var St,jt=g.nodePathCache=g.nodePathCache||[],ln=Gf("polygon"===mt?mt+","+wt.join(","):mt,""+bt,""+rt),pn=jt[ln],Ut=!1;return null!=pn?(Ut=!0,x.pathCache=St=pn):(St=new Path2D,jt[ln]=x.pathCache=St),{path:St,cacheHit:Ut}},Re=n.pstyle("shape").strValue,Ge=n.pstyle("shape-polygon-points").pfValue;if(L){e.translate(_.x,_.y);var st=Je(o,l,Re,Ge);S=st.path,I=st.cacheHit}var pt=function(){if(!I){var rt=_;L&&(rt={x:0,y:0}),g.nodeShapes[g.getNodeShape(n)].draw(S||e,rt.x,rt.y,o,l)}L?e.fill(S):e.fill()},_t=function(){for(var rt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,bt=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],mt=y.backgrounding,wt=0,St=0;St<$.length;St++){var jt=n.cy().style().getIndexedStyle(n,"background-image-containment","value",St);bt&&"over"===jt||!bt&&"inside"===jt?wt++:G[St]&&$[St].complete&&!$[St].error&&(wt++,g.drawInscribedImage(e,$[St],n,St,rt))}y.backgrounding=wt!==X,mt!==y.backgrounding&&n.updateStyle(!1)},We=function(){var rt=arguments.length>0&&void 0!==arguments[0]&&arguments[0],bt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C;g.hasPie(n)&&(g.drawPie(e,n,bt),rt&&(L||g.nodeShapes[g.getNodeShape(n)].draw(e,_.x,_.y,o,l)))},ft=function(){var mt=le>0?0:255;0!==le&&(g.colorFillStyle(e,mt,mt,mt,(le>0?le:-le)*(arguments.length>0&&void 0!==arguments[0]?arguments[0]:C)),L?e.fill(S):e.fill())},vt=function(){if(se>0){if(e.lineWidth=se,e.lineCap="butt",e.setLineDash)switch(be){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash([4,2]);break;case"solid":case"double":e.setLineDash([])}if(L?e.stroke(S):e.stroke(),"double"===be){e.lineWidth=se/3;var rt=e.globalCompositeOperation;e.globalCompositeOperation="destination-out",L?e.stroke(S):e.stroke(),e.globalCompositeOperation=rt}e.setLineDash&&e.setLineDash([])}},ot=function(){if(ge>0){if(e.lineWidth=ge,e.lineCap="butt",e.setLineDash)switch(Se){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash([4,2]);break;case"solid":case"double":e.setLineDash([])}var rt=_;L&&(rt={x:0,y:0});var bt,mt=g.getNodeShape(n),wt=(o+se+(ge+_e))/o,St=(l+se+(ge+_e))/l,jt=o*wt,ln=l*St,pn=g.nodeShapes[mt].points;if(L&&(bt=Je(jt,ln,mt,pn).path),"ellipse"===mt)g.drawEllipsePath(bt||e,rt.x,rt.y,jt,ln);else if(["round-diamond","round-heptagon","round-hexagon","round-octagon","round-pentagon","round-polygon","round-triangle","round-tag"].includes(mt)){var Ut=0,Ln=0,fn=0;"round-diamond"===mt?Ut=1.4*(se+_e+ge):"round-heptagon"===mt?(Ut=1.075*(se+_e+ge),fn=-(se/2+_e+ge)/35):"round-hexagon"===mt?Ut=1.12*(se+_e+ge):"round-pentagon"===mt?(Ut=1.13*(se+_e+ge),fn=-(se/2+_e+ge)/15):"round-tag"===mt?(Ut=1.12*(se+_e+ge),Ln=.07*(se/2+ge+_e)):"round-triangle"===mt&&(Ut=(se+_e+ge)*(Math.PI/2),fn=-(se+_e/2+ge)/Math.PI),0!==Ut&&(wt=(o+Ut)/o,St=(l+Ut)/l),g.drawRoundPolygonPath(bt||e,rt.x+Ln,rt.y+fn,o*wt,l*St,pn)}else["roundrectangle","round-rectangle"].includes(mt)?g.drawRoundRectanglePath(bt||e,rt.x,rt.y,jt,ln):["cutrectangle","cut-rectangle"].includes(mt)?g.drawCutRectanglePath(bt||e,rt.x,rt.y,jt,ln):["bottomroundrectangle","bottom-round-rectangle"].includes(mt)?g.drawBottomRoundRectanglePath(bt||e,rt.x,rt.y,jt,ln):"barrel"===mt?g.drawBarrelPath(bt||e,rt.x,rt.y,jt,ln):mt.startsWith("polygon")||["rhomboid","right-rhomboid","round-tag","tag","vee"].includes(mt)?(pn=Tc(Pc(pn,(se+ge+_e)/o)),g.drawPolygonPath(bt||e,rt.x,rt.y,o,l,pn)):(pn=Tc(Pc(pn,-(se+ge+_e)/o)),g.drawPolygonPath(bt||e,rt.x,rt.y,o,l,pn));if(L?e.stroke(bt):e.stroke(),"double"===Se){e.lineWidth=se/3;var Dr=e.globalCompositeOperation;e.globalCompositeOperation="destination-out",L?e.stroke(bt):e.stroke(),e.globalCompositeOperation=Dr}e.setLineDash&&e.setLineDash([])}};if("yes"===n.pstyle("ghost").value){var Ae=n.pstyle("ghost-offset-x").pfValue,Ze=n.pstyle("ghost-offset-y").pfValue,Ue=n.pstyle("ghost-opacity").value,Ct=Ue*C;e.translate(Ae,Ze),ze(),ot(),je(Ue*de),pt(),_t(Ct,!0),Fe(Ue*fe),vt(),We(0!==le||0!==se),_t(Ct,!1),ft(Ct),e.translate(-Ae,-Ze)}L&&e.translate(-_.x,-_.y),h&&g.drawNodeUnderlay(e,n,_,o,l),L&&e.translate(_.x,_.y),ze(),ot(),je(),pt(),_t(C,!0),Fe(),vt(),We(0!==le||0!==se),_t(C,!1),ft(),L&&e.translate(-_.x,-_.y),g.drawElementText(e,n,null,c),h&&g.drawNodeOverlay(e,n,_,o,l),i&&e.translate(A.x1,A.y1)}}},am=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(n,i,o,l,c){if(i.visible()){var h=i.pstyle("".concat(e,"-padding")).pfValue,f=i.pstyle("".concat(e,"-opacity")).value,g=i.pstyle("".concat(e,"-color")).value,y=i.pstyle("".concat(e,"-shape")).value;if(f>0){if(o=o||i.position(),null==l||null==c){var x=i.padding();l=i.width()+2*x,c=i.height()+2*x}this.colorFillStyle(n,g[0],g[1],g[2],f),this.nodeShapes[y].draw(n,o.x,o.y,l+2*h,c+2*h),n.fill()}}}};Ul.drawNodeOverlay=am("overlay"),Ul.drawNodeUnderlay=am("underlay"),Ul.hasPie=function(e){return(e=e[0])._private.hasPie},Ul.drawPie=function(e,n,i,o){n=n[0],o=o||n.position();var l=n.cy().style(),c=n.pstyle("pie-size"),h=o.x,f=o.y,g=n.width(),y=n.height(),x=Math.min(g,y)/2,_=0;this.usePaths()&&(h=0,f=0),"%"===c.units?x*=c.pfValue:void 0!==c.pfValue&&(x=c.pfValue/2);for(var S=1;S<=l.pieBackgroundN;S++){var A=n.pstyle("pie-"+S+"-background-size").value,C=n.pstyle("pie-"+S+"-background-color").value,L=n.pstyle("pie-"+S+"-background-opacity").value*i,I=A/100;I+_>1&&(I=1-_);var P=1.5*Math.PI+2*Math.PI*_,B=P+2*Math.PI*I;0===A||_>=1||_+I>1||(e.beginPath(),e.moveTo(h,f),e.arc(h,f,x,P,B),e.closePath(),this.colorFillStyle(e,C[0],C[1],C[2],L),e.fill(),_+=I)}};for(var Ur={getPixelRatio:function(){var e=this.data.contexts[0];return null!=this.forcedPixelRatio?this.forcedPixelRatio:(window.devicePixelRatio||1)/(e.backingStorePixelRatio||e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1)},paintCache:function(e){for(var n,i=this.paintCaches=this.paintCaches||[],o=!0,l=0;l<i.length;l++)if((n=i[l]).context===e){o=!1;break}return o&&i.push(n={context:e}),n},createGradientStyleFor:function(e,n,i,o,l){var c,h=this.usePaths(),f=i.pstyle(n+"-gradient-stop-colors").value,g=i.pstyle(n+"-gradient-stop-positions").pfValue;if("radial-gradient"===o)if(i.isEdge()){var y=i.sourceEndpoint(),x=i.targetEndpoint(),_=i.midpoint(),S=Eo(y,_),A=Eo(x,_);c=e.createRadialGradient(_.x,_.y,0,_.x,_.y,Math.max(S,A))}else{var C=h?{x:0,y:0}:i.position(),L=i.paddedWidth(),I=i.paddedHeight();c=e.createRadialGradient(C.x,C.y,0,C.x,C.y,Math.max(L,I))}else if(i.isEdge()){var P=i.sourceEndpoint(),B=i.targetEndpoint();c=e.createLinearGradient(P.x,P.y,B.x,B.y)}else{var F=h?{x:0,y:0}:i.position(),G=i.paddedWidth()/2,$=i.paddedHeight()/2;switch(i.pstyle("background-gradient-direction").value){case"to-bottom":c=e.createLinearGradient(F.x,F.y-$,F.x,F.y+$);break;case"to-top":c=e.createLinearGradient(F.x,F.y+$,F.x,F.y-$);break;case"to-left":c=e.createLinearGradient(F.x+G,F.y,F.x-G,F.y);break;case"to-right":c=e.createLinearGradient(F.x-G,F.y,F.x+G,F.y);break;case"to-bottom-right":case"to-right-bottom":c=e.createLinearGradient(F.x-G,F.y-$,F.x+G,F.y+$);break;case"to-top-right":case"to-right-top":c=e.createLinearGradient(F.x-G,F.y+$,F.x+G,F.y-$);break;case"to-bottom-left":case"to-left-bottom":c=e.createLinearGradient(F.x+G,F.y-$,F.x-G,F.y+$);break;case"to-top-left":case"to-left-top":c=e.createLinearGradient(F.x+G,F.y+$,F.x-G,F.y-$)}}if(!c)return null;for(var X=g.length===f.length,H=f.length,te=0;te<H;te++)c.addColorStop(X?g[te]:te/(H-1),"rgba("+f[te][0]+","+f[te][1]+","+f[te][2]+","+l+")");return c},gradientFillStyle:function(e,n,i,o){var l=this.createGradientStyleFor(e,"background",n,i,o);if(!l)return null;e.fillStyle=l},colorFillStyle:function(e,n,i,o,l){e.fillStyle="rgba("+n+","+i+","+o+","+l+")"},eleFillStyle:function(e,n,i){var o=n.pstyle("background-fill").value;if("linear-gradient"===o||"radial-gradient"===o)this.gradientFillStyle(e,n,o,i);else{var l=n.pstyle("background-color").value;this.colorFillStyle(e,l[0],l[1],l[2],i)}},gradientStrokeStyle:function(e,n,i,o){var l=this.createGradientStyleFor(e,"line",n,i,o);if(!l)return null;e.strokeStyle=l},colorStrokeStyle:function(e,n,i,o,l){e.strokeStyle="rgba("+n+","+i+","+o+","+l+")"},eleStrokeStyle:function(e,n,i){var o=n.pstyle("line-fill").value;if("linear-gradient"===o||"radial-gradient"===o)this.gradientStrokeStyle(e,n,o,i);else{var l=n.pstyle("line-color").value;this.colorStrokeStyle(e,l[0],l[1],l[2],i)}},matchCanvasSize:function(e){var n=this,i=n.data,o=n.findContainerClientCoords(),l=o[2],c=o[3],h=n.getPixelRatio();e!==n.data.bufferCanvases[n.MOTIONBLUR_BUFFER_NODE]&&e!==n.data.bufferCanvases[n.MOTIONBLUR_BUFFER_DRAG]||(h=n.motionBlurPxRatio);var g,y=l*h,x=c*h;if(y!==n.canvasWidth||x!==n.canvasHeight){n.fontCaches=null;var _=i.canvasContainer;_.style.width=l+"px",_.style.height=c+"px";for(var S=0;S<n.CANVAS_LAYERS;S++)(g=i.canvases[S]).width=y,g.height=x,g.style.width=l+"px",g.style.height=c+"px";for(S=0;S<n.BUFFER_COUNT;S++)(g=i.bufferCanvases[S]).width=y,g.height=x,g.style.width=l+"px",g.style.height=c+"px";n.textureMult=1,h<=1&&(g=i.bufferCanvases[n.TEXTURE_BUFFER],n.textureMult=2,g.width=y*n.textureMult,g.height=x*n.textureMult),n.canvasWidth=y,n.canvasHeight=x}},renderTo:function(e,n,i,o){this.render({forcedContext:e,forcedZoom:n,forcedPan:i,drawAllLayers:!0,forcedPxRatio:o})},render:function(e){var n=(e=e||tg()).forcedContext,i=e.drawAllLayers,o=e.drawOnlyNodeLayer,l=e.forcedZoom,c=e.forcedPan,h=this,f=void 0===e.forcedPxRatio?this.getPixelRatio():e.forcedPxRatio,g=h.cy,y=h.data,x=y.canvasNeedsRedraw,_=h.textureOnViewport&&!n&&(h.pinching||h.hoverData.dragging||h.swipePanning||h.data.wheelZooming),S=void 0!==e.motionBlur?e.motionBlur:h.motionBlur,A=h.motionBlurPxRatio,C=g.hasCompoundNodes(),L=h.hoverData.draggingEles,P=S=S&&!n&&h.motionBlurEnabled&&!(h.hoverData.selecting||h.touchData.selecting);n||(h.prevPxRatio!==f&&(h.invalidateContainerClientCoordsCache(),h.matchCanvasSize(h.container),h.redrawHint("eles",!0),h.redrawHint("drag",!0)),h.prevPxRatio=f),!n&&h.motionBlurTimeout&&clearTimeout(h.motionBlurTimeout),S&&(null==h.mbFrames&&(h.mbFrames=0),h.mbFrames++,h.mbFrames<3&&(P=!1),h.mbFrames>h.minMbLowQualFrames&&(h.motionBlurPxRatio=h.mbPxRBlurry)),h.clearingMotionBlur&&(h.motionBlurPxRatio=1),h.textureDrawLastFrame&&!_&&(x[h.NODE]=!0,x[h.SELECT_BOX]=!0);var B=g.style(),F=g.zoom(),G=void 0!==l?l:F,$=g.pan(),X={x:$.x,y:$.y},H={zoom:F,pan:{x:$.x,y:$.y}},te=h.prevViewport;void 0===te||H.zoom!==te.zoom||H.pan.x!==te.pan.x||H.pan.y!==te.pan.y||L&&!C||(h.motionBlurPxRatio=1),c&&(X=c),G*=f,X.x*=f,X.y*=f;var re=h.getCachedZSortedEles();function ae(We,ft,vt,ot,U){var pe=We.globalCompositeOperation;We.globalCompositeOperation="destination-out",h.colorFillStyle(We,255,255,255,h.motionBlurTransparency),We.fillRect(ft,vt,ot,U),We.globalCompositeOperation=pe}function le(We,ft){var vt,ot,U,pe;h.clearingMotionBlur||We!==y.bufferContexts[h.MOTIONBLUR_BUFFER_NODE]&&We!==y.bufferContexts[h.MOTIONBLUR_BUFFER_DRAG]?(vt=X,ot=G,U=h.canvasWidth,pe=h.canvasHeight):(vt={x:$.x*A,y:$.y*A},ot=F*A,U=h.canvasWidth*A,pe=h.canvasHeight*A),We.setTransform(1,0,0,1,0,0),"motionBlur"===ft?ae(We,0,0,U,pe):n||void 0!==ft&&!ft||We.clearRect(0,0,U,pe),i||(We.translate(vt.x,vt.y),We.scale(ot,ot)),c&&We.translate(c.x,c.y),l&&We.scale(l,l)}if(_||(h.textureDrawLastFrame=!1),_){if(h.textureDrawLastFrame=!0,!h.textureCache){h.textureCache={},h.textureCache.bb=g.mutableElements().boundingBox(),h.textureCache.texture=h.data.bufferCanvases[h.TEXTURE_BUFFER];var se=h.data.bufferContexts[h.TEXTURE_BUFFER];se.setTransform(1,0,0,1,0,0),se.clearRect(0,0,h.canvasWidth*h.textureMult,h.canvasHeight*h.textureMult),h.render({forcedContext:se,drawOnlyNodeLayer:!0,forcedPxRatio:f*h.textureMult}),(H=h.textureCache.viewport={zoom:g.zoom(),pan:g.pan(),width:h.canvasWidth,height:h.canvasHeight}).mpan={x:(0-H.pan.x)/H.zoom,y:(0-H.pan.y)/H.zoom}}x[h.DRAG]=!1,x[h.NODE]=!1;var de=y.contexts[h.NODE],we=h.textureCache.texture;H=h.textureCache.viewport,de.setTransform(1,0,0,1,0,0),S?ae(de,0,0,H.width,H.height):de.clearRect(0,0,H.width,H.height);var be=B.core("outside-texture-bg-color").value,fe=B.core("outside-texture-bg-opacity").value;h.colorFillStyle(de,be[0],be[1],be[2],fe),de.fillRect(0,0,H.width,H.height),F=g.zoom(),le(de,!1),de.clearRect(H.mpan.x,H.mpan.y,H.width/H.zoom/f,H.height/H.zoom/f),de.drawImage(we,H.mpan.x,H.mpan.y,H.width/H.zoom/f,H.height/H.zoom/f)}else h.textureOnViewport&&!n&&(h.textureCache=null);var ge=g.extent(),ee=h.pinching||h.hoverData.dragging||h.swipePanning||h.data.wheelZooming||h.hoverData.draggingEles||h.cy.animated(),Se=h.hideEdgesOnViewport&&ee,Ie=[];if(Ie[h.NODE]=!x[h.NODE]&&S&&!h.clearedForMotionBlur[h.NODE]||h.clearingMotionBlur,Ie[h.NODE]&&(h.clearedForMotionBlur[h.NODE]=!0),Ie[h.DRAG]=!x[h.DRAG]&&S&&!h.clearedForMotionBlur[h.DRAG]||h.clearingMotionBlur,Ie[h.DRAG]&&(h.clearedForMotionBlur[h.DRAG]=!0),x[h.NODE]||i||o||Ie[h.NODE]){var _e=S&&!Ie[h.NODE]&&1!==A;le(de=n||(_e?h.data.bufferContexts[h.MOTIONBLUR_BUFFER_NODE]:y.contexts[h.NODE]),S&&!_e?"motionBlur":void 0),Se?h.drawCachedNodes(de,re.nondrag,f,ge):h.drawLayeredElements(de,re.nondrag,f,ge),h.debug&&h.drawDebugPoints(de,re.nondrag),i||S||(x[h.NODE]=!1)}if(!o&&(x[h.DRAG]||i||Ie[h.DRAG])&&(_e=S&&!Ie[h.DRAG]&&1!==A,le(de=n||(_e?h.data.bufferContexts[h.MOTIONBLUR_BUFFER_DRAG]:y.contexts[h.DRAG]),S&&!_e?"motionBlur":void 0),Se?h.drawCachedNodes(de,re.drag,f,ge):h.drawCachedElements(de,re.drag,f,ge),h.debug&&h.drawDebugPoints(de,re.drag),i||S||(x[h.DRAG]=!1)),h.showFps||!o&&x[h.SELECT_BOX]&&!i){if(le(de=n||y.contexts[h.SELECT_BOX]),1==h.selection[4]&&(h.hoverData.selecting||h.touchData.selecting)){F=h.cy.zoom();var je=B.core("selection-box-border-width").value/F;de.lineWidth=je,de.fillStyle="rgba("+B.core("selection-box-color").value[0]+","+B.core("selection-box-color").value[1]+","+B.core("selection-box-color").value[2]+","+B.core("selection-box-opacity").value+")",de.fillRect(h.selection[0],h.selection[1],h.selection[2]-h.selection[0],h.selection[3]-h.selection[1]),je>0&&(de.strokeStyle="rgba("+B.core("selection-box-border-color").value[0]+","+B.core("selection-box-border-color").value[1]+","+B.core("selection-box-border-color").value[2]+","+B.core("selection-box-opacity").value+")",de.strokeRect(h.selection[0],h.selection[1],h.selection[2]-h.selection[0],h.selection[3]-h.selection[1]))}if(y.bgActivePosistion&&!h.hoverData.selecting){F=h.cy.zoom();var Fe=y.bgActivePosistion;de.fillStyle="rgba("+B.core("active-bg-color").value[0]+","+B.core("active-bg-color").value[1]+","+B.core("active-bg-color").value[2]+","+B.core("active-bg-opacity").value+")",de.beginPath(),de.arc(Fe.x,Fe.y,B.core("active-bg-size").pfValue/F,0,2*Math.PI),de.fill()}var ze=h.lastRedrawTime;if(h.showFps&&ze){ze=Math.round(ze);var Je=Math.round(1e3/ze);de.setTransform(1,0,0,1,0,0),de.fillStyle="rgba(255, 0, 0, 0.75)",de.strokeStyle="rgba(255, 0, 0, 0.75)",de.lineWidth=1,de.fillText("1 frame = "+ze+" ms = "+Je+" fps",0,20),de.strokeRect(0,30,250,20),de.fillRect(0,30,250*Math.min(Je/60,1),20)}i||(x[h.SELECT_BOX]=!1)}if(S&&1!==A){var st=y.contexts[h.DRAG],pt=h.data.bufferCanvases[h.MOTIONBLUR_BUFFER_DRAG],_t=function(We,ft,vt){We.setTransform(1,0,0,1,0,0),vt||!P?We.clearRect(0,0,h.canvasWidth,h.canvasHeight):ae(We,0,0,h.canvasWidth,h.canvasHeight),We.drawImage(ft,0,0,h.canvasWidth*A,h.canvasHeight*A,0,0,h.canvasWidth,h.canvasHeight)};(x[h.NODE]||Ie[h.NODE])&&(_t(y.contexts[h.NODE],h.data.bufferCanvases[h.MOTIONBLUR_BUFFER_NODE],Ie[h.NODE]),x[h.NODE]=!1),(x[h.DRAG]||Ie[h.DRAG])&&(_t(st,pt,Ie[h.DRAG]),x[h.DRAG]=!1)}h.prevViewport=H,h.clearingMotionBlur&&(h.clearingMotionBlur=!1,h.motionBlurCleared=!0,h.motionBlur=!0),S&&(h.motionBlurTimeout=setTimeout(function(){h.motionBlurTimeout=null,h.clearedForMotionBlur[h.NODE]=!1,h.clearedForMotionBlur[h.DRAG]=!1,h.motionBlur=!1,h.clearingMotionBlur=!_,h.mbFrames=0,x[h.NODE]=!0,x[h.DRAG]=!0,h.redraw()},100)),n||g.emit("render")}},om={drawPolygonPath:function(e,n,i,o,l,c){var h=o/2,f=l/2;e.beginPath&&e.beginPath(),e.moveTo(n+h*c[0],i+f*c[1]);for(var g=1;g<c.length/2;g++)e.lineTo(n+h*c[2*g],i+f*c[2*g+1]);e.closePath()},drawRoundPolygonPath:function(e,n,i,o,l,c){var h=o/2,f=l/2,g=Oh(o,l);e.beginPath&&e.beginPath();for(var y=0;y<c.length/4;y++){var x,_;_=0===y?c.length-2:4*y-2,x=4*y+2;var S=n+h*c[4*y],A=i+f*c[4*y+1],L=g/Math.tan(Math.acos(-c[_]*c[x]-c[_+1]*c[x+1])/2),I=S-L*c[_],P=A-L*c[_+1],B=S+L*c[x],F=A+L*c[x+1];0===y?e.moveTo(I,P):e.lineTo(I,P),e.arcTo(S,A,B,F,g)}e.closePath()},drawRoundRectanglePath:function(e,n,i,o,l){var c=o/2,h=l/2,f=Il(o,l);e.beginPath&&e.beginPath(),e.moveTo(n,i-h),e.arcTo(n+c,i-h,n+c,i,f),e.arcTo(n+c,i+h,n,i+h,f),e.arcTo(n-c,i+h,n-c,i,f),e.arcTo(n-c,i-h,n,i-h,f),e.lineTo(n,i-h),e.closePath()},drawBottomRoundRectanglePath:function(e,n,i,o,l){var c=o/2,h=l/2,f=Il(o,l);e.beginPath&&e.beginPath(),e.moveTo(n,i-h),e.lineTo(n+c,i-h),e.lineTo(n+c,i),e.arcTo(n+c,i+h,n,i+h,f),e.arcTo(n-c,i+h,n-c,i,f),e.lineTo(n-c,i-h),e.lineTo(n,i-h),e.closePath()},drawCutRectanglePath:function(e,n,i,o,l){var c=o/2,h=l/2;e.beginPath&&e.beginPath(),e.moveTo(n-c+8,i-h),e.lineTo(n+c-8,i-h),e.lineTo(n+c,i-h+8),e.lineTo(n+c,i+h-8),e.lineTo(n+c-8,i+h),e.lineTo(n-c+8,i+h),e.lineTo(n-c,i+h-8),e.lineTo(n-c,i-h+8),e.closePath()},drawBarrelPath:function(e,n,i,o,l){var c=o/2,h=l/2,f=n-c,g=n+c,y=i-h,x=i+h,_=Nh(o,l),S=_.widthOffset,A=_.heightOffset,C=_.ctrlPtOffsetPct*S;e.beginPath&&e.beginPath(),e.moveTo(f,y+A),e.lineTo(f,x-A),e.quadraticCurveTo(f+C,x,f+S,x),e.lineTo(g-S,x),e.quadraticCurveTo(g-C,x,g,x-A),e.lineTo(g,y+A),e.quadraticCurveTo(g-C,y,g-S,y),e.lineTo(f+S,y),e.quadraticCurveTo(f+C,y,f,y+A),e.closePath()}},sm=Math.sin(0),lm=Math.cos(0),yp={},bp={},um=Math.PI/40,Bs=0*Math.PI;Bs<2*Math.PI;Bs+=um)yp[Bs]=Math.sin(Bs),bp[Bs]=Math.cos(Bs);om.drawEllipsePath=function(e,n,i,o,l){if(e.beginPath&&e.beginPath(),e.ellipse)e.ellipse(n,i,o/2,l/2,0,0,2*Math.PI);else for(var c,h,f=o/2,g=l/2,y=0*Math.PI;y<2*Math.PI;y+=um)c=n-f*yp[y]*sm+f*bp[y]*lm,h=i+g*bp[y]*sm+g*yp[y]*lm,0===y?e.moveTo(c,h):e.lineTo(c,h);e.closePath()};var Zl={};function cm(e){var n=e.indexOf(",");return e.substr(n+1)}function dm(e,n,i){var o=function(){return n.toDataURL(i,e.quality)};switch(e.output){case"blob-promise":return new vs(function(l,c){try{n.toBlob(function(h){null!=h?l(h):c(new Error("`canvas.toBlob()` sent a null value in its callback"))},i,e.quality)}catch(h){c(h)}});case"blob":return function(l,c){for(var h=atob(l),f=new ArrayBuffer(h.length),g=new Uint8Array(f),y=0;y<h.length;y++)g[y]=h.charCodeAt(y);return new Blob([f],{type:c})}(cm(o()),i);case"base64":return cm(o());default:return o()}}Zl.createBuffer=function(e,n){var i=document.createElement("canvas");return i.width=e,i.height=n,[i,i.getContext("2d")]},Zl.bufferCanvasImage=function(e){var n=this.cy,i=n.mutableElements().boundingBox(),o=this.findContainerClientCoords(),l=e.full?Math.ceil(i.w):o[2],c=e.full?Math.ceil(i.h):o[3],h=gt(e.maxWidth)||gt(e.maxHeight),f=this.getPixelRatio(),g=1;if(void 0!==e.scale)l*=e.scale,c*=e.scale,g=e.scale;else if(h){var y=1/0,x=1/0;gt(e.maxWidth)&&(y=g*e.maxWidth/l),gt(e.maxHeight)&&(x=g*e.maxHeight/c),l*=g=Math.min(y,x),c*=g}h||(l*=f,c*=f,g*=f);var _=document.createElement("canvas");_.width=l,_.height=c,_.style.width=l+"px",_.style.height=c+"px";var S=_.getContext("2d");if(l>0&&c>0){S.clearRect(0,0,l,c),S.globalCompositeOperation="source-over";var A=this.getCachedZSortedEles();if(e.full)S.translate(-i.x1*g,-i.y1*g),S.scale(g,g),this.drawElements(S,A),S.scale(1/g,1/g),S.translate(i.x1*g,i.y1*g);else{var C=n.pan(),L={x:C.x*g,y:C.y*g};g*=n.zoom(),S.translate(L.x,L.y),S.scale(g,g),this.drawElements(S,A),S.scale(1/g,1/g),S.translate(-L.x,-L.y)}e.bg&&(S.globalCompositeOperation="destination-over",S.fillStyle=e.bg,S.rect(0,0,l,c),S.fill())}return _},Zl.png=function(e){return dm(e,this.bufferCanvasImage(e),"image/png")},Zl.jpg=function(e){return dm(e,this.bufferCanvasImage(e),"image/jpeg")};var Tx={nodeShapeImpl:function(e,n,i,o,l,c,h){switch(e){case"ellipse":return this.drawEllipsePath(n,i,o,l,c);case"polygon":return this.drawPolygonPath(n,i,o,l,c,h);case"round-polygon":return this.drawRoundPolygonPath(n,i,o,l,c,h);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(n,i,o,l,c);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(n,i,o,l,c);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(n,i,o,l,c);case"barrel":return this.drawBarrelPath(n,i,o,l,c)}}},Px=hm,sn=hm.prototype;function hm(e){var n=this;n.data={canvases:new Array(sn.CANVAS_LAYERS),contexts:new Array(sn.CANVAS_LAYERS),canvasNeedsRedraw:new Array(sn.CANVAS_LAYERS),bufferCanvases:new Array(sn.BUFFER_COUNT),bufferContexts:new Array(sn.CANVAS_LAYERS)},n.data.canvasContainer=document.createElement("div");var i=n.data.canvasContainer.style;n.data.canvasContainer.style["-webkit-tap-highlight-color"]="rgba(0,0,0,0)",i.position="relative",i.zIndex="0",i.overflow="hidden";var o=e.cy.container();o.appendChild(n.data.canvasContainer),o.style["-webkit-tap-highlight-color"]="rgba(0,0,0,0)";var l={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};Lf&&Lf.userAgent.match(/msie|trident|edge/i)&&(l["-ms-touch-action"]="none",l["touch-action"]="none");for(var c=0;c<sn.CANVAS_LAYERS;c++){var h=n.data.canvases[c]=document.createElement("canvas");n.data.contexts[c]=h.getContext("2d"),Object.keys(l).forEach(function(X){h.style[X]=l[X]}),h.style.position="absolute",h.setAttribute("data-id","layer"+c),h.style.zIndex=String(sn.CANVAS_LAYERS-c),n.data.canvasContainer.appendChild(h),n.data.canvasNeedsRedraw[c]=!1}for(n.data.topCanvas=n.data.canvases[0],n.data.canvases[sn.NODE].setAttribute("data-id","layer"+sn.NODE+"-node"),n.data.canvases[sn.SELECT_BOX].setAttribute("data-id","layer"+sn.SELECT_BOX+"-selectbox"),n.data.canvases[sn.DRAG].setAttribute("data-id","layer"+sn.DRAG+"-drag"),c=0;c<sn.BUFFER_COUNT;c++)n.data.bufferCanvases[c]=document.createElement("canvas"),n.data.bufferContexts[c]=n.data.bufferCanvases[c].getContext("2d"),n.data.bufferCanvases[c].style.position="absolute",n.data.bufferCanvases[c].setAttribute("data-id","buffer"+c),n.data.bufferCanvases[c].style.zIndex=String(-c-1),n.data.bufferCanvases[c].style.visibility="hidden";n.pathsEnabled=!0;var f=jr(),g=function(X){return{x:-X.w/2,y:-X.h/2}},y=function(X){return X.boundingBox(),X[0]._private.bodyBounds},x=function(X){return X.boundingBox(),X[0]._private.labelBounds.main||f},_=function(X){return X.boundingBox(),X[0]._private.labelBounds.source||f},S=function(X){return X.boundingBox(),X[0]._private.labelBounds.target||f},A=function(X,H){return H},C=function(X,H,te){var re=X?X+"-":"";return{x:H.x+te.pstyle(re+"text-margin-x").pfValue,y:H.y+te.pstyle(re+"text-margin-y").pfValue}},L=function(X,H,te){var re=X[0]._private.rscratch;return{x:re[H],y:re[te]}},I=n.data.eleTxrCache=new Gl(n,{getKey:function(X){return X[0]._private.nodeKey},doesEleInvalidateKey:function(X){var H=X[0]._private;return H.oldBackgroundTimestamp!==H.backgroundTimestamp},drawElement:function(X,H,te,re,ae){return n.drawElement(X,H,te,!1,!1,ae)},getBoundingBox:y,getRotationPoint:function(X){return{x:((H=y(X)).x1+H.x2)/2,y:(H.y1+H.y2)/2};var H},getRotationOffset:function(X){return g(y(X))},allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),P=n.data.lblTxrCache=new Gl(n,{getKey:function(X){return X[0]._private.labelStyleKey},drawElement:function(X,H,te,re,ae){return n.drawElementText(X,H,te,re,"main",ae)},getBoundingBox:x,getRotationPoint:function(X){return C("",L(X,"labelX","labelY"),X)},getRotationOffset:function(X){var H=x(X),te=g(x(X));if(X.isNode()){switch(X.pstyle("text-halign").value){case"left":te.x=-H.w;break;case"right":te.x=0}switch(X.pstyle("text-valign").value){case"top":te.y=-H.h;break;case"bottom":te.y=0}}return te},isVisible:A}),B=n.data.slbTxrCache=new Gl(n,{getKey:function(X){return X[0]._private.sourceLabelStyleKey},drawElement:function(X,H,te,re,ae){return n.drawElementText(X,H,te,re,"source",ae)},getBoundingBox:_,getRotationPoint:function(X){return C("source",L(X,"sourceLabelX","sourceLabelY"),X)},getRotationOffset:function(X){return g(_(X))},isVisible:A}),F=n.data.tlbTxrCache=new Gl(n,{getKey:function(X){return X[0]._private.targetLabelStyleKey},drawElement:function(X,H,te,re,ae){return n.drawElementText(X,H,te,re,"target",ae)},getBoundingBox:S,getRotationPoint:function(X){return C("target",L(X,"targetLabelX","targetLabelY"),X)},getRotationOffset:function(X){return g(S(X))},isVisible:A}),G=n.data.lyrTxrCache=new Jv(n);n.onUpdateEleCalcs(function(X,H){I.invalidateElements(H),P.invalidateElements(H),B.invalidateElements(H),F.invalidateElements(H),G.invalidateElements(H);for(var te=0;te<H.length;te++){var re=H[te]._private;re.oldBackgroundTimestamp=re.backgroundTimestamp}});var $=function(X){for(var H=0;H<X.length;H++)G.enqueueElementRefinement(X[H].ele)};I.onDequeue($),P.onDequeue($),B.onDequeue($),F.onDequeue($)}sn.CANVAS_LAYERS=3,sn.SELECT_BOX=0,sn.DRAG=1,sn.NODE=2,sn.BUFFER_COUNT=3,sn.TEXTURE_BUFFER=0,sn.MOTIONBLUR_BUFFER_NODE=1,sn.MOTIONBLUR_BUFFER_DRAG=2,sn.redrawHint=function(e,n){var i=this;switch(e){case"eles":i.data.canvasNeedsRedraw[sn.NODE]=n;break;case"drag":i.data.canvasNeedsRedraw[sn.DRAG]=n;break;case"select":i.data.canvasNeedsRedraw[sn.SELECT_BOX]=n}};var Dx=typeof Path2D<"u";sn.path2dEnabled=function(e){if(void 0===e)return this.pathsEnabled;this.pathsEnabled=!!e},sn.usePaths=function(){return Dx&&this.pathsEnabled},sn.setImgSmoothing=function(e,n){null!=e.imageSmoothingEnabled?e.imageSmoothingEnabled=n:(e.webkitImageSmoothingEnabled=n,e.mozImageSmoothingEnabled=n,e.msImageSmoothingEnabled=n)},sn.getImgSmoothing=function(e){return null!=e.imageSmoothingEnabled?e.imageSmoothingEnabled:e.webkitImageSmoothingEnabled||e.mozImageSmoothingEnabled||e.msImageSmoothingEnabled},sn.makeOffscreenCanvas=function(e,n){var i;return"undefined"!==(typeof OffscreenCanvas>"u"?"undefined":Zn(OffscreenCanvas))?i=new OffscreenCanvas(e,n):((i=document.createElement("canvas")).width=e,i.height=n),i},[nm,As,Xa,Sx,Po,Ul,Ur,om,Zl,Tx].forEach(function(e){It(sn,e)});var Mx=[{type:"layout",extensions:ox},{type:"renderer",extensions:[{name:"null",impl:Vv},{name:"base",impl:Zv},{name:"canvas",impl:Px}]}],pm={},fm={};function gm(e,n,i){var o=i,l=function(X){gn("Can not register `"+n+"` for `"+e+"` since `"+X+"` already exists in the prototype and can not be overridden")};if("core"===e){if($l.prototype[n])return l(n);$l.prototype[n]=i}else if("collection"===e){if(dr.prototype[n])return l(n);dr.prototype[n]=i}else if("layout"===e){for(var c=function(X){this.options=X,i.call(this,X),en(this._private)||(this._private={}),this._private.cy=X.cy,this._private.listeners=[],this.createEmitter()},h=c.prototype=Object.create(i.prototype),f=[],g=0;g<f.length;g++){var y=f[g];h[y]=h[y]||function(){return this}}h.start&&!h.run?h.run=function(){return this.start(),this}:!h.start&&h.run&&(h.start=function(){return this.run(),this});var x=i.prototype.stop;h.stop=function(){var X=this.options;if(X&&X.animate){var H=this.animations;if(H)for(var te=0;te<H.length;te++)H[te].stop()}return x?x.call(this):this.emit("layoutstop"),this},h.destroy||(h.destroy=function(){return this}),h.cy=function(){return this._private.cy};var _=function(X){return X._private.cy},S={addEventFields:function(X,H){H.layout=X,H.cy=_(X),H.target=X},bubble:function(){return!0},parent:function(X){return _(X)}};It(h,{createEmitter:function(){return this._private.emitter=new $c(S,this),this},emitter:function(){return this._private.emitter},on:function(X,H){return this.emitter().on(X,H),this},one:function(X,H){return this.emitter().one(X,H),this},once:function(X,H){return this.emitter().one(X,H),this},removeListener:function(X,H){return this.emitter().removeListener(X,H),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(X,H){return this.emitter().emit(X,H),this}}),vn.eventAliasesOn(h),o=c}else if("renderer"===e&&"null"!==n&&"base"!==n){var A=vm("renderer","base"),C=A.prototype,L=i,I=i.prototype,P=function(){A.apply(this,arguments),L.apply(this,arguments)},B=P.prototype;for(var F in C){var G=C[F];if(null!=I[F])return l(F);B[F]=G}for(var $ in I)B[$]=I[$];C.clientFunctions.forEach(function(X){B[X]=B[X]||function(){zn("Renderer does not implement `renderer."+X+"()` on its prototype")}}),o=P}else if("__proto__"===e||"constructor"===e||"prototype"===e)return zn(e+" is an illegal type to be registered, possibly lead to prototype pollutions");return Vf({map:pm,keys:[e,n],value:o})}function vm(e,n){return jf({map:pm,keys:[e,n]})}function Ax(e,n,i,o,l){return Vf({map:fm,keys:[e,n,i,o],value:l})}function Bx(e,n,i,o){return jf({map:fm,keys:[e,n,i,o]})}var xp=function(){return 2===arguments.length?vm.apply(null,arguments):3===arguments.length?gm.apply(null,arguments):4===arguments.length?Bx.apply(null,arguments):5===arguments.length?Ax.apply(null,arguments):void zn("Invalid extension access syntax")};$l.prototype.extension=xp,Mx.forEach(function(e){e.extensions.forEach(function(n){gm(e.type,n.name,n.impl)})});var mm=function e(){if(!(this instanceof e))return new e;this.length=0},Do=mm.prototype;Do.instanceString=function(){return"stylesheet"},Do.selector=function(e){return this[this.length++]={selector:e,properties:[]},this},Do.css=function(e,n){var i=this.length-1;if(Ot(e))this[i].properties.push({name:e,value:n});else if(en(e))for(var o=e,l=Object.keys(o),c=0;c<l.length;c++){var h=l[c],f=o[h];if(null!=f){var g=Sr.properties[h]||Sr.properties[vc(h)];null!=g&&this[i].properties.push({name:g.name,value:f})}}return this},Do.style=Do.css,Do.generateStyle=function(e){var n=new Sr(e);return this.appendToStyle(n)},Do.appendToStyle=function(e){for(var n=0;n<this.length;n++){var i=this[n],l=i.properties;e.selector(i.selector);for(var c=0;c<l.length;c++){var h=l[c];e.css(h.name,h.value)}}return e};var Mo=function(e){return void 0===e&&(e={}),en(e)?new $l(e):Ot(e)?xp.apply(xp,arguments):void 0};Mo.use=function(e){var n=Array.prototype.slice.call(arguments,1);return n.unshift(Mo),e.apply(null,n),this},Mo.warnings=function(e){return Jf(e)},Mo.version="3.28.1",Mo.stylesheet=Mo.Stylesheet=mm;export{Mo as default};!function(e,n){"object"==typeof exports&&typeof module<"u"?module.exports=n():"function"==typeof define&&define.amd?define(n):(e=typeof globalThis<"u"?globalThis:e||self).bootstrap=n()}(void 0,function(){"use strict";const e=new Map,n={set(q,E,N){e.has(q)||e.set(q,new Map);const J=e.get(q);J.has(E)||0===J.size?J.set(E,N):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(J.keys())[0]}.`)},get:(q,E)=>e.has(q)&&e.get(q).get(E)||null,remove(q,E){if(!e.has(q))return;const N=e.get(q);N.delete(E),0===N.size&&e.delete(q)}},i="transitionend",o=q=>(q&&window.CSS&&window.CSS.escape&&(q=q.replace(/#([^\s"#']+)/g,(E,N)=>`#${CSS.escape(N)}`)),q),l=q=>{q.dispatchEvent(new Event(i))},c=q=>!(!q||"object"!=typeof q)&&(void 0!==q.jquery&&(q=q[0]),void 0!==q.nodeType),h=q=>c(q)?q.jquery?q[0]:q:"string"==typeof q&&q.length>0?document.querySelector(o(q)):null,f=q=>{if(!c(q)||0===q.getClientRects().length)return!1;const E="visible"===getComputedStyle(q).getPropertyValue("visibility"),N=q.closest("details:not([open])");if(!N)return E;if(N!==q){const J=q.closest("summary");if(J&&J.parentNode!==N||null===J)return!1}return E},g=q=>!q||q.nodeType!==Node.ELEMENT_NODE||!!q.classList.contains("disabled")||(void 0!==q.disabled?q.disabled:q.hasAttribute("disabled")&&"false"!==q.getAttribute("disabled")),y=q=>{if(!document.documentElement.attachShadow)return null;if("function"==typeof q.getRootNode){const E=q.getRootNode();return E instanceof ShadowRoot?E:null}return q instanceof ShadowRoot?q:q.parentNode?y(q.parentNode):null},x=()=>{},S=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,A=[],C=()=>"rtl"===document.documentElement.dir,L=q=>{var E;E=()=>{const N=S();if(N){const J=q.NAME,Ee=N.fn[J];N.fn[J]=q.jQueryInterface,N.fn[J].Constructor=q,N.fn[J].noConflict=()=>(N.fn[J]=Ee,q.jQueryInterface)}},"loading"===document.readyState?(A.length||document.addEventListener("DOMContentLoaded",()=>{for(const N of A)N()}),A.push(E)):E()},I=(q,E=[],N=q)=>"function"==typeof q?q(...E):N,P=(q,E,N=!0)=>{if(!N)return void I(q);const J=(Xe=>{if(!Xe)return 0;let{transitionDuration:Ke,transitionDelay:ut}=window.getComputedStyle(Xe);const Et=Number.parseFloat(Ke),lt=Number.parseFloat(ut);return Et||lt?(Ke=Ke.split(",")[0],ut=ut.split(",")[0],1e3*(Number.parseFloat(Ke)+Number.parseFloat(ut))):0})(E)+5;let Ee=!1;const Pe=({target:Xe})=>{Xe===E&&(Ee=!0,E.removeEventListener(i,Pe),I(q))};E.addEventListener(i,Pe),setTimeout(()=>{Ee||l(E)},J)},B=(q,E,N,J)=>{const Ee=q.length;let Pe=q.indexOf(E);return-1===Pe?!N&&J?q[Ee-1]:q[0]:(Pe+=N?1:-1,J&&(Pe=(Pe+Ee)%Ee),q[Math.max(0,Math.min(Pe,Ee-1))])},F=/[^.]*(?=\..*)\.|.*/,G=/\..*/,$=/::\d+$/,X={};let H=1;const te={mouseenter:"mouseover",mouseleave:"mouseout"},re=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function ae(q,E){return E&&`${E}::${H++}`||q.uidEvent||H++}function le(q){const E=ae(q);return q.uidEvent=E,X[E]=X[E]||{},X[E]}function se(q,E,N=null){return Object.values(q).find(J=>J.callable===E&&J.delegationSelector===N)}function de(q,E,N){const J="string"==typeof E,Ee=J?N:E||N;let Pe=ge(q);return re.has(Pe)||(Pe=q),[J,Ee,Pe]}function we(q,E,N,J,Ee){if("string"!=typeof E||!q)return;let[Pe,Xe,Ke]=de(E,N,J);var Nt;E in te&&(Nt=Xe,Xe=function(zt){if(!zt.relatedTarget||zt.relatedTarget!==zt.delegateTarget&&!zt.delegateTarget.contains(zt.relatedTarget))return Nt.call(this,zt)});const ut=le(q),Et=ut[Ke]||(ut[Ke]={}),lt=se(Et,Xe,Pe?N:null);if(lt)return void(lt.oneOff=lt.oneOff&&Ee);const tt=ae(Xe,E.replace(F,"")),Rt=Pe?function(At,Nt,zt){return function Ft(Xt){const Qt=At.querySelectorAll(Nt);for(let{target:qt}=Xt;qt&&qt!==this;qt=qt.parentNode)for(const Gt of Qt)if(Gt===qt)return Se(Xt,{delegateTarget:qt}),Ft.oneOff&&ee.off(At,Xt.type,Nt,zt),zt.apply(qt,[Xt])}}(q,N,Xe):function(At,Nt){return function zt(Ft){return Se(Ft,{delegateTarget:At}),zt.oneOff&&ee.off(At,Ft.type,Nt),Nt.apply(At,[Ft])}}(q,Xe);Rt.delegationSelector=Pe?N:null,Rt.callable=Xe,Rt.oneOff=Ee,Rt.uidEvent=tt,Et[tt]=Rt,q.addEventListener(Ke,Rt,Pe)}function be(q,E,N,J,Ee){const Pe=se(E[N],J,Ee);Pe&&(q.removeEventListener(N,Pe,!!Ee),delete E[N][Pe.uidEvent])}function fe(q,E,N,J){const Ee=E[N]||{};for(const[Pe,Xe]of Object.entries(Ee))Pe.includes(J)&&be(q,E,N,Xe.callable,Xe.delegationSelector)}function ge(q){return q=q.replace(G,""),te[q]||q}const ee={on(q,E,N,J){we(q,E,N,J,!1)},one(q,E,N,J){we(q,E,N,J,!0)},off(q,E,N,J){if("string"!=typeof E||!q)return;const[Ee,Pe,Xe]=de(E,N,J),Ke=Xe!==E,ut=le(q),Et=ut[Xe]||{},lt=E.startsWith(".");if(void 0===Pe){if(lt)for(const tt of Object.keys(ut))fe(q,ut,tt,E.slice(1));for(const[tt,Rt]of Object.entries(Et)){const At=tt.replace($,"");Ke&&!E.includes(At)||be(q,ut,Xe,Rt.callable,Rt.delegationSelector)}}else{if(!Object.keys(Et).length)return;be(q,ut,Xe,Pe,Ee?N:null)}},trigger(q,E,N){if("string"!=typeof E||!q)return null;const J=S();let Ee=null,Pe=!0,Xe=!0,Ke=!1;E!==ge(E)&&J&&(Ee=J.Event(E,N),J(q).trigger(Ee),Pe=!Ee.isPropagationStopped(),Xe=!Ee.isImmediatePropagationStopped(),Ke=Ee.isDefaultPrevented());const ut=Se(new Event(E,{bubbles:Pe,cancelable:!0}),N);return Ke&&ut.preventDefault(),Xe&&q.dispatchEvent(ut),ut.defaultPrevented&&Ee&&Ee.preventDefault(),ut}};function Se(q,E={}){for(const[N,J]of Object.entries(E))try{q[N]=J}catch{Object.defineProperty(q,N,{configurable:!0,get:()=>J})}return q}function Ie(q){if("true"===q)return!0;if("false"===q)return!1;if(q===Number(q).toString())return Number(q);if(""===q||"null"===q)return null;if("string"!=typeof q)return q;try{return JSON.parse(decodeURIComponent(q))}catch{return q}}function _e(q){return q.replace(/[A-Z]/g,E=>`-${E.toLowerCase()}`)}const je={setDataAttribute(q,E,N){q.setAttribute(`data-bs-${_e(E)}`,N)},removeDataAttribute(q,E){q.removeAttribute(`data-bs-${_e(E)}`)},getDataAttributes(q){if(!q)return{};const E={},N=Object.keys(q.dataset).filter(J=>J.startsWith("bs")&&!J.startsWith("bsConfig"));for(const J of N){let Ee=J.replace(/^bs/,"");Ee=Ee.charAt(0).toLowerCase()+Ee.slice(1,Ee.length),E[Ee]=Ie(q.dataset[J])}return E},getDataAttribute:(q,E)=>Ie(q.getAttribute(`data-bs-${_e(E)}`))};class Fe{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(E){return E=this._mergeConfigObj(E),E=this._configAfterMerge(E),this._typeCheckConfig(E),E}_configAfterMerge(E){return E}_mergeConfigObj(E,N){const J=c(N)?je.getDataAttribute(N,"config"):{};return{...this.constructor.Default,..."object"==typeof J?J:{},...c(N)?je.getDataAttributes(N):{},..."object"==typeof E?E:{}}}_typeCheckConfig(E,N=this.constructor.DefaultType){for(const[Ee,Pe]of Object.entries(N)){const Xe=E[Ee],Ke=c(Xe)?"element":null==(J=Xe)?`${J}`:Object.prototype.toString.call(J).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(Pe).test(Ke))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${Ee}" provided type "${Ke}" but expected type "${Pe}".`)}var J}}class ze extends Fe{constructor(E,N){super(),(E=h(E))&&(this._element=E,this._config=this._getConfig(N),n.set(this._element,this.constructor.DATA_KEY,this))}dispose(){n.remove(this._element,this.constructor.DATA_KEY),ee.off(this._element,this.constructor.EVENT_KEY);for(const E of Object.getOwnPropertyNames(this))this[E]=null}_queueCallback(E,N,J=!0){P(E,N,J)}_getConfig(E){return E=this._mergeConfigObj(E,this._element),E=this._configAfterMerge(E),this._typeCheckConfig(E),E}static getInstance(E){return n.get(h(E),this.DATA_KEY)}static getOrCreateInstance(E,N={}){return this.getInstance(E)||new this(E,"object"==typeof N?N:null)}static get VERSION(){return"5.3.3"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(E){return`${E}${this.EVENT_KEY}`}}const Je=q=>{let E=q.getAttribute("data-bs-target");if(!E||"#"===E){let N=q.getAttribute("href");if(!N||!N.includes("#")&&!N.startsWith("."))return null;N.includes("#")&&!N.startsWith("#")&&(N=`#${N.split("#")[1]}`),E=N&&"#"!==N?N.trim():null}return E?E.split(",").map(N=>o(N)).join(","):null},Re={find:(q,E=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(E,q)),findOne:(q,E=document.documentElement)=>Element.prototype.querySelector.call(E,q),children:(q,E)=>[].concat(...q.children).filter(N=>N.matches(E)),parents(q,E){const N=[];let J=q.parentNode.closest(E);for(;J;)N.push(J),J=J.parentNode.closest(E);return N},prev(q,E){let N=q.previousElementSibling;for(;N;){if(N.matches(E))return[N];N=N.previousElementSibling}return[]},next(q,E){let N=q.nextElementSibling;for(;N;){if(N.matches(E))return[N];N=N.nextElementSibling}return[]},focusableChildren(q){const E=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(N=>`${N}:not([tabindex^="-"])`).join(",");return this.find(E,q).filter(N=>!g(N)&&f(N))},getSelectorFromElement(q){const E=Je(q);return E&&Re.findOne(E)?E:null},getElementFromSelector(q){const E=Je(q);return E?Re.findOne(E):null},getMultipleElementsFromSelector(q){const E=Je(q);return E?Re.find(E):[]}},Ge=(q,E="hide")=>{const J=q.NAME;ee.on(document,`click.dismiss${q.EVENT_KEY}`,`[data-bs-dismiss="${J}"]`,function(Ee){if(["A","AREA"].includes(this.tagName)&&Ee.preventDefault(),g(this))return;const Pe=Re.getElementFromSelector(this)||this.closest(`.${J}`);q.getOrCreateInstance(Pe)[E]()})},st=".bs.alert",pt=`close${st}`,_t=`closed${st}`;class We extends ze{static get NAME(){return"alert"}close(){if(ee.trigger(this._element,pt).defaultPrevented)return;this._element.classList.remove("show");const E=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,E)}_destroyElement(){this._element.remove(),ee.trigger(this._element,_t),this.dispose()}static jQueryInterface(E){return this.each(function(){const N=We.getOrCreateInstance(this);if("string"==typeof E){if(void 0===N[E]||E.startsWith("_")||"constructor"===E)throw new TypeError(`No method named "${E}"`);N[E](this)}})}}Ge(We,"close"),L(We);const ft='[data-bs-toggle="button"]';class vt extends ze{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(E){return this.each(function(){const N=vt.getOrCreateInstance(this);"toggle"===E&&N[E]()})}}ee.on(document,"click.bs.button.data-api",ft,q=>{q.preventDefault();const E=q.target.closest(ft);vt.getOrCreateInstance(E).toggle()}),L(vt);const ot=".bs.swipe",U=`touchstart${ot}`,pe=`touchmove${ot}`,Ce=`touchend${ot}`,Oe=`pointerdown${ot}`,Ae=`pointerup${ot}`,Ze={endCallback:null,leftCallback:null,rightCallback:null},Ue={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Ct extends Fe{constructor(E,N){super(),this._element=E,E&&Ct.isSupported()&&(this._config=this._getConfig(N),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return Ze}static get DefaultType(){return Ue}static get NAME(){return"swipe"}dispose(){ee.off(this._element,ot)}_start(E){this._supportPointerEvents?this._eventIsPointerPenTouch(E)&&(this._deltaX=E.clientX):this._deltaX=E.touches[0].clientX}_end(E){this._eventIsPointerPenTouch(E)&&(this._deltaX=E.clientX-this._deltaX),this._handleSwipe(),I(this._config.endCallback)}_move(E){this._deltaX=E.touches&&E.touches.length>1?0:E.touches[0].clientX-this._deltaX}_handleSwipe(){const E=Math.abs(this._deltaX);if(E<=40)return;const N=E/this._deltaX;this._deltaX=0,N&&I(N>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(ee.on(this._element,Oe,E=>this._start(E)),ee.on(this._element,Ae,E=>this._end(E)),this._element.classList.add("pointer-event")):(ee.on(this._element,U,E=>this._start(E)),ee.on(this._element,pe,E=>this._move(E)),ee.on(this._element,Ce,E=>this._end(E)))}_eventIsPointerPenTouch(E){return this._supportPointerEvents&&("pen"===E.pointerType||"touch"===E.pointerType)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const rt=".bs.carousel",bt=".data-api",mt="next",wt="prev",St="left",jt="right",ln=`slide${rt}`,pn=`slid${rt}`,Ut=`keydown${rt}`,Ln=`mouseenter${rt}`,fn=`mouseleave${rt}`,Dr=`dragstart${rt}`,Zr=`load${rt}${bt}`,Rn=`click${rt}${bt}`,Sn="carousel",Xr="active",Yr=".active",Jn=".carousel-item",Mr=Yr+Jn,Yn={ArrowLeft:jt,ArrowRight:St},da={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Ar={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Hr extends ze{constructor(E,N){super(E,N),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=Re.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===Sn&&this.cycle()}static get Default(){return da}static get DefaultType(){return Ar}static get NAME(){return"carousel"}next(){this._slide(mt)}nextWhenVisible(){!document.hidden&&f(this._element)&&this.next()}prev(){this._slide(wt)}pause(){this._isSliding&&l(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?ee.one(this._element,pn,()=>this.cycle()):this.cycle())}to(E){const N=this._getItems();if(E>N.length-1||E<0)return;if(this._isSliding)return void ee.one(this._element,pn,()=>this.to(E));const J=this._getItemIndex(this._getActive());J!==E&&this._slide(E>J?mt:wt,N[E])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(E){return E.defaultInterval=E.interval,E}_addEventListeners(){this._config.keyboard&&ee.on(this._element,Ut,E=>this._keydown(E)),"hover"===this._config.pause&&(ee.on(this._element,Ln,()=>this.pause()),ee.on(this._element,fn,()=>this._maybeEnableCycle())),this._config.touch&&Ct.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const N of Re.find(".carousel-item img",this._element))ee.on(N,Dr,J=>J.preventDefault());this._swipeHelper=new Ct(this._element,{leftCallback:()=>this._slide(this._directionToOrder(St)),rightCallback:()=>this._slide(this._directionToOrder(jt)),endCallback:()=>{"hover"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}})}_keydown(E){if(/input|textarea/i.test(E.target.tagName))return;const N=Yn[E.key];N&&(E.preventDefault(),this._slide(this._directionToOrder(N)))}_getItemIndex(E){return this._getItems().indexOf(E)}_setActiveIndicatorElement(E){if(!this._indicatorsElement)return;const N=Re.findOne(Yr,this._indicatorsElement);N.classList.remove(Xr),N.removeAttribute("aria-current");const J=Re.findOne(`[data-bs-slide-to="${E}"]`,this._indicatorsElement);J&&(J.classList.add(Xr),J.setAttribute("aria-current","true"))}_updateInterval(){const E=this._activeElement||this._getActive();if(!E)return;const N=Number.parseInt(E.getAttribute("data-bs-interval"),10);this._config.interval=N||this._config.defaultInterval}_slide(E,N=null){if(this._isSliding)return;const J=this._getActive(),Ee=E===mt,Pe=N||B(this._getItems(),J,Ee,this._config.wrap);if(Pe===J)return;const Xe=this._getItemIndex(Pe),Ke=tt=>ee.trigger(this._element,tt,{relatedTarget:Pe,direction:this._orderToDirection(E),from:this._getItemIndex(J),to:Xe});if(Ke(ln).defaultPrevented||!J||!Pe)return;const ut=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(Xe),this._activeElement=Pe;const Et=Ee?"carousel-item-start":"carousel-item-end",lt=Ee?"carousel-item-next":"carousel-item-prev";Pe.classList.add(lt),J.classList.add(Et),Pe.classList.add(Et),this._queueCallback(()=>{Pe.classList.remove(Et,lt),Pe.classList.add(Xr),J.classList.remove(Xr,lt,Et),this._isSliding=!1,Ke(pn)},J,this._isAnimated()),ut&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return Re.findOne(Mr,this._element)}_getItems(){return Re.find(Jn,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(E){return C()?E===St?wt:mt:E===St?mt:wt}_orderToDirection(E){return C()?E===wt?St:jt:E===wt?jt:St}static jQueryInterface(E){return this.each(function(){const N=Hr.getOrCreateInstance(this,E);if("number"!=typeof E){if("string"==typeof E){if(void 0===N[E]||E.startsWith("_")||"constructor"===E)throw new TypeError(`No method named "${E}"`);N[E]()}}else N.to(E)})}}ee.on(document,Rn,"[data-bs-slide], [data-bs-slide-to]",function(q){const E=Re.getElementFromSelector(this);if(!E||!E.classList.contains(Sn))return;q.preventDefault();const N=Hr.getOrCreateInstance(E),J=this.getAttribute("data-bs-slide-to");return J?(N.to(J),void N._maybeEnableCycle()):"next"===je.getDataAttribute(this,"slide")?(N.next(),void N._maybeEnableCycle()):(N.prev(),void N._maybeEnableCycle())}),ee.on(window,Zr,()=>{const q=Re.find('[data-bs-ride="carousel"]');for(const E of q)Hr.getOrCreateInstance(E)}),L(Hr);const Qr=".bs.collapse",Ya=`show${Qr}`,Ao=`shown${Qr}`,Ls=`hide${Qr}`,Br=`hidden${Qr}`,fr=`click${Qr}.data-api`,Jr="show",ei="collapse",Ir="collapsing",$t=`:scope .${ei} .${ei}`,Bo='[data-bs-toggle="collapse"]',nn={parent:null,toggle:!0},ti={parent:"(null|element)",toggle:"boolean"};class ji extends ze{constructor(E,N){super(E,N),this._isTransitioning=!1,this._triggerArray=[];const J=Re.find(Bo);for(const Ee of J){const Pe=Re.getSelectorFromElement(Ee),Xe=Re.find(Pe).filter(Ke=>Ke===this._element);null!==Pe&&Xe.length&&this._triggerArray.push(Ee)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return nn}static get DefaultType(){return ti}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let E=[];if(this._config.parent&&(E=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(Ee=>Ee!==this._element).map(Ee=>ji.getOrCreateInstance(Ee,{toggle:!1}))),E.length&&E[0]._isTransitioning||ee.trigger(this._element,Ya).defaultPrevented)return;for(const Ee of E)Ee.hide();const N=this._getDimension();this._element.classList.remove(ei),this._element.classList.add(Ir),this._element.style[N]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const J=`scroll${N[0].toUpperCase()+N.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(Ir),this._element.classList.add(ei,Jr),this._element.style[N]="",ee.trigger(this._element,Ao)},this._element,!0),this._element.style[N]=`${this._element[J]}px`}hide(){if(this._isTransitioning||!this._isShown()||ee.trigger(this._element,Ls).defaultPrevented)return;const E=this._getDimension();this._element.style[E]=`${this._element.getBoundingClientRect()[E]}px`,this._element.classList.add(Ir),this._element.classList.remove(ei,Jr);for(const N of this._triggerArray){const J=Re.getElementFromSelector(N);J&&!this._isShown(J)&&this._addAriaAndCollapsedClass([N],!1)}this._isTransitioning=!0,this._element.style[E]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(Ir),this._element.classList.add(ei),ee.trigger(this._element,Br)},this._element,!0)}_isShown(E=this._element){return E.classList.contains(Jr)}_configAfterMerge(E){return E.toggle=!!E.toggle,E.parent=h(E.parent),E}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const E=this._getFirstLevelChildren(Bo);for(const N of E){const J=Re.getElementFromSelector(N);J&&this._addAriaAndCollapsedClass([N],this._isShown(J))}}_getFirstLevelChildren(E){const N=Re.find($t,this._config.parent);return Re.find(E,this._config.parent).filter(J=>!N.includes(J))}_addAriaAndCollapsedClass(E,N){if(E.length)for(const J of E)J.classList.toggle("collapsed",!N),J.setAttribute("aria-expanded",N)}static jQueryInterface(E){const N={};return"string"==typeof E&&/show|hide/.test(E)&&(N.toggle=!1),this.each(function(){const J=ji.getOrCreateInstance(this,N);if("string"==typeof E){if(void 0===J[E])throw new TypeError(`No method named "${E}"`);J[E]()}})}}ee.on(document,fr,Bo,function(q){("A"===q.target.tagName||q.delegateTarget&&"A"===q.delegateTarget.tagName)&&q.preventDefault();for(const E of Re.getMultipleElementsFromSelector(this))ji.getOrCreateInstance(E,{toggle:!1}).toggle()}),L(ji);var er="top",gr="bottom",un="right",Dn="left",ha="auto",Hn=[er,gr,un,Dn],vr="start",tr="end",Ql="clippingParents",Ti="viewport",hi="popper",Os="reference",qi=Hn.reduce(function(q,E){return q.concat([E+"-"+vr,E+"-"+tr])},[]),Xi=[].concat(Hn,[ha]).reduce(function(q,E){return q.concat([E,E+"-"+vr,E+"-"+tr])},[]),Jl="beforeRead",tu="afterRead",nu="beforeMain",iu="afterMain",au="beforeWrite",su="afterWrite",lu=[Jl,"read",tu,nu,"main",iu,au,"write",su];function ni(q){return q?(q.nodeName||"").toLowerCase():null}function nr(q){if(null==q)return window;if("[object Window]"!==q.toString()){var E=q.ownerDocument;return E&&E.defaultView||window}return q}function Yi(q){return q instanceof nr(q).Element||q instanceof Element}function rr(q){return q instanceof nr(q).HTMLElement||q instanceof HTMLElement}function Lo(q){return typeof ShadowRoot<"u"&&(q instanceof nr(q).ShadowRoot||q instanceof ShadowRoot)}const Pi={name:"applyStyles",enabled:!0,phase:"write",fn:function(q){var E=q.state;Object.keys(E.elements).forEach(function(N){var J=E.styles[N]||{},Ee=E.attributes[N]||{},Pe=E.elements[N];rr(Pe)&&ni(Pe)&&(Object.assign(Pe.style,J),Object.keys(Ee).forEach(function(Xe){var Ke=Ee[Xe];!1===Ke?Pe.removeAttribute(Xe):Pe.setAttribute(Xe,!0===Ke?"":Ke)}))})},effect:function(q){var E=q.state,N={popper:{position:E.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(E.elements.popper.style,N.popper),E.styles=N,E.elements.arrow&&Object.assign(E.elements.arrow.style,N.arrow),function(){Object.keys(E.elements).forEach(function(J){var Ee=E.elements[J],Pe=E.attributes[J]||{},Xe=Object.keys(E.styles.hasOwnProperty(J)?E.styles[J]:N[J]).reduce(function(Ke,ut){return Ke[ut]="",Ke},{});rr(Ee)&&ni(Ee)&&(Object.assign(Ee.style,Xe),Object.keys(Pe).forEach(function(Ke){Ee.removeAttribute(Ke)}))})}},requires:["computeStyles"]};function Lr(q){return q.split("-")[0]}var pi=Math.max,Ha=Math.min,Rr=Math.round;function fi(){var q=navigator.userAgentData;return null!=q&&q.brands&&Array.isArray(q.brands)?q.brands.map(function(E){return E.brand+"/"+E.version}).join(" "):navigator.userAgent}function uu(){return!/^((?!chrome|android).)*safari/i.test(fi())}function Tn(q,E,N){void 0===E&&(E=!1),void 0===N&&(N=!1);var J=q.getBoundingClientRect(),Ee=1,Pe=1;E&&rr(q)&&(Ee=q.offsetWidth>0&&Rr(J.width)/q.offsetWidth||1,Pe=q.offsetHeight>0&&Rr(J.height)/q.offsetHeight||1);var Xe=(Yi(q)?nr(q):window).visualViewport,Ke=!uu()&&N,ut=(J.left+(Ke&&Xe?Xe.offsetLeft:0))/Ee,Et=(J.top+(Ke&&Xe?Xe.offsetTop:0))/Pe,lt=J.width/Ee,tt=J.height/Pe;return{width:lt,height:tt,top:Et,right:ut+lt,bottom:Et+tt,left:ut,x:ut,y:Et}}function Di(q){var E=Tn(q),N=q.offsetWidth,J=q.offsetHeight;return Math.abs(E.width-N)<=1&&(N=E.width),Math.abs(E.height-J)<=1&&(J=E.height),{x:q.offsetLeft,y:q.offsetTop,width:N,height:J}}function pa(q,E){var N=E.getRootNode&&E.getRootNode();if(q.contains(E))return!0;if(N&&Lo(N)){var J=E;do{if(J&&q.isSameNode(J))return!0;J=J.parentNode||J.host}while(J)}return!1}function Mn(q){return nr(q).getComputedStyle(q)}function cu(q){return["table","td","th"].indexOf(ni(q))>=0}function Mi(q){return((Yi(q)?q.ownerDocument:q.document)||window.document).documentElement}function Hi(q){return"html"===ni(q)?q:q.assignedSlot||q.parentNode||(Lo(q)?q.host:null)||Mi(q)}function Wa(q){return rr(q)&&"fixed"!==Mn(q).position?q.offsetParent:null}function fa(q){for(var E=nr(q),N=Wa(q);N&&cu(N)&&"static"===Mn(N).position;)N=Wa(N);return N&&("html"===ni(N)||"body"===ni(N)&&"static"===Mn(N).position)?E:N||function(J){var Ee=/firefox/i.test(fi());if(/Trident/i.test(fi())&&rr(J)&&"fixed"===Mn(J).position)return null;var Pe=Hi(J);for(Lo(Pe)&&(Pe=Pe.host);rr(Pe)&&["html","body"].indexOf(ni(Pe))<0;){var Xe=Mn(Pe);if("none"!==Xe.transform||"none"!==Xe.perspective||"paint"===Xe.contain||-1!==["transform","perspective"].indexOf(Xe.willChange)||Ee&&"filter"===Xe.willChange||Ee&&Xe.filter&&"none"!==Xe.filter)return Pe;Pe=Pe.parentNode}return null}(q)||E}function $a(q){return["top","bottom"].indexOf(q)>=0?"x":"y"}function ri(q,E,N){return pi(q,Ha(E,N))}function Ns(q){return Object.assign({},{top:0,right:0,bottom:0,left:0},q)}function zs(q,E){return E.reduce(function(N,J){return N[J]=q,N},{})}const du={name:"arrow",enabled:!0,phase:"main",fn:function(q){var E,cn,dn,N=q.state,J=q.name,Ee=q.options,Pe=N.elements.arrow,Xe=N.modifiersData.popperOffsets,Ke=Lr(N.placement),ut=$a(Ke),Et=[Dn,un].indexOf(Ke)>=0?"height":"width";if(Pe&&Xe){var lt=(dn=N,Ns("number"!=typeof(cn="function"==typeof(cn=Ee.padding)?cn(Object.assign({},dn.rects,{placement:dn.placement})):cn)?cn:zs(cn,Hn))),tt=Di(Pe),Rt="y"===ut?er:Dn,At="y"===ut?gr:un,Nt=N.rects.reference[Et]+N.rects.reference[ut]-Xe[ut]-N.rects.popper[Et],zt=Xe[ut]-N.rects.reference[ut],Ft=fa(Pe),Xt=Ft?"y"===ut?Ft.clientHeight||0:Ft.clientWidth||0:0,Vt=Xt/2-tt[Et]/2+(Nt/2-zt/2),Wt=ri(lt[Rt],Vt,Xt-tt[Et]-lt[At]);N.modifiersData[J]=((E={})[ut]=Wt,E.centerOffset=Wt-Vt,E)}},effect:function(q){var E=q.state,N=q.options.element,J=void 0===N?"[data-popper-arrow]":N;null!=J&&("string"!=typeof J||(J=E.elements.popper.querySelector(J)))&&pa(E.elements.popper,J)&&(E.elements.arrow=J)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ga(q){return q.split("-")[1]}var od={top:"auto",right:"auto",bottom:"auto",left:"auto"};function hu(q){var E,N=q.popper,J=q.popperRect,Ee=q.placement,Pe=q.variation,Xe=q.offsets,Ke=q.position,ut=q.gpuAcceleration,Et=q.adaptive,lt=q.roundOffsets,tt=q.isFixed,Rt=Xe.x,At=void 0===Rt?0:Rt,Nt=Xe.y,zt=void 0===Nt?0:Nt,Ft="function"==typeof lt?lt({x:At,y:zt}):{x:At,y:zt};At=Ft.x,zt=Ft.y;var Xt=Xe.hasOwnProperty("x"),Qt=Xe.hasOwnProperty("y"),qt=Dn,Gt=er,Vt=window;if(Et){var Wt=fa(N),Yt="clientHeight",cn="clientWidth";Wt===nr(N)&&"static"!==Mn(Wt=Mi(N)).position&&"absolute"===Ke&&(Yt="scrollHeight",cn="scrollWidth"),(Ee===er||(Ee===Dn||Ee===un)&&Pe===tr)&&(Gt=gr,zt-=(tt&&Wt===Vt&&Vt.visualViewport?Vt.visualViewport.height:Wt[Yt])-J.height,zt*=ut?1:-1),Ee!==Dn&&(Ee!==er&&Ee!==gr||Pe!==tr)||(qt=un,At-=(tt&&Wt===Vt&&Vt.visualViewport?Vt.visualViewport.width:Wt[cn])-J.width,At*=ut?1:-1)}var dn,Kn,Gn,Vn,hn,bn=Object.assign({position:Ke},Et&&od),ir=!0===lt?(Kn={x:At,y:zt},Gn=nr(N),Vn=Kn.y,{x:Rr(Kn.x*(hn=Gn.devicePixelRatio||1))/hn||0,y:Rr(Vn*hn)/hn||0}):{x:At,y:zt};return At=ir.x,zt=ir.y,Object.assign({},bn,ut?((dn={})[Gt]=Qt?"0":"",dn[qt]=Xt?"0":"",dn.transform=(Vt.devicePixelRatio||1)<=1?"translate("+At+"px, "+zt+"px)":"translate3d("+At+"px, "+zt+"px, 0)",dn):((E={})[Gt]=Qt?zt+"px":"",E[qt]=Xt?At+"px":"",E.transform="",E))}const Wn={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(q){var E=q.state,N=q.options,J=N.gpuAcceleration,Ee=void 0===J||J,Pe=N.adaptive,Xe=void 0===Pe||Pe,Ke=N.roundOffsets,ut=void 0===Ke||Ke,Et={placement:Lr(E.placement),variation:ga(E.placement),popper:E.elements.popper,popperRect:E.rects.popper,gpuAcceleration:Ee,isFixed:"fixed"===E.options.strategy};null!=E.modifiersData.popperOffsets&&(E.styles.popper=Object.assign({},E.styles.popper,hu(Object.assign({},Et,{offsets:E.modifiersData.popperOffsets,position:E.options.strategy,adaptive:Xe,roundOffsets:ut})))),null!=E.modifiersData.arrow&&(E.styles.arrow=Object.assign({},E.styles.arrow,hu(Object.assign({},Et,{offsets:E.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:ut})))),E.attributes.popper=Object.assign({},E.attributes.popper,{"data-popper-placement":E.placement})},data:{}};var Fr={passive:!0};const va={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(q){var E=q.state,N=q.instance,J=q.options,Ee=J.scroll,Pe=void 0===Ee||Ee,Xe=J.resize,Ke=void 0===Xe||Xe,ut=nr(E.elements.popper),Et=[].concat(E.scrollParents.reference,E.scrollParents.popper);return Pe&&Et.forEach(function(lt){lt.addEventListener("scroll",N.update,Fr)}),Ke&&ut.addEventListener("resize",N.update,Fr),function(){Pe&&Et.forEach(function(lt){lt.removeEventListener("scroll",N.update,Fr)}),Ke&&ut.removeEventListener("resize",N.update,Fr)}},data:{}};var Oo={left:"right",right:"left",bottom:"top",top:"bottom"};function ii(q){return q.replace(/left|right|bottom|top/g,function(E){return Oo[E]})}var Ka={start:"end",end:"start"};function No(q){return q.replace(/start|end/g,function(E){return Ka[E]})}function ai(q){var E=nr(q);return{scrollLeft:E.pageXOffset,scrollTop:E.pageYOffset}}function Wi(q){return Tn(Mi(q)).left+ai(q).scrollLeft}function ma(q){var E=Mn(q);return/auto|scroll|overlay|hidden/.test(E.overflow+E.overflowY+E.overflowX)}function $n(q){return["html","body","#document"].indexOf(ni(q))>=0?q.ownerDocument.body:rr(q)&&ma(q)?q:$n(Hi(q))}function ya(q,E){var N;void 0===E&&(E=[]);var J=$n(q),Ee=J===(null==(N=q.ownerDocument)?void 0:N.body),Pe=nr(J),Xe=Ee?[Pe].concat(Pe.visualViewport||[],ma(J)?J:[]):J,Ke=E.concat(Xe);return Ee?Ke:Ke.concat(ya(Hi(Xe)))}function Ga(q){return Object.assign({},q,{left:q.x,top:q.y,right:q.x+q.width,bottom:q.y+q.height})}function ba(q,E,N){return E===Ti?Ga(function(J,Ee){var Pe=nr(J),Xe=Mi(J),Ke=Pe.visualViewport,ut=Xe.clientWidth,Et=Xe.clientHeight,lt=0,tt=0;if(Ke){ut=Ke.width,Et=Ke.height;var Rt=uu();(Rt||!Rt&&"fixed"===Ee)&&(lt=Ke.offsetLeft,tt=Ke.offsetTop)}return{width:ut,height:Et,x:lt+Wi(J),y:tt}}(q,N)):Yi(E)?((Pe=Tn(J=E,!1,"fixed"===N)).top=Pe.top+J.clientTop,Pe.left=Pe.left+J.clientLeft,Pe.bottom=Pe.top+J.clientHeight,Pe.right=Pe.left+J.clientWidth,Pe.width=J.clientWidth,Pe.height=J.clientHeight,Pe.x=Pe.left,Pe.y=Pe.top,Pe):Ga(function(J){var Ee,Pe=Mi(J),Xe=ai(J),Ke=null==(Ee=J.ownerDocument)?void 0:Ee.body,ut=pi(Pe.scrollWidth,Pe.clientWidth,Ke?Ke.scrollWidth:0,Ke?Ke.clientWidth:0),Et=pi(Pe.scrollHeight,Pe.clientHeight,Ke?Ke.scrollHeight:0,Ke?Ke.clientHeight:0),lt=-Xe.scrollLeft+Wi(J),tt=-Xe.scrollTop;return"rtl"===Mn(Ke||Pe).direction&&(lt+=pi(Pe.clientWidth,Ke?Ke.clientWidth:0)-ut),{width:ut,height:Et,x:lt,y:tt}}(Mi(q)));var J,Pe}function zo(q){var E,N=q.reference,J=q.element,Ee=q.placement,Pe=Ee?Lr(Ee):null,Xe=Ee?ga(Ee):null,Ke=N.x+N.width/2-J.width/2,ut=N.y+N.height/2-J.height/2;switch(Pe){case er:E={x:Ke,y:N.y-J.height};break;case gr:E={x:Ke,y:N.y+N.height};break;case un:E={x:N.x+N.width,y:ut};break;case Dn:E={x:N.x-J.width,y:ut};break;default:E={x:N.x,y:N.y}}var Et=Pe?$a(Pe):null;if(null!=Et){var lt="y"===Et?"height":"width";switch(Xe){case vr:E[Et]=E[Et]-(N[lt]/2-J[lt]/2);break;case tr:E[Et]=E[Et]+(N[lt]/2-J[lt]/2)}}return E}function Ai(q,E){void 0===E&&(E={});var Gn,Nr,Vn,hn,Jt,Fn,mr,li,On,xn,J=E.placement,Ee=void 0===J?q.placement:J,Pe=E.strategy,Xe=void 0===Pe?q.strategy:Pe,Ke=E.boundary,ut=void 0===Ke?Ql:Ke,Et=E.rootBoundary,lt=void 0===Et?Ti:Et,tt=E.elementContext,Rt=void 0===tt?hi:tt,At=E.altBoundary,Nt=void 0!==At&&At,zt=E.padding,Ft=void 0===zt?0:zt,Xt=Ns("number"!=typeof Ft?Ft:zs(Ft,Hn)),qt=q.rects.popper,Gt=q.elements[Nt?Rt===hi?Os:hi:Rt],Vt=(Gn=Yi(Gt)?Gt:Gt.contextElement||Mi(q.elements.popper),Vn=lt,hn=Xe,li="clippingParents"===(Nr=ut)?(Fn=ya(Hi(Jt=Gn)),Yi(mr=["absolute","fixed"].indexOf(Mn(Jt).position)>=0&&rr(Jt)?fa(Jt):Jt)?Fn.filter(function(Bi){return Yi(Bi)&&pa(Bi,mr)&&"body"!==ni(Bi)}):[]):[].concat(Nr),xn=(On=[].concat(li,[Vn])).reduce(function(Jt,Fn){var mr=ba(Gn,Fn,hn);return Jt.top=pi(mr.top,Jt.top),Jt.right=Ha(mr.right,Jt.right),Jt.bottom=Ha(mr.bottom,Jt.bottom),Jt.left=pi(mr.left,Jt.left),Jt},ba(Gn,On[0],hn)),xn.width=xn.right-xn.left,xn.height=xn.bottom-xn.top,xn.x=xn.left,xn.y=xn.top,xn),Wt=Tn(q.elements.reference),Yt=zo({reference:Wt,element:qt,strategy:"absolute",placement:Ee}),cn=Ga(Object.assign({},qt,Yt)),dn=Rt===hi?cn:Wt,bn={top:Vt.top-dn.top+Xt.top,bottom:dn.bottom-Vt.bottom+Xt.bottom,left:Vt.left-dn.left+Xt.left,right:dn.right-Vt.right+Xt.right},ir=q.modifiersData.offset;if(Rt===hi&&ir){var Kn=ir[Ee];Object.keys(bn).forEach(function(Gn){var Nr=[un,gr].indexOf(Gn)>=0?1:-1,Vn=[er,gr].indexOf(Gn)>=0?"y":"x";bn[Gn]+=Kn[Vn]*Nr})}return bn}const pu={name:"flip",enabled:!0,phase:"main",fn:function(q){var E=q.state,N=q.options,J=q.name;if(!E.modifiersData[J]._skip){for(var Ee=N.mainAxis,Pe=void 0===Ee||Ee,Xe=N.altAxis,Ke=void 0===Xe||Xe,ut=N.fallbackPlacements,Et=N.padding,lt=N.boundary,tt=N.rootBoundary,Rt=N.altBoundary,At=N.flipVariations,Nt=void 0===At||At,zt=N.allowedAutoPlacements,Ft=E.options.placement,Xt=Lr(Ft),Qt=ut||(Xt!==Ft&&Nt?function(Jt){if(Lr(Jt)===ha)return[];var Fn=ii(Jt);return[No(Jt),Fn,No(Fn)]}(Ft):[ii(Ft)]),qt=[Ft].concat(Qt).reduce(function(Jt,Fn){return Jt.concat(Lr(Fn)===ha?function sd(q,E){void 0===E&&(E={});var Ee=E.boundary,Pe=E.rootBoundary,Xe=E.padding,Ke=E.flipVariations,ut=E.allowedAutoPlacements,Et=void 0===ut?Xi:ut,lt=ga(E.placement),tt=lt?Ke?qi:qi.filter(function(Nt){return ga(Nt)===lt}):Hn,Rt=tt.filter(function(Nt){return Et.indexOf(Nt)>=0});0===Rt.length&&(Rt=tt);var At=Rt.reduce(function(Nt,zt){return Nt[zt]=Ai(q,{placement:zt,boundary:Ee,rootBoundary:Pe,padding:Xe})[Lr(zt)],Nt},{});return Object.keys(At).sort(function(Nt,zt){return At[Nt]-At[zt]})}(E,{placement:Fn,boundary:lt,rootBoundary:tt,padding:Et,flipVariations:Nt,allowedAutoPlacements:zt}):Fn)},[]),Gt=E.rects.reference,Vt=E.rects.popper,Wt=new Map,Yt=!0,cn=qt[0],dn=0;dn<qt.length;dn++){var bn=qt[dn],ir=Lr(bn),Kn=ga(bn)===vr,Gn=[er,gr].indexOf(ir)>=0,Nr=Gn?"width":"height",Vn=Ai(E,{placement:bn,boundary:lt,rootBoundary:tt,altBoundary:Rt,padding:Et}),hn=Gn?Kn?un:Dn:Kn?gr:er;Gt[Nr]>Vt[Nr]&&(hn=ii(hn));var li=ii(hn),On=[];if(Pe&&On.push(Vn[ir]<=0),Ke&&On.push(Vn[hn]<=0,Vn[li]<=0),On.every(function(Jt){return Jt})){cn=bn,Yt=!1;break}Wt.set(bn,On)}if(Yt)for(var Un=function(Jt){var Fn=qt.find(function(mr){var Bi=Wt.get(mr);if(Bi)return Bi.slice(0,Jt).every(function(lo){return lo})});if(Fn)return cn=Fn,"break"},xn=Nt?3:1;xn>0&&"break"!==Un(xn);xn--);E.placement!==cn&&(E.modifiersData[J]._skip=!0,E.placement=cn,E.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function Is(q,E,N){return void 0===N&&(N={x:0,y:0}),{top:q.top-E.height-N.y,right:q.right-E.width+N.x,bottom:q.bottom-E.height+N.y,left:q.left-E.width-N.x}}function $i(q){return[er,un,gr,Dn].some(function(E){return q[E]>=0})}const Rs={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(q){var E=q.state,N=q.name,J=E.rects.reference,Ee=E.rects.popper,Pe=E.modifiersData.preventOverflow,Xe=Ai(E,{elementContext:"reference"}),Ke=Ai(E,{altBoundary:!0}),ut=Is(Xe,J),Et=Is(Ke,Ee,Pe),lt=$i(ut),tt=$i(Et);E.modifiersData[N]={referenceClippingOffsets:ut,popperEscapeOffsets:Et,isReferenceHidden:lt,hasPopperEscaped:tt},E.attributes.popper=Object.assign({},E.attributes.popper,{"data-popper-reference-hidden":lt,"data-popper-escaped":tt})}},Ki={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(q){var E=q.state,J=q.name,Ee=q.options.offset,Pe=void 0===Ee?[0,0]:Ee,Xe=Xi.reduce(function(lt,tt){return lt[tt]=(At=E.rects,Nt=Pe,zt=Lr(Rt=tt),Ft=[Dn,er].indexOf(zt)>=0?-1:1,Qt=(Qt=(Xt="function"==typeof Nt?Nt(Object.assign({},At,{placement:Rt})):Nt)[0])||0,qt=((qt=Xt[1])||0)*Ft,[Dn,un].indexOf(zt)>=0?{x:qt,y:Qt}:{x:Qt,y:qt}),lt;var Rt,At,Nt,zt,Ft,Xt,Qt,qt},{}),Ke=Xe[E.placement],Et=Ke.y;null!=E.modifiersData.popperOffsets&&(E.modifiersData.popperOffsets.x+=Ke.x,E.modifiersData.popperOffsets.y+=Et),E.modifiersData[J]=Xe}},Fs={name:"popperOffsets",enabled:!0,phase:"read",fn:function(q){var E=q.state;E.modifiersData[q.name]=zo({reference:E.rects.reference,element:E.rects.popper,strategy:"absolute",placement:E.placement})},data:{}},Io={name:"preventOverflow",enabled:!0,phase:"main",fn:function(q){var pl,tc,E=q.state,N=q.options,J=q.name,Ee=N.mainAxis,Pe=void 0===Ee||Ee,Xe=N.altAxis,Ke=void 0!==Xe&&Xe,Rt=N.tether,At=void 0===Rt||Rt,Nt=N.tetherOffset,zt=void 0===Nt?0:Nt,Ft=Ai(E,{boundary:N.boundary,rootBoundary:N.rootBoundary,padding:N.padding,altBoundary:N.altBoundary}),Xt=Lr(E.placement),Qt=ga(E.placement),qt=!Qt,Gt=$a(Xt),Vt="x"===Gt?"y":"x",Wt=E.modifiersData.popperOffsets,Yt=E.rects.reference,cn=E.rects.popper,dn="function"==typeof zt?zt(Object.assign({},E.rects,{placement:E.placement})):zt,bn="number"==typeof dn?{mainAxis:dn,altAxis:dn}:Object.assign({mainAxis:0,altAxis:0},dn),ir=E.modifiersData.offset?E.modifiersData.offset[E.placement]:null,Kn={x:0,y:0};if(Wt){if(Pe){var Gn,Nr="y"===Gt?er:Dn,Vn="y"===Gt?gr:un,hn="y"===Gt?"height":"width",li=Wt[Gt],On=li+Ft[Nr],Un=li-Ft[Vn],xn=At?-cn[hn]/2:0,Jt=Qt===vr?Yt[hn]:cn[hn],Fn=Qt===vr?-cn[hn]:-Yt[hn],mr=E.elements.arrow,Bi=At&&mr?Di(mr):{width:0,height:0},lo=E.modifiersData["arrow#persistent"]?E.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},ll=lo[Nr],ul=lo[Vn],Li=ri(0,Yt[hn],Bi[hn]),$u=qt?Yt[hn]/2-xn-Li-ll-bn.mainAxis:Jt-Li-ll-bn.mainAxis,Ku=qt?-Yt[hn]/2+xn+Li+ul+bn.mainAxis:Fn+Li+ul+bn.mainAxis,ia=E.elements.arrow&&fa(E.elements.arrow),uo=ia?"y"===Gt?ia.clientTop||0:ia.clientLeft||0:0,Gu=null!=(Gn=ir?.[Gt])?Gn:0,Uu=li+Ku-Gu,Zu=ri(At?Ha(On,li+$u-Gu-uo):On,li,At?pi(Un,Uu):Un);Wt[Gt]=Zu,Kn[Gt]=Zu-li}if(Ke){var cl,Oi=Wt[Vt],Ni="y"===Vt?"height":"width",co=Oi+Ft["x"===Gt?er:Dn],dl=Oi-Ft["x"===Gt?gr:un],Jo=-1!==[er,Dn].indexOf(Xt),hl=null!=(cl=ir?.[Vt])?cl:0,Qu=Jo?co:Oi-Yt[Ni]-cn[Ni]-hl+bn.altAxis,ho=Jo?Oi+Yt[Ni]+cn[Ni]-hl-bn.altAxis:dl,Ei=At&&Jo?(tc=ri(Qu,Oi,pl=ho))>pl?pl:tc:ri(At?Qu:co,Oi,At?ho:dl);Wt[Vt]=Ei,Kn[Vt]=Ei-Oi}E.modifiersData[J]=Kn}},requiresIfExists:["offset"]};function ld(q,E,N){void 0===N&&(N=!1);var J,Ee,tt,Rt,At,Nt,Pe=rr(E),Xe=rr(E)&&(Rt=(tt=E).getBoundingClientRect(),At=Rr(Rt.width)/tt.offsetWidth||1,Nt=Rr(Rt.height)/tt.offsetHeight||1,1!==At||1!==Nt),Ke=Mi(E),ut=Tn(q,Xe,N),Et={scrollLeft:0,scrollTop:0},lt={x:0,y:0};return(Pe||!Pe&&!N)&&(("body"!==ni(E)||ma(Ke))&&(Et=(J=E)!==nr(J)&&rr(J)?{scrollLeft:(Ee=J).scrollLeft,scrollTop:Ee.scrollTop}:ai(J)),rr(E)?((lt=Tn(E,!0)).x+=E.clientLeft,lt.y+=E.clientTop):Ke&&(lt.x=Wi(Ke))),{x:ut.left+Et.scrollLeft-lt.x,y:ut.top+Et.scrollTop-lt.y,width:ut.width,height:ut.height}}function ud(q){var E=new Map,N=new Set,J=[];function Ee(Pe){N.add(Pe.name),[].concat(Pe.requires||[],Pe.requiresIfExists||[]).forEach(function(Xe){if(!N.has(Xe)){var Ke=E.get(Xe);Ke&&Ee(Ke)}}),J.push(Pe)}return q.forEach(function(Pe){E.set(Pe.name,Pe)}),q.forEach(function(Pe){N.has(Pe.name)||Ee(Pe)}),J}var Vs={placement:"bottom",modifiers:[],strategy:"absolute"};function fu(){for(var q=arguments.length,E=new Array(q),N=0;N<q;N++)E[N]=arguments[N];return!E.some(function(J){return!(J&&"function"==typeof J.getBoundingClientRect)})}function Ro(q){void 0===q&&(q={});var N=q.defaultModifiers,J=void 0===N?[]:N,Ee=q.defaultOptions,Pe=void 0===Ee?Vs:Ee;return function(Xe,Ke,ut){void 0===ut&&(ut=Pe);var Et,lt,tt={placement:"bottom",orderedModifiers:[],options:Object.assign({},Vs,Pe),modifiersData:{},elements:{reference:Xe,popper:Ke},attributes:{},styles:{}},Rt=[],At=!1,Nt={state:tt,setOptions:function(Ft){var Xt="function"==typeof Ft?Ft(tt.options):Ft;zt(),tt.options=Object.assign({},Pe,tt.options,Xt),tt.scrollParents={reference:Yi(Xe)?ya(Xe):Xe.contextElement?ya(Xe.contextElement):[],popper:ya(Ke)};var Qt,qt,Vt,Wt,Gt=(Qt=[].concat(J,tt.options.modifiers),qt=Qt.reduce(function(Vt,Wt){var Yt=Vt[Wt.name];return Vt[Wt.name]=Yt?Object.assign({},Yt,Wt,{options:Object.assign({},Yt.options,Wt.options),data:Object.assign({},Yt.data,Wt.data)}):Wt,Vt},{}),Vt=Object.keys(qt).map(function(Vt){return qt[Vt]}),Wt=ud(Vt),lu.reduce(function(Yt,cn){return Yt.concat(Wt.filter(function(dn){return dn.phase===cn}))},[]));return tt.orderedModifiers=Gt.filter(function(Vt){return Vt.enabled}),tt.orderedModifiers.forEach(function(Vt){var Yt=Vt.options,dn=Vt.effect;if("function"==typeof dn){var bn=dn({state:tt,name:Vt.name,instance:Nt,options:void 0===Yt?{}:Yt});Rt.push(bn||function(){})}}),Nt.update()},forceUpdate:function(){if(!At){var Ft=tt.elements,Xt=Ft.reference,Qt=Ft.popper;if(fu(Xt,Qt)){tt.rects={reference:ld(Xt,fa(Qt),"fixed"===tt.options.strategy),popper:Di(Qt)},tt.reset=!1,tt.placement=tt.options.placement,tt.orderedModifiers.forEach(function(dn){return tt.modifiersData[dn.name]=Object.assign({},dn.data)});for(var qt=0;qt<tt.orderedModifiers.length;qt++)if(!0!==tt.reset){var Gt=tt.orderedModifiers[qt],Vt=Gt.fn,Wt=Gt.options;"function"==typeof Vt&&(tt=Vt({state:tt,options:void 0===Wt?{}:Wt,name:Gt.name,instance:Nt})||tt)}else tt.reset=!1,qt=-1}}},update:(Et=function(){return new Promise(function(Ft){Nt.forceUpdate(),Ft(tt)})},function(){return lt||(lt=new Promise(function(Ft){Promise.resolve().then(function(){lt=void 0,Ft(Et())})})),lt}),destroy:function(){zt(),At=!0}};if(!fu(Xe,Ke))return Nt;function zt(){Rt.forEach(function(Ft){return Ft()}),Rt=[]}return Nt.setOptions(ut).then(function(Ft){!At&&ut.onFirstUpdate&&ut.onFirstUpdate(Ft)}),Nt}}var cd=Ro(),dd=Ro({defaultModifiers:[va,Fs,Wn,Pi]}),js=Ro({defaultModifiers:[va,Fs,Wn,Pi,Ki,pu,Io,du,Rs]});const qs=Object.freeze(Object.defineProperty({__proto__:null,afterMain:iu,afterRead:tu,afterWrite:su,applyStyles:Pi,arrow:du,auto:ha,basePlacements:Hn,beforeMain:nu,beforeRead:Jl,beforeWrite:au,bottom:gr,clippingParents:Ql,computeStyles:Wn,createPopper:js,createPopperBase:cd,createPopperLite:dd,detectOverflow:Ai,end:tr,eventListeners:va,flip:pu,hide:Rs,left:Dn,main:"main",modifierPhases:lu,offset:Ki,placements:Xi,popper:hi,popperGenerator:Ro,popperOffsets:Fs,preventOverflow:Io,read:"read",reference:Os,right:un,start:vr,top:er,variationPlacements:qi,viewport:Ti,write:"write"},Symbol.toStringTag,{value:"Module"})),gu="dropdown",Gi=".bs.dropdown",Fo=".data-api",vu="ArrowUp",Xs="ArrowDown",hd=`hide${Gi}`,pd=`hidden${Gi}`,Ua=`show${Gi}`,xa=`shown${Gi}`,Za=`click${Gi}${Fo}`,mu=`keydown${Gi}${Fo}`,Ys=`keyup${Gi}${Fo}`,gi="show",vi='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',yu=`${vi}.${gi}`,Qa=".dropdown-menu",fd=C()?"top-end":"top-start",gd=C()?"top-start":"top-end",bu=C()?"bottom-end":"bottom-start",xu=C()?"bottom-start":"bottom-end",vd=C()?"left-start":"right-start",md=C()?"right-start":"left-start",wu={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},yd={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Wr extends ze{constructor(E,N){super(E,N),this._popper=null,this._parent=this._element.parentNode,this._menu=Re.next(this._element,Qa)[0]||Re.prev(this._element,Qa)[0]||Re.findOne(Qa,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return wu}static get DefaultType(){return yd}static get NAME(){return gu}toggle(){return this._isShown()?this.hide():this.show()}show(){if(g(this._element)||this._isShown())return;const E={relatedTarget:this._element};if(!ee.trigger(this._element,Ua,E).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const N of[].concat(...document.body.children))ee.on(N,"mouseover",x);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(gi),this._element.classList.add(gi),ee.trigger(this._element,xa,E)}}hide(){!g(this._element)&&this._isShown()&&this._completeHide({relatedTarget:this._element})}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(E){if(!ee.trigger(this._element,hd,E).defaultPrevented){if("ontouchstart"in document.documentElement)for(const N of[].concat(...document.body.children))ee.off(N,"mouseover",x);this._popper&&this._popper.destroy(),this._menu.classList.remove(gi),this._element.classList.remove(gi),this._element.setAttribute("aria-expanded","false"),je.removeDataAttribute(this._menu,"popper"),ee.trigger(this._element,pd,E)}}_getConfig(E){if("object"==typeof(E=super._getConfig(E)).reference&&!c(E.reference)&&"function"!=typeof E.reference.getBoundingClientRect)throw new TypeError(`${gu.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return E}_createPopper(){if(void 0===qs)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let E=this._element;"parent"===this._config.reference?E=this._parent:c(this._config.reference)?E=h(this._config.reference):"object"==typeof this._config.reference&&(E=this._config.reference);const N=this._getPopperConfig();this._popper=js(E,this._menu,N)}_isShown(){return this._menu.classList.contains(gi)}_getPlacement(){const E=this._parent;if(E.classList.contains("dropend"))return vd;if(E.classList.contains("dropstart"))return md;if(E.classList.contains("dropup-center"))return"top";if(E.classList.contains("dropdown-center"))return"bottom";const N="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return E.classList.contains("dropup")?N?gd:fd:N?xu:bu}_detectNavbar(){return null!==this._element.closest(".navbar")}_getOffset(){const{offset:E}=this._config;return"string"==typeof E?E.split(",").map(N=>Number.parseInt(N,10)):"function"==typeof E?N=>E(N,this._element):E}_getPopperConfig(){const E={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||"static"===this._config.display)&&(je.setDataAttribute(this._menu,"popper","static"),E.modifiers=[{name:"applyStyles",enabled:!1}]),{...E,...I(this._config.popperConfig,[E])}}_selectMenuItem({key:E,target:N}){const J=Re.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(Ee=>f(Ee));J.length&&B(J,N,E===Xs,!J.includes(N)).focus()}static jQueryInterface(E){return this.each(function(){const N=Wr.getOrCreateInstance(this,E);if("string"==typeof E){if(void 0===N[E])throw new TypeError(`No method named "${E}"`);N[E]()}})}static clearMenus(E){if(2===E.button||"keyup"===E.type&&"Tab"!==E.key)return;const N=Re.find(yu);for(const J of N){const Ee=Wr.getInstance(J);if(!Ee||!1===Ee._config.autoClose)continue;const Pe=E.composedPath(),Xe=Pe.includes(Ee._menu);if(Pe.includes(Ee._element)||"inside"===Ee._config.autoClose&&!Xe||"outside"===Ee._config.autoClose&&Xe||Ee._menu.contains(E.target)&&("keyup"===E.type&&"Tab"===E.key||/input|select|option|textarea|form/i.test(E.target.tagName)))continue;const Ke={relatedTarget:Ee._element};"click"===E.type&&(Ke.clickEvent=E),Ee._completeHide(Ke)}}static dataApiKeydownHandler(E){const N=/input|textarea/i.test(E.target.tagName),J="Escape"===E.key,Ee=[vu,Xs].includes(E.key);if(!Ee&&!J||N&&!J)return;E.preventDefault();const Pe=this.matches(vi)?this:Re.prev(this,vi)[0]||Re.next(this,vi)[0]||Re.findOne(vi,E.delegateTarget.parentNode),Xe=Wr.getOrCreateInstance(Pe);if(Ee)return E.stopPropagation(),Xe.show(),void Xe._selectMenuItem(E);Xe._isShown()&&(E.stopPropagation(),Xe.hide(),Pe.focus())}}ee.on(document,mu,vi,Wr.dataApiKeydownHandler),ee.on(document,mu,Qa,Wr.dataApiKeydownHandler),ee.on(document,Za,Wr.clearMenus),ee.on(document,Ys,Wr.clearMenus),ee.on(document,Za,vi,function(q){q.preventDefault(),Wr.getOrCreateInstance(this).toggle()}),L(Wr);const Eu="backdrop",Ja=`mousedown.bs.${Eu}`,_u={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},bd={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class ku extends Fe{constructor(E){super(),this._config=this._getConfig(E),this._isAppended=!1,this._element=null}static get Default(){return _u}static get DefaultType(){return bd}static get NAME(){return Eu}show(E){if(!this._config.isVisible)return void I(E);this._append();this._getElement().classList.add("show"),this._emulateAnimation(()=>{I(E)})}hide(E){this._config.isVisible?(this._getElement().classList.remove("show"),this._emulateAnimation(()=>{this.dispose(),I(E)})):I(E)}dispose(){this._isAppended&&(ee.off(this._element,Ja),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const E=document.createElement("div");E.className=this._config.className,this._config.isAnimated&&E.classList.add("fade"),this._element=E}return this._element}_configAfterMerge(E){return E.rootElement=h(E.rootElement),E}_append(){if(this._isAppended)return;const E=this._getElement();this._config.rootElement.append(E),ee.on(E,Ja,()=>{I(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(E){P(E,this._getElement(),this._config.isAnimated)}}const Vo=".bs.focustrap",xd=`focusin${Vo}`,Cu=`keydown.tab${Vo}`,Ws="backward",wd={autofocus:!0,trapElement:null},Ed={autofocus:"boolean",trapElement:"element"};class eo extends Fe{constructor(E){super(),this._config=this._getConfig(E),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return wd}static get DefaultType(){return Ed}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),ee.off(document,Vo),ee.on(document,xd,E=>this._handleFocusin(E)),ee.on(document,Cu,E=>this._handleKeydown(E)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,ee.off(document,Vo))}_handleFocusin(E){const{trapElement:N}=this._config;if(E.target===document||E.target===N||N.contains(E.target))return;const J=Re.focusableChildren(N);0===J.length?N.focus():this._lastTabNavDirection===Ws?J[J.length-1].focus():J[0].focus()}_handleKeydown(E){"Tab"===E.key&&(this._lastTabNavDirection=E.shiftKey?Ws:"forward")}}const to=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",$s=".sticky-top",Vr="padding-right",Ks="margin-right";class jo{constructor(){this._element=document.body}getWidth(){const E=document.documentElement.clientWidth;return Math.abs(window.innerWidth-E)}hide(){const E=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Vr,N=>N+E),this._setElementAttributes(to,Vr,N=>N+E),this._setElementAttributes($s,Ks,N=>N-E)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Vr),this._resetElementAttributes(to,Vr),this._resetElementAttributes($s,Ks)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(E,N,J){const Ee=this.getWidth();this._applyManipulationCallback(E,Pe=>{if(Pe!==this._element&&window.innerWidth>Pe.clientWidth+Ee)return;this._saveInitialAttribute(Pe,N);const Xe=window.getComputedStyle(Pe).getPropertyValue(N);Pe.style.setProperty(N,`${J(Number.parseFloat(Xe))}px`)})}_saveInitialAttribute(E,N){const J=E.style.getPropertyValue(N);J&&je.setDataAttribute(E,N,J)}_resetElementAttributes(E,N){this._applyManipulationCallback(E,J=>{const Ee=je.getDataAttribute(J,N);null!==Ee?(je.removeDataAttribute(J,N),J.style.setProperty(N,Ee)):J.style.removeProperty(N)})}_applyManipulationCallback(E,N){if(c(E))N(E);else for(const J of Re.find(E,this._element))N(J)}}const Or=".bs.modal",Su=`hide${Or}`,_d=`hidePrevented${Or}`,Ui=`hidden${Or}`,qo=`show${Or}`,Zi=`shown${Or}`,kd=`resize${Or}`,Xo=`click.dismiss${Or}`,Cd=`mousedown.dismiss${Or}`,Sd=`keydown.dismiss${Or}`,Td=`click${Or}.data-api`,Gs="modal-open",no="modal-static",Pu={backdrop:!0,focus:!0,keyboard:!0},Pd={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Qi extends ze{constructor(E,N){super(E,N),this._dialog=Re.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new jo,this._addEventListeners()}static get Default(){return Pu}static get DefaultType(){return Pd}static get NAME(){return"modal"}toggle(E){return this._isShown?this.hide():this.show(E)}show(E){this._isShown||this._isTransitioning||ee.trigger(this._element,qo,{relatedTarget:E}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Gs),this._adjustDialog(),this._backdrop.show(()=>this._showElement(E)))}hide(){this._isShown&&!this._isTransitioning&&(ee.trigger(this._element,Su).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove("show"),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){ee.off(window,Or),ee.off(this._dialog,Or),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new ku({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new eo({trapElement:this._element})}_showElement(E){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const N=Re.findOne(".modal-body",this._dialog);N&&(N.scrollTop=0),this._element.classList.add("show"),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,ee.trigger(this._element,Zi,{relatedTarget:E})},this._dialog,this._isAnimated())}_addEventListeners(){ee.on(this._element,Sd,E=>{"Escape"===E.key&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())}),ee.on(window,kd,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),ee.on(this._element,Cd,E=>{ee.one(this._element,Xo,N=>{this._element===E.target&&this._element===N.target&&("static"!==this._config.backdrop?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Gs),this._resetAdjustments(),this._scrollBar.reset(),ee.trigger(this._element,Ui)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(ee.trigger(this._element,_d).defaultPrevented)return;const E=this._element.scrollHeight>document.documentElement.clientHeight,N=this._element.style.overflowY;"hidden"===N||this._element.classList.contains(no)||(E||(this._element.style.overflowY="hidden"),this._element.classList.add(no),this._queueCallback(()=>{this._element.classList.remove(no),this._queueCallback(()=>{this._element.style.overflowY=N},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const E=this._element.scrollHeight>document.documentElement.clientHeight,N=this._scrollBar.getWidth(),J=N>0;if(J&&!E){const Ee=C()?"paddingLeft":"paddingRight";this._element.style[Ee]=`${N}px`}if(!J&&E){const Ee=C()?"paddingRight":"paddingLeft";this._element.style[Ee]=`${N}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(E,N){return this.each(function(){const J=Qi.getOrCreateInstance(this,E);if("string"==typeof E){if(void 0===J[E])throw new TypeError(`No method named "${E}"`);J[E](N)}})}}ee.on(document,Td,'[data-bs-toggle="modal"]',function(q){const E=Re.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&q.preventDefault(),ee.one(E,qo,J=>{J.defaultPrevented||ee.one(E,Ui,()=>{f(this)&&this.focus()})});const N=Re.findOne(".modal.show");N&&Qi.getInstance(N).hide(),Qi.getOrCreateInstance(E).toggle(this)}),Ge(Qi),L(Qi);const mi=".bs.offcanvas",Du=".data-api",Dd=`load${mi}${Du}`,Au="showing",Lu=".offcanvas.show",Md=`show${mi}`,Ad=`shown${mi}`,Us=`hide${mi}`,wa=`hidePrevented${mi}`,Ou=`hidden${mi}`,Bd=`resize${mi}`,Ld=`click${mi}${Du}`,Od=`keydown.dismiss${mi}`,Nd={backdrop:!0,keyboard:!0,scroll:!1},zd={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class yi extends ze{constructor(E,N){super(E,N),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Nd}static get DefaultType(){return zd}static get NAME(){return"offcanvas"}toggle(E){return this._isShown?this.hide():this.show(E)}show(E){this._isShown||ee.trigger(this._element,Md,{relatedTarget:E}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||(new jo).hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Au),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add("show"),this._element.classList.remove(Au),ee.trigger(this._element,Ad,{relatedTarget:E})},this._element,!0))}hide(){this._isShown&&(ee.trigger(this._element,Us).defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add("hiding"),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove("show","hiding"),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||(new jo).reset(),ee.trigger(this._element,Ou)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const E=!!this._config.backdrop;return new ku({className:"offcanvas-backdrop",isVisible:E,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:E?()=>{"static"!==this._config.backdrop?this.hide():ee.trigger(this._element,wa)}:null})}_initializeFocusTrap(){return new eo({trapElement:this._element})}_addEventListeners(){ee.on(this._element,Od,E=>{"Escape"===E.key&&(this._config.keyboard?this.hide():ee.trigger(this._element,wa))})}static jQueryInterface(E){return this.each(function(){const N=yi.getOrCreateInstance(this,E);if("string"==typeof E){if(void 0===N[E]||E.startsWith("_")||"constructor"===E)throw new TypeError(`No method named "${E}"`);N[E](this)}})}}ee.on(document,Ld,'[data-bs-toggle="offcanvas"]',function(q){const E=Re.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&q.preventDefault(),g(this))return;ee.one(E,Ou,()=>{f(this)&&this.focus()});const N=Re.findOne(Lu);N&&N!==E&&yi.getInstance(N).hide(),yi.getOrCreateInstance(E).toggle(this)}),ee.on(window,Dd,()=>{for(const q of Re.find(Lu))yi.getOrCreateInstance(q).show()}),ee.on(window,Bd,()=>{for(const q of Re.find("[aria-modal][class*=show][class*=offcanvas-]"))"fixed"!==getComputedStyle(q).position&&yi.getOrCreateInstance(q).hide()}),Ge(yi),L(yi);const Ji={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Nu=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Id=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,zu=(q,E)=>{const N=q.nodeName.toLowerCase();return E.includes(N)?!Nu.has(N)||!!Id.test(q.nodeValue):E.filter(J=>J instanceof RegExp).some(J=>J.test(N))},Yo={allowList:Ji,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},Rd={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Fd={entry:"(string|element|function|null)",selector:"(string|element)"};class Vd extends Fe{constructor(E){super(),this._config=this._getConfig(E)}static get Default(){return Yo}static get DefaultType(){return Rd}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(E=>this._resolvePossibleFunction(E)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(E){return this._checkContent(E),this._config.content={...this._config.content,...E},this}toHtml(){const E=document.createElement("div");E.innerHTML=this._maybeSanitize(this._config.template);for(const[Ee,Pe]of Object.entries(this._config.content))this._setContent(E,Pe,Ee);const N=E.children[0],J=this._resolvePossibleFunction(this._config.extraClass);return J&&N.classList.add(...J.split(" ")),N}_typeCheckConfig(E){super._typeCheckConfig(E),this._checkContent(E.content)}_checkContent(E){for(const[N,J]of Object.entries(E))super._typeCheckConfig({selector:N,entry:J},Fd)}_setContent(E,N,J){const Ee=Re.findOne(J,E);Ee&&((N=this._resolvePossibleFunction(N))?c(N)?this._putElementInTemplate(h(N),Ee):this._config.html?Ee.innerHTML=this._maybeSanitize(N):Ee.textContent=N:Ee.remove())}_maybeSanitize(E){return this._config.sanitize?function(N,J,Ee){if(!N.length)return N;if(Ee&&"function"==typeof Ee)return Ee(N);const Pe=(new window.DOMParser).parseFromString(N,"text/html"),Xe=[].concat(...Pe.body.querySelectorAll("*"));for(const Ke of Xe){const ut=Ke.nodeName.toLowerCase();if(!Object.keys(J).includes(ut)){Ke.remove();continue}const Et=[].concat(...Ke.attributes),lt=[].concat(J["*"]||[],J[ut]||[]);for(const tt of Et)zu(tt,lt)||Ke.removeAttribute(tt.nodeName)}return Pe.body.innerHTML}(E,this._config.allowList,this._config.sanitizeFn):E}_resolvePossibleFunction(E){return I(E,[this])}_putElementInTemplate(E,N){if(this._config.html)return N.innerHTML="",void N.append(E);N.textContent=E.textContent}}const jd=new Set(["sanitize","allowList","sanitizeFn"]),Zs="fade",bi="show",Ru="hide.bs.modal",ro="hover",Qs="focus",Ho={AUTO:"auto",TOP:"top",RIGHT:C()?"left":"right",BOTTOM:"bottom",LEFT:C()?"right":"left"},qd={allowList:Ji,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},Xd={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class ea extends ze{constructor(E,N){if(void 0===qs)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(E,N),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return qd}static get DefaultType(){return Xd}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),ee.off(this._element.closest(".modal"),Ru,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if("none"===this._element.style.display)throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const E=ee.trigger(this._element,this.constructor.eventName("show")),N=(y(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(E.defaultPrevented||!N)return;this._disposePopper();const J=this._getTipElement();this._element.setAttribute("aria-describedby",J.getAttribute("id"));const{container:Ee}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(Ee.append(J),ee.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(J),J.classList.add(bi),"ontouchstart"in document.documentElement)for(const Pe of[].concat(...document.body.children))ee.on(Pe,"mouseover",x);this._queueCallback(()=>{ee.trigger(this._element,this.constructor.eventName("shown")),!1===this._isHovered&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!ee.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(bi),"ontouchstart"in document.documentElement)for(const E of[].concat(...document.body.children))ee.off(E,"mouseover",x);this._activeTrigger.click=!1,this._activeTrigger[Qs]=!1,this._activeTrigger[ro]=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),ee.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(E){const N=this._getTemplateFactory(E).toHtml();if(!N)return null;N.classList.remove(Zs,bi),N.classList.add(`bs-${this.constructor.NAME}-auto`);const J=(Ee=>{do{Ee+=Math.floor(1e6*Math.random())}while(document.getElementById(Ee));return Ee})(this.constructor.NAME).toString();return N.setAttribute("id",J),this._isAnimated()&&N.classList.add(Zs),N}setContent(E){this._newContent=E,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(E){return this._templateFactory?this._templateFactory.changeContent(E):this._templateFactory=new Vd({...this._config,content:E,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(E){return this.constructor.getOrCreateInstance(E.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Zs)}_isShown(){return this.tip&&this.tip.classList.contains(bi)}_createPopper(E){const N=I(this._config.placement,[this,E,this._element]),J=Ho[N.toUpperCase()];return js(this._element,E,this._getPopperConfig(J))}_getOffset(){const{offset:E}=this._config;return"string"==typeof E?E.split(",").map(N=>Number.parseInt(N,10)):"function"==typeof E?N=>E(N,this._element):E}_resolvePossibleFunction(E){return I(E,[this._element])}_getPopperConfig(E){const N={placement:E,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:J=>{this._getTipElement().setAttribute("data-popper-placement",J.state.placement)}}]};return{...N,...I(this._config.popperConfig,[N])}}_setListeners(){const E=this._config.trigger.split(" ");for(const N of E)if("click"===N)ee.on(this._element,this.constructor.eventName("click"),this._config.selector,J=>{this._initializeOnDelegatedTarget(J).toggle()});else if("manual"!==N){const J=this.constructor.eventName(N===ro?"mouseenter":"focusin"),Ee=this.constructor.eventName(N===ro?"mouseleave":"focusout");ee.on(this._element,J,this._config.selector,Pe=>{const Xe=this._initializeOnDelegatedTarget(Pe);Xe._activeTrigger["focusin"===Pe.type?Qs:ro]=!0,Xe._enter()}),ee.on(this._element,Ee,this._config.selector,Pe=>{const Xe=this._initializeOnDelegatedTarget(Pe);Xe._activeTrigger["focusout"===Pe.type?Qs:ro]=Xe._element.contains(Pe.relatedTarget),Xe._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},ee.on(this._element.closest(".modal"),Ru,this._hideModalHandler)}_fixTitle(){const E=this._element.getAttribute("title");E&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",E),this._element.setAttribute("data-bs-original-title",E),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(E,N){clearTimeout(this._timeout),this._timeout=setTimeout(E,N)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(E){const N=je.getDataAttributes(this._element);for(const J of Object.keys(N))jd.has(J)&&delete N[J];return E={...N,..."object"==typeof E&&E?E:{}},E=this._mergeConfigObj(E),E=this._configAfterMerge(E),this._typeCheckConfig(E),E}_configAfterMerge(E){return E.container=!1===E.container?document.body:h(E.container),"number"==typeof E.delay&&(E.delay={show:E.delay,hide:E.delay}),"number"==typeof E.title&&(E.title=E.title.toString()),"number"==typeof E.content&&(E.content=E.content.toString()),E}_getDelegateConfig(){const E={};for(const[N,J]of Object.entries(this._config))this.constructor.Default[N]!==J&&(E[N]=J);return E.selector=!1,E.trigger="manual",E}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(E){return this.each(function(){const N=ea.getOrCreateInstance(this,E);if("string"==typeof E){if(void 0===N[E])throw new TypeError(`No method named "${E}"`);N[E]()}})}}L(ea);const Yd={...ea.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},Ea={...ea.DefaultType,content:"(null|string|element|function)"};class io extends ea{static get Default(){return Yd}static get DefaultType(){return Ea}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(E){return this.each(function(){const N=io.getOrCreateInstance(this,E);if("string"==typeof E){if(void 0===N[E])throw new TypeError(`No method named "${E}"`);N[E]()}})}}L(io);const ao=".bs.scrollspy",Hd=`activate${ao}`,Fu=`click${ao}`,Wd=`load${ao}.data-api`,ta="active",Wo="[href]",Js=".nav-link",Vu=`${Js}, .nav-item > ${Js}, .list-group-item`,$d={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},ju={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class _a extends ze{constructor(E,N){super(E,N),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement="visible"===getComputedStyle(this._element).overflowY?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return $d}static get DefaultType(){return ju}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const E of this._observableSections.values())this._observer.observe(E)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(E){return E.target=h(E.target)||document.body,E.rootMargin=E.offset?`${E.offset}px 0px -30%`:E.rootMargin,"string"==typeof E.threshold&&(E.threshold=E.threshold.split(",").map(N=>Number.parseFloat(N))),E}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(ee.off(this._config.target,Fu),ee.on(this._config.target,Fu,Wo,E=>{const N=this._observableSections.get(E.target.hash);if(N){E.preventDefault();const J=this._rootElement||window,Ee=N.offsetTop-this._element.offsetTop;if(J.scrollTo)return void J.scrollTo({top:Ee,behavior:"smooth"});J.scrollTop=Ee}}))}_getNewObserver(){return new IntersectionObserver(N=>this._observerCallback(N),{root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin})}_observerCallback(E){const N=Xe=>this._targetLinks.get(`#${Xe.target.id}`),J=Xe=>{this._previousScrollData.visibleEntryTop=Xe.target.offsetTop,this._process(N(Xe))},Ee=(this._rootElement||document.documentElement).scrollTop,Pe=Ee>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=Ee;for(const Xe of E){if(!Xe.isIntersecting){this._activeTarget=null,this._clearActiveClass(N(Xe));continue}const Ke=Xe.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(Pe&&Ke){if(J(Xe),!Ee)return}else Pe||Ke||J(Xe)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const E=Re.find(Wo,this._config.target);for(const N of E){if(!N.hash||g(N))continue;const J=Re.findOne(decodeURI(N.hash),this._element);f(J)&&(this._targetLinks.set(decodeURI(N.hash),N),this._observableSections.set(N.hash,J))}}_process(E){this._activeTarget!==E&&(this._clearActiveClass(this._config.target),this._activeTarget=E,E.classList.add(ta),this._activateParents(E),ee.trigger(this._element,Hd,{relatedTarget:E}))}_activateParents(E){if(E.classList.contains("dropdown-item"))Re.findOne(".dropdown-toggle",E.closest(".dropdown")).classList.add(ta);else for(const N of Re.parents(E,".nav, .list-group"))for(const J of Re.prev(N,Vu))J.classList.add(ta)}_clearActiveClass(E){E.classList.remove(ta);const N=Re.find(`${Wo}.${ta}`,E);for(const J of N)J.classList.remove(ta)}static jQueryInterface(E){return this.each(function(){const N=_a.getOrCreateInstance(this,E);if("string"==typeof E){if(void 0===N[E]||E.startsWith("_")||"constructor"===E)throw new TypeError(`No method named "${E}"`);N[E]()}})}}ee.on(window,Wd,()=>{for(const q of Re.find('[data-bs-spy="scroll"]'))_a.getOrCreateInstance(q)}),L(_a);const xi=".bs.tab",Kd=`hide${xi}`,Gd=`hidden${xi}`,qu=`show${xi}`,Ud=`shown${xi}`,Zd=`click${xi}`,Qd=`keydown${xi}`,Jd=`load${xi}`,eh="ArrowLeft",Xu="ArrowRight",th="ArrowUp",Yu="ArrowDown",el="Home",Zt="End",na="active",Ht="show",$o=".dropdown-toggle",Ko=`:not(${$o})`,tl='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',so=`.nav-link${Ko}, .list-group-item${Ko}, [role="tab"]${Ko}, ${tl}`,nl=`.${na}[data-bs-toggle="tab"], .${na}[data-bs-toggle="pill"], .${na}[data-bs-toggle="list"]`;class wi extends ze{constructor(E){super(E),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),ee.on(this._element,Qd,N=>this._keydown(N)))}static get NAME(){return"tab"}show(){const E=this._element;if(this._elemIsActive(E))return;const N=this._getActiveElem(),J=N?ee.trigger(N,Kd,{relatedTarget:E}):null;ee.trigger(E,qu,{relatedTarget:N}).defaultPrevented||J&&J.defaultPrevented||(this._deactivate(N,E),this._activate(E,N))}_activate(E,N){E&&(E.classList.add(na),this._activate(Re.getElementFromSelector(E)),this._queueCallback(()=>{"tab"===E.getAttribute("role")?(E.removeAttribute("tabindex"),E.setAttribute("aria-selected",!0),this._toggleDropDown(E,!0),ee.trigger(E,Ud,{relatedTarget:N})):E.classList.add(Ht)},E,E.classList.contains("fade")))}_deactivate(E,N){E&&(E.classList.remove(na),E.blur(),this._deactivate(Re.getElementFromSelector(E)),this._queueCallback(()=>{"tab"===E.getAttribute("role")?(E.setAttribute("aria-selected",!1),E.setAttribute("tabindex","-1"),this._toggleDropDown(E,!1),ee.trigger(E,Gd,{relatedTarget:N})):E.classList.remove(Ht)},E,E.classList.contains("fade")))}_keydown(E){if(![eh,Xu,th,Yu,el,Zt].includes(E.key))return;E.stopPropagation(),E.preventDefault();const N=this._getChildren().filter(Ee=>!g(Ee));let J;if([el,Zt].includes(E.key))J=N[E.key===el?0:N.length-1];else{const Ee=[Xu,Yu].includes(E.key);J=B(N,E.target,Ee,!0)}J&&(J.focus({preventScroll:!0}),wi.getOrCreateInstance(J).show())}_getChildren(){return Re.find(so,this._parent)}_getActiveElem(){return this._getChildren().find(E=>this._elemIsActive(E))||null}_setInitialAttributes(E,N){this._setAttributeIfNotExists(E,"role","tablist");for(const J of N)this._setInitialAttributesOnChild(J)}_setInitialAttributesOnChild(E){E=this._getInnerElement(E);const N=this._elemIsActive(E),J=this._getOuterElement(E);E.setAttribute("aria-selected",N),J!==E&&this._setAttributeIfNotExists(J,"role","presentation"),N||E.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(E,"role","tab"),this._setInitialAttributesOnTargetPanel(E)}_setInitialAttributesOnTargetPanel(E){const N=Re.getElementFromSelector(E);N&&(this._setAttributeIfNotExists(N,"role","tabpanel"),E.id&&this._setAttributeIfNotExists(N,"aria-labelledby",`${E.id}`))}_toggleDropDown(E,N){const J=this._getOuterElement(E);if(!J.classList.contains("dropdown"))return;const Ee=(Pe,Xe)=>{const Ke=Re.findOne(Pe,J);Ke&&Ke.classList.toggle(Xe,N)};Ee($o,na),Ee(".dropdown-menu",Ht),J.setAttribute("aria-expanded",N)}_setAttributeIfNotExists(E,N,J){E.hasAttribute(N)||E.setAttribute(N,J)}_elemIsActive(E){return E.classList.contains(na)}_getInnerElement(E){return E.matches(so)?E:Re.findOne(so,E)}_getOuterElement(E){return E.closest(".nav-item, .list-group-item")||E}static jQueryInterface(E){return this.each(function(){const N=wi.getOrCreateInstance(this);if("string"==typeof E){if(void 0===N[E]||E.startsWith("_")||"constructor"===E)throw new TypeError(`No method named "${E}"`);N[E]()}})}}ee.on(document,Zd,tl,function(q){["A","AREA"].includes(this.tagName)&&q.preventDefault(),g(this)||wi.getOrCreateInstance(this).show()}),ee.on(window,Jd,()=>{for(const q of Re.find(nl))wi.getOrCreateInstance(q)}),L(wi);const oi=".bs.toast",rl=`mouseover${oi}`,Go=`mouseout${oi}`,il=`focusin${oi}`,al=`focusout${oi}`,ol=`hide${oi}`,Hu=`hidden${oi}`,Wu=`show${oi}`,sl=`shown${oi}`,ka="show",ra="showing",Zo={animation:"boolean",autohide:"boolean",delay:"number"},Qo={animation:!0,autohide:!0,delay:5e3};class si extends ze{constructor(E,N){super(E,N),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return Qo}static get DefaultType(){return Zo}static get NAME(){return"toast"}show(){ee.trigger(this._element,Wu).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove("hide"),this._element.classList.add(ka,ra),this._queueCallback(()=>{this._element.classList.remove(ra),ee.trigger(this._element,sl),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&(ee.trigger(this._element,ol).defaultPrevented||(this._element.classList.add(ra),this._queueCallback(()=>{this._element.classList.add("hide"),this._element.classList.remove(ra,ka),ee.trigger(this._element,Hu)},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(ka),super.dispose()}isShown(){return this._element.classList.contains(ka)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(E,N){switch(E.type){case"mouseover":case"mouseout":this._hasMouseInteraction=N;break;case"focusin":case"focusout":this._hasKeyboardInteraction=N}if(N)return void this._clearTimeout();const J=E.relatedTarget;this._element===J||this._element.contains(J)||this._maybeScheduleHide()}_setListeners(){ee.on(this._element,rl,E=>this._onInteraction(E,!0)),ee.on(this._element,Go,E=>this._onInteraction(E,!1)),ee.on(this._element,il,E=>this._onInteraction(E,!0)),ee.on(this._element,al,E=>this._onInteraction(E,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(E){return this.each(function(){const N=si.getOrCreateInstance(this,E);if("string"==typeof E){if(void 0===N[E])throw new TypeError(`No method named "${E}"`);N[E](this)}})}}return Ge(si),L(si),{Alert:We,Button:vt,Carousel:Hr,Collapse:ji,Dropdown:Wr,Modal:Qi,Offcanvas:yi,Popover:io,ScrollSpy:_a,Tab:wi,Toast:si,Tooltip:ea}});